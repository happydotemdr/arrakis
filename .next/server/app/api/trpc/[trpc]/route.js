/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/trpc/[trpc]/route";
exports.ids = ["app/api/trpc/[trpc]/route"];
exports.modules = {

/***/ "(rsc)/./app/api/trpc/[trpc]/route.ts":
/*!**************************************!*\
  !*** ./app/api/trpc/[trpc]/route.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ handler),\n/* harmony export */   POST: () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _trpc_server_adapters_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @trpc/server/adapters/fetch */ \"(rsc)/./node_modules/@trpc/server/dist/adapters/fetch/index.mjs\");\n/* harmony import */ var _lib_api_router__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/api/router */ \"(rsc)/./lib/api/router.ts\");\n/* harmony import */ var _lib_api_trpc__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/api/trpc */ \"(rsc)/./lib/api/trpc.ts\");\n/**\n * tRPC API Route Handler\n * Handles all tRPC requests in the Next.js App Router\n */ \n\n\nconst handler = (req)=>(0,_trpc_server_adapters_fetch__WEBPACK_IMPORTED_MODULE_2__.fetchRequestHandler)({\n        endpoint: '/api/trpc',\n        req,\n        router: _lib_api_router__WEBPACK_IMPORTED_MODULE_0__.appRouter,\n        createContext: _lib_api_trpc__WEBPACK_IMPORTED_MODULE_1__.createTRPCContext,\n        onError:  true ? ({ path, error })=>{\n            console.error(`‚ùå tRPC failed on ${path ?? '<no-path>'}: ${error.message}`);\n        } : 0\n    });\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3RycGMvW3RycGNdL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7OztDQUdDLEdBRWdFO0FBQ3JCO0FBQ007QUFFbEQsTUFBTUcsVUFBVSxDQUFDQyxNQUNmSixnRkFBbUJBLENBQUM7UUFDbEJLLFVBQVU7UUFDVkQ7UUFDQUUsUUFBUUwsc0RBQVNBO1FBQ2pCTSxlQUFlTCw0REFBaUJBO1FBQ2hDTSxTQUNFQyxLQUFzQyxHQUNsQyxDQUFDLEVBQUVDLElBQUksRUFBRUMsS0FBSyxFQUFFO1lBQ2RDLFFBQVFELEtBQUssQ0FDWCxDQUFDLGlCQUFpQixFQUFFRCxRQUFRLFlBQVksRUFBRSxFQUFFQyxNQUFNRSxPQUFPLEVBQUU7UUFFL0QsSUFDQUMsQ0FBU0E7SUFDakI7QUFFd0MiLCJzb3VyY2VzIjpbIkM6XFxwcm9qZWN0c1xcYXJyYWtpc1xcYXBwXFxhcGlcXHRycGNcXFt0cnBjXVxccm91dGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiB0UlBDIEFQSSBSb3V0ZSBIYW5kbGVyXG4gKiBIYW5kbGVzIGFsbCB0UlBDIHJlcXVlc3RzIGluIHRoZSBOZXh0LmpzIEFwcCBSb3V0ZXJcbiAqL1xuXG5pbXBvcnQgeyBmZXRjaFJlcXVlc3RIYW5kbGVyIH0gZnJvbSAnQHRycGMvc2VydmVyL2FkYXB0ZXJzL2ZldGNoJ1xuaW1wb3J0IHsgYXBwUm91dGVyIH0gZnJvbSAnQC9saWIvYXBpL3JvdXRlcidcbmltcG9ydCB7IGNyZWF0ZVRSUENDb250ZXh0IH0gZnJvbSAnQC9saWIvYXBpL3RycGMnXG5cbmNvbnN0IGhhbmRsZXIgPSAocmVxOiBSZXF1ZXN0KSA9PlxuICBmZXRjaFJlcXVlc3RIYW5kbGVyKHtcbiAgICBlbmRwb2ludDogJy9hcGkvdHJwYycsXG4gICAgcmVxLFxuICAgIHJvdXRlcjogYXBwUm91dGVyLFxuICAgIGNyZWF0ZUNvbnRleHQ6IGNyZWF0ZVRSUENDb250ZXh0LFxuICAgIG9uRXJyb3I6XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50J1xuICAgICAgICA/ICh7IHBhdGgsIGVycm9yIH0pID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgICAgIGDinYwgdFJQQyBmYWlsZWQgb24gJHtwYXRoID8/ICc8bm8tcGF0aD4nfTogJHtlcnJvci5tZXNzYWdlfWBcbiAgICAgICAgICAgIClcbiAgICAgICAgICB9XG4gICAgICAgIDogdW5kZWZpbmVkLFxuICB9KVxuXG5leHBvcnQgeyBoYW5kbGVyIGFzIEdFVCwgaGFuZGxlciBhcyBQT1NUIH1cbiJdLCJuYW1lcyI6WyJmZXRjaFJlcXVlc3RIYW5kbGVyIiwiYXBwUm91dGVyIiwiY3JlYXRlVFJQQ0NvbnRleHQiLCJoYW5kbGVyIiwicmVxIiwiZW5kcG9pbnQiLCJyb3V0ZXIiLCJjcmVhdGVDb250ZXh0Iiwib25FcnJvciIsInByb2Nlc3MiLCJwYXRoIiwiZXJyb3IiLCJjb25zb2xlIiwibWVzc2FnZSIsInVuZGVmaW5lZCIsIkdFVCIsIlBPU1QiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/trpc/[trpc]/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/api/router.ts":
/*!***************************!*\
  !*** ./lib/api/router.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   appRouter: () => (/* binding */ appRouter)\n/* harmony export */ });\n/* harmony import */ var _trpc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./trpc */ \"(rsc)/./lib/api/trpc.ts\");\n/* harmony import */ var _routers_sessions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./routers/sessions */ \"(rsc)/./lib/api/routers/sessions.ts\");\n/* harmony import */ var _routers_search__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./routers/search */ \"(rsc)/./lib/api/routers/search.ts\");\n/* harmony import */ var _routers_capture__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./routers/capture */ \"(rsc)/./lib/api/routers/capture.ts\");\n/* harmony import */ var _routers_claude__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./routers/claude */ \"(rsc)/./lib/api/routers/claude.ts\");\n/* harmony import */ var _routers_templates__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./routers/templates */ \"(rsc)/./lib/api/routers/templates.ts\");\n/**\n * Main tRPC App Router\n * Combines all individual routers into the main app router\n */ \n\n\n\n\n\n/**\n * Main application router\n *\n * Add new routers here as you create them\n */ const appRouter = (0,_trpc__WEBPACK_IMPORTED_MODULE_0__.router)({\n    sessions: _routers_sessions__WEBPACK_IMPORTED_MODULE_1__.sessionsRouter,\n    search: _routers_search__WEBPACK_IMPORTED_MODULE_2__.searchRouter,\n    capture: _routers_capture__WEBPACK_IMPORTED_MODULE_3__.captureRouter,\n    claude: _routers_claude__WEBPACK_IMPORTED_MODULE_4__.claudeRouter,\n    templates: _routers_templates__WEBPACK_IMPORTED_MODULE_5__.templatesRouter\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvYXBpL3JvdXRlci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUE7OztDQUdDLEdBRThCO0FBQ29CO0FBQ0o7QUFDRTtBQUNGO0FBQ007QUFFckQ7Ozs7Q0FJQyxHQUNNLE1BQU1NLFlBQVlOLDZDQUFNQSxDQUFDO0lBQzlCTyxVQUFVTiw2REFBY0E7SUFDeEJPLFFBQVFOLHlEQUFZQTtJQUNwQk8sU0FBU04sMkRBQWFBO0lBQ3RCTyxRQUFRTix5REFBWUE7SUFDcEJPLFdBQVdOLCtEQUFlQTtBQUM1QixHQUFFIiwic291cmNlcyI6WyJDOlxccHJvamVjdHNcXGFycmFraXNcXGxpYlxcYXBpXFxyb3V0ZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBNYWluIHRSUEMgQXBwIFJvdXRlclxuICogQ29tYmluZXMgYWxsIGluZGl2aWR1YWwgcm91dGVycyBpbnRvIHRoZSBtYWluIGFwcCByb3V0ZXJcbiAqL1xuXG5pbXBvcnQgeyByb3V0ZXIgfSBmcm9tICcuL3RycGMnXG5pbXBvcnQgeyBzZXNzaW9uc1JvdXRlciB9IGZyb20gJy4vcm91dGVycy9zZXNzaW9ucydcbmltcG9ydCB7IHNlYXJjaFJvdXRlciB9IGZyb20gJy4vcm91dGVycy9zZWFyY2gnXG5pbXBvcnQgeyBjYXB0dXJlUm91dGVyIH0gZnJvbSAnLi9yb3V0ZXJzL2NhcHR1cmUnXG5pbXBvcnQgeyBjbGF1ZGVSb3V0ZXIgfSBmcm9tICcuL3JvdXRlcnMvY2xhdWRlJ1xuaW1wb3J0IHsgdGVtcGxhdGVzUm91dGVyIH0gZnJvbSAnLi9yb3V0ZXJzL3RlbXBsYXRlcydcblxuLyoqXG4gKiBNYWluIGFwcGxpY2F0aW9uIHJvdXRlclxuICpcbiAqIEFkZCBuZXcgcm91dGVycyBoZXJlIGFzIHlvdSBjcmVhdGUgdGhlbVxuICovXG5leHBvcnQgY29uc3QgYXBwUm91dGVyID0gcm91dGVyKHtcbiAgc2Vzc2lvbnM6IHNlc3Npb25zUm91dGVyLFxuICBzZWFyY2g6IHNlYXJjaFJvdXRlcixcbiAgY2FwdHVyZTogY2FwdHVyZVJvdXRlcixcbiAgY2xhdWRlOiBjbGF1ZGVSb3V0ZXIsXG4gIHRlbXBsYXRlczogdGVtcGxhdGVzUm91dGVyLFxufSlcblxuLy8gRXhwb3J0IHR5cGUgZGVmaW5pdGlvbiBmb3IgY2xpZW50LXNpZGUgdHlwZSBzYWZldHlcbmV4cG9ydCB0eXBlIEFwcFJvdXRlciA9IHR5cGVvZiBhcHBSb3V0ZXJcbiJdLCJuYW1lcyI6WyJyb3V0ZXIiLCJzZXNzaW9uc1JvdXRlciIsInNlYXJjaFJvdXRlciIsImNhcHR1cmVSb3V0ZXIiLCJjbGF1ZGVSb3V0ZXIiLCJ0ZW1wbGF0ZXNSb3V0ZXIiLCJhcHBSb3V0ZXIiLCJzZXNzaW9ucyIsInNlYXJjaCIsImNhcHR1cmUiLCJjbGF1ZGUiLCJ0ZW1wbGF0ZXMiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/api/router.ts\n");

/***/ }),

/***/ "(rsc)/./lib/api/routers/capture.ts":
/*!************************************!*\
  !*** ./lib/api/routers/capture.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   captureRouter: () => (/* binding */ captureRouter)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var _trpc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../trpc */ \"(rsc)/./lib/api/trpc.ts\");\n/* harmony import */ var _trpc_server__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @trpc/server */ \"(rsc)/./node_modules/@trpc/server/dist/tracked-Blz8XOf1.mjs\");\n/* harmony import */ var _lib_capture_auto_capture_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/capture/auto-capture-service */ \"(rsc)/./lib/capture/auto-capture-service.ts\");\n/**\n * Capture tRPC Router\n * API endpoints for capture service management\n */ \n\n\n\n// Input schemas\nconst captureConfigSchema = zod__WEBPACK_IMPORTED_MODULE_2__.object({\n    enabled: zod__WEBPACK_IMPORTED_MODULE_2__.boolean(),\n    autoStart: zod__WEBPACK_IMPORTED_MODULE_2__.boolean(),\n    interceptMode: zod__WEBPACK_IMPORTED_MODULE_2__[\"enum\"]([\n        'proxy',\n        'wrapper',\n        'monitor'\n    ]),\n    notification: zod__WEBPACK_IMPORTED_MODULE_2__.boolean(),\n    logLevel: zod__WEBPACK_IMPORTED_MODULE_2__[\"enum\"]([\n        'error',\n        'warn',\n        'info',\n        'debug'\n    ]),\n    storageEnabled: zod__WEBPACK_IMPORTED_MODULE_2__.boolean()\n});\nconst captureRouter = (0,_trpc__WEBPACK_IMPORTED_MODULE_0__.router)({\n    /**\n   * Get capture service status\n   */ status: _trpc__WEBPACK_IMPORTED_MODULE_0__.publicProcedure.query(async ()=>{\n        try {\n            return _lib_capture_auto_capture_service__WEBPACK_IMPORTED_MODULE_1__.defaultAutoCaptureService.getStatus();\n        } catch (error) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_3__.TRPCError({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: 'Failed to get capture status',\n                cause: error\n            });\n        }\n    }),\n    /**\n   * Start capture service\n   */ start: _trpc__WEBPACK_IMPORTED_MODULE_0__.publicProcedure.mutation(async ()=>{\n        try {\n            await _lib_capture_auto_capture_service__WEBPACK_IMPORTED_MODULE_1__.defaultAutoCaptureService.start();\n            return {\n                success: true,\n                message: 'Capture service started'\n            };\n        } catch (error) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_3__.TRPCError({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: 'Failed to start capture service',\n                cause: error\n            });\n        }\n    }),\n    /**\n   * Stop capture service\n   */ stop: _trpc__WEBPACK_IMPORTED_MODULE_0__.publicProcedure.mutation(async ()=>{\n        try {\n            await _lib_capture_auto_capture_service__WEBPACK_IMPORTED_MODULE_1__.defaultAutoCaptureService.stop();\n            return {\n                success: true,\n                message: 'Capture service stopped'\n            };\n        } catch (error) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_3__.TRPCError({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: 'Failed to stop capture service',\n                cause: error\n            });\n        }\n    }),\n    /**\n   * Update capture service configuration\n   */ updateConfig: _trpc__WEBPACK_IMPORTED_MODULE_0__.publicProcedure.input(captureConfigSchema.partial()).mutation(async ({ input })=>{\n        try {\n            _lib_capture_auto_capture_service__WEBPACK_IMPORTED_MODULE_1__.defaultAutoCaptureService.updateConfig(input);\n            return {\n                success: true,\n                message: 'Configuration updated'\n            };\n        } catch (error) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_3__.TRPCError({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: 'Failed to update configuration',\n                cause: error\n            });\n        }\n    }),\n    /**\n   * Get capture history/logs\n   */ history: _trpc__WEBPACK_IMPORTED_MODULE_0__.publicProcedure.input(zod__WEBPACK_IMPORTED_MODULE_2__.object({\n        limit: zod__WEBPACK_IMPORTED_MODULE_2__.number().min(1).max(100).default(50),\n        offset: zod__WEBPACK_IMPORTED_MODULE_2__.number().min(0).default(0),\n        level: zod__WEBPACK_IMPORTED_MODULE_2__[\"enum\"]([\n            'error',\n            'warn',\n            'info',\n            'debug'\n        ]).optional()\n    })).query(async ({ input })=>{\n        try {\n            // TODO: Implement capture history/logs functionality\n            return {\n                logs: [],\n                totalCount: 0\n            };\n        } catch (error) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_3__.TRPCError({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: 'Failed to fetch capture history',\n                cause: error\n            });\n        }\n    }),\n    /**\n   * Test capture functionality\n   */ test: _trpc__WEBPACK_IMPORTED_MODULE_0__.publicProcedure.mutation(async ()=>{\n        try {\n            // TODO: Implement capture test functionality\n            // This would run a test capture to verify everything is working\n            return {\n                success: true,\n                message: 'Capture test completed successfully',\n                details: {\n                    proxyInstalled: true,\n                    databaseConnected: true,\n                    serviceRunning: true\n                }\n            };\n        } catch (error) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_3__.TRPCError({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: 'Capture test failed',\n                cause: error\n            });\n        }\n    }),\n    /**\n   * Get capture statistics\n   */ stats: _trpc__WEBPACK_IMPORTED_MODULE_0__.publicProcedure.query(async ()=>{\n        try {\n            const status = _lib_capture_auto_capture_service__WEBPACK_IMPORTED_MODULE_1__.defaultAutoCaptureService.getStatus();\n            return {\n                totalSessions: status.totalSessions,\n                sessionsToday: status.sessionsToday,\n                lastCaptureTime: status.lastCaptureTime,\n                errors: status.errors.length,\n                uptime: 0,\n                mode: status.mode,\n                running: status.running\n            };\n        } catch (error) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_3__.TRPCError({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: 'Failed to fetch capture statistics',\n                cause: error\n            });\n        }\n    }),\n    /**\n   * Reset capture service\n   */ reset: _trpc__WEBPACK_IMPORTED_MODULE_0__.publicProcedure.mutation(async ()=>{\n        try {\n            await _lib_capture_auto_capture_service__WEBPACK_IMPORTED_MODULE_1__.defaultAutoCaptureService.stop();\n            // TODO: Clear any cached data, reset counters, etc.\n            await _lib_capture_auto_capture_service__WEBPACK_IMPORTED_MODULE_1__.defaultAutoCaptureService.start();\n            return {\n                success: true,\n                message: 'Capture service reset successfully'\n            };\n        } catch (error) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_3__.TRPCError({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: 'Failed to reset capture service',\n                cause: error\n            });\n        }\n    })\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixtREFBU0EsQ0FBQztnQkFDbEJpQixNQUFNO2dCQUNOQyxTQUFTO2dCQUNUQyxPQUFPSDtZQUNUO1FBQ0Y7SUFDRjtBQUNGLEdBQUUiLCJzb3VyY2VzIjpbIkM6XFxwcm9qZWN0c1xcYXJyYWtpc1xcbGliXFxhcGlcXHJvdXRlcnNcXGNhcHR1cmUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDYXB0dXJlIHRSUEMgUm91dGVyXG4gKiBBUEkgZW5kcG9pbnRzIGZvciBjYXB0dXJlIHNlcnZpY2UgbWFuYWdlbWVudFxuICovXG5cbmltcG9ydCB7IHogfSBmcm9tICd6b2QnXG5pbXBvcnQgeyByb3V0ZXIsIHB1YmxpY1Byb2NlZHVyZSB9IGZyb20gJy4uL3RycGMnXG5pbXBvcnQgeyBUUlBDRXJyb3IgfSBmcm9tICdAdHJwYy9zZXJ2ZXInXG5pbXBvcnQge1xuICBkZWZhdWx0QXV0b0NhcHR1cmVTZXJ2aWNlLFxuICB0eXBlIENhcHR1cmVTZXJ2aWNlQ29uZmlnLFxuICB0eXBlIENhcHR1cmVTdGF0dXMsXG59IGZyb20gJ0AvbGliL2NhcHR1cmUvYXV0by1jYXB0dXJlLXNlcnZpY2UnXG5cbi8vIElucHV0IHNjaGVtYXNcbmNvbnN0IGNhcHR1cmVDb25maWdTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIGVuYWJsZWQ6IHouYm9vbGVhbigpLFxuICBhdXRvU3RhcnQ6IHouYm9vbGVhbigpLFxuICBpbnRlcmNlcHRNb2RlOiB6LmVudW0oWydwcm94eScsICd3cmFwcGVyJywgJ21vbml0b3InXSksXG4gIG5vdGlmaWNhdGlvbjogei5ib29sZWFuKCksXG4gIGxvZ0xldmVsOiB6LmVudW0oWydlcnJvcicsICd3YXJuJywgJ2luZm8nLCAnZGVidWcnXSksXG4gIHN0b3JhZ2VFbmFibGVkOiB6LmJvb2xlYW4oKSxcbn0pXG5cbmV4cG9ydCBjb25zdCBjYXB0dXJlUm91dGVyID0gcm91dGVyKHtcbiAgLyoqXG4gICAqIEdldCBjYXB0dXJlIHNlcnZpY2Ugc3RhdHVzXG4gICAqL1xuICBzdGF0dXM6IHB1YmxpY1Byb2NlZHVyZS5xdWVyeShhc3luYyAoKTogUHJvbWlzZTxDYXB0dXJlU3RhdHVzPiA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBkZWZhdWx0QXV0b0NhcHR1cmVTZXJ2aWNlLmdldFN0YXR1cygpXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xuICAgICAgICBjb2RlOiAnSU5URVJOQUxfU0VSVkVSX0VSUk9SJyxcbiAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBnZXQgY2FwdHVyZSBzdGF0dXMnLFxuICAgICAgICBjYXVzZTogZXJyb3IsXG4gICAgICB9KVxuICAgIH1cbiAgfSksXG5cbiAgLyoqXG4gICAqIFN0YXJ0IGNhcHR1cmUgc2VydmljZVxuICAgKi9cbiAgc3RhcnQ6IHB1YmxpY1Byb2NlZHVyZS5tdXRhdGlvbihhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IGRlZmF1bHRBdXRvQ2FwdHVyZVNlcnZpY2Uuc3RhcnQoKVxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgbWVzc2FnZTogJ0NhcHR1cmUgc2VydmljZSBzdGFydGVkJyB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xuICAgICAgICBjb2RlOiAnSU5URVJOQUxfU0VSVkVSX0VSUk9SJyxcbiAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBzdGFydCBjYXB0dXJlIHNlcnZpY2UnLFxuICAgICAgICBjYXVzZTogZXJyb3IsXG4gICAgICB9KVxuICAgIH1cbiAgfSksXG5cbiAgLyoqXG4gICAqIFN0b3AgY2FwdHVyZSBzZXJ2aWNlXG4gICAqL1xuICBzdG9wOiBwdWJsaWNQcm9jZWR1cmUubXV0YXRpb24oYXN5bmMgKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBkZWZhdWx0QXV0b0NhcHR1cmVTZXJ2aWNlLnN0b3AoKVxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgbWVzc2FnZTogJ0NhcHR1cmUgc2VydmljZSBzdG9wcGVkJyB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xuICAgICAgICBjb2RlOiAnSU5URVJOQUxfU0VSVkVSX0VSUk9SJyxcbiAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBzdG9wIGNhcHR1cmUgc2VydmljZScsXG4gICAgICAgIGNhdXNlOiBlcnJvcixcbiAgICAgIH0pXG4gICAgfVxuICB9KSxcblxuICAvKipcbiAgICogVXBkYXRlIGNhcHR1cmUgc2VydmljZSBjb25maWd1cmF0aW9uXG4gICAqL1xuICB1cGRhdGVDb25maWc6IHB1YmxpY1Byb2NlZHVyZVxuICAgIC5pbnB1dChjYXB0dXJlQ29uZmlnU2NoZW1hLnBhcnRpYWwoKSlcbiAgICAubXV0YXRpb24oYXN5bmMgKHsgaW5wdXQgfSkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgZGVmYXVsdEF1dG9DYXB0dXJlU2VydmljZS51cGRhdGVDb25maWcoaW5wdXQpXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6ICdDb25maWd1cmF0aW9uIHVwZGF0ZWQnIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xuICAgICAgICAgIGNvZGU6ICdJTlRFUk5BTF9TRVJWRVJfRVJST1InLFxuICAgICAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gdXBkYXRlIGNvbmZpZ3VyYXRpb24nLFxuICAgICAgICAgIGNhdXNlOiBlcnJvcixcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9KSxcblxuICAvKipcbiAgICogR2V0IGNhcHR1cmUgaGlzdG9yeS9sb2dzXG4gICAqL1xuICBoaXN0b3J5OiBwdWJsaWNQcm9jZWR1cmVcbiAgICAuaW5wdXQoXG4gICAgICB6Lm9iamVjdCh7XG4gICAgICAgIGxpbWl0OiB6Lm51bWJlcigpLm1pbigxKS5tYXgoMTAwKS5kZWZhdWx0KDUwKSxcbiAgICAgICAgb2Zmc2V0OiB6Lm51bWJlcigpLm1pbigwKS5kZWZhdWx0KDApLFxuICAgICAgICBsZXZlbDogei5lbnVtKFsnZXJyb3InLCAnd2FybicsICdpbmZvJywgJ2RlYnVnJ10pLm9wdGlvbmFsKCksXG4gICAgICB9KVxuICAgIClcbiAgICAucXVlcnkoYXN5bmMgKHsgaW5wdXQgfSkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gVE9ETzogSW1wbGVtZW50IGNhcHR1cmUgaGlzdG9yeS9sb2dzIGZ1bmN0aW9uYWxpdHlcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBsb2dzOiBbXSxcbiAgICAgICAgICB0b3RhbENvdW50OiAwLFxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHtcbiAgICAgICAgICBjb2RlOiAnSU5URVJOQUxfU0VSVkVSX0VSUk9SJyxcbiAgICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIGZldGNoIGNhcHR1cmUgaGlzdG9yeScsXG4gICAgICAgICAgY2F1c2U6IGVycm9yLFxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0pLFxuXG4gIC8qKlxuICAgKiBUZXN0IGNhcHR1cmUgZnVuY3Rpb25hbGl0eVxuICAgKi9cbiAgdGVzdDogcHVibGljUHJvY2VkdXJlLm11dGF0aW9uKGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgLy8gVE9ETzogSW1wbGVtZW50IGNhcHR1cmUgdGVzdCBmdW5jdGlvbmFsaXR5XG4gICAgICAvLyBUaGlzIHdvdWxkIHJ1biBhIHRlc3QgY2FwdHVyZSB0byB2ZXJpZnkgZXZlcnl0aGluZyBpcyB3b3JraW5nXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBtZXNzYWdlOiAnQ2FwdHVyZSB0ZXN0IGNvbXBsZXRlZCBzdWNjZXNzZnVsbHknLFxuICAgICAgICBkZXRhaWxzOiB7XG4gICAgICAgICAgcHJveHlJbnN0YWxsZWQ6IHRydWUsXG4gICAgICAgICAgZGF0YWJhc2VDb25uZWN0ZWQ6IHRydWUsXG4gICAgICAgICAgc2VydmljZVJ1bm5pbmc6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xuICAgICAgICBjb2RlOiAnSU5URVJOQUxfU0VSVkVSX0VSUk9SJyxcbiAgICAgICAgbWVzc2FnZTogJ0NhcHR1cmUgdGVzdCBmYWlsZWQnLFxuICAgICAgICBjYXVzZTogZXJyb3IsXG4gICAgICB9KVxuICAgIH1cbiAgfSksXG5cbiAgLyoqXG4gICAqIEdldCBjYXB0dXJlIHN0YXRpc3RpY3NcbiAgICovXG4gIHN0YXRzOiBwdWJsaWNQcm9jZWR1cmUucXVlcnkoYXN5bmMgKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBzdGF0dXMgPSBkZWZhdWx0QXV0b0NhcHR1cmVTZXJ2aWNlLmdldFN0YXR1cygpXG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRvdGFsU2Vzc2lvbnM6IHN0YXR1cy50b3RhbFNlc3Npb25zLFxuICAgICAgICBzZXNzaW9uc1RvZGF5OiBzdGF0dXMuc2Vzc2lvbnNUb2RheSxcbiAgICAgICAgbGFzdENhcHR1cmVUaW1lOiBzdGF0dXMubGFzdENhcHR1cmVUaW1lLFxuICAgICAgICBlcnJvcnM6IHN0YXR1cy5lcnJvcnMubGVuZ3RoLFxuICAgICAgICB1cHRpbWU6IDAsIC8vIFRPRE86IENhbGN1bGF0ZSBzZXJ2aWNlIHVwdGltZVxuICAgICAgICBtb2RlOiBzdGF0dXMubW9kZSxcbiAgICAgICAgcnVubmluZzogc3RhdHVzLnJ1bm5pbmcsXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xuICAgICAgICBjb2RlOiAnSU5URVJOQUxfU0VSVkVSX0VSUk9SJyxcbiAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBmZXRjaCBjYXB0dXJlIHN0YXRpc3RpY3MnLFxuICAgICAgICBjYXVzZTogZXJyb3IsXG4gICAgICB9KVxuICAgIH1cbiAgfSksXG5cbiAgLyoqXG4gICAqIFJlc2V0IGNhcHR1cmUgc2VydmljZVxuICAgKi9cbiAgcmVzZXQ6IHB1YmxpY1Byb2NlZHVyZS5tdXRhdGlvbihhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IGRlZmF1bHRBdXRvQ2FwdHVyZVNlcnZpY2Uuc3RvcCgpXG4gICAgICAvLyBUT0RPOiBDbGVhciBhbnkgY2FjaGVkIGRhdGEsIHJlc2V0IGNvdW50ZXJzLCBldGMuXG4gICAgICBhd2FpdCBkZWZhdWx0QXV0b0NhcHR1cmVTZXJ2aWNlLnN0YXJ0KClcblxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgbWVzc2FnZTogJ0NhcHR1cmUgc2VydmljZSByZXNldCBzdWNjZXNzZnVsbHknIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgIGNvZGU6ICdJTlRFUk5BTF9TRVJWRVJfRVJST1InLFxuICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIHJlc2V0IGNhcHR1cmUgc2VydmljZScsXG4gICAgICAgIGNhdXNlOiBlcnJvcixcbiAgICAgIH0pXG4gICAgfVxuICB9KSxcbn0pXG4iXSwibmFtZXMiOlsieiIsInJvdXRlciIsInB1YmxpY1Byb2NlZHVyZSIsIlRSUENFcnJvciIsImRlZmF1bHRBdXRvQ2FwdHVyZVNlcnZpY2UiLCJjYXB0dXJlQ29uZmlnU2NoZW1hIiwib2JqZWN0IiwiZW5hYmxlZCIsImJvb2xlYW4iLCJhdXRvU3RhcnQiLCJpbnRlcmNlcHRNb2RlIiwiZW51bSIsIm5vdGlmaWNhdGlvbiIsImxvZ0xldmVsIiwic3RvcmFnZUVuYWJsZWQiLCJjYXB0dXJlUm91dGVyIiwic3RhdHVzIiwicXVlcnkiLCJnZXRTdGF0dXMiLCJlcnJvciIsImNvZGUiLCJtZXNzYWdlIiwiY2F1c2UiLCJzdGFydCIsIm11dGF0aW9uIiwic3VjY2VzcyIsInN0b3AiLCJ1cGRhdGVDb25maWciLCJpbnB1dCIsInBhcnRpYWwiLCJoaXN0b3J5IiwibGltaXQiLCJudW1iZXIiLCJtaW4iLCJtYXgiLCJkZWZhdWx0Iiwib2Zmc2V0IiwibGV2ZWwiLCJvcHRpb25hbCIsImxvZ3MiLCJ0b3RhbENvdW50IiwidGVzdCIsImRldGFpbHMiLCJwcm94eUluc3RhbGxlZCIsImRhdGFiYXNlQ29ubmVjdGVkIiwic2VydmljZVJ1bm5pbmciLCJzdGF0cyIsInRvdGFsU2Vzc2lvbnMiLCJzZXNzaW9uc1RvZGF5IiwibGFzdENhcHR1cmVUaW1lIiwiZXJyb3JzIiwibGVuZ3RoIiwidXB0aW1lIiwibW9kZSIsInJ1bm5pbmciLCJyZXNldCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/api/routers/capture.ts\n");

/***/ }),

/***/ "(rsc)/./lib/api/routers/claude.ts":
/*!***********************************!*\
  !*** ./lib/api/routers/claude.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   claudeRouter: () => (/* binding */ claudeRouter)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var _trpc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../trpc */ \"(rsc)/./lib/api/trpc.ts\");\n/* harmony import */ var _trpc_server__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @trpc/server */ \"(rsc)/./node_modules/@trpc/server/dist/tracked-Blz8XOf1.mjs\");\n/* harmony import */ var _lib_claude_api_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/claude/api-client */ \"(rsc)/./lib/claude/api-client.ts\");\n/**\n * Claude API tRPC Router\n * Real Claude API integration endpoints\n */ \n\n\n\n// Input schemas\nconst claudeMessageSchema = zod__WEBPACK_IMPORTED_MODULE_2__.object({\n    prompt: zod__WEBPACK_IMPORTED_MODULE_2__.string().min(1, 'Prompt cannot be empty'),\n    options: zod__WEBPACK_IMPORTED_MODULE_2__.object({\n        model: zod__WEBPACK_IMPORTED_MODULE_2__.string().optional(),\n        maxTokens: zod__WEBPACK_IMPORTED_MODULE_2__.number().min(1).max(8000).optional(),\n        temperature: zod__WEBPACK_IMPORTED_MODULE_2__.number().min(0).max(2).optional(),\n        systemPrompt: zod__WEBPACK_IMPORTED_MODULE_2__.string().optional(),\n        captureToDatabase: zod__WEBPACK_IMPORTED_MODULE_2__.boolean().default(true),\n        username: zod__WEBPACK_IMPORTED_MODULE_2__.string().default('arrakis-user')\n    }).optional()\n});\nconst claudeStreamSchema = zod__WEBPACK_IMPORTED_MODULE_2__.object({\n    prompt: zod__WEBPACK_IMPORTED_MODULE_2__.string().min(1, 'Prompt cannot be empty'),\n    options: zod__WEBPACK_IMPORTED_MODULE_2__.object({\n        model: zod__WEBPACK_IMPORTED_MODULE_2__.string().optional(),\n        maxTokens: zod__WEBPACK_IMPORTED_MODULE_2__.number().min(1).max(8000).optional(),\n        temperature: zod__WEBPACK_IMPORTED_MODULE_2__.number().min(0).max(2).optional(),\n        systemPrompt: zod__WEBPACK_IMPORTED_MODULE_2__.string().optional(),\n        captureToDatabase: zod__WEBPACK_IMPORTED_MODULE_2__.boolean().default(true),\n        username: zod__WEBPACK_IMPORTED_MODULE_2__.string().default('arrakis-user')\n    }).optional()\n});\nconst claudeRouter = (0,_trpc__WEBPACK_IMPORTED_MODULE_0__.router)({\n    /**\n   * Send a message to Claude API\n   */ sendMessage: _trpc__WEBPACK_IMPORTED_MODULE_0__.publicProcedure.input(claudeMessageSchema).mutation(async ({ input })=>{\n        try {\n            console.log('üöÄ tRPC: Processing Claude API request...');\n            console.log('üìã Input received:', JSON.stringify(input, null, 2));\n            const { prompt, options } = input;\n            // Sanitize options to prevent JSON issues\n            const sanitizedOptions = {\n                model: options?.model || 'claude-sonnet-4-20250514',\n                maxTokens: options?.maxTokens || 4000,\n                temperature: options?.temperature || 0.7,\n                captureToDatabase: options?.captureToDatabase !== false,\n                username: options?.username || 'arrakis-user',\n                systemPrompt: options?.systemPrompt?.replace(/\\\\/g, '/') || undefined\n            };\n            console.log('üßπ Sanitized options:', JSON.stringify(sanitizedOptions, null, 2));\n            const response = await _lib_claude_api_client__WEBPACK_IMPORTED_MODULE_1__.claudeClient.sendMessage(prompt, sanitizedOptions);\n            console.log('‚úÖ tRPC: Claude API request completed');\n            return {\n                success: true,\n                data: response\n            };\n        } catch (error) {\n            console.error('‚ùå tRPC: Claude API error:', error);\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_3__.TRPCError({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: 'Failed to get Claude response',\n                cause: error\n            });\n        }\n    }),\n    /**\n   * Stream a message to Claude API (for future real-time features)\n   */ streamMessage: _trpc__WEBPACK_IMPORTED_MODULE_0__.publicProcedure.input(claudeStreamSchema).mutation(async ({ input })=>{\n        try {\n            console.log('üîÑ tRPC: Starting Claude API stream...');\n            const { prompt, options = {} } = input;\n            // For now, we'll use the regular sendMessage since tRPC doesn't handle streams easily\n            // In the future, we can implement WebSocket streaming\n            const response = await _lib_claude_api_client__WEBPACK_IMPORTED_MODULE_1__.claudeClient.sendMessage(prompt, options);\n            console.log('‚úÖ tRPC: Claude API stream completed');\n            return {\n                success: true,\n                data: response,\n                streaming: false\n            };\n        } catch (error) {\n            console.error('‚ùå tRPC: Claude API stream error:', error);\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_3__.TRPCError({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: 'Failed to stream Claude response',\n                cause: error\n            });\n        }\n    }),\n    /**\n   * Test Claude API connection\n   */ test: _trpc__WEBPACK_IMPORTED_MODULE_0__.publicProcedure.mutation(async ()=>{\n        try {\n            console.log('üîß tRPC: Testing Claude API connection...');\n            const testResponse = await _lib_claude_api_client__WEBPACK_IMPORTED_MODULE_1__.claudeClient.sendMessage('Respond with \"Connection test successful\" to confirm the API is working.', {\n                maxTokens: 50,\n                captureToDatabase: false\n            });\n            console.log('‚úÖ tRPC: Claude API test completed');\n            return {\n                success: true,\n                message: 'Claude API connection successful',\n                details: {\n                    responseId: testResponse.id,\n                    model: testResponse.model,\n                    tokensUsed: testResponse.usage.input_tokens + testResponse.usage.output_tokens,\n                    responseText: testResponse.content.find((c)=>c.type === 'text')?.text || ''\n                }\n            };\n        } catch (error) {\n            console.error('‚ùå tRPC: Claude API test failed:', error);\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_3__.TRPCError({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: 'Claude API test failed',\n                cause: error\n            });\n        }\n    }),\n    /**\n   * Get Claude API status and models\n   */ status: _trpc__WEBPACK_IMPORTED_MODULE_0__.publicProcedure.query(async ()=>{\n        try {\n            const hasApiKey = !!process.env.ANTHROPIC_API_KEY;\n            return {\n                connected: hasApiKey,\n                apiKeyConfigured: hasApiKey,\n                availableModels: [\n                    'claude-sonnet-4-20250514',\n                    'claude-3-5-sonnet-20241022',\n                    'claude-3-sonnet-20240229',\n                    'claude-3-haiku-20240307'\n                ],\n                defaultModel: 'claude-sonnet-4-20250514',\n                estimatedCost: {\n                    inputPer1K: 0.003,\n                    outputPer1K: 0.015,\n                    currency: 'USD'\n                }\n            };\n        } catch (error) {\n            console.error('‚ùå tRPC: Failed to get Claude API status:', error);\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_3__.TRPCError({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: 'Failed to get Claude API status',\n                cause: error\n            });\n        }\n    }),\n    /**\n   * Get usage statistics\n   */ usage: _trpc__WEBPACK_IMPORTED_MODULE_0__.publicProcedure.query(async ()=>{\n        try {\n            // TODO: Implement usage tracking from database\n            // For now, return placeholder data\n            return {\n                totalRequests: 0,\n                totalTokens: 0,\n                totalCost: 0,\n                requestsToday: 0,\n                tokensToday: 0,\n                costToday: 0,\n                averageResponseTime: 0,\n                successRate: 100\n            };\n        } catch (error) {\n            console.error('‚ùå tRPC: Failed to get usage statistics:', error);\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_3__.TRPCError({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: 'Failed to get usage statistics',\n                cause: error\n            });\n        }\n    })\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvYXBpL3JvdXRlcnMvY2xhdWRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7OztDQUdDLEdBRXNCO0FBQzBCO0FBQ1Q7QUFDcUM7QUFFN0UsZ0JBQWdCO0FBQ2hCLE1BQU1LLHNCQUFzQkwsdUNBQVEsQ0FBQztJQUNuQ08sUUFBUVAsdUNBQVEsR0FBR1MsR0FBRyxDQUFDLEdBQUc7SUFDMUJDLFNBQVNWLHVDQUNBLENBQUM7UUFDTlcsT0FBT1gsdUNBQVEsR0FBR1ksUUFBUTtRQUMxQkMsV0FBV2IsdUNBQVEsR0FBR1MsR0FBRyxDQUFDLEdBQUdNLEdBQUcsQ0FBQyxNQUFNSCxRQUFRO1FBQy9DSSxhQUFhaEIsdUNBQVEsR0FBR1MsR0FBRyxDQUFDLEdBQUdNLEdBQUcsQ0FBQyxHQUFHSCxRQUFRO1FBQzlDSyxjQUFjakIsdUNBQVEsR0FBR1ksUUFBUTtRQUNqQ00sbUJBQW1CbEIsd0NBQVMsR0FBR29CLE9BQU8sQ0FBQztRQUN2Q0MsVUFBVXJCLHVDQUFRLEdBQUdvQixPQUFPLENBQUM7SUFDL0IsR0FDQ1IsUUFBUTtBQUNiO0FBRUEsTUFBTVUscUJBQXFCdEIsdUNBQVEsQ0FBQztJQUNsQ08sUUFBUVAsdUNBQVEsR0FBR1MsR0FBRyxDQUFDLEdBQUc7SUFDMUJDLFNBQVNWLHVDQUNBLENBQUM7UUFDTlcsT0FBT1gsdUNBQVEsR0FBR1ksUUFBUTtRQUMxQkMsV0FBV2IsdUNBQVEsR0FBR1MsR0FBRyxDQUFDLEdBQUdNLEdBQUcsQ0FBQyxNQUFNSCxRQUFRO1FBQy9DSSxhQUFhaEIsdUNBQVEsR0FBR1MsR0FBRyxDQUFDLEdBQUdNLEdBQUcsQ0FBQyxHQUFHSCxRQUFRO1FBQzlDSyxjQUFjakIsdUNBQVEsR0FBR1ksUUFBUTtRQUNqQ00sbUJBQW1CbEIsd0NBQVMsR0FBR29CLE9BQU8sQ0FBQztRQUN2Q0MsVUFBVXJCLHVDQUFRLEdBQUdvQixPQUFPLENBQUM7SUFDL0IsR0FDQ1IsUUFBUTtBQUNiO0FBRU8sTUFBTVcsZUFBZXRCLDZDQUFNQSxDQUFDO0lBQ2pDOztHQUVDLEdBQ0R1QixhQUFhdEIsa0RBQWVBLENBQ3pCdUIsS0FBSyxDQUFDcEIscUJBQ05xQixRQUFRLENBQUMsT0FBTyxFQUFFRCxLQUFLLEVBQUU7UUFDeEIsSUFBSTtZQUNGRSxRQUFRQyxHQUFHLENBQUM7WUFDWkQsUUFBUUMsR0FBRyxDQUFDLHNCQUFzQkMsS0FBS0MsU0FBUyxDQUFDTCxPQUFPLE1BQU07WUFFOUQsTUFBTSxFQUFFbEIsTUFBTSxFQUFFRyxPQUFPLEVBQUUsR0FBR2U7WUFFNUIsMENBQTBDO1lBQzFDLE1BQU1NLG1CQUFtQjtnQkFDdkJwQixPQUFPRCxTQUFTQyxTQUFTO2dCQUN6QkUsV0FBV0gsU0FBU0csYUFBYTtnQkFDakNHLGFBQWFOLFNBQVNNLGVBQWU7Z0JBQ3JDRSxtQkFBbUJSLFNBQVNRLHNCQUFzQjtnQkFDbERHLFVBQVVYLFNBQVNXLFlBQVk7Z0JBQy9CSixjQUFjUCxTQUFTTyxjQUFjZSxRQUFRLE9BQU8sUUFBUUM7WUFDOUQ7WUFFQU4sUUFBUUMsR0FBRyxDQUNULHlCQUNBQyxLQUFLQyxTQUFTLENBQUNDLGtCQUFrQixNQUFNO1lBR3pDLE1BQU1HLFdBQVcsTUFBTTlCLGdFQUFZQSxDQUFDb0IsV0FBVyxDQUM3Q2pCLFFBQ0F3QjtZQUdGSixRQUFRQyxHQUFHLENBQUM7WUFDWixPQUFPO2dCQUNMTyxTQUFTO2dCQUNUQyxNQUFNRjtZQUNSO1FBQ0YsRUFBRSxPQUFPRyxPQUFPO1lBQ2RWLFFBQVFVLEtBQUssQ0FBQyw2QkFBNkJBO1lBQzNDLE1BQU0sSUFBSWxDLG1EQUFTQSxDQUFDO2dCQUNsQm1DLE1BQU07Z0JBQ05DLFNBQVM7Z0JBQ1RDLE9BQU9IO1lBQ1Q7UUFDRjtJQUNGO0lBRUY7O0dBRUMsR0FDREksZUFBZXZDLGtEQUFlQSxDQUMzQnVCLEtBQUssQ0FBQ0gsb0JBQ05JLFFBQVEsQ0FBQyxPQUFPLEVBQUVELEtBQUssRUFBRTtRQUN4QixJQUFJO1lBQ0ZFLFFBQVFDLEdBQUcsQ0FBQztZQUVaLE1BQU0sRUFBRXJCLE1BQU0sRUFBRUcsVUFBVSxDQUFDLENBQUMsRUFBRSxHQUFHZTtZQUVqQyxzRkFBc0Y7WUFDdEYsc0RBQXNEO1lBQ3RELE1BQU1TLFdBQVcsTUFBTTlCLGdFQUFZQSxDQUFDb0IsV0FBVyxDQUFDakIsUUFBUUc7WUFFeERpQixRQUFRQyxHQUFHLENBQUM7WUFDWixPQUFPO2dCQUNMTyxTQUFTO2dCQUNUQyxNQUFNRjtnQkFDTlEsV0FBVztZQUNiO1FBQ0YsRUFBRSxPQUFPTCxPQUFPO1lBQ2RWLFFBQVFVLEtBQUssQ0FBQyxvQ0FBb0NBO1lBQ2xELE1BQU0sSUFBSWxDLG1EQUFTQSxDQUFDO2dCQUNsQm1DLE1BQU07Z0JBQ05DLFNBQVM7Z0JBQ1RDLE9BQU9IO1lBQ1Q7UUFDRjtJQUNGO0lBRUY7O0dBRUMsR0FDRE0sTUFBTXpDLGtEQUFlQSxDQUFDd0IsUUFBUSxDQUFDO1FBQzdCLElBQUk7WUFDRkMsUUFBUUMsR0FBRyxDQUFDO1lBRVosTUFBTWdCLGVBQWUsTUFBTXhDLGdFQUFZQSxDQUFDb0IsV0FBVyxDQUNqRCw0RUFDQTtnQkFDRVgsV0FBVztnQkFDWEssbUJBQW1CO1lBQ3JCO1lBR0ZTLFFBQVFDLEdBQUcsQ0FBQztZQUNaLE9BQU87Z0JBQ0xPLFNBQVM7Z0JBQ1RJLFNBQVM7Z0JBQ1RNLFNBQVM7b0JBQ1BDLFlBQVlGLGFBQWFHLEVBQUU7b0JBQzNCcEMsT0FBT2lDLGFBQWFqQyxLQUFLO29CQUN6QnFDLFlBQ0VKLGFBQWFLLEtBQUssQ0FBQ0MsWUFBWSxHQUFHTixhQUFhSyxLQUFLLENBQUNFLGFBQWE7b0JBQ3BFQyxjQUNFUixhQUFhUyxPQUFPLENBQUNDLElBQUksQ0FBQyxDQUFDQyxJQUFNQSxFQUFFQyxJQUFJLEtBQUssU0FBU0MsUUFBUTtnQkFDakU7WUFDRjtRQUNGLEVBQUUsT0FBT3BCLE9BQU87WUFDZFYsUUFBUVUsS0FBSyxDQUFDLG1DQUFtQ0E7WUFDakQsTUFBTSxJQUFJbEMsbURBQVNBLENBQUM7Z0JBQ2xCbUMsTUFBTTtnQkFDTkMsU0FBUztnQkFDVEMsT0FBT0g7WUFDVDtRQUNGO0lBQ0Y7SUFFQTs7R0FFQyxHQUNEcUIsUUFBUXhELGtEQUFlQSxDQUFDeUQsS0FBSyxDQUFDO1FBQzVCLElBQUk7WUFDRixNQUFNQyxZQUFZLENBQUMsQ0FBQ0MsUUFBUUMsR0FBRyxDQUFDQyxpQkFBaUI7WUFFakQsT0FBTztnQkFDTEMsV0FBV0o7Z0JBQ1hLLGtCQUFrQkw7Z0JBQ2xCTSxpQkFBaUI7b0JBQ2Y7b0JBQ0E7b0JBQ0E7b0JBQ0E7aUJBQ0Q7Z0JBQ0RDLGNBQWM7Z0JBQ2RDLGVBQWU7b0JBQ2JDLFlBQVk7b0JBQ1pDLGFBQWE7b0JBQ2JDLFVBQVU7Z0JBQ1o7WUFDRjtRQUNGLEVBQUUsT0FBT2xDLE9BQU87WUFDZFYsUUFBUVUsS0FBSyxDQUFDLDRDQUE0Q0E7WUFDMUQsTUFBTSxJQUFJbEMsbURBQVNBLENBQUM7Z0JBQ2xCbUMsTUFBTTtnQkFDTkMsU0FBUztnQkFDVEMsT0FBT0g7WUFDVDtRQUNGO0lBQ0Y7SUFFQTs7R0FFQyxHQUNEWSxPQUFPL0Msa0RBQWVBLENBQUN5RCxLQUFLLENBQUM7UUFDM0IsSUFBSTtZQUNGLCtDQUErQztZQUMvQyxtQ0FBbUM7WUFDbkMsT0FBTztnQkFDTGEsZUFBZTtnQkFDZkMsYUFBYTtnQkFDYkMsV0FBVztnQkFDWEMsZUFBZTtnQkFDZkMsYUFBYTtnQkFDYkMsV0FBVztnQkFDWEMscUJBQXFCO2dCQUNyQkMsYUFBYTtZQUNmO1FBQ0YsRUFBRSxPQUFPMUMsT0FBTztZQUNkVixRQUFRVSxLQUFLLENBQUMsMkNBQTJDQTtZQUN6RCxNQUFNLElBQUlsQyxtREFBU0EsQ0FBQztnQkFDbEJtQyxNQUFNO2dCQUNOQyxTQUFTO2dCQUNUQyxPQUFPSDtZQUNUO1FBQ0Y7SUFDRjtBQUNGLEdBQUUiLCJzb3VyY2VzIjpbIkM6XFxwcm9qZWN0c1xcYXJyYWtpc1xcbGliXFxhcGlcXHJvdXRlcnNcXGNsYXVkZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENsYXVkZSBBUEkgdFJQQyBSb3V0ZXJcbiAqIFJlYWwgQ2xhdWRlIEFQSSBpbnRlZ3JhdGlvbiBlbmRwb2ludHNcbiAqL1xuXG5pbXBvcnQgeyB6IH0gZnJvbSAnem9kJ1xuaW1wb3J0IHsgcm91dGVyLCBwdWJsaWNQcm9jZWR1cmUgfSBmcm9tICcuLi90cnBjJ1xuaW1wb3J0IHsgVFJQQ0Vycm9yIH0gZnJvbSAnQHRycGMvc2VydmVyJ1xuaW1wb3J0IHsgY2xhdWRlQ2xpZW50LCB0eXBlIENsYXVkZUFQSU9wdGlvbnMgfSBmcm9tICdAL2xpYi9jbGF1ZGUvYXBpLWNsaWVudCdcblxuLy8gSW5wdXQgc2NoZW1hc1xuY29uc3QgY2xhdWRlTWVzc2FnZVNjaGVtYSA9IHoub2JqZWN0KHtcbiAgcHJvbXB0OiB6LnN0cmluZygpLm1pbigxLCAnUHJvbXB0IGNhbm5vdCBiZSBlbXB0eScpLFxuICBvcHRpb25zOiB6XG4gICAgLm9iamVjdCh7XG4gICAgICBtb2RlbDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgbWF4VG9rZW5zOiB6Lm51bWJlcigpLm1pbigxKS5tYXgoODAwMCkub3B0aW9uYWwoKSxcbiAgICAgIHRlbXBlcmF0dXJlOiB6Lm51bWJlcigpLm1pbigwKS5tYXgoMikub3B0aW9uYWwoKSxcbiAgICAgIHN5c3RlbVByb21wdDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgY2FwdHVyZVRvRGF0YWJhc2U6IHouYm9vbGVhbigpLmRlZmF1bHQodHJ1ZSksXG4gICAgICB1c2VybmFtZTogei5zdHJpbmcoKS5kZWZhdWx0KCdhcnJha2lzLXVzZXInKSxcbiAgICB9KVxuICAgIC5vcHRpb25hbCgpLFxufSlcblxuY29uc3QgY2xhdWRlU3RyZWFtU2NoZW1hID0gei5vYmplY3Qoe1xuICBwcm9tcHQ6IHouc3RyaW5nKCkubWluKDEsICdQcm9tcHQgY2Fubm90IGJlIGVtcHR5JyksXG4gIG9wdGlvbnM6IHpcbiAgICAub2JqZWN0KHtcbiAgICAgIG1vZGVsOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICBtYXhUb2tlbnM6IHoubnVtYmVyKCkubWluKDEpLm1heCg4MDAwKS5vcHRpb25hbCgpLFxuICAgICAgdGVtcGVyYXR1cmU6IHoubnVtYmVyKCkubWluKDApLm1heCgyKS5vcHRpb25hbCgpLFxuICAgICAgc3lzdGVtUHJvbXB0OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICBjYXB0dXJlVG9EYXRhYmFzZTogei5ib29sZWFuKCkuZGVmYXVsdCh0cnVlKSxcbiAgICAgIHVzZXJuYW1lOiB6LnN0cmluZygpLmRlZmF1bHQoJ2FycmFraXMtdXNlcicpLFxuICAgIH0pXG4gICAgLm9wdGlvbmFsKCksXG59KVxuXG5leHBvcnQgY29uc3QgY2xhdWRlUm91dGVyID0gcm91dGVyKHtcbiAgLyoqXG4gICAqIFNlbmQgYSBtZXNzYWdlIHRvIENsYXVkZSBBUElcbiAgICovXG4gIHNlbmRNZXNzYWdlOiBwdWJsaWNQcm9jZWR1cmVcbiAgICAuaW5wdXQoY2xhdWRlTWVzc2FnZVNjaGVtYSlcbiAgICAubXV0YXRpb24oYXN5bmMgKHsgaW5wdXQgfSkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc29sZS5sb2coJ/CfmoAgdFJQQzogUHJvY2Vzc2luZyBDbGF1ZGUgQVBJIHJlcXVlc3QuLi4nKVxuICAgICAgICBjb25zb2xlLmxvZygn8J+TiyBJbnB1dCByZWNlaXZlZDonLCBKU09OLnN0cmluZ2lmeShpbnB1dCwgbnVsbCwgMikpXG5cbiAgICAgICAgY29uc3QgeyBwcm9tcHQsIG9wdGlvbnMgfSA9IGlucHV0XG5cbiAgICAgICAgLy8gU2FuaXRpemUgb3B0aW9ucyB0byBwcmV2ZW50IEpTT04gaXNzdWVzXG4gICAgICAgIGNvbnN0IHNhbml0aXplZE9wdGlvbnMgPSB7XG4gICAgICAgICAgbW9kZWw6IG9wdGlvbnM/Lm1vZGVsIHx8ICdjbGF1ZGUtc29ubmV0LTQtMjAyNTA1MTQnLFxuICAgICAgICAgIG1heFRva2Vuczogb3B0aW9ucz8ubWF4VG9rZW5zIHx8IDQwMDAsXG4gICAgICAgICAgdGVtcGVyYXR1cmU6IG9wdGlvbnM/LnRlbXBlcmF0dXJlIHx8IDAuNyxcbiAgICAgICAgICBjYXB0dXJlVG9EYXRhYmFzZTogb3B0aW9ucz8uY2FwdHVyZVRvRGF0YWJhc2UgIT09IGZhbHNlLFxuICAgICAgICAgIHVzZXJuYW1lOiBvcHRpb25zPy51c2VybmFtZSB8fCAnYXJyYWtpcy11c2VyJyxcbiAgICAgICAgICBzeXN0ZW1Qcm9tcHQ6IG9wdGlvbnM/LnN5c3RlbVByb21wdD8ucmVwbGFjZSgvXFxcXC9nLCAnLycpIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICfwn6e5IFNhbml0aXplZCBvcHRpb25zOicsXG4gICAgICAgICAgSlNPTi5zdHJpbmdpZnkoc2FuaXRpemVkT3B0aW9ucywgbnVsbCwgMilcbiAgICAgICAgKVxuXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY2xhdWRlQ2xpZW50LnNlbmRNZXNzYWdlKFxuICAgICAgICAgIHByb21wdCxcbiAgICAgICAgICBzYW5pdGl6ZWRPcHRpb25zXG4gICAgICAgIClcblxuICAgICAgICBjb25zb2xlLmxvZygn4pyFIHRSUEM6IENsYXVkZSBBUEkgcmVxdWVzdCBjb21wbGV0ZWQnKVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgZGF0YTogcmVzcG9uc2UsXG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCB0UlBDOiBDbGF1ZGUgQVBJIGVycm9yOicsIGVycm9yKVxuICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHtcbiAgICAgICAgICBjb2RlOiAnSU5URVJOQUxfU0VSVkVSX0VSUk9SJyxcbiAgICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIGdldCBDbGF1ZGUgcmVzcG9uc2UnLFxuICAgICAgICAgIGNhdXNlOiBlcnJvcixcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9KSxcblxuICAvKipcbiAgICogU3RyZWFtIGEgbWVzc2FnZSB0byBDbGF1ZGUgQVBJIChmb3IgZnV0dXJlIHJlYWwtdGltZSBmZWF0dXJlcylcbiAgICovXG4gIHN0cmVhbU1lc3NhZ2U6IHB1YmxpY1Byb2NlZHVyZVxuICAgIC5pbnB1dChjbGF1ZGVTdHJlYW1TY2hlbWEpXG4gICAgLm11dGF0aW9uKGFzeW5jICh7IGlucHV0IH0pID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5SEIHRSUEM6IFN0YXJ0aW5nIENsYXVkZSBBUEkgc3RyZWFtLi4uJylcblxuICAgICAgICBjb25zdCB7IHByb21wdCwgb3B0aW9ucyA9IHt9IH0gPSBpbnB1dFxuXG4gICAgICAgIC8vIEZvciBub3csIHdlJ2xsIHVzZSB0aGUgcmVndWxhciBzZW5kTWVzc2FnZSBzaW5jZSB0UlBDIGRvZXNuJ3QgaGFuZGxlIHN0cmVhbXMgZWFzaWx5XG4gICAgICAgIC8vIEluIHRoZSBmdXR1cmUsIHdlIGNhbiBpbXBsZW1lbnQgV2ViU29ja2V0IHN0cmVhbWluZ1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGNsYXVkZUNsaWVudC5zZW5kTWVzc2FnZShwcm9tcHQsIG9wdGlvbnMpXG5cbiAgICAgICAgY29uc29sZS5sb2coJ+KchSB0UlBDOiBDbGF1ZGUgQVBJIHN0cmVhbSBjb21wbGV0ZWQnKVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgZGF0YTogcmVzcG9uc2UsXG4gICAgICAgICAgc3RyZWFtaW5nOiBmYWxzZSwgLy8gSW5kaWNhdGUgdGhpcyB3YXMgbm90IGFjdHVhbGx5IHN0cmVhbWVkXG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCB0UlBDOiBDbGF1ZGUgQVBJIHN0cmVhbSBlcnJvcjonLCBlcnJvcilcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgICAgY29kZTogJ0lOVEVSTkFMX1NFUlZFUl9FUlJPUicsXG4gICAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBzdHJlYW0gQ2xhdWRlIHJlc3BvbnNlJyxcbiAgICAgICAgICBjYXVzZTogZXJyb3IsXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSksXG5cbiAgLyoqXG4gICAqIFRlc3QgQ2xhdWRlIEFQSSBjb25uZWN0aW9uXG4gICAqL1xuICB0ZXN0OiBwdWJsaWNQcm9jZWR1cmUubXV0YXRpb24oYXN5bmMgKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZygn8J+UpyB0UlBDOiBUZXN0aW5nIENsYXVkZSBBUEkgY29ubmVjdGlvbi4uLicpXG5cbiAgICAgIGNvbnN0IHRlc3RSZXNwb25zZSA9IGF3YWl0IGNsYXVkZUNsaWVudC5zZW5kTWVzc2FnZShcbiAgICAgICAgJ1Jlc3BvbmQgd2l0aCBcIkNvbm5lY3Rpb24gdGVzdCBzdWNjZXNzZnVsXCIgdG8gY29uZmlybSB0aGUgQVBJIGlzIHdvcmtpbmcuJyxcbiAgICAgICAge1xuICAgICAgICAgIG1heFRva2VuczogNTAsXG4gICAgICAgICAgY2FwdHVyZVRvRGF0YWJhc2U6IGZhbHNlLCAvLyBEb24ndCBzdG9yZSB0ZXN0IG1lc3NhZ2VzXG4gICAgICAgIH1cbiAgICAgIClcblxuICAgICAgY29uc29sZS5sb2coJ+KchSB0UlBDOiBDbGF1ZGUgQVBJIHRlc3QgY29tcGxldGVkJylcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIG1lc3NhZ2U6ICdDbGF1ZGUgQVBJIGNvbm5lY3Rpb24gc3VjY2Vzc2Z1bCcsXG4gICAgICAgIGRldGFpbHM6IHtcbiAgICAgICAgICByZXNwb25zZUlkOiB0ZXN0UmVzcG9uc2UuaWQsXG4gICAgICAgICAgbW9kZWw6IHRlc3RSZXNwb25zZS5tb2RlbCxcbiAgICAgICAgICB0b2tlbnNVc2VkOlxuICAgICAgICAgICAgdGVzdFJlc3BvbnNlLnVzYWdlLmlucHV0X3Rva2VucyArIHRlc3RSZXNwb25zZS51c2FnZS5vdXRwdXRfdG9rZW5zLFxuICAgICAgICAgIHJlc3BvbnNlVGV4dDpcbiAgICAgICAgICAgIHRlc3RSZXNwb25zZS5jb250ZW50LmZpbmQoKGMpID0+IGMudHlwZSA9PT0gJ3RleHQnKT8udGV4dCB8fCAnJyxcbiAgICAgICAgfSxcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIHRSUEM6IENsYXVkZSBBUEkgdGVzdCBmYWlsZWQ6JywgZXJyb3IpXG4gICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHtcbiAgICAgICAgY29kZTogJ0lOVEVSTkFMX1NFUlZFUl9FUlJPUicsXG4gICAgICAgIG1lc3NhZ2U6ICdDbGF1ZGUgQVBJIHRlc3QgZmFpbGVkJyxcbiAgICAgICAgY2F1c2U6IGVycm9yLFxuICAgICAgfSlcbiAgICB9XG4gIH0pLFxuXG4gIC8qKlxuICAgKiBHZXQgQ2xhdWRlIEFQSSBzdGF0dXMgYW5kIG1vZGVsc1xuICAgKi9cbiAgc3RhdHVzOiBwdWJsaWNQcm9jZWR1cmUucXVlcnkoYXN5bmMgKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBoYXNBcGlLZXkgPSAhIXByb2Nlc3MuZW52LkFOVEhST1BJQ19BUElfS0VZXG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGNvbm5lY3RlZDogaGFzQXBpS2V5LFxuICAgICAgICBhcGlLZXlDb25maWd1cmVkOiBoYXNBcGlLZXksXG4gICAgICAgIGF2YWlsYWJsZU1vZGVsczogW1xuICAgICAgICAgICdjbGF1ZGUtc29ubmV0LTQtMjAyNTA1MTQnLFxuICAgICAgICAgICdjbGF1ZGUtMy01LXNvbm5ldC0yMDI0MTAyMicsIC8vIGRlcHJlY2F0ZWRcbiAgICAgICAgICAnY2xhdWRlLTMtc29ubmV0LTIwMjQwMjI5JyxcbiAgICAgICAgICAnY2xhdWRlLTMtaGFpa3UtMjAyNDAzMDcnLFxuICAgICAgICBdLFxuICAgICAgICBkZWZhdWx0TW9kZWw6ICdjbGF1ZGUtc29ubmV0LTQtMjAyNTA1MTQnLFxuICAgICAgICBlc3RpbWF0ZWRDb3N0OiB7XG4gICAgICAgICAgaW5wdXRQZXIxSzogMC4wMDMsXG4gICAgICAgICAgb3V0cHV0UGVyMUs6IDAuMDE1LFxuICAgICAgICAgIGN1cnJlbmN5OiAnVVNEJyxcbiAgICAgICAgfSxcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIHRSUEM6IEZhaWxlZCB0byBnZXQgQ2xhdWRlIEFQSSBzdGF0dXM6JywgZXJyb3IpXG4gICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHtcbiAgICAgICAgY29kZTogJ0lOVEVSTkFMX1NFUlZFUl9FUlJPUicsXG4gICAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gZ2V0IENsYXVkZSBBUEkgc3RhdHVzJyxcbiAgICAgICAgY2F1c2U6IGVycm9yLFxuICAgICAgfSlcbiAgICB9XG4gIH0pLFxuXG4gIC8qKlxuICAgKiBHZXQgdXNhZ2Ugc3RhdGlzdGljc1xuICAgKi9cbiAgdXNhZ2U6IHB1YmxpY1Byb2NlZHVyZS5xdWVyeShhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIFRPRE86IEltcGxlbWVudCB1c2FnZSB0cmFja2luZyBmcm9tIGRhdGFiYXNlXG4gICAgICAvLyBGb3Igbm93LCByZXR1cm4gcGxhY2Vob2xkZXIgZGF0YVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdG90YWxSZXF1ZXN0czogMCxcbiAgICAgICAgdG90YWxUb2tlbnM6IDAsXG4gICAgICAgIHRvdGFsQ29zdDogMCxcbiAgICAgICAgcmVxdWVzdHNUb2RheTogMCxcbiAgICAgICAgdG9rZW5zVG9kYXk6IDAsXG4gICAgICAgIGNvc3RUb2RheTogMCxcbiAgICAgICAgYXZlcmFnZVJlc3BvbnNlVGltZTogMCxcbiAgICAgICAgc3VjY2Vzc1JhdGU6IDEwMCxcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIHRSUEM6IEZhaWxlZCB0byBnZXQgdXNhZ2Ugc3RhdGlzdGljczonLCBlcnJvcilcbiAgICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xuICAgICAgICBjb2RlOiAnSU5URVJOQUxfU0VSVkVSX0VSUk9SJyxcbiAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBnZXQgdXNhZ2Ugc3RhdGlzdGljcycsXG4gICAgICAgIGNhdXNlOiBlcnJvcixcbiAgICAgIH0pXG4gICAgfVxuICB9KSxcbn0pXG4iXSwibmFtZXMiOlsieiIsInJvdXRlciIsInB1YmxpY1Byb2NlZHVyZSIsIlRSUENFcnJvciIsImNsYXVkZUNsaWVudCIsImNsYXVkZU1lc3NhZ2VTY2hlbWEiLCJvYmplY3QiLCJwcm9tcHQiLCJzdHJpbmciLCJtaW4iLCJvcHRpb25zIiwibW9kZWwiLCJvcHRpb25hbCIsIm1heFRva2VucyIsIm51bWJlciIsIm1heCIsInRlbXBlcmF0dXJlIiwic3lzdGVtUHJvbXB0IiwiY2FwdHVyZVRvRGF0YWJhc2UiLCJib29sZWFuIiwiZGVmYXVsdCIsInVzZXJuYW1lIiwiY2xhdWRlU3RyZWFtU2NoZW1hIiwiY2xhdWRlUm91dGVyIiwic2VuZE1lc3NhZ2UiLCJpbnB1dCIsIm11dGF0aW9uIiwiY29uc29sZSIsImxvZyIsIkpTT04iLCJzdHJpbmdpZnkiLCJzYW5pdGl6ZWRPcHRpb25zIiwicmVwbGFjZSIsInVuZGVmaW5lZCIsInJlc3BvbnNlIiwic3VjY2VzcyIsImRhdGEiLCJlcnJvciIsImNvZGUiLCJtZXNzYWdlIiwiY2F1c2UiLCJzdHJlYW1NZXNzYWdlIiwic3RyZWFtaW5nIiwidGVzdCIsInRlc3RSZXNwb25zZSIsImRldGFpbHMiLCJyZXNwb25zZUlkIiwiaWQiLCJ0b2tlbnNVc2VkIiwidXNhZ2UiLCJpbnB1dF90b2tlbnMiLCJvdXRwdXRfdG9rZW5zIiwicmVzcG9uc2VUZXh0IiwiY29udGVudCIsImZpbmQiLCJjIiwidHlwZSIsInRleHQiLCJzdGF0dXMiLCJxdWVyeSIsImhhc0FwaUtleSIsInByb2Nlc3MiLCJlbnYiLCJBTlRIUk9QSUNfQVBJX0tFWSIsImNvbm5lY3RlZCIsImFwaUtleUNvbmZpZ3VyZWQiLCJhdmFpbGFibGVNb2RlbHMiLCJkZWZhdWx0TW9kZWwiLCJlc3RpbWF0ZWRDb3N0IiwiaW5wdXRQZXIxSyIsIm91dHB1dFBlcjFLIiwiY3VycmVuY3kiLCJ0b3RhbFJlcXVlc3RzIiwidG90YWxUb2tlbnMiLCJ0b3RhbENvc3QiLCJyZXF1ZXN0c1RvZGF5IiwidG9rZW5zVG9kYXkiLCJjb3N0VG9kYXkiLCJhdmVyYWdlUmVzcG9uc2VUaW1lIiwic3VjY2Vzc1JhdGUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/api/routers/claude.ts\n");

/***/ }),

/***/ "(rsc)/./lib/api/routers/search.ts":
/*!***********************************!*\
  !*** ./lib/api/routers/search.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   searchRouter: () => (/* binding */ searchRouter)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var _trpc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../trpc */ \"(rsc)/./lib/api/trpc.ts\");\n/* harmony import */ var _trpc_server__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @trpc/server */ \"(rsc)/./node_modules/@trpc/server/dist/tracked-Blz8XOf1.mjs\");\n/**\n * Search tRPC Router\n * API endpoints for conversation search functionality\n */ \n\n\n// Input schemas\nconst searchQuerySchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n    query: zod__WEBPACK_IMPORTED_MODULE_1__.string().min(1).max(500),\n    type: zod__WEBPACK_IMPORTED_MODULE_1__[\"enum\"]([\n        'text',\n        'semantic',\n        'hybrid'\n    ]).default('hybrid'),\n    limit: zod__WEBPACK_IMPORTED_MODULE_1__.number().min(1).max(100).default(20),\n    filters: zod__WEBPACK_IMPORTED_MODULE_1__.object({\n        sessionIds: zod__WEBPACK_IMPORTED_MODULE_1__.array(zod__WEBPACK_IMPORTED_MODULE_1__.string().uuid()).optional(),\n        startDate: zod__WEBPACK_IMPORTED_MODULE_1__.string().optional(),\n        endDate: zod__WEBPACK_IMPORTED_MODULE_1__.string().optional(),\n        toolsUsed: zod__WEBPACK_IMPORTED_MODULE_1__.array(zod__WEBPACK_IMPORTED_MODULE_1__.string()).optional(),\n        minCost: zod__WEBPACK_IMPORTED_MODULE_1__.number().optional(),\n        maxCost: zod__WEBPACK_IMPORTED_MODULE_1__.number().optional(),\n        roles: zod__WEBPACK_IMPORTED_MODULE_1__.array(zod__WEBPACK_IMPORTED_MODULE_1__[\"enum\"]([\n            'user',\n            'assistant'\n        ])).optional()\n    }).optional()\n});\nconst savedSearchSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n    name: zod__WEBPACK_IMPORTED_MODULE_1__.string().min(1).max(100),\n    query: zod__WEBPACK_IMPORTED_MODULE_1__.string().min(1).max(500),\n    filters: zod__WEBPACK_IMPORTED_MODULE_1__.object({\n        startDate: zod__WEBPACK_IMPORTED_MODULE_1__.string().optional(),\n        endDate: zod__WEBPACK_IMPORTED_MODULE_1__.string().optional(),\n        toolsUsed: zod__WEBPACK_IMPORTED_MODULE_1__.array(zod__WEBPACK_IMPORTED_MODULE_1__.string()).optional()\n    }).optional()\n});\nconst searchRouter = (0,_trpc__WEBPACK_IMPORTED_MODULE_0__.router)({\n    /**\n   * Search conversations\n   */ conversations: _trpc__WEBPACK_IMPORTED_MODULE_0__.publicProcedure.input(searchQuerySchema).query(async ({ input })=>{\n        try {\n            const { query, type, limit, filters } = input;\n            // TODO: Implement actual search functionality\n            // This would use pgvector for semantic search and full-text for text search\n            // Placeholder response\n            return {\n                results: [],\n                totalCount: 0,\n                searchType: type,\n                processingTime: 0\n            };\n        } catch (error) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: 'Search failed',\n                cause: error\n            });\n        }\n    }),\n    /**\n   * Get search suggestions\n   */ suggestions: _trpc__WEBPACK_IMPORTED_MODULE_0__.publicProcedure.input(zod__WEBPACK_IMPORTED_MODULE_1__.object({\n        query: zod__WEBPACK_IMPORTED_MODULE_1__.string().min(1).max(100),\n        limit: zod__WEBPACK_IMPORTED_MODULE_1__.number().min(1).max(10).default(5)\n    })).query(async ({ input })=>{\n        try {\n            const { query, limit } = input;\n            // TODO: Implement search suggestions based on:\n            // - Previous searches\n            // - Common terms\n            // - Tool names\n            // - Session titles\n            return {\n                suggestions: []\n            };\n        } catch (error) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: 'Failed to get search suggestions',\n                cause: error\n            });\n        }\n    }),\n    /**\n   * Get saved searches\n   */ savedSearches: _trpc__WEBPACK_IMPORTED_MODULE_0__.publicProcedure.query(async ()=>{\n        try {\n            // TODO: Implement saved searches functionality\n            return {\n                searches: []\n            };\n        } catch (error) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: 'Failed to fetch saved searches',\n                cause: error\n            });\n        }\n    }),\n    /**\n   * Save search\n   */ saveSearch: _trpc__WEBPACK_IMPORTED_MODULE_0__.publicProcedure.input(savedSearchSchema).mutation(async ({ input })=>{\n        try {\n            const { name, query, filters } = input;\n            // TODO: Implement save search functionality\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: 'NOT_IMPLEMENTED',\n                message: 'Save search not implemented yet'\n            });\n        } catch (error) {\n            if (error instanceof _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError) {\n                throw error;\n            }\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: 'Failed to save search',\n                cause: error\n            });\n        }\n    }),\n    /**\n   * Delete saved search\n   */ deleteSavedSearch: _trpc__WEBPACK_IMPORTED_MODULE_0__.publicProcedure.input(zod__WEBPACK_IMPORTED_MODULE_1__.string().uuid()).mutation(async ({ input: searchId })=>{\n        try {\n            // TODO: Implement delete saved search\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: 'NOT_IMPLEMENTED',\n                message: 'Delete saved search not implemented yet'\n            });\n        } catch (error) {\n            if (error instanceof _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError) {\n                throw error;\n            }\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: 'Failed to delete saved search',\n                cause: error\n            });\n        }\n    }),\n    /**\n   * Get search analytics\n   */ analytics: _trpc__WEBPACK_IMPORTED_MODULE_0__.publicProcedure.query(async ()=>{\n        try {\n            // TODO: Implement search analytics\n            return {\n                totalSearches: 0,\n                popularQueries: [],\n                searchPerformance: {\n                    averageResponseTime: 0,\n                    successRate: 0\n                }\n            };\n        } catch (error) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: 'Failed to fetch search analytics',\n                cause: error\n            });\n        }\n    })\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvYXBpL3JvdXRlcnMvc2VhcmNoLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7O0NBR0MsR0FFc0I7QUFDMEI7QUFDVDtBQUV4QyxnQkFBZ0I7QUFDaEIsTUFBTUksb0JBQW9CSix1Q0FBUSxDQUFDO0lBQ2pDTSxPQUFPTix1Q0FBUSxHQUFHUSxHQUFHLENBQUMsR0FBR0MsR0FBRyxDQUFDO0lBQzdCQyxNQUFNVix3Q0FBTSxDQUFDO1FBQUM7UUFBUTtRQUFZO0tBQVMsRUFBRVksT0FBTyxDQUFDO0lBQ3JEQyxPQUFPYix1Q0FBUSxHQUFHUSxHQUFHLENBQUMsR0FBR0MsR0FBRyxDQUFDLEtBQUtHLE9BQU8sQ0FBQztJQUMxQ0csU0FBU2YsdUNBQ0EsQ0FBQztRQUNOZ0IsWUFBWWhCLHNDQUFPLENBQUNBLHVDQUFRLEdBQUdrQixJQUFJLElBQUlDLFFBQVE7UUFDL0NDLFdBQVdwQix1Q0FBUSxHQUFHbUIsUUFBUTtRQUM5QkUsU0FBU3JCLHVDQUFRLEdBQUdtQixRQUFRO1FBQzVCRyxXQUFXdEIsc0NBQU8sQ0FBQ0EsdUNBQVEsSUFBSW1CLFFBQVE7UUFDdkNJLFNBQVN2Qix1Q0FBUSxHQUFHbUIsUUFBUTtRQUM1QkssU0FBU3hCLHVDQUFRLEdBQUdtQixRQUFRO1FBQzVCTSxPQUFPekIsc0NBQU8sQ0FBQ0Esd0NBQU0sQ0FBQztZQUFDO1lBQVE7U0FBWSxHQUFHbUIsUUFBUTtJQUN4RCxHQUNDQSxRQUFRO0FBQ2I7QUFFQSxNQUFNTyxvQkFBb0IxQix1Q0FBUSxDQUFDO0lBQ2pDMkIsTUFBTTNCLHVDQUFRLEdBQUdRLEdBQUcsQ0FBQyxHQUFHQyxHQUFHLENBQUM7SUFDNUJILE9BQU9OLHVDQUFRLEdBQUdRLEdBQUcsQ0FBQyxHQUFHQyxHQUFHLENBQUM7SUFDN0JNLFNBQVNmLHVDQUNBLENBQUM7UUFDTm9CLFdBQVdwQix1Q0FBUSxHQUFHbUIsUUFBUTtRQUM5QkUsU0FBU3JCLHVDQUFRLEdBQUdtQixRQUFRO1FBQzVCRyxXQUFXdEIsc0NBQU8sQ0FBQ0EsdUNBQVEsSUFBSW1CLFFBQVE7SUFDekMsR0FDQ0EsUUFBUTtBQUNiO0FBRU8sTUFBTVMsZUFBZTNCLDZDQUFNQSxDQUFDO0lBQ2pDOztHQUVDLEdBQ0Q0QixlQUFlM0Isa0RBQWVBLENBQzNCNEIsS0FBSyxDQUFDMUIsbUJBQ05FLEtBQUssQ0FBQyxPQUFPLEVBQUV3QixLQUFLLEVBQUU7UUFDckIsSUFBSTtZQUNGLE1BQU0sRUFBRXhCLEtBQUssRUFBRUksSUFBSSxFQUFFRyxLQUFLLEVBQUVFLE9BQU8sRUFBRSxHQUFHZTtZQUV4Qyw4Q0FBOEM7WUFDOUMsNEVBQTRFO1lBRTVFLHVCQUF1QjtZQUN2QixPQUFPO2dCQUNMQyxTQUFTLEVBQUU7Z0JBQ1hDLFlBQVk7Z0JBQ1pDLFlBQVl2QjtnQkFDWndCLGdCQUFnQjtZQUNsQjtRQUNGLEVBQUUsT0FBT0MsT0FBTztZQUNkLE1BQU0sSUFBSWhDLG1EQUFTQSxDQUFDO2dCQUNsQmlDLE1BQU07Z0JBQ05DLFNBQVM7Z0JBQ1RDLE9BQU9IO1lBQ1Q7UUFDRjtJQUNGO0lBRUY7O0dBRUMsR0FDREksYUFBYXJDLGtEQUFlQSxDQUN6QjRCLEtBQUssQ0FDSjlCLHVDQUFRLENBQUM7UUFDUE0sT0FBT04sdUNBQVEsR0FBR1EsR0FBRyxDQUFDLEdBQUdDLEdBQUcsQ0FBQztRQUM3QkksT0FBT2IsdUNBQVEsR0FBR1EsR0FBRyxDQUFDLEdBQUdDLEdBQUcsQ0FBQyxJQUFJRyxPQUFPLENBQUM7SUFDM0MsSUFFRE4sS0FBSyxDQUFDLE9BQU8sRUFBRXdCLEtBQUssRUFBRTtRQUNyQixJQUFJO1lBQ0YsTUFBTSxFQUFFeEIsS0FBSyxFQUFFTyxLQUFLLEVBQUUsR0FBR2lCO1lBRXpCLCtDQUErQztZQUMvQyxzQkFBc0I7WUFDdEIsaUJBQWlCO1lBQ2pCLGVBQWU7WUFDZixtQkFBbUI7WUFFbkIsT0FBTztnQkFDTFMsYUFBYSxFQUFFO1lBQ2pCO1FBQ0YsRUFBRSxPQUFPSixPQUFPO1lBQ2QsTUFBTSxJQUFJaEMsbURBQVNBLENBQUM7Z0JBQ2xCaUMsTUFBTTtnQkFDTkMsU0FBUztnQkFDVEMsT0FBT0g7WUFDVDtRQUNGO0lBQ0Y7SUFFRjs7R0FFQyxHQUNESyxlQUFldEMsa0RBQWVBLENBQUNJLEtBQUssQ0FBQztRQUNuQyxJQUFJO1lBQ0YsK0NBQStDO1lBQy9DLE9BQU87Z0JBQ0xtQyxVQUFVLEVBQUU7WUFDZDtRQUNGLEVBQUUsT0FBT04sT0FBTztZQUNkLE1BQU0sSUFBSWhDLG1EQUFTQSxDQUFDO2dCQUNsQmlDLE1BQU07Z0JBQ05DLFNBQVM7Z0JBQ1RDLE9BQU9IO1lBQ1Q7UUFDRjtJQUNGO0lBRUE7O0dBRUMsR0FDRE8sWUFBWXhDLGtEQUFlQSxDQUN4QjRCLEtBQUssQ0FBQ0osbUJBQ05pQixRQUFRLENBQUMsT0FBTyxFQUFFYixLQUFLLEVBQUU7UUFDeEIsSUFBSTtZQUNGLE1BQU0sRUFBRUgsSUFBSSxFQUFFckIsS0FBSyxFQUFFUyxPQUFPLEVBQUUsR0FBR2U7WUFFakMsNENBQTRDO1lBQzVDLE1BQU0sSUFBSTNCLG1EQUFTQSxDQUFDO2dCQUNsQmlDLE1BQU07Z0JBQ05DLFNBQVM7WUFDWDtRQUNGLEVBQUUsT0FBT0YsT0FBTztZQUNkLElBQUlBLGlCQUFpQmhDLG1EQUFTQSxFQUFFO2dCQUM5QixNQUFNZ0M7WUFDUjtZQUVBLE1BQU0sSUFBSWhDLG1EQUFTQSxDQUFDO2dCQUNsQmlDLE1BQU07Z0JBQ05DLFNBQVM7Z0JBQ1RDLE9BQU9IO1lBQ1Q7UUFDRjtJQUNGO0lBRUY7O0dBRUMsR0FDRFMsbUJBQW1CMUMsa0RBQWVBLENBQy9CNEIsS0FBSyxDQUFDOUIsdUNBQVEsR0FBR2tCLElBQUksSUFDckJ5QixRQUFRLENBQUMsT0FBTyxFQUFFYixPQUFPZSxRQUFRLEVBQUU7UUFDbEMsSUFBSTtZQUNGLHNDQUFzQztZQUN0QyxNQUFNLElBQUkxQyxtREFBU0EsQ0FBQztnQkFDbEJpQyxNQUFNO2dCQUNOQyxTQUFTO1lBQ1g7UUFDRixFQUFFLE9BQU9GLE9BQU87WUFDZCxJQUFJQSxpQkFBaUJoQyxtREFBU0EsRUFBRTtnQkFDOUIsTUFBTWdDO1lBQ1I7WUFFQSxNQUFNLElBQUloQyxtREFBU0EsQ0FBQztnQkFDbEJpQyxNQUFNO2dCQUNOQyxTQUFTO2dCQUNUQyxPQUFPSDtZQUNUO1FBQ0Y7SUFDRjtJQUVGOztHQUVDLEdBQ0RXLFdBQVc1QyxrREFBZUEsQ0FBQ0ksS0FBSyxDQUFDO1FBQy9CLElBQUk7WUFDRixtQ0FBbUM7WUFDbkMsT0FBTztnQkFDTHlDLGVBQWU7Z0JBQ2ZDLGdCQUFnQixFQUFFO2dCQUNsQkMsbUJBQW1CO29CQUNqQkMscUJBQXFCO29CQUNyQkMsYUFBYTtnQkFDZjtZQUNGO1FBQ0YsRUFBRSxPQUFPaEIsT0FBTztZQUNkLE1BQU0sSUFBSWhDLG1EQUFTQSxDQUFDO2dCQUNsQmlDLE1BQU07Z0JBQ05DLFNBQVM7Z0JBQ1RDLE9BQU9IO1lBQ1Q7UUFDRjtJQUNGO0FBQ0YsR0FBRSIsInNvdXJjZXMiOlsiQzpcXHByb2plY3RzXFxhcnJha2lzXFxsaWJcXGFwaVxccm91dGVyc1xcc2VhcmNoLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogU2VhcmNoIHRSUEMgUm91dGVyXG4gKiBBUEkgZW5kcG9pbnRzIGZvciBjb252ZXJzYXRpb24gc2VhcmNoIGZ1bmN0aW9uYWxpdHlcbiAqL1xuXG5pbXBvcnQgeyB6IH0gZnJvbSAnem9kJ1xuaW1wb3J0IHsgcm91dGVyLCBwdWJsaWNQcm9jZWR1cmUgfSBmcm9tICcuLi90cnBjJ1xuaW1wb3J0IHsgVFJQQ0Vycm9yIH0gZnJvbSAnQHRycGMvc2VydmVyJ1xuXG4vLyBJbnB1dCBzY2hlbWFzXG5jb25zdCBzZWFyY2hRdWVyeVNjaGVtYSA9IHoub2JqZWN0KHtcbiAgcXVlcnk6IHouc3RyaW5nKCkubWluKDEpLm1heCg1MDApLFxuICB0eXBlOiB6LmVudW0oWyd0ZXh0JywgJ3NlbWFudGljJywgJ2h5YnJpZCddKS5kZWZhdWx0KCdoeWJyaWQnKSxcbiAgbGltaXQ6IHoubnVtYmVyKCkubWluKDEpLm1heCgxMDApLmRlZmF1bHQoMjApLFxuICBmaWx0ZXJzOiB6XG4gICAgLm9iamVjdCh7XG4gICAgICBzZXNzaW9uSWRzOiB6LmFycmF5KHouc3RyaW5nKCkudXVpZCgpKS5vcHRpb25hbCgpLFxuICAgICAgc3RhcnREYXRlOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICBlbmREYXRlOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICB0b29sc1VzZWQ6IHouYXJyYXkoei5zdHJpbmcoKSkub3B0aW9uYWwoKSxcbiAgICAgIG1pbkNvc3Q6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgICAgIG1heENvc3Q6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgICAgIHJvbGVzOiB6LmFycmF5KHouZW51bShbJ3VzZXInLCAnYXNzaXN0YW50J10pKS5vcHRpb25hbCgpLFxuICAgIH0pXG4gICAgLm9wdGlvbmFsKCksXG59KVxuXG5jb25zdCBzYXZlZFNlYXJjaFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgbmFtZTogei5zdHJpbmcoKS5taW4oMSkubWF4KDEwMCksXG4gIHF1ZXJ5OiB6LnN0cmluZygpLm1pbigxKS5tYXgoNTAwKSxcbiAgZmlsdGVyczogelxuICAgIC5vYmplY3Qoe1xuICAgICAgc3RhcnREYXRlOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICBlbmREYXRlOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICB0b29sc1VzZWQ6IHouYXJyYXkoei5zdHJpbmcoKSkub3B0aW9uYWwoKSxcbiAgICB9KVxuICAgIC5vcHRpb25hbCgpLFxufSlcblxuZXhwb3J0IGNvbnN0IHNlYXJjaFJvdXRlciA9IHJvdXRlcih7XG4gIC8qKlxuICAgKiBTZWFyY2ggY29udmVyc2F0aW9uc1xuICAgKi9cbiAgY29udmVyc2F0aW9uczogcHVibGljUHJvY2VkdXJlXG4gICAgLmlucHV0KHNlYXJjaFF1ZXJ5U2NoZW1hKVxuICAgIC5xdWVyeShhc3luYyAoeyBpbnB1dCB9KSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB7IHF1ZXJ5LCB0eXBlLCBsaW1pdCwgZmlsdGVycyB9ID0gaW5wdXRcblxuICAgICAgICAvLyBUT0RPOiBJbXBsZW1lbnQgYWN0dWFsIHNlYXJjaCBmdW5jdGlvbmFsaXR5XG4gICAgICAgIC8vIFRoaXMgd291bGQgdXNlIHBndmVjdG9yIGZvciBzZW1hbnRpYyBzZWFyY2ggYW5kIGZ1bGwtdGV4dCBmb3IgdGV4dCBzZWFyY2hcblxuICAgICAgICAvLyBQbGFjZWhvbGRlciByZXNwb25zZVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHJlc3VsdHM6IFtdLFxuICAgICAgICAgIHRvdGFsQ291bnQ6IDAsXG4gICAgICAgICAgc2VhcmNoVHlwZTogdHlwZSxcbiAgICAgICAgICBwcm9jZXNzaW5nVGltZTogMCxcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgICAgY29kZTogJ0lOVEVSTkFMX1NFUlZFUl9FUlJPUicsXG4gICAgICAgICAgbWVzc2FnZTogJ1NlYXJjaCBmYWlsZWQnLFxuICAgICAgICAgIGNhdXNlOiBlcnJvcixcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9KSxcblxuICAvKipcbiAgICogR2V0IHNlYXJjaCBzdWdnZXN0aW9uc1xuICAgKi9cbiAgc3VnZ2VzdGlvbnM6IHB1YmxpY1Byb2NlZHVyZVxuICAgIC5pbnB1dChcbiAgICAgIHoub2JqZWN0KHtcbiAgICAgICAgcXVlcnk6IHouc3RyaW5nKCkubWluKDEpLm1heCgxMDApLFxuICAgICAgICBsaW1pdDogei5udW1iZXIoKS5taW4oMSkubWF4KDEwKS5kZWZhdWx0KDUpLFxuICAgICAgfSlcbiAgICApXG4gICAgLnF1ZXJ5KGFzeW5jICh7IGlucHV0IH0pID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHsgcXVlcnksIGxpbWl0IH0gPSBpbnB1dFxuXG4gICAgICAgIC8vIFRPRE86IEltcGxlbWVudCBzZWFyY2ggc3VnZ2VzdGlvbnMgYmFzZWQgb246XG4gICAgICAgIC8vIC0gUHJldmlvdXMgc2VhcmNoZXNcbiAgICAgICAgLy8gLSBDb21tb24gdGVybXNcbiAgICAgICAgLy8gLSBUb29sIG5hbWVzXG4gICAgICAgIC8vIC0gU2Vzc2lvbiB0aXRsZXNcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Z2dlc3Rpb25zOiBbXSxcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgICAgY29kZTogJ0lOVEVSTkFMX1NFUlZFUl9FUlJPUicsXG4gICAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBnZXQgc2VhcmNoIHN1Z2dlc3Rpb25zJyxcbiAgICAgICAgICBjYXVzZTogZXJyb3IsXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSksXG5cbiAgLyoqXG4gICAqIEdldCBzYXZlZCBzZWFyY2hlc1xuICAgKi9cbiAgc2F2ZWRTZWFyY2hlczogcHVibGljUHJvY2VkdXJlLnF1ZXJ5KGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgLy8gVE9ETzogSW1wbGVtZW50IHNhdmVkIHNlYXJjaGVzIGZ1bmN0aW9uYWxpdHlcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHNlYXJjaGVzOiBbXSxcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgIGNvZGU6ICdJTlRFUk5BTF9TRVJWRVJfRVJST1InLFxuICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIGZldGNoIHNhdmVkIHNlYXJjaGVzJyxcbiAgICAgICAgY2F1c2U6IGVycm9yLFxuICAgICAgfSlcbiAgICB9XG4gIH0pLFxuXG4gIC8qKlxuICAgKiBTYXZlIHNlYXJjaFxuICAgKi9cbiAgc2F2ZVNlYXJjaDogcHVibGljUHJvY2VkdXJlXG4gICAgLmlucHV0KHNhdmVkU2VhcmNoU2NoZW1hKVxuICAgIC5tdXRhdGlvbihhc3luYyAoeyBpbnB1dCB9KSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB7IG5hbWUsIHF1ZXJ5LCBmaWx0ZXJzIH0gPSBpbnB1dFxuXG4gICAgICAgIC8vIFRPRE86IEltcGxlbWVudCBzYXZlIHNlYXJjaCBmdW5jdGlvbmFsaXR5XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xuICAgICAgICAgIGNvZGU6ICdOT1RfSU1QTEVNRU5URUQnLFxuICAgICAgICAgIG1lc3NhZ2U6ICdTYXZlIHNlYXJjaCBub3QgaW1wbGVtZW50ZWQgeWV0JyxcbiAgICAgICAgfSlcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFRSUENFcnJvcikge1xuICAgICAgICAgIHRocm93IGVycm9yXG4gICAgICAgIH1cblxuICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHtcbiAgICAgICAgICBjb2RlOiAnSU5URVJOQUxfU0VSVkVSX0VSUk9SJyxcbiAgICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIHNhdmUgc2VhcmNoJyxcbiAgICAgICAgICBjYXVzZTogZXJyb3IsXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSksXG5cbiAgLyoqXG4gICAqIERlbGV0ZSBzYXZlZCBzZWFyY2hcbiAgICovXG4gIGRlbGV0ZVNhdmVkU2VhcmNoOiBwdWJsaWNQcm9jZWR1cmVcbiAgICAuaW5wdXQoei5zdHJpbmcoKS51dWlkKCkpXG4gICAgLm11dGF0aW9uKGFzeW5jICh7IGlucHV0OiBzZWFyY2hJZCB9KSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICAvLyBUT0RPOiBJbXBsZW1lbnQgZGVsZXRlIHNhdmVkIHNlYXJjaFxuICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHtcbiAgICAgICAgICBjb2RlOiAnTk9UX0lNUExFTUVOVEVEJyxcbiAgICAgICAgICBtZXNzYWdlOiAnRGVsZXRlIHNhdmVkIHNlYXJjaCBub3QgaW1wbGVtZW50ZWQgeWV0JyxcbiAgICAgICAgfSlcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFRSUENFcnJvcikge1xuICAgICAgICAgIHRocm93IGVycm9yXG4gICAgICAgIH1cblxuICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHtcbiAgICAgICAgICBjb2RlOiAnSU5URVJOQUxfU0VSVkVSX0VSUk9SJyxcbiAgICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIGRlbGV0ZSBzYXZlZCBzZWFyY2gnLFxuICAgICAgICAgIGNhdXNlOiBlcnJvcixcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9KSxcblxuICAvKipcbiAgICogR2V0IHNlYXJjaCBhbmFseXRpY3NcbiAgICovXG4gIGFuYWx5dGljczogcHVibGljUHJvY2VkdXJlLnF1ZXJ5KGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgLy8gVE9ETzogSW1wbGVtZW50IHNlYXJjaCBhbmFseXRpY3NcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRvdGFsU2VhcmNoZXM6IDAsXG4gICAgICAgIHBvcHVsYXJRdWVyaWVzOiBbXSxcbiAgICAgICAgc2VhcmNoUGVyZm9ybWFuY2U6IHtcbiAgICAgICAgICBhdmVyYWdlUmVzcG9uc2VUaW1lOiAwLFxuICAgICAgICAgIHN1Y2Nlc3NSYXRlOiAwLFxuICAgICAgICB9LFxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHtcbiAgICAgICAgY29kZTogJ0lOVEVSTkFMX1NFUlZFUl9FUlJPUicsXG4gICAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gZmV0Y2ggc2VhcmNoIGFuYWx5dGljcycsXG4gICAgICAgIGNhdXNlOiBlcnJvcixcbiAgICAgIH0pXG4gICAgfVxuICB9KSxcbn0pXG4iXSwibmFtZXMiOlsieiIsInJvdXRlciIsInB1YmxpY1Byb2NlZHVyZSIsIlRSUENFcnJvciIsInNlYXJjaFF1ZXJ5U2NoZW1hIiwib2JqZWN0IiwicXVlcnkiLCJzdHJpbmciLCJtaW4iLCJtYXgiLCJ0eXBlIiwiZW51bSIsImRlZmF1bHQiLCJsaW1pdCIsIm51bWJlciIsImZpbHRlcnMiLCJzZXNzaW9uSWRzIiwiYXJyYXkiLCJ1dWlkIiwib3B0aW9uYWwiLCJzdGFydERhdGUiLCJlbmREYXRlIiwidG9vbHNVc2VkIiwibWluQ29zdCIsIm1heENvc3QiLCJyb2xlcyIsInNhdmVkU2VhcmNoU2NoZW1hIiwibmFtZSIsInNlYXJjaFJvdXRlciIsImNvbnZlcnNhdGlvbnMiLCJpbnB1dCIsInJlc3VsdHMiLCJ0b3RhbENvdW50Iiwic2VhcmNoVHlwZSIsInByb2Nlc3NpbmdUaW1lIiwiZXJyb3IiLCJjb2RlIiwibWVzc2FnZSIsImNhdXNlIiwic3VnZ2VzdGlvbnMiLCJzYXZlZFNlYXJjaGVzIiwic2VhcmNoZXMiLCJzYXZlU2VhcmNoIiwibXV0YXRpb24iLCJkZWxldGVTYXZlZFNlYXJjaCIsInNlYXJjaElkIiwiYW5hbHl0aWNzIiwidG90YWxTZWFyY2hlcyIsInBvcHVsYXJRdWVyaWVzIiwic2VhcmNoUGVyZm9ybWFuY2UiLCJhdmVyYWdlUmVzcG9uc2VUaW1lIiwic3VjY2Vzc1JhdGUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/api/routers/search.ts\n");

/***/ }),

/***/ "(rsc)/./lib/api/routers/sessions.ts":
/*!*************************************!*\
  !*** ./lib/api/routers/sessions.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   sessionsRouter: () => (/* binding */ sessionsRouter)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var _trpc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../trpc */ \"(rsc)/./lib/api/trpc.ts\");\n/* harmony import */ var _lib_db_queries__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/db/queries */ \"(rsc)/./lib/db/queries.ts\");\n/* harmony import */ var _trpc_server__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @trpc/server */ \"(rsc)/./node_modules/@trpc/server/dist/tracked-Blz8XOf1.mjs\");\n/**\n * Sessions tRPC Router\n * API endpoints for session management and retrieval\n */ \n\n\n\n// Input schemas\nconst sessionFiltersSchema = zod__WEBPACK_IMPORTED_MODULE_2__.object({\n    startDate: zod__WEBPACK_IMPORTED_MODULE_2__.string().optional(),\n    endDate: zod__WEBPACK_IMPORTED_MODULE_2__.string().optional(),\n    status: zod__WEBPACK_IMPORTED_MODULE_2__[\"enum\"]([\n        'active',\n        'completed',\n        'error'\n    ]).optional(),\n    minCost: zod__WEBPACK_IMPORTED_MODULE_2__.number().optional(),\n    maxCost: zod__WEBPACK_IMPORTED_MODULE_2__.number().optional(),\n    toolsUsed: zod__WEBPACK_IMPORTED_MODULE_2__.array(zod__WEBPACK_IMPORTED_MODULE_2__.string()).optional()\n});\nconst paginationSchema = zod__WEBPACK_IMPORTED_MODULE_2__.object({\n    limit: zod__WEBPACK_IMPORTED_MODULE_2__.number().min(1).max(100).default(20),\n    cursor: zod__WEBPACK_IMPORTED_MODULE_2__.string().optional()\n});\nconst sessionsRouter = (0,_trpc__WEBPACK_IMPORTED_MODULE_0__.router)({\n    /**\n   * Get paginated list of sessions with optional filters\n   */ list: _trpc__WEBPACK_IMPORTED_MODULE_0__.publicProcedure.input(zod__WEBPACK_IMPORTED_MODULE_2__.object({\n        filters: sessionFiltersSchema.optional(),\n        pagination: paginationSchema.optional()\n    })).query(async ({ input })=>{\n        try {\n            const { filters, pagination } = input;\n            const sessions = await (0,_lib_db_queries__WEBPACK_IMPORTED_MODULE_1__.getSessions)({\n                filters,\n                limit: pagination?.limit || 20,\n                cursor: pagination?.cursor\n            });\n            return {\n                sessions,\n                nextCursor: sessions.length === (pagination?.limit || 20) ? sessions[sessions.length - 1].id : null\n            };\n        } catch (error) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_3__.TRPCError({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: 'Failed to fetch sessions',\n                cause: error\n            });\n        }\n    }),\n    /**\n   * Get session by ID with full details\n   */ byId: _trpc__WEBPACK_IMPORTED_MODULE_0__.publicProcedure.input(zod__WEBPACK_IMPORTED_MODULE_2__.string().uuid()).query(async ({ input: sessionId })=>{\n        try {\n            const session = await (0,_lib_db_queries__WEBPACK_IMPORTED_MODULE_1__.getSessionById)(sessionId);\n            if (!session) {\n                throw new _trpc_server__WEBPACK_IMPORTED_MODULE_3__.TRPCError({\n                    code: 'NOT_FOUND',\n                    message: 'Session not found'\n                });\n            }\n            return session;\n        } catch (error) {\n            if (error instanceof _trpc_server__WEBPACK_IMPORTED_MODULE_3__.TRPCError) {\n                throw error;\n            }\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_3__.TRPCError({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: 'Failed to fetch session',\n                cause: error\n            });\n        }\n    }),\n    /**\n   * Get messages for a session\n   */ messages: _trpc__WEBPACK_IMPORTED_MODULE_0__.publicProcedure.input(zod__WEBPACK_IMPORTED_MODULE_2__.object({\n        sessionId: zod__WEBPACK_IMPORTED_MODULE_2__.string().uuid(),\n        limit: zod__WEBPACK_IMPORTED_MODULE_2__.number().min(1).max(100).default(50),\n        offset: zod__WEBPACK_IMPORTED_MODULE_2__.number().min(0).default(0)\n    })).query(async ({ input })=>{\n        try {\n            const { sessionId, limit, offset } = input;\n            const messages = await (0,_lib_db_queries__WEBPACK_IMPORTED_MODULE_1__.getSessionMessages)(sessionId, {\n                limit,\n                offset\n            });\n            return messages;\n        } catch (error) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_3__.TRPCError({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: 'Failed to fetch session messages',\n                cause: error\n            });\n        }\n    }),\n    /**\n   * Get session statistics\n   */ stats: _trpc__WEBPACK_IMPORTED_MODULE_0__.publicProcedure.query(async ()=>{\n        try {\n            // TODO: Implement session statistics\n            return {\n                totalSessions: 0,\n                sessionsThisWeek: 0,\n                totalMessages: 0,\n                totalCost: 0,\n                averageSessionLength: 0,\n                topTools: []\n            };\n        } catch (error) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_3__.TRPCError({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: 'Failed to fetch session statistics',\n                cause: error\n            });\n        }\n    }),\n    /**\n   * Delete session\n   */ delete: _trpc__WEBPACK_IMPORTED_MODULE_0__.publicProcedure.input(zod__WEBPACK_IMPORTED_MODULE_2__.string().uuid()).mutation(async ({ input: sessionId })=>{\n        try {\n            // TODO: Implement session deletion\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_3__.TRPCError({\n                code: 'NOT_IMPLEMENTED',\n                message: 'Session deletion not implemented yet'\n            });\n        } catch (error) {\n            if (error instanceof _trpc_server__WEBPACK_IMPORTED_MODULE_3__.TRPCError) {\n                throw error;\n            }\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_3__.TRPCError({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: 'Failed to delete session',\n                cause: error\n            });\n        }\n    }),\n    /**\n   * Export session\n   */ export: _trpc__WEBPACK_IMPORTED_MODULE_0__.publicProcedure.input(zod__WEBPACK_IMPORTED_MODULE_2__.object({\n        sessionId: zod__WEBPACK_IMPORTED_MODULE_2__.string().uuid(),\n        format: zod__WEBPACK_IMPORTED_MODULE_2__[\"enum\"]([\n            'json',\n            'markdown',\n            'pdf'\n        ]),\n        includeMetadata: zod__WEBPACK_IMPORTED_MODULE_2__.boolean().default(true)\n    })).mutation(async ({ input })=>{\n        try {\n            const { sessionId, format, includeMetadata } = input;\n            // Get session with messages\n            const session = await (0,_lib_db_queries__WEBPACK_IMPORTED_MODULE_1__.getSessionById)(sessionId);\n            if (!session) {\n                throw new _trpc_server__WEBPACK_IMPORTED_MODULE_3__.TRPCError({\n                    code: 'NOT_FOUND',\n                    message: 'Session not found'\n                });\n            }\n            const messages = await (0,_lib_db_queries__WEBPACK_IMPORTED_MODULE_1__.getSessionMessages)(sessionId, {\n                limit: 1000,\n                offset: 0\n            });\n            const exportData = {\n                session: {\n                    id: session.id,\n                    title: session.title,\n                    createdAt: session.createdAt,\n                    status: session.status,\n                    ...includeMetadata && {\n                        metadata: session.metadata\n                    }\n                },\n                messages: messages.map((msg)=>({\n                        id: msg.id,\n                        role: msg.role,\n                        content: msg.content,\n                        createdAt: msg.createdAt,\n                        ...includeMetadata && {\n                            tokens: msg.tokens,\n                            costUsd: msg.costUsd,\n                            metadata: msg.metadata\n                        }\n                    })),\n                exportedAt: new Date(),\n                format\n            };\n            // Format data based on requested format\n            let content;\n            let mimeType;\n            let filename;\n            switch(format){\n                case 'json':\n                    content = JSON.stringify(exportData, null, 2);\n                    mimeType = 'application/json';\n                    filename = `session-${sessionId}.json`;\n                    break;\n                case 'markdown':\n                    content = formatAsMarkdown(exportData);\n                    mimeType = 'text/markdown';\n                    filename = `session-${sessionId}.md`;\n                    break;\n                case 'pdf':\n                    // For MVP, we'll export as markdown and let client handle PDF conversion\n                    content = formatAsMarkdown(exportData);\n                    mimeType = 'text/markdown';\n                    filename = `session-${sessionId}.md`;\n                    break;\n                default:\n                    throw new _trpc_server__WEBPACK_IMPORTED_MODULE_3__.TRPCError({\n                        code: 'BAD_REQUEST',\n                        message: 'Unsupported export format'\n                    });\n            }\n            return {\n                content,\n                mimeType,\n                filename,\n                size: Buffer.byteLength(content, 'utf8')\n            };\n        } catch (error) {\n            if (error instanceof _trpc_server__WEBPACK_IMPORTED_MODULE_3__.TRPCError) {\n                throw error;\n            }\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_3__.TRPCError({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: 'Failed to export session',\n                cause: error\n            });\n        }\n    }),\n    /**\n   * Bulk export sessions\n   */ bulkExport: _trpc__WEBPACK_IMPORTED_MODULE_0__.publicProcedure.input(zod__WEBPACK_IMPORTED_MODULE_2__.object({\n        sessionIds: zod__WEBPACK_IMPORTED_MODULE_2__.array(zod__WEBPACK_IMPORTED_MODULE_2__.string().uuid()),\n        format: zod__WEBPACK_IMPORTED_MODULE_2__[\"enum\"]([\n            'json',\n            'markdown',\n            'pdf'\n        ]),\n        includeMetadata: zod__WEBPACK_IMPORTED_MODULE_2__.boolean().default(true)\n    })).mutation(async ({ input })=>{\n        try {\n            const { sessionIds, format, includeMetadata } = input;\n            const exportResults = [];\n            for (const sessionId of sessionIds){\n                try {\n                    const session = await (0,_lib_db_queries__WEBPACK_IMPORTED_MODULE_1__.getSessionById)(sessionId);\n                    if (!session) continue;\n                    const messages = await (0,_lib_db_queries__WEBPACK_IMPORTED_MODULE_1__.getSessionMessages)(sessionId, {\n                        limit: 1000,\n                        offset: 0\n                    });\n                    exportResults.push({\n                        session: {\n                            id: session.id,\n                            title: session.title,\n                            createdAt: session.createdAt,\n                            status: session.status,\n                            ...includeMetadata && {\n                                metadata: session.metadata\n                            }\n                        },\n                        messages: messages.map((msg)=>({\n                                id: msg.id,\n                                role: msg.role,\n                                content: msg.content,\n                                createdAt: msg.createdAt,\n                                ...includeMetadata && {\n                                    tokens: msg.tokens,\n                                    costUsd: msg.costUsd,\n                                    metadata: msg.metadata\n                                }\n                            }))\n                    });\n                } catch (error) {\n                    console.error(`Failed to export session ${sessionId}:`, error);\n                }\n            }\n            const bulkExportData = {\n                sessions: exportResults,\n                exportedAt: new Date(),\n                format,\n                totalSessions: exportResults.length\n            };\n            let content;\n            let mimeType;\n            let filename;\n            switch(format){\n                case 'json':\n                    content = JSON.stringify(bulkExportData, null, 2);\n                    mimeType = 'application/json';\n                    filename = `arrakis-conversations-${Date.now()}.json`;\n                    break;\n                case 'markdown':\n                    content = formatBulkAsMarkdown(bulkExportData);\n                    mimeType = 'text/markdown';\n                    filename = `arrakis-conversations-${Date.now()}.md`;\n                    break;\n                case 'pdf':\n                    content = formatBulkAsMarkdown(bulkExportData);\n                    mimeType = 'text/markdown';\n                    filename = `arrakis-conversations-${Date.now()}.md`;\n                    break;\n                default:\n                    throw new _trpc_server__WEBPACK_IMPORTED_MODULE_3__.TRPCError({\n                        code: 'BAD_REQUEST',\n                        message: 'Unsupported export format'\n                    });\n            }\n            return {\n                content,\n                mimeType,\n                filename,\n                size: Buffer.byteLength(content, 'utf8'),\n                exportedSessionsCount: exportResults.length\n            };\n        } catch (error) {\n            if (error instanceof _trpc_server__WEBPACK_IMPORTED_MODULE_3__.TRPCError) {\n                throw error;\n            }\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_3__.TRPCError({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: 'Failed to bulk export sessions',\n                cause: error\n            });\n        }\n    })\n});\n// Helper functions for export formatting\nfunction formatAsMarkdown(exportData) {\n    const { session, messages } = exportData;\n    let markdown = `# ${session.title || 'Untitled Conversation'}\\n\\n`;\n    markdown += `**Session ID:** ${session.id}\\n`;\n    markdown += `**Created:** ${new Date(session.createdAt).toLocaleString()}\\n`;\n    markdown += `**Status:** ${session.status}\\n\\n`;\n    if (session.metadata?.sessionInfo?.projectPath) {\n        markdown += `**Project:** ${session.metadata.sessionInfo.projectPath}\\n\\n`;\n    }\n    markdown += `---\\n\\n`;\n    for (const message of messages){\n        const role = message.role.charAt(0).toUpperCase() + message.role.slice(1);\n        markdown += `## ${role}\\n\\n`;\n        markdown += `${message.content}\\n\\n`;\n        if (message.metadata && Object.keys(message.metadata).length > 0) {\n            markdown += `*Metadata: ${JSON.stringify(message.metadata)}*\\n\\n`;\n        }\n        markdown += `---\\n\\n`;\n    }\n    markdown += `*Exported on ${new Date().toLocaleString()}*\\n`;\n    return markdown;\n}\nfunction formatBulkAsMarkdown(bulkExportData) {\n    let markdown = `# Arrakis Conversation Export\\n\\n`;\n    markdown += `**Exported:** ${new Date(bulkExportData.exportedAt).toLocaleString()}\\n`;\n    markdown += `**Total Sessions:** ${bulkExportData.totalSessions}\\n\\n`;\n    markdown += `---\\n\\n`;\n    for (const sessionData of bulkExportData.sessions){\n        const singleExport = {\n            session: sessionData.session,\n            messages: sessionData.messages,\n            exportedAt: bulkExportData.exportedAt,\n            format: bulkExportData.format\n        };\n        markdown += formatAsMarkdown(singleExport);\n        markdown += `\\n\\n`;\n    }\n    return markdown;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFjLEdBQUcsR0FBRyxDQUFDO0lBRTVELE9BQU9EO0FBQ1Q7QUFFQSxTQUFTRixxQkFBcUJGLGNBQW1CO0lBQy9DLElBQUlJLFdBQVcsQ0FBQyxpQ0FBaUMsQ0FBQztJQUNsREEsWUFBWSxDQUFDLGNBQWMsRUFBRSxJQUFJbEIsS0FBS2MsZUFBZWYsVUFBVSxFQUFFb0IsY0FBYyxHQUFHLEVBQUUsQ0FBQztJQUNyRkQsWUFBWSxDQUFDLG9CQUFvQixFQUFFSixlQUFlckMsYUFBYSxDQUFDLElBQUksQ0FBQztJQUNyRXlDLFlBQVksQ0FBQyxPQUFPLENBQUM7SUFFckIsS0FBSyxNQUFNUyxlQUFlYixlQUFlcEQsUUFBUSxDQUFFO1FBQ2pELE1BQU1rRSxlQUFlO1lBQ25CdkQsU0FBU3NELFlBQVl0RCxPQUFPO1lBQzVCQyxVQUFVcUQsWUFBWXJELFFBQVE7WUFDOUJ5QixZQUFZZSxlQUFlZixVQUFVO1lBQ3JDYixRQUFRNEIsZUFBZTVCLE1BQU07UUFDL0I7UUFFQWdDLFlBQVliLGlCQUFpQnVCO1FBQzdCVixZQUFZLENBQUMsSUFBSSxDQUFDO0lBQ3BCO0lBRUEsT0FBT0E7QUFDVCIsInNvdXJjZXMiOlsiQzpcXHByb2plY3RzXFxhcnJha2lzXFxsaWJcXGFwaVxccm91dGVyc1xcc2Vzc2lvbnMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBTZXNzaW9ucyB0UlBDIFJvdXRlclxuICogQVBJIGVuZHBvaW50cyBmb3Igc2Vzc2lvbiBtYW5hZ2VtZW50IGFuZCByZXRyaWV2YWxcbiAqL1xuXG5pbXBvcnQgeyB6IH0gZnJvbSAnem9kJ1xuaW1wb3J0IHsgcm91dGVyLCBwdWJsaWNQcm9jZWR1cmUgfSBmcm9tICcuLi90cnBjJ1xuaW1wb3J0IHtcbiAgZ2V0U2Vzc2lvbnMsXG4gIGdldFNlc3Npb25CeUlkLFxuICBnZXRTZXNzaW9uTWVzc2FnZXMsXG59IGZyb20gJ0AvbGliL2RiL3F1ZXJpZXMnXG5pbXBvcnQgeyBUUlBDRXJyb3IgfSBmcm9tICdAdHJwYy9zZXJ2ZXInXG5cbi8vIElucHV0IHNjaGVtYXNcbmNvbnN0IHNlc3Npb25GaWx0ZXJzU2NoZW1hID0gei5vYmplY3Qoe1xuICBzdGFydERhdGU6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgZW5kRGF0ZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBzdGF0dXM6IHouZW51bShbJ2FjdGl2ZScsICdjb21wbGV0ZWQnLCAnZXJyb3InXSkub3B0aW9uYWwoKSxcbiAgbWluQ29zdDogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICBtYXhDb3N0OiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gIHRvb2xzVXNlZDogei5hcnJheSh6LnN0cmluZygpKS5vcHRpb25hbCgpLFxufSlcblxuY29uc3QgcGFnaW5hdGlvblNjaGVtYSA9IHoub2JqZWN0KHtcbiAgbGltaXQ6IHoubnVtYmVyKCkubWluKDEpLm1heCgxMDApLmRlZmF1bHQoMjApLFxuICBjdXJzb3I6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pXG5cbmV4cG9ydCBjb25zdCBzZXNzaW9uc1JvdXRlciA9IHJvdXRlcih7XG4gIC8qKlxuICAgKiBHZXQgcGFnaW5hdGVkIGxpc3Qgb2Ygc2Vzc2lvbnMgd2l0aCBvcHRpb25hbCBmaWx0ZXJzXG4gICAqL1xuICBsaXN0OiBwdWJsaWNQcm9jZWR1cmVcbiAgICAuaW5wdXQoXG4gICAgICB6Lm9iamVjdCh7XG4gICAgICAgIGZpbHRlcnM6IHNlc3Npb25GaWx0ZXJzU2NoZW1hLm9wdGlvbmFsKCksXG4gICAgICAgIHBhZ2luYXRpb246IHBhZ2luYXRpb25TY2hlbWEub3B0aW9uYWwoKSxcbiAgICAgIH0pXG4gICAgKVxuICAgIC5xdWVyeShhc3luYyAoeyBpbnB1dCB9KSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB7IGZpbHRlcnMsIHBhZ2luYXRpb24gfSA9IGlucHV0XG4gICAgICAgIGNvbnN0IHNlc3Npb25zID0gYXdhaXQgZ2V0U2Vzc2lvbnMoe1xuICAgICAgICAgIGZpbHRlcnMsXG4gICAgICAgICAgbGltaXQ6IHBhZ2luYXRpb24/LmxpbWl0IHx8IDIwLFxuICAgICAgICAgIGN1cnNvcjogcGFnaW5hdGlvbj8uY3Vyc29yLFxuICAgICAgICB9KVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc2Vzc2lvbnMsXG4gICAgICAgICAgbmV4dEN1cnNvcjpcbiAgICAgICAgICAgIHNlc3Npb25zLmxlbmd0aCA9PT0gKHBhZ2luYXRpb24/LmxpbWl0IHx8IDIwKVxuICAgICAgICAgICAgICA/IHNlc3Npb25zW3Nlc3Npb25zLmxlbmd0aCAtIDFdLmlkXG4gICAgICAgICAgICAgIDogbnVsbCxcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgICAgY29kZTogJ0lOVEVSTkFMX1NFUlZFUl9FUlJPUicsXG4gICAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBmZXRjaCBzZXNzaW9ucycsXG4gICAgICAgICAgY2F1c2U6IGVycm9yLFxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0pLFxuXG4gIC8qKlxuICAgKiBHZXQgc2Vzc2lvbiBieSBJRCB3aXRoIGZ1bGwgZGV0YWlsc1xuICAgKi9cbiAgYnlJZDogcHVibGljUHJvY2VkdXJlXG4gICAgLmlucHV0KHouc3RyaW5nKCkudXVpZCgpKVxuICAgIC5xdWVyeShhc3luYyAoeyBpbnB1dDogc2Vzc2lvbklkIH0pID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uQnlJZChzZXNzaW9uSWQpXG5cbiAgICAgICAgaWYgKCFzZXNzaW9uKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgICAgICBjb2RlOiAnTk9UX0ZPVU5EJyxcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdTZXNzaW9uIG5vdCBmb3VuZCcsXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzZXNzaW9uXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBUUlBDRXJyb3IpIHtcbiAgICAgICAgICB0aHJvdyBlcnJvclxuICAgICAgICB9XG5cbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgICAgY29kZTogJ0lOVEVSTkFMX1NFUlZFUl9FUlJPUicsXG4gICAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBmZXRjaCBzZXNzaW9uJyxcbiAgICAgICAgICBjYXVzZTogZXJyb3IsXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSksXG5cbiAgLyoqXG4gICAqIEdldCBtZXNzYWdlcyBmb3IgYSBzZXNzaW9uXG4gICAqL1xuICBtZXNzYWdlczogcHVibGljUHJvY2VkdXJlXG4gICAgLmlucHV0KFxuICAgICAgei5vYmplY3Qoe1xuICAgICAgICBzZXNzaW9uSWQ6IHouc3RyaW5nKCkudXVpZCgpLFxuICAgICAgICBsaW1pdDogei5udW1iZXIoKS5taW4oMSkubWF4KDEwMCkuZGVmYXVsdCg1MCksXG4gICAgICAgIG9mZnNldDogei5udW1iZXIoKS5taW4oMCkuZGVmYXVsdCgwKSxcbiAgICAgIH0pXG4gICAgKVxuICAgIC5xdWVyeShhc3luYyAoeyBpbnB1dCB9KSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB7IHNlc3Npb25JZCwgbGltaXQsIG9mZnNldCB9ID0gaW5wdXRcbiAgICAgICAgY29uc3QgbWVzc2FnZXMgPSBhd2FpdCBnZXRTZXNzaW9uTWVzc2FnZXMoc2Vzc2lvbklkLCB7IGxpbWl0LCBvZmZzZXQgfSlcblxuICAgICAgICByZXR1cm4gbWVzc2FnZXNcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xuICAgICAgICAgIGNvZGU6ICdJTlRFUk5BTF9TRVJWRVJfRVJST1InLFxuICAgICAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gZmV0Y2ggc2Vzc2lvbiBtZXNzYWdlcycsXG4gICAgICAgICAgY2F1c2U6IGVycm9yLFxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0pLFxuXG4gIC8qKlxuICAgKiBHZXQgc2Vzc2lvbiBzdGF0aXN0aWNzXG4gICAqL1xuICBzdGF0czogcHVibGljUHJvY2VkdXJlLnF1ZXJ5KGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgLy8gVE9ETzogSW1wbGVtZW50IHNlc3Npb24gc3RhdGlzdGljc1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdG90YWxTZXNzaW9uczogMCxcbiAgICAgICAgc2Vzc2lvbnNUaGlzV2VlazogMCxcbiAgICAgICAgdG90YWxNZXNzYWdlczogMCxcbiAgICAgICAgdG90YWxDb3N0OiAwLFxuICAgICAgICBhdmVyYWdlU2Vzc2lvbkxlbmd0aDogMCxcbiAgICAgICAgdG9wVG9vbHM6IFtdLFxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHtcbiAgICAgICAgY29kZTogJ0lOVEVSTkFMX1NFUlZFUl9FUlJPUicsXG4gICAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gZmV0Y2ggc2Vzc2lvbiBzdGF0aXN0aWNzJyxcbiAgICAgICAgY2F1c2U6IGVycm9yLFxuICAgICAgfSlcbiAgICB9XG4gIH0pLFxuXG4gIC8qKlxuICAgKiBEZWxldGUgc2Vzc2lvblxuICAgKi9cbiAgZGVsZXRlOiBwdWJsaWNQcm9jZWR1cmVcbiAgICAuaW5wdXQoei5zdHJpbmcoKS51dWlkKCkpXG4gICAgLm11dGF0aW9uKGFzeW5jICh7IGlucHV0OiBzZXNzaW9uSWQgfSkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gVE9ETzogSW1wbGVtZW50IHNlc3Npb24gZGVsZXRpb25cbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgICAgY29kZTogJ05PVF9JTVBMRU1FTlRFRCcsXG4gICAgICAgICAgbWVzc2FnZTogJ1Nlc3Npb24gZGVsZXRpb24gbm90IGltcGxlbWVudGVkIHlldCcsXG4gICAgICAgIH0pXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBUUlBDRXJyb3IpIHtcbiAgICAgICAgICB0aHJvdyBlcnJvclxuICAgICAgICB9XG5cbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgICAgY29kZTogJ0lOVEVSTkFMX1NFUlZFUl9FUlJPUicsXG4gICAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBkZWxldGUgc2Vzc2lvbicsXG4gICAgICAgICAgY2F1c2U6IGVycm9yLFxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0pLFxuXG4gIC8qKlxuICAgKiBFeHBvcnQgc2Vzc2lvblxuICAgKi9cbiAgZXhwb3J0OiBwdWJsaWNQcm9jZWR1cmVcbiAgICAuaW5wdXQoXG4gICAgICB6Lm9iamVjdCh7XG4gICAgICAgIHNlc3Npb25JZDogei5zdHJpbmcoKS51dWlkKCksXG4gICAgICAgIGZvcm1hdDogei5lbnVtKFsnanNvbicsICdtYXJrZG93bicsICdwZGYnXSksXG4gICAgICAgIGluY2x1ZGVNZXRhZGF0YTogei5ib29sZWFuKCkuZGVmYXVsdCh0cnVlKSxcbiAgICAgIH0pXG4gICAgKVxuICAgIC5tdXRhdGlvbihhc3luYyAoeyBpbnB1dCB9KSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB7IHNlc3Npb25JZCwgZm9ybWF0LCBpbmNsdWRlTWV0YWRhdGEgfSA9IGlucHV0XG5cbiAgICAgICAgLy8gR2V0IHNlc3Npb24gd2l0aCBtZXNzYWdlc1xuICAgICAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2Vzc2lvbkJ5SWQoc2Vzc2lvbklkKVxuICAgICAgICBpZiAoIXNlc3Npb24pIHtcbiAgICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHtcbiAgICAgICAgICAgIGNvZGU6ICdOT1RfRk9VTkQnLFxuICAgICAgICAgICAgbWVzc2FnZTogJ1Nlc3Npb24gbm90IGZvdW5kJyxcbiAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbWVzc2FnZXMgPSBhd2FpdCBnZXRTZXNzaW9uTWVzc2FnZXMoc2Vzc2lvbklkLCB7XG4gICAgICAgICAgbGltaXQ6IDEwMDAsXG4gICAgICAgICAgb2Zmc2V0OiAwLFxuICAgICAgICB9KVxuXG4gICAgICAgIGNvbnN0IGV4cG9ydERhdGEgPSB7XG4gICAgICAgICAgc2Vzc2lvbjoge1xuICAgICAgICAgICAgaWQ6IHNlc3Npb24uaWQsXG4gICAgICAgICAgICB0aXRsZTogc2Vzc2lvbi50aXRsZSxcbiAgICAgICAgICAgIGNyZWF0ZWRBdDogc2Vzc2lvbi5jcmVhdGVkQXQsXG4gICAgICAgICAgICBzdGF0dXM6IHNlc3Npb24uc3RhdHVzLFxuICAgICAgICAgICAgLi4uKGluY2x1ZGVNZXRhZGF0YSAmJiB7IG1ldGFkYXRhOiBzZXNzaW9uLm1ldGFkYXRhIH0pLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgbWVzc2FnZXM6IG1lc3NhZ2VzLm1hcCgobXNnKSA9PiAoe1xuICAgICAgICAgICAgaWQ6IG1zZy5pZCxcbiAgICAgICAgICAgIHJvbGU6IG1zZy5yb2xlLFxuICAgICAgICAgICAgY29udGVudDogbXNnLmNvbnRlbnQsXG4gICAgICAgICAgICBjcmVhdGVkQXQ6IG1zZy5jcmVhdGVkQXQsXG4gICAgICAgICAgICAuLi4oaW5jbHVkZU1ldGFkYXRhICYmIHtcbiAgICAgICAgICAgICAgdG9rZW5zOiBtc2cudG9rZW5zLFxuICAgICAgICAgICAgICBjb3N0VXNkOiBtc2cuY29zdFVzZCxcbiAgICAgICAgICAgICAgbWV0YWRhdGE6IG1zZy5tZXRhZGF0YSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIH0pKSxcbiAgICAgICAgICBleHBvcnRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICAgIGZvcm1hdCxcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZvcm1hdCBkYXRhIGJhc2VkIG9uIHJlcXVlc3RlZCBmb3JtYXRcbiAgICAgICAgbGV0IGNvbnRlbnQ6IHN0cmluZ1xuICAgICAgICBsZXQgbWltZVR5cGU6IHN0cmluZ1xuICAgICAgICBsZXQgZmlsZW5hbWU6IHN0cmluZ1xuXG4gICAgICAgIHN3aXRjaCAoZm9ybWF0KSB7XG4gICAgICAgICAgY2FzZSAnanNvbic6XG4gICAgICAgICAgICBjb250ZW50ID0gSlNPTi5zdHJpbmdpZnkoZXhwb3J0RGF0YSwgbnVsbCwgMilcbiAgICAgICAgICAgIG1pbWVUeXBlID0gJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICBmaWxlbmFtZSA9IGBzZXNzaW9uLSR7c2Vzc2lvbklkfS5qc29uYFxuICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgIGNhc2UgJ21hcmtkb3duJzpcbiAgICAgICAgICAgIGNvbnRlbnQgPSBmb3JtYXRBc01hcmtkb3duKGV4cG9ydERhdGEpXG4gICAgICAgICAgICBtaW1lVHlwZSA9ICd0ZXh0L21hcmtkb3duJ1xuICAgICAgICAgICAgZmlsZW5hbWUgPSBgc2Vzc2lvbi0ke3Nlc3Npb25JZH0ubWRgXG4gICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgY2FzZSAncGRmJzpcbiAgICAgICAgICAgIC8vIEZvciBNVlAsIHdlJ2xsIGV4cG9ydCBhcyBtYXJrZG93biBhbmQgbGV0IGNsaWVudCBoYW5kbGUgUERGIGNvbnZlcnNpb25cbiAgICAgICAgICAgIGNvbnRlbnQgPSBmb3JtYXRBc01hcmtkb3duKGV4cG9ydERhdGEpXG4gICAgICAgICAgICBtaW1lVHlwZSA9ICd0ZXh0L21hcmtkb3duJ1xuICAgICAgICAgICAgZmlsZW5hbWUgPSBgc2Vzc2lvbi0ke3Nlc3Npb25JZH0ubWRgXG4gICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xuICAgICAgICAgICAgICBjb2RlOiAnQkFEX1JFUVVFU1QnLFxuICAgICAgICAgICAgICBtZXNzYWdlOiAnVW5zdXBwb3J0ZWQgZXhwb3J0IGZvcm1hdCcsXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBjb250ZW50LFxuICAgICAgICAgIG1pbWVUeXBlLFxuICAgICAgICAgIGZpbGVuYW1lLFxuICAgICAgICAgIHNpemU6IEJ1ZmZlci5ieXRlTGVuZ3RoKGNvbnRlbnQsICd1dGY4JyksXG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFRSUENFcnJvcikge1xuICAgICAgICAgIHRocm93IGVycm9yXG4gICAgICAgIH1cblxuICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHtcbiAgICAgICAgICBjb2RlOiAnSU5URVJOQUxfU0VSVkVSX0VSUk9SJyxcbiAgICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIGV4cG9ydCBzZXNzaW9uJyxcbiAgICAgICAgICBjYXVzZTogZXJyb3IsXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSksXG5cbiAgLyoqXG4gICAqIEJ1bGsgZXhwb3J0IHNlc3Npb25zXG4gICAqL1xuICBidWxrRXhwb3J0OiBwdWJsaWNQcm9jZWR1cmVcbiAgICAuaW5wdXQoXG4gICAgICB6Lm9iamVjdCh7XG4gICAgICAgIHNlc3Npb25JZHM6IHouYXJyYXkoei5zdHJpbmcoKS51dWlkKCkpLFxuICAgICAgICBmb3JtYXQ6IHouZW51bShbJ2pzb24nLCAnbWFya2Rvd24nLCAncGRmJ10pLFxuICAgICAgICBpbmNsdWRlTWV0YWRhdGE6IHouYm9vbGVhbigpLmRlZmF1bHQodHJ1ZSksXG4gICAgICB9KVxuICAgIClcbiAgICAubXV0YXRpb24oYXN5bmMgKHsgaW5wdXQgfSkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgeyBzZXNzaW9uSWRzLCBmb3JtYXQsIGluY2x1ZGVNZXRhZGF0YSB9ID0gaW5wdXRcblxuICAgICAgICBjb25zdCBleHBvcnRSZXN1bHRzID0gW11cblxuICAgICAgICBmb3IgKGNvbnN0IHNlc3Npb25JZCBvZiBzZXNzaW9uSWRzKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uQnlJZChzZXNzaW9uSWQpXG4gICAgICAgICAgICBpZiAoIXNlc3Npb24pIGNvbnRpbnVlXG5cbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VzID0gYXdhaXQgZ2V0U2Vzc2lvbk1lc3NhZ2VzKHNlc3Npb25JZCwge1xuICAgICAgICAgICAgICBsaW1pdDogMTAwMCxcbiAgICAgICAgICAgICAgb2Zmc2V0OiAwLFxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgZXhwb3J0UmVzdWx0cy5wdXNoKHtcbiAgICAgICAgICAgICAgc2Vzc2lvbjoge1xuICAgICAgICAgICAgICAgIGlkOiBzZXNzaW9uLmlkLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBzZXNzaW9uLnRpdGxlLFxuICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogc2Vzc2lvbi5jcmVhdGVkQXQsXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBzZXNzaW9uLnN0YXR1cyxcbiAgICAgICAgICAgICAgICAuLi4oaW5jbHVkZU1ldGFkYXRhICYmIHsgbWV0YWRhdGE6IHNlc3Npb24ubWV0YWRhdGEgfSksXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIG1lc3NhZ2VzOiBtZXNzYWdlcy5tYXAoKG1zZykgPT4gKHtcbiAgICAgICAgICAgICAgICBpZDogbXNnLmlkLFxuICAgICAgICAgICAgICAgIHJvbGU6IG1zZy5yb2xlLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IG1zZy5jb250ZW50LFxuICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogbXNnLmNyZWF0ZWRBdCxcbiAgICAgICAgICAgICAgICAuLi4oaW5jbHVkZU1ldGFkYXRhICYmIHtcbiAgICAgICAgICAgICAgICAgIHRva2VuczogbXNnLnRva2VucyxcbiAgICAgICAgICAgICAgICAgIGNvc3RVc2Q6IG1zZy5jb3N0VXNkLFxuICAgICAgICAgICAgICAgICAgbWV0YWRhdGE6IG1zZy5tZXRhZGF0YSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGV4cG9ydCBzZXNzaW9uICR7c2Vzc2lvbklkfTpgLCBlcnJvcilcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBidWxrRXhwb3J0RGF0YSA9IHtcbiAgICAgICAgICBzZXNzaW9uczogZXhwb3J0UmVzdWx0cyxcbiAgICAgICAgICBleHBvcnRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICAgIGZvcm1hdCxcbiAgICAgICAgICB0b3RhbFNlc3Npb25zOiBleHBvcnRSZXN1bHRzLmxlbmd0aCxcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBjb250ZW50OiBzdHJpbmdcbiAgICAgICAgbGV0IG1pbWVUeXBlOiBzdHJpbmdcbiAgICAgICAgbGV0IGZpbGVuYW1lOiBzdHJpbmdcblxuICAgICAgICBzd2l0Y2ggKGZvcm1hdCkge1xuICAgICAgICAgIGNhc2UgJ2pzb24nOlxuICAgICAgICAgICAgY29udGVudCA9IEpTT04uc3RyaW5naWZ5KGJ1bGtFeHBvcnREYXRhLCBudWxsLCAyKVxuICAgICAgICAgICAgbWltZVR5cGUgPSAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgICAgIGZpbGVuYW1lID0gYGFycmFraXMtY29udmVyc2F0aW9ucy0ke0RhdGUubm93KCl9Lmpzb25gXG4gICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgY2FzZSAnbWFya2Rvd24nOlxuICAgICAgICAgICAgY29udGVudCA9IGZvcm1hdEJ1bGtBc01hcmtkb3duKGJ1bGtFeHBvcnREYXRhKVxuICAgICAgICAgICAgbWltZVR5cGUgPSAndGV4dC9tYXJrZG93bidcbiAgICAgICAgICAgIGZpbGVuYW1lID0gYGFycmFraXMtY29udmVyc2F0aW9ucy0ke0RhdGUubm93KCl9Lm1kYFxuICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgIGNhc2UgJ3BkZic6XG4gICAgICAgICAgICBjb250ZW50ID0gZm9ybWF0QnVsa0FzTWFya2Rvd24oYnVsa0V4cG9ydERhdGEpXG4gICAgICAgICAgICBtaW1lVHlwZSA9ICd0ZXh0L21hcmtkb3duJ1xuICAgICAgICAgICAgZmlsZW5hbWUgPSBgYXJyYWtpcy1jb252ZXJzYXRpb25zLSR7RGF0ZS5ub3coKX0ubWRgXG4gICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xuICAgICAgICAgICAgICBjb2RlOiAnQkFEX1JFUVVFU1QnLFxuICAgICAgICAgICAgICBtZXNzYWdlOiAnVW5zdXBwb3J0ZWQgZXhwb3J0IGZvcm1hdCcsXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBjb250ZW50LFxuICAgICAgICAgIG1pbWVUeXBlLFxuICAgICAgICAgIGZpbGVuYW1lLFxuICAgICAgICAgIHNpemU6IEJ1ZmZlci5ieXRlTGVuZ3RoKGNvbnRlbnQsICd1dGY4JyksXG4gICAgICAgICAgZXhwb3J0ZWRTZXNzaW9uc0NvdW50OiBleHBvcnRSZXN1bHRzLmxlbmd0aCxcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgVFJQQ0Vycm9yKSB7XG4gICAgICAgICAgdGhyb3cgZXJyb3JcbiAgICAgICAgfVxuXG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xuICAgICAgICAgIGNvZGU6ICdJTlRFUk5BTF9TRVJWRVJfRVJST1InLFxuICAgICAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gYnVsayBleHBvcnQgc2Vzc2lvbnMnLFxuICAgICAgICAgIGNhdXNlOiBlcnJvcixcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9KSxcbn0pXG5cbi8vIEhlbHBlciBmdW5jdGlvbnMgZm9yIGV4cG9ydCBmb3JtYXR0aW5nXG5mdW5jdGlvbiBmb3JtYXRBc01hcmtkb3duKGV4cG9ydERhdGE6IGFueSk6IHN0cmluZyB7XG4gIGNvbnN0IHsgc2Vzc2lvbiwgbWVzc2FnZXMgfSA9IGV4cG9ydERhdGFcblxuICBsZXQgbWFya2Rvd24gPSBgIyAke3Nlc3Npb24udGl0bGUgfHwgJ1VudGl0bGVkIENvbnZlcnNhdGlvbid9XFxuXFxuYFxuICBtYXJrZG93biArPSBgKipTZXNzaW9uIElEOioqICR7c2Vzc2lvbi5pZH1cXG5gXG4gIG1hcmtkb3duICs9IGAqKkNyZWF0ZWQ6KiogJHtuZXcgRGF0ZShzZXNzaW9uLmNyZWF0ZWRBdCkudG9Mb2NhbGVTdHJpbmcoKX1cXG5gXG4gIG1hcmtkb3duICs9IGAqKlN0YXR1czoqKiAke3Nlc3Npb24uc3RhdHVzfVxcblxcbmBcblxuICBpZiAoc2Vzc2lvbi5tZXRhZGF0YT8uc2Vzc2lvbkluZm8/LnByb2plY3RQYXRoKSB7XG4gICAgbWFya2Rvd24gKz0gYCoqUHJvamVjdDoqKiAke3Nlc3Npb24ubWV0YWRhdGEuc2Vzc2lvbkluZm8ucHJvamVjdFBhdGh9XFxuXFxuYFxuICB9XG5cbiAgbWFya2Rvd24gKz0gYC0tLVxcblxcbmBcblxuICBmb3IgKGNvbnN0IG1lc3NhZ2Ugb2YgbWVzc2FnZXMpIHtcbiAgICBjb25zdCByb2xlID0gbWVzc2FnZS5yb2xlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgbWVzc2FnZS5yb2xlLnNsaWNlKDEpXG4gICAgbWFya2Rvd24gKz0gYCMjICR7cm9sZX1cXG5cXG5gXG4gICAgbWFya2Rvd24gKz0gYCR7bWVzc2FnZS5jb250ZW50fVxcblxcbmBcblxuICAgIGlmIChtZXNzYWdlLm1ldGFkYXRhICYmIE9iamVjdC5rZXlzKG1lc3NhZ2UubWV0YWRhdGEpLmxlbmd0aCA+IDApIHtcbiAgICAgIG1hcmtkb3duICs9IGAqTWV0YWRhdGE6ICR7SlNPTi5zdHJpbmdpZnkobWVzc2FnZS5tZXRhZGF0YSl9KlxcblxcbmBcbiAgICB9XG5cbiAgICBtYXJrZG93biArPSBgLS0tXFxuXFxuYFxuICB9XG5cbiAgbWFya2Rvd24gKz0gYCpFeHBvcnRlZCBvbiAke25ldyBEYXRlKCkudG9Mb2NhbGVTdHJpbmcoKX0qXFxuYFxuXG4gIHJldHVybiBtYXJrZG93blxufVxuXG5mdW5jdGlvbiBmb3JtYXRCdWxrQXNNYXJrZG93bihidWxrRXhwb3J0RGF0YTogYW55KTogc3RyaW5nIHtcbiAgbGV0IG1hcmtkb3duID0gYCMgQXJyYWtpcyBDb252ZXJzYXRpb24gRXhwb3J0XFxuXFxuYFxuICBtYXJrZG93biArPSBgKipFeHBvcnRlZDoqKiAke25ldyBEYXRlKGJ1bGtFeHBvcnREYXRhLmV4cG9ydGVkQXQpLnRvTG9jYWxlU3RyaW5nKCl9XFxuYFxuICBtYXJrZG93biArPSBgKipUb3RhbCBTZXNzaW9uczoqKiAke2J1bGtFeHBvcnREYXRhLnRvdGFsU2Vzc2lvbnN9XFxuXFxuYFxuICBtYXJrZG93biArPSBgLS0tXFxuXFxuYFxuXG4gIGZvciAoY29uc3Qgc2Vzc2lvbkRhdGEgb2YgYnVsa0V4cG9ydERhdGEuc2Vzc2lvbnMpIHtcbiAgICBjb25zdCBzaW5nbGVFeHBvcnQgPSB7XG4gICAgICBzZXNzaW9uOiBzZXNzaW9uRGF0YS5zZXNzaW9uLFxuICAgICAgbWVzc2FnZXM6IHNlc3Npb25EYXRhLm1lc3NhZ2VzLFxuICAgICAgZXhwb3J0ZWRBdDogYnVsa0V4cG9ydERhdGEuZXhwb3J0ZWRBdCxcbiAgICAgIGZvcm1hdDogYnVsa0V4cG9ydERhdGEuZm9ybWF0LFxuICAgIH1cblxuICAgIG1hcmtkb3duICs9IGZvcm1hdEFzTWFya2Rvd24oc2luZ2xlRXhwb3J0KVxuICAgIG1hcmtkb3duICs9IGBcXG5cXG5gXG4gIH1cblxuICByZXR1cm4gbWFya2Rvd25cbn1cbiJdLCJuYW1lcyI6WyJ6Iiwicm91dGVyIiwicHVibGljUHJvY2VkdXJlIiwiZ2V0U2Vzc2lvbnMiLCJnZXRTZXNzaW9uQnlJZCIsImdldFNlc3Npb25NZXNzYWdlcyIsIlRSUENFcnJvciIsInNlc3Npb25GaWx0ZXJzU2NoZW1hIiwib2JqZWN0Iiwic3RhcnREYXRlIiwic3RyaW5nIiwib3B0aW9uYWwiLCJlbmREYXRlIiwic3RhdHVzIiwiZW51bSIsIm1pbkNvc3QiLCJudW1iZXIiLCJtYXhDb3N0IiwidG9vbHNVc2VkIiwiYXJyYXkiLCJwYWdpbmF0aW9uU2NoZW1hIiwibGltaXQiLCJtaW4iLCJtYXgiLCJkZWZhdWx0IiwiY3Vyc29yIiwic2Vzc2lvbnNSb3V0ZXIiLCJsaXN0IiwiaW5wdXQiLCJmaWx0ZXJzIiwicGFnaW5hdGlvbiIsInF1ZXJ5Iiwic2Vzc2lvbnMiLCJuZXh0Q3Vyc29yIiwibGVuZ3RoIiwiaWQiLCJlcnJvciIsImNvZGUiLCJtZXNzYWdlIiwiY2F1c2UiLCJieUlkIiwidXVpZCIsInNlc3Npb25JZCIsInNlc3Npb24iLCJtZXNzYWdlcyIsIm9mZnNldCIsInN0YXRzIiwidG90YWxTZXNzaW9ucyIsInNlc3Npb25zVGhpc1dlZWsiLCJ0b3RhbE1lc3NhZ2VzIiwidG90YWxDb3N0IiwiYXZlcmFnZVNlc3Npb25MZW5ndGgiLCJ0b3BUb29scyIsImRlbGV0ZSIsIm11dGF0aW9uIiwiZXhwb3J0IiwiZm9ybWF0IiwiaW5jbHVkZU1ldGFkYXRhIiwiYm9vbGVhbiIsImV4cG9ydERhdGEiLCJ0aXRsZSIsImNyZWF0ZWRBdCIsIm1ldGFkYXRhIiwibWFwIiwibXNnIiwicm9sZSIsImNvbnRlbnQiLCJ0b2tlbnMiLCJjb3N0VXNkIiwiZXhwb3J0ZWRBdCIsIkRhdGUiLCJtaW1lVHlwZSIsImZpbGVuYW1lIiwiSlNPTiIsInN0cmluZ2lmeSIsImZvcm1hdEFzTWFya2Rvd24iLCJzaXplIiwiQnVmZmVyIiwiYnl0ZUxlbmd0aCIsImJ1bGtFeHBvcnQiLCJzZXNzaW9uSWRzIiwiZXhwb3J0UmVzdWx0cyIsInB1c2giLCJjb25zb2xlIiwiYnVsa0V4cG9ydERhdGEiLCJub3ciLCJmb3JtYXRCdWxrQXNNYXJrZG93biIsImV4cG9ydGVkU2Vzc2lvbnNDb3VudCIsIm1hcmtkb3duIiwidG9Mb2NhbGVTdHJpbmciLCJzZXNzaW9uSW5mbyIsInByb2plY3RQYXRoIiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJzbGljZSIsIk9iamVjdCIsImtleXMiLCJzZXNzaW9uRGF0YSIsInNpbmdsZUV4cG9ydCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/api/routers/sessions.ts\n");

/***/ }),

/***/ "(rsc)/./lib/api/routers/templates.ts":
/*!**************************************!*\
  !*** ./lib/api/routers/templates.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   templatesRouter: () => (/* binding */ templatesRouter)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var _trpc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../trpc */ \"(rsc)/./lib/api/trpc.ts\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./lib/db/index.ts\");\n/* harmony import */ var _lib_db_schema__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/db/schema */ \"(rsc)/./lib/db/schema.ts\");\n/* harmony import */ var _trpc_server__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @trpc/server */ \"(rsc)/./node_modules/@trpc/server/dist/tracked-Blz8XOf1.mjs\");\n/* harmony import */ var drizzle_orm__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! drizzle-orm */ \"(rsc)/./node_modules/drizzle-orm/sql/expressions/conditions.js\");\n/* harmony import */ var drizzle_orm__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! drizzle-orm */ \"(rsc)/./node_modules/drizzle-orm/sql/expressions/select.js\");\n/* harmony import */ var drizzle_orm__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! drizzle-orm */ \"(rsc)/./node_modules/drizzle-orm/sql/sql.js\");\n/**\n * Templates tRPC Router\n * API endpoints for conversation template management\n */ \n\n\n\n\n\n// Input schemas\nconst templateCreateSchema = zod__WEBPACK_IMPORTED_MODULE_3__.object({\n    name: zod__WEBPACK_IMPORTED_MODULE_3__.string().min(1).max(200),\n    description: zod__WEBPACK_IMPORTED_MODULE_3__.string().optional(),\n    template: zod__WEBPACK_IMPORTED_MODULE_3__.string().min(1),\n    category: zod__WEBPACK_IMPORTED_MODULE_3__.string().default('general'),\n    isPublic: zod__WEBPACK_IMPORTED_MODULE_3__.boolean().default(false),\n    userId: zod__WEBPACK_IMPORTED_MODULE_3__.number().default(1)\n});\nconst templateUpdateSchema = zod__WEBPACK_IMPORTED_MODULE_3__.object({\n    id: zod__WEBPACK_IMPORTED_MODULE_3__.number(),\n    name: zod__WEBPACK_IMPORTED_MODULE_3__.string().min(1).max(200).optional(),\n    description: zod__WEBPACK_IMPORTED_MODULE_3__.string().optional(),\n    template: zod__WEBPACK_IMPORTED_MODULE_3__.string().min(1).optional(),\n    category: zod__WEBPACK_IMPORTED_MODULE_3__.string().optional(),\n    isPublic: zod__WEBPACK_IMPORTED_MODULE_3__.boolean().optional()\n});\nconst templateFiltersSchema = zod__WEBPACK_IMPORTED_MODULE_3__.object({\n    category: zod__WEBPACK_IMPORTED_MODULE_3__.string().optional(),\n    isPublic: zod__WEBPACK_IMPORTED_MODULE_3__.boolean().optional(),\n    userId: zod__WEBPACK_IMPORTED_MODULE_3__.number().optional(),\n    search: zod__WEBPACK_IMPORTED_MODULE_3__.string().optional()\n});\nconst templatesRouter = (0,_trpc__WEBPACK_IMPORTED_MODULE_0__.router)({\n    /**\n   * Get all templates with optional filters\n   */ list: _trpc__WEBPACK_IMPORTED_MODULE_0__.publicProcedure.input(templateFiltersSchema.optional()).query(async ({ input })=>{\n        try {\n            const filters = input || {};\n            // Build where conditions\n            const conditions = [];\n            if (filters.category) {\n                conditions.push((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_4__.eq)(_lib_db_schema__WEBPACK_IMPORTED_MODULE_2__.conversationTemplates.category, filters.category));\n            }\n            if (filters.isPublic !== undefined) {\n                conditions.push((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_4__.eq)(_lib_db_schema__WEBPACK_IMPORTED_MODULE_2__.conversationTemplates.isPublic, filters.isPublic));\n            }\n            if (filters.userId) {\n                conditions.push((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_4__.eq)(_lib_db_schema__WEBPACK_IMPORTED_MODULE_2__.conversationTemplates.userId, filters.userId));\n            }\n            if (filters.search) {\n                conditions.push((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_4__.or)((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_4__.like)(_lib_db_schema__WEBPACK_IMPORTED_MODULE_2__.conversationTemplates.name, `%${filters.search}%`), (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_4__.like)(_lib_db_schema__WEBPACK_IMPORTED_MODULE_2__.conversationTemplates.description, `%${filters.search}%`), (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_4__.like)(_lib_db_schema__WEBPACK_IMPORTED_MODULE_2__.conversationTemplates.template, `%${filters.search}%`)));\n            }\n            // Build final query\n            const baseQuery = _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.select().from(_lib_db_schema__WEBPACK_IMPORTED_MODULE_2__.conversationTemplates);\n            const finalQuery = conditions.length > 0 ? baseQuery.where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_4__.and)(...conditions)) : baseQuery;\n            const templates = await finalQuery.orderBy((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.desc)(_lib_db_schema__WEBPACK_IMPORTED_MODULE_2__.conversationTemplates.usageCount), (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.desc)(_lib_db_schema__WEBPACK_IMPORTED_MODULE_2__.conversationTemplates.createdAt));\n            return templates;\n        } catch (error) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_6__.TRPCError({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: 'Failed to fetch templates',\n                cause: error\n            });\n        }\n    }),\n    /**\n   * Get template by ID\n   */ byId: _trpc__WEBPACK_IMPORTED_MODULE_0__.publicProcedure.input(zod__WEBPACK_IMPORTED_MODULE_3__.number()).query(async ({ input: id })=>{\n        try {\n            const template = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.select().from(_lib_db_schema__WEBPACK_IMPORTED_MODULE_2__.conversationTemplates).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_4__.eq)(_lib_db_schema__WEBPACK_IMPORTED_MODULE_2__.conversationTemplates.id, id)).limit(1);\n            if (template.length === 0) {\n                throw new _trpc_server__WEBPACK_IMPORTED_MODULE_6__.TRPCError({\n                    code: 'NOT_FOUND',\n                    message: 'Template not found'\n                });\n            }\n            return template[0];\n        } catch (error) {\n            if (error instanceof _trpc_server__WEBPACK_IMPORTED_MODULE_6__.TRPCError) {\n                throw error;\n            }\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_6__.TRPCError({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: 'Failed to fetch template',\n                cause: error\n            });\n        }\n    }),\n    /**\n   * Create new template\n   */ create: _trpc__WEBPACK_IMPORTED_MODULE_0__.publicProcedure.input(templateCreateSchema).mutation(async ({ input })=>{\n        try {\n            const newTemplate = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.insert(_lib_db_schema__WEBPACK_IMPORTED_MODULE_2__.conversationTemplates).values({\n                ...input,\n                createdAt: new Date(),\n                updatedAt: new Date()\n            }).returning();\n            return newTemplate[0];\n        } catch (error) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_6__.TRPCError({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: 'Failed to create template',\n                cause: error\n            });\n        }\n    }),\n    /**\n   * Update template\n   */ update: _trpc__WEBPACK_IMPORTED_MODULE_0__.publicProcedure.input(templateUpdateSchema).mutation(async ({ input })=>{\n        try {\n            const { id, ...updateData } = input;\n            const updatedTemplate = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.update(_lib_db_schema__WEBPACK_IMPORTED_MODULE_2__.conversationTemplates).set({\n                ...updateData,\n                updatedAt: new Date()\n            }).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_4__.eq)(_lib_db_schema__WEBPACK_IMPORTED_MODULE_2__.conversationTemplates.id, id)).returning();\n            if (updatedTemplate.length === 0) {\n                throw new _trpc_server__WEBPACK_IMPORTED_MODULE_6__.TRPCError({\n                    code: 'NOT_FOUND',\n                    message: 'Template not found'\n                });\n            }\n            return updatedTemplate[0];\n        } catch (error) {\n            if (error instanceof _trpc_server__WEBPACK_IMPORTED_MODULE_6__.TRPCError) {\n                throw error;\n            }\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_6__.TRPCError({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: 'Failed to update template',\n                cause: error\n            });\n        }\n    }),\n    /**\n   * Delete template\n   */ delete: _trpc__WEBPACK_IMPORTED_MODULE_0__.publicProcedure.input(zod__WEBPACK_IMPORTED_MODULE_3__.number()).mutation(async ({ input: id })=>{\n        try {\n            const deletedTemplate = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.delete(_lib_db_schema__WEBPACK_IMPORTED_MODULE_2__.conversationTemplates).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_4__.eq)(_lib_db_schema__WEBPACK_IMPORTED_MODULE_2__.conversationTemplates.id, id)).returning();\n            if (deletedTemplate.length === 0) {\n                throw new _trpc_server__WEBPACK_IMPORTED_MODULE_6__.TRPCError({\n                    code: 'NOT_FOUND',\n                    message: 'Template not found'\n                });\n            }\n            return {\n                success: true\n            };\n        } catch (error) {\n            if (error instanceof _trpc_server__WEBPACK_IMPORTED_MODULE_6__.TRPCError) {\n                throw error;\n            }\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_6__.TRPCError({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: 'Failed to delete template',\n                cause: error\n            });\n        }\n    }),\n    /**\n   * Use template (increment usage count and return processed template)\n   */ use: _trpc__WEBPACK_IMPORTED_MODULE_0__.publicProcedure.input(zod__WEBPACK_IMPORTED_MODULE_3__.object({\n        id: zod__WEBPACK_IMPORTED_MODULE_3__.number(),\n        variables: zod__WEBPACK_IMPORTED_MODULE_3__.record(zod__WEBPACK_IMPORTED_MODULE_3__.string()).optional()\n    })).mutation(async ({ input })=>{\n        try {\n            const { id, variables = {} } = input;\n            // Get template\n            const template = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.select().from(_lib_db_schema__WEBPACK_IMPORTED_MODULE_2__.conversationTemplates).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_4__.eq)(_lib_db_schema__WEBPACK_IMPORTED_MODULE_2__.conversationTemplates.id, id)).limit(1);\n            if (template.length === 0) {\n                throw new _trpc_server__WEBPACK_IMPORTED_MODULE_6__.TRPCError({\n                    code: 'NOT_FOUND',\n                    message: 'Template not found'\n                });\n            }\n            const foundTemplate = template[0];\n            // Increment usage count\n            await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.update(_lib_db_schema__WEBPACK_IMPORTED_MODULE_2__.conversationTemplates).set({\n                usageCount: (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.sql)`${_lib_db_schema__WEBPACK_IMPORTED_MODULE_2__.conversationTemplates.usageCount} + 1`,\n                updatedAt: new Date()\n            }).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_4__.eq)(_lib_db_schema__WEBPACK_IMPORTED_MODULE_2__.conversationTemplates.id, id));\n            // Process template with variables\n            let processedTemplate = foundTemplate.template;\n            // Replace variables in template (e.g., {{variable}} with actual values)\n            for (const [key, value] of Object.entries(variables)){\n                const placeholder = `{{${key}}}`;\n                processedTemplate = processedTemplate.replace(new RegExp(placeholder, 'g'), value);\n            }\n            return {\n                ...foundTemplate,\n                processedTemplate,\n                usageCount: (foundTemplate.usageCount || 0) + 1\n            };\n        } catch (error) {\n            if (error instanceof _trpc_server__WEBPACK_IMPORTED_MODULE_6__.TRPCError) {\n                throw error;\n            }\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_6__.TRPCError({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: 'Failed to use template',\n                cause: error\n            });\n        }\n    }),\n    /**\n   * Get template categories\n   */ categories: _trpc__WEBPACK_IMPORTED_MODULE_0__.publicProcedure.query(async ()=>{\n        try {\n            const categories = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.select({\n                category: _lib_db_schema__WEBPACK_IMPORTED_MODULE_2__.conversationTemplates.category,\n                count: (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.sql)`count(*)`\n            }).from(_lib_db_schema__WEBPACK_IMPORTED_MODULE_2__.conversationTemplates).groupBy(_lib_db_schema__WEBPACK_IMPORTED_MODULE_2__.conversationTemplates.category).orderBy((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.desc)((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.sql)`count(*)`));\n            return categories;\n        } catch (error) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_6__.TRPCError({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: 'Failed to fetch categories',\n                cause: error\n            });\n        }\n    }),\n    /**\n   * Get popular templates (by usage count)\n   */ popular: _trpc__WEBPACK_IMPORTED_MODULE_0__.publicProcedure.input(zod__WEBPACK_IMPORTED_MODULE_3__.object({\n        limit: zod__WEBPACK_IMPORTED_MODULE_3__.number().default(10)\n    })).query(async ({ input })=>{\n        try {\n            const popularTemplates = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.select().from(_lib_db_schema__WEBPACK_IMPORTED_MODULE_2__.conversationTemplates).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_4__.eq)(_lib_db_schema__WEBPACK_IMPORTED_MODULE_2__.conversationTemplates.isPublic, true)).orderBy((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.desc)(_lib_db_schema__WEBPACK_IMPORTED_MODULE_2__.conversationTemplates.usageCount)).limit(input.limit);\n            return popularTemplates;\n        } catch (error) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_6__.TRPCError({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: 'Failed to fetch popular templates',\n                cause: error\n            });\n        }\n    })\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFDVEMsT0FBT0g7WUFDVDtRQUNGO0lBQ0Y7QUFDSixHQUFFIiwic291cmNlcyI6WyJDOlxccHJvamVjdHNcXGFycmFraXNcXGxpYlxcYXBpXFxyb3V0ZXJzXFx0ZW1wbGF0ZXMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBUZW1wbGF0ZXMgdFJQQyBSb3V0ZXJcbiAqIEFQSSBlbmRwb2ludHMgZm9yIGNvbnZlcnNhdGlvbiB0ZW1wbGF0ZSBtYW5hZ2VtZW50XG4gKi9cblxuaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCdcbmltcG9ydCB7IHJvdXRlciwgcHVibGljUHJvY2VkdXJlIH0gZnJvbSAnLi4vdHJwYydcbmltcG9ydCB7IGRiIH0gZnJvbSAnQC9saWIvZGInXG5pbXBvcnQgeyBjb252ZXJzYXRpb25UZW1wbGF0ZXMgfSBmcm9tICdAL2xpYi9kYi9zY2hlbWEnXG5pbXBvcnQgeyBUUlBDRXJyb3IgfSBmcm9tICdAdHJwYy9zZXJ2ZXInXG5pbXBvcnQgeyBlcSwgYW5kLCBvciwgbGlrZSwgZGVzYywgc3FsIH0gZnJvbSAnZHJpenpsZS1vcm0nXG5cbi8vIElucHV0IHNjaGVtYXNcbmNvbnN0IHRlbXBsYXRlQ3JlYXRlU2NoZW1hID0gei5vYmplY3Qoe1xuICBuYW1lOiB6LnN0cmluZygpLm1pbigxKS5tYXgoMjAwKSxcbiAgZGVzY3JpcHRpb246IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgdGVtcGxhdGU6IHouc3RyaW5nKCkubWluKDEpLFxuICBjYXRlZ29yeTogei5zdHJpbmcoKS5kZWZhdWx0KCdnZW5lcmFsJyksXG4gIGlzUHVibGljOiB6LmJvb2xlYW4oKS5kZWZhdWx0KGZhbHNlKSxcbiAgdXNlcklkOiB6Lm51bWJlcigpLmRlZmF1bHQoMSksIC8vIEZvciBub3csIGRlZmF1bHQgdG8gdXNlciAxXG59KVxuXG5jb25zdCB0ZW1wbGF0ZVVwZGF0ZVNjaGVtYSA9IHoub2JqZWN0KHtcbiAgaWQ6IHoubnVtYmVyKCksXG4gIG5hbWU6IHouc3RyaW5nKCkubWluKDEpLm1heCgyMDApLm9wdGlvbmFsKCksXG4gIGRlc2NyaXB0aW9uOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIHRlbXBsYXRlOiB6LnN0cmluZygpLm1pbigxKS5vcHRpb25hbCgpLFxuICBjYXRlZ29yeTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBpc1B1YmxpYzogei5ib29sZWFuKCkub3B0aW9uYWwoKSxcbn0pXG5cbmNvbnN0IHRlbXBsYXRlRmlsdGVyc1NjaGVtYSA9IHoub2JqZWN0KHtcbiAgY2F0ZWdvcnk6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgaXNQdWJsaWM6IHouYm9vbGVhbigpLm9wdGlvbmFsKCksXG4gIHVzZXJJZDogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICBzZWFyY2g6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pXG5cbmV4cG9ydCBjb25zdCB0ZW1wbGF0ZXNSb3V0ZXIgPSByb3V0ZXIoe1xuICAvKipcbiAgICogR2V0IGFsbCB0ZW1wbGF0ZXMgd2l0aCBvcHRpb25hbCBmaWx0ZXJzXG4gICAqL1xuICBsaXN0OiBwdWJsaWNQcm9jZWR1cmVcbiAgICAuaW5wdXQodGVtcGxhdGVGaWx0ZXJzU2NoZW1hLm9wdGlvbmFsKCkpXG4gICAgLnF1ZXJ5KGFzeW5jICh7IGlucHV0IH0pID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGZpbHRlcnMgPSBpbnB1dCB8fCB7fVxuXG4gICAgICAgIC8vIEJ1aWxkIHdoZXJlIGNvbmRpdGlvbnNcbiAgICAgICAgY29uc3QgY29uZGl0aW9ucyA9IFtdXG5cbiAgICAgICAgaWYgKGZpbHRlcnMuY2F0ZWdvcnkpIHtcbiAgICAgICAgICBjb25kaXRpb25zLnB1c2goZXEoY29udmVyc2F0aW9uVGVtcGxhdGVzLmNhdGVnb3J5LCBmaWx0ZXJzLmNhdGVnb3J5KSlcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmaWx0ZXJzLmlzUHVibGljICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBjb25kaXRpb25zLnB1c2goZXEoY29udmVyc2F0aW9uVGVtcGxhdGVzLmlzUHVibGljLCBmaWx0ZXJzLmlzUHVibGljKSlcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmaWx0ZXJzLnVzZXJJZCkge1xuICAgICAgICAgIGNvbmRpdGlvbnMucHVzaChlcShjb252ZXJzYXRpb25UZW1wbGF0ZXMudXNlcklkLCBmaWx0ZXJzLnVzZXJJZCkpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZmlsdGVycy5zZWFyY2gpIHtcbiAgICAgICAgICBjb25kaXRpb25zLnB1c2goXG4gICAgICAgICAgICBvcihcbiAgICAgICAgICAgICAgbGlrZShjb252ZXJzYXRpb25UZW1wbGF0ZXMubmFtZSwgYCUke2ZpbHRlcnMuc2VhcmNofSVgKSxcbiAgICAgICAgICAgICAgbGlrZShjb252ZXJzYXRpb25UZW1wbGF0ZXMuZGVzY3JpcHRpb24sIGAlJHtmaWx0ZXJzLnNlYXJjaH0lYCksXG4gICAgICAgICAgICAgIGxpa2UoY29udmVyc2F0aW9uVGVtcGxhdGVzLnRlbXBsYXRlLCBgJSR7ZmlsdGVycy5zZWFyY2h9JWApXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gQnVpbGQgZmluYWwgcXVlcnlcbiAgICAgICAgY29uc3QgYmFzZVF1ZXJ5ID0gZGIuc2VsZWN0KCkuZnJvbShjb252ZXJzYXRpb25UZW1wbGF0ZXMpXG4gICAgICAgIGNvbnN0IGZpbmFsUXVlcnkgPSBjb25kaXRpb25zLmxlbmd0aCA+IDBcbiAgICAgICAgICA/IGJhc2VRdWVyeS53aGVyZShhbmQoLi4uY29uZGl0aW9ucykpXG4gICAgICAgICAgOiBiYXNlUXVlcnlcblxuICAgICAgICBjb25zdCB0ZW1wbGF0ZXMgPSBhd2FpdCBmaW5hbFF1ZXJ5Lm9yZGVyQnkoXG4gICAgICAgICAgZGVzYyhjb252ZXJzYXRpb25UZW1wbGF0ZXMudXNhZ2VDb3VudCksXG4gICAgICAgICAgZGVzYyhjb252ZXJzYXRpb25UZW1wbGF0ZXMuY3JlYXRlZEF0KVxuICAgICAgICApXG5cbiAgICAgICAgcmV0dXJuIHRlbXBsYXRlc1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgICAgY29kZTogJ0lOVEVSTkFMX1NFUlZFUl9FUlJPUicsXG4gICAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBmZXRjaCB0ZW1wbGF0ZXMnLFxuICAgICAgICAgIGNhdXNlOiBlcnJvcixcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9KSxcblxuICAvKipcbiAgICogR2V0IHRlbXBsYXRlIGJ5IElEXG4gICAqL1xuICBieUlkOiBwdWJsaWNQcm9jZWR1cmUuaW5wdXQoei5udW1iZXIoKSkucXVlcnkoYXN5bmMgKHsgaW5wdXQ6IGlkIH0pID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdGVtcGxhdGUgPSBhd2FpdCBkYlxuICAgICAgICAuc2VsZWN0KClcbiAgICAgICAgLmZyb20oY29udmVyc2F0aW9uVGVtcGxhdGVzKVxuICAgICAgICAud2hlcmUoZXEoY29udmVyc2F0aW9uVGVtcGxhdGVzLmlkLCBpZCkpXG4gICAgICAgIC5saW1pdCgxKVxuXG4gICAgICBpZiAodGVtcGxhdGUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xuICAgICAgICAgIGNvZGU6ICdOT1RfRk9VTkQnLFxuICAgICAgICAgIG1lc3NhZ2U6ICdUZW1wbGF0ZSBub3QgZm91bmQnLFxuICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGVtcGxhdGVbMF1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgVFJQQ0Vycm9yKSB7XG4gICAgICAgIHRocm93IGVycm9yXG4gICAgICB9XG5cbiAgICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xuICAgICAgICBjb2RlOiAnSU5URVJOQUxfU0VSVkVSX0VSUk9SJyxcbiAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBmZXRjaCB0ZW1wbGF0ZScsXG4gICAgICAgIGNhdXNlOiBlcnJvcixcbiAgICAgIH0pXG4gICAgfVxuICB9KSxcblxuICAvKipcbiAgICogQ3JlYXRlIG5ldyB0ZW1wbGF0ZVxuICAgKi9cbiAgY3JlYXRlOiBwdWJsaWNQcm9jZWR1cmVcbiAgICAuaW5wdXQodGVtcGxhdGVDcmVhdGVTY2hlbWEpXG4gICAgLm11dGF0aW9uKGFzeW5jICh7IGlucHV0IH0pID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IG5ld1RlbXBsYXRlID0gYXdhaXQgZGJcbiAgICAgICAgICAuaW5zZXJ0KGNvbnZlcnNhdGlvblRlbXBsYXRlcylcbiAgICAgICAgICAudmFsdWVzKHtcbiAgICAgICAgICAgIC4uLmlucHV0LFxuICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICAgIH0pXG4gICAgICAgICAgLnJldHVybmluZygpXG5cbiAgICAgICAgcmV0dXJuIG5ld1RlbXBsYXRlWzBdXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHtcbiAgICAgICAgICBjb2RlOiAnSU5URVJOQUxfU0VSVkVSX0VSUk9SJyxcbiAgICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIGNyZWF0ZSB0ZW1wbGF0ZScsXG4gICAgICAgICAgY2F1c2U6IGVycm9yLFxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0pLFxuXG4gIC8qKlxuICAgKiBVcGRhdGUgdGVtcGxhdGVcbiAgICovXG4gIHVwZGF0ZTogcHVibGljUHJvY2VkdXJlXG4gICAgLmlucHV0KHRlbXBsYXRlVXBkYXRlU2NoZW1hKVxuICAgIC5tdXRhdGlvbihhc3luYyAoeyBpbnB1dCB9KSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB7IGlkLCAuLi51cGRhdGVEYXRhIH0gPSBpbnB1dFxuXG4gICAgICAgIGNvbnN0IHVwZGF0ZWRUZW1wbGF0ZSA9IGF3YWl0IGRiXG4gICAgICAgICAgLnVwZGF0ZShjb252ZXJzYXRpb25UZW1wbGF0ZXMpXG4gICAgICAgICAgLnNldCh7XG4gICAgICAgICAgICAuLi51cGRhdGVEYXRhLFxuICAgICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICAgIH0pXG4gICAgICAgICAgLndoZXJlKGVxKGNvbnZlcnNhdGlvblRlbXBsYXRlcy5pZCwgaWQpKVxuICAgICAgICAgIC5yZXR1cm5pbmcoKVxuXG4gICAgICAgIGlmICh1cGRhdGVkVGVtcGxhdGUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgICAgICBjb2RlOiAnTk9UX0ZPVU5EJyxcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdUZW1wbGF0ZSBub3QgZm91bmQnLFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdXBkYXRlZFRlbXBsYXRlWzBdXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBUUlBDRXJyb3IpIHtcbiAgICAgICAgICB0aHJvdyBlcnJvclxuICAgICAgICB9XG5cbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgICAgY29kZTogJ0lOVEVSTkFMX1NFUlZFUl9FUlJPUicsXG4gICAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byB1cGRhdGUgdGVtcGxhdGUnLFxuICAgICAgICAgIGNhdXNlOiBlcnJvcixcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9KSxcblxuICAvKipcbiAgICogRGVsZXRlIHRlbXBsYXRlXG4gICAqL1xuICBkZWxldGU6IHB1YmxpY1Byb2NlZHVyZS5pbnB1dCh6Lm51bWJlcigpKS5tdXRhdGlvbihhc3luYyAoeyBpbnB1dDogaWQgfSkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBkZWxldGVkVGVtcGxhdGUgPSBhd2FpdCBkYlxuICAgICAgICAuZGVsZXRlKGNvbnZlcnNhdGlvblRlbXBsYXRlcylcbiAgICAgICAgLndoZXJlKGVxKGNvbnZlcnNhdGlvblRlbXBsYXRlcy5pZCwgaWQpKVxuICAgICAgICAucmV0dXJuaW5nKClcblxuICAgICAgaWYgKGRlbGV0ZWRUZW1wbGF0ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgICAgY29kZTogJ05PVF9GT1VORCcsXG4gICAgICAgICAgbWVzc2FnZTogJ1RlbXBsYXRlIG5vdCBmb3VuZCcsXG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBUUlBDRXJyb3IpIHtcbiAgICAgICAgdGhyb3cgZXJyb3JcbiAgICAgIH1cblxuICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgIGNvZGU6ICdJTlRFUk5BTF9TRVJWRVJfRVJST1InLFxuICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIGRlbGV0ZSB0ZW1wbGF0ZScsXG4gICAgICAgIGNhdXNlOiBlcnJvcixcbiAgICAgIH0pXG4gICAgfVxuICB9KSxcblxuICAvKipcbiAgICogVXNlIHRlbXBsYXRlIChpbmNyZW1lbnQgdXNhZ2UgY291bnQgYW5kIHJldHVybiBwcm9jZXNzZWQgdGVtcGxhdGUpXG4gICAqL1xuICB1c2U6IHB1YmxpY1Byb2NlZHVyZVxuICAgIC5pbnB1dChcbiAgICAgIHoub2JqZWN0KHtcbiAgICAgICAgaWQ6IHoubnVtYmVyKCksXG4gICAgICAgIHZhcmlhYmxlczogei5yZWNvcmQoei5zdHJpbmcoKSkub3B0aW9uYWwoKSxcbiAgICAgIH0pXG4gICAgKVxuICAgIC5tdXRhdGlvbihhc3luYyAoeyBpbnB1dCB9KSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB7IGlkLCB2YXJpYWJsZXMgPSB7fSB9ID0gaW5wdXRcblxuICAgICAgICAvLyBHZXQgdGVtcGxhdGVcbiAgICAgICAgY29uc3QgdGVtcGxhdGUgPSBhd2FpdCBkYlxuICAgICAgICAgIC5zZWxlY3QoKVxuICAgICAgICAgIC5mcm9tKGNvbnZlcnNhdGlvblRlbXBsYXRlcylcbiAgICAgICAgICAud2hlcmUoZXEoY29udmVyc2F0aW9uVGVtcGxhdGVzLmlkLCBpZCkpXG4gICAgICAgICAgLmxpbWl0KDEpXG5cbiAgICAgICAgaWYgKHRlbXBsYXRlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xuICAgICAgICAgICAgY29kZTogJ05PVF9GT1VORCcsXG4gICAgICAgICAgICBtZXNzYWdlOiAnVGVtcGxhdGUgbm90IGZvdW5kJyxcbiAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZm91bmRUZW1wbGF0ZSA9IHRlbXBsYXRlWzBdIVxuXG4gICAgICAgIC8vIEluY3JlbWVudCB1c2FnZSBjb3VudFxuICAgICAgICBhd2FpdCBkYlxuICAgICAgICAgIC51cGRhdGUoY29udmVyc2F0aW9uVGVtcGxhdGVzKVxuICAgICAgICAgIC5zZXQoe1xuICAgICAgICAgICAgdXNhZ2VDb3VudDogc3FsYCR7Y29udmVyc2F0aW9uVGVtcGxhdGVzLnVzYWdlQ291bnR9ICsgMWAsXG4gICAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgICAgfSlcbiAgICAgICAgICAud2hlcmUoZXEoY29udmVyc2F0aW9uVGVtcGxhdGVzLmlkLCBpZCkpXG5cbiAgICAgICAgLy8gUHJvY2VzcyB0ZW1wbGF0ZSB3aXRoIHZhcmlhYmxlc1xuICAgICAgICBsZXQgcHJvY2Vzc2VkVGVtcGxhdGUgPSBmb3VuZFRlbXBsYXRlLnRlbXBsYXRlXG5cbiAgICAgICAgLy8gUmVwbGFjZSB2YXJpYWJsZXMgaW4gdGVtcGxhdGUgKGUuZy4sIHt7dmFyaWFibGV9fSB3aXRoIGFjdHVhbCB2YWx1ZXMpXG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHZhcmlhYmxlcykpIHtcbiAgICAgICAgICBjb25zdCBwbGFjZWhvbGRlciA9IGB7eyR7a2V5fX19YFxuICAgICAgICAgIHByb2Nlc3NlZFRlbXBsYXRlID0gcHJvY2Vzc2VkVGVtcGxhdGUucmVwbGFjZShcbiAgICAgICAgICAgIG5ldyBSZWdFeHAocGxhY2Vob2xkZXIsICdnJyksXG4gICAgICAgICAgICB2YWx1ZVxuICAgICAgICAgIClcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4uZm91bmRUZW1wbGF0ZSxcbiAgICAgICAgICBwcm9jZXNzZWRUZW1wbGF0ZSxcbiAgICAgICAgICB1c2FnZUNvdW50OiAoZm91bmRUZW1wbGF0ZS51c2FnZUNvdW50IHx8IDApICsgMSxcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgVFJQQ0Vycm9yKSB7XG4gICAgICAgICAgdGhyb3cgZXJyb3JcbiAgICAgICAgfVxuXG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xuICAgICAgICAgIGNvZGU6ICdJTlRFUk5BTF9TRVJWRVJfRVJST1InLFxuICAgICAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gdXNlIHRlbXBsYXRlJyxcbiAgICAgICAgICBjYXVzZTogZXJyb3IsXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSksXG5cbiAgLyoqXG4gICAqIEdldCB0ZW1wbGF0ZSBjYXRlZ29yaWVzXG4gICAqL1xuICBjYXRlZ29yaWVzOiBwdWJsaWNQcm9jZWR1cmUucXVlcnkoYXN5bmMgKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjYXRlZ29yaWVzID0gYXdhaXQgZGJcbiAgICAgICAgLnNlbGVjdCh7XG4gICAgICAgICAgY2F0ZWdvcnk6IGNvbnZlcnNhdGlvblRlbXBsYXRlcy5jYXRlZ29yeSxcbiAgICAgICAgICBjb3VudDogc3FsPG51bWJlcj5gY291bnQoKilgLFxuICAgICAgICB9KVxuICAgICAgICAuZnJvbShjb252ZXJzYXRpb25UZW1wbGF0ZXMpXG4gICAgICAgIC5ncm91cEJ5KGNvbnZlcnNhdGlvblRlbXBsYXRlcy5jYXRlZ29yeSlcbiAgICAgICAgLm9yZGVyQnkoZGVzYyhzcWxgY291bnQoKilgKSlcblxuICAgICAgcmV0dXJuIGNhdGVnb3JpZXNcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgIGNvZGU6ICdJTlRFUk5BTF9TRVJWRVJfRVJST1InLFxuICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIGZldGNoIGNhdGVnb3JpZXMnLFxuICAgICAgICBjYXVzZTogZXJyb3IsXG4gICAgICB9KVxuICAgIH1cbiAgfSksXG5cbiAgLyoqXG4gICAqIEdldCBwb3B1bGFyIHRlbXBsYXRlcyAoYnkgdXNhZ2UgY291bnQpXG4gICAqL1xuICBwb3B1bGFyOiBwdWJsaWNQcm9jZWR1cmVcbiAgICAuaW5wdXQoei5vYmplY3QoeyBsaW1pdDogei5udW1iZXIoKS5kZWZhdWx0KDEwKSB9KSlcbiAgICAucXVlcnkoYXN5bmMgKHsgaW5wdXQgfSkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcG9wdWxhclRlbXBsYXRlcyA9IGF3YWl0IGRiXG4gICAgICAgICAgLnNlbGVjdCgpXG4gICAgICAgICAgLmZyb20oY29udmVyc2F0aW9uVGVtcGxhdGVzKVxuICAgICAgICAgIC53aGVyZShlcShjb252ZXJzYXRpb25UZW1wbGF0ZXMuaXNQdWJsaWMsIHRydWUpKVxuICAgICAgICAgIC5vcmRlckJ5KGRlc2MoY29udmVyc2F0aW9uVGVtcGxhdGVzLnVzYWdlQ291bnQpKVxuICAgICAgICAgIC5saW1pdChpbnB1dC5saW1pdClcblxuICAgICAgICByZXR1cm4gcG9wdWxhclRlbXBsYXRlc1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgICAgY29kZTogJ0lOVEVSTkFMX1NFUlZFUl9FUlJPUicsXG4gICAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBmZXRjaCBwb3B1bGFyIHRlbXBsYXRlcycsXG4gICAgICAgICAgY2F1c2U6IGVycm9yLFxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0pLFxufSlcbiJdLCJuYW1lcyI6WyJ6Iiwicm91dGVyIiwicHVibGljUHJvY2VkdXJlIiwiZGIiLCJjb252ZXJzYXRpb25UZW1wbGF0ZXMiLCJUUlBDRXJyb3IiLCJlcSIsImFuZCIsIm9yIiwibGlrZSIsImRlc2MiLCJzcWwiLCJ0ZW1wbGF0ZUNyZWF0ZVNjaGVtYSIsIm9iamVjdCIsIm5hbWUiLCJzdHJpbmciLCJtaW4iLCJtYXgiLCJkZXNjcmlwdGlvbiIsIm9wdGlvbmFsIiwidGVtcGxhdGUiLCJjYXRlZ29yeSIsImRlZmF1bHQiLCJpc1B1YmxpYyIsImJvb2xlYW4iLCJ1c2VySWQiLCJudW1iZXIiLCJ0ZW1wbGF0ZVVwZGF0ZVNjaGVtYSIsImlkIiwidGVtcGxhdGVGaWx0ZXJzU2NoZW1hIiwic2VhcmNoIiwidGVtcGxhdGVzUm91dGVyIiwibGlzdCIsImlucHV0IiwicXVlcnkiLCJmaWx0ZXJzIiwiY29uZGl0aW9ucyIsInB1c2giLCJ1bmRlZmluZWQiLCJiYXNlUXVlcnkiLCJzZWxlY3QiLCJmcm9tIiwiZmluYWxRdWVyeSIsImxlbmd0aCIsIndoZXJlIiwidGVtcGxhdGVzIiwib3JkZXJCeSIsInVzYWdlQ291bnQiLCJjcmVhdGVkQXQiLCJlcnJvciIsImNvZGUiLCJtZXNzYWdlIiwiY2F1c2UiLCJieUlkIiwibGltaXQiLCJjcmVhdGUiLCJtdXRhdGlvbiIsIm5ld1RlbXBsYXRlIiwiaW5zZXJ0IiwidmFsdWVzIiwiRGF0ZSIsInVwZGF0ZWRBdCIsInJldHVybmluZyIsInVwZGF0ZSIsInVwZGF0ZURhdGEiLCJ1cGRhdGVkVGVtcGxhdGUiLCJzZXQiLCJkZWxldGUiLCJkZWxldGVkVGVtcGxhdGUiLCJzdWNjZXNzIiwidXNlIiwidmFyaWFibGVzIiwicmVjb3JkIiwiZm91bmRUZW1wbGF0ZSIsInByb2Nlc3NlZFRlbXBsYXRlIiwia2V5IiwidmFsdWUiLCJPYmplY3QiLCJlbnRyaWVzIiwicGxhY2Vob2xkZXIiLCJyZXBsYWNlIiwiUmVnRXhwIiwiY2F0ZWdvcmllcyIsImNvdW50IiwiZ3JvdXBCeSIsInBvcHVsYXIiLCJwb3B1bGFyVGVtcGxhdGVzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/api/routers/templates.ts\n");

/***/ }),

/***/ "(rsc)/./lib/api/trpc.ts":
/*!*************************!*\
  !*** ./lib/api/trpc.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createTRPCContext: () => (/* binding */ createTRPCContext),\n/* harmony export */   loggerMiddleware: () => (/* binding */ loggerMiddleware),\n/* harmony export */   protectedProcedure: () => (/* binding */ protectedProcedure),\n/* harmony export */   publicProcedure: () => (/* binding */ publicProcedure),\n/* harmony export */   router: () => (/* binding */ router)\n/* harmony export */ });\n/* harmony import */ var _trpc_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @trpc/server */ \"(rsc)/./node_modules/@trpc/server/dist/initTRPC-CB9uBez5.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/ZodError.js\");\n/* harmony import */ var superjson__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! superjson */ \"(rsc)/./node_modules/superjson/dist/index.js\");\n/**\n * tRPC Setup and Configuration\n * Base tRPC configuration with context and middleware\n */ \n\n\n/**\n * Create tRPC context\n * This is where you can add authentication, database connections, etc.\n */ const createTRPCContext = (opts)=>{\n    return {\n        // Add your context here\n        // For now, we'll keep it simple\n        user: null\n    };\n};\n/**\n * Initialize tRPC\n */ const t = _trpc_server__WEBPACK_IMPORTED_MODULE_1__.initTRPC.context().create({\n    transformer: superjson__WEBPACK_IMPORTED_MODULE_0__[\"default\"],\n    errorFormatter ({ shape, error }) {\n        return {\n            ...shape,\n            data: {\n                ...shape.data,\n                zodError: error.cause instanceof zod__WEBPACK_IMPORTED_MODULE_2__.ZodError ? error.cause.flatten() : null\n            }\n        };\n    }\n});\n/**\n * Public procedure\n * Available to all users\n */ const publicProcedure = t.procedure;\n/**\n * Protected procedure\n * Requires authentication (TODO: implement auth middleware)\n */ const protectedProcedure = t.procedure.use({\n    \"use[protectedProcedure]\": ({ ctx, next })=>{\n        // For now, we'll skip authentication\n        // In production, you'd check for valid session/token here\n        return next({\n            ctx: {\n                ...ctx\n            }\n        });\n    }\n}[\"use[protectedProcedure]\"]);\n/**\n * Create router\n */ const router = t.router;\n/**\n * Middleware for logging\n */ const loggerMiddleware = t.middleware(async ({ path, type, next })=>{\n    const start = Date.now();\n    const result = await next();\n    const duration = Date.now() - start;\n    if (true) {\n        console.log(`tRPC ${type} ${path} - ${duration}ms`);\n    }\n    return result;\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvYXBpL3RycGMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTs7O0NBR0MsR0FFaUQ7QUFFcEI7QUFDRztBQUVqQzs7O0NBR0MsR0FDTSxNQUFNRyxvQkFBb0IsQ0FBQ0M7SUFDaEMsT0FBTztRQUNMLHdCQUF3QjtRQUN4QixnQ0FBZ0M7UUFDaENDLE1BQU07SUFDUjtBQUNGLEVBQUM7QUFJRDs7Q0FFQyxHQUNELE1BQU1DLElBQUlOLGtEQUFRQSxDQUFDTyxPQUFPLEdBQVlDLE1BQU0sQ0FBQztJQUMzQ0MsYUFBYVAsaURBQVNBO0lBQ3RCUSxnQkFBZSxFQUFFQyxLQUFLLEVBQUVDLEtBQUssRUFBRTtRQUM3QixPQUFPO1lBQ0wsR0FBR0QsS0FBSztZQUNSRSxNQUFNO2dCQUNKLEdBQUdGLE1BQU1FLElBQUk7Z0JBQ2JDLFVBQ0VGLE1BQU1HLEtBQUssWUFBWWQseUNBQVFBLEdBQUdXLE1BQU1HLEtBQUssQ0FBQ0MsT0FBTyxLQUFLO1lBQzlEO1FBQ0Y7SUFDRjtBQUNGO0FBRUE7OztDQUdDLEdBQ00sTUFBTUMsa0JBQWtCWCxFQUFFWSxTQUFTO0FBRTFDOzs7Q0FHQyxHQUNNLE1BQU1DLHFCQUFxQmIsRUFBRVksU0FBUyxDQUFDRSxHQUFHOytCQUFDLENBQUMsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEVBQUU7UUFDOUQscUNBQXFDO1FBQ3JDLDBEQUEwRDtRQUMxRCxPQUFPQSxLQUFLO1lBQ1ZELEtBQUs7Z0JBQ0gsR0FBR0EsR0FBRztZQUVSO1FBQ0Y7SUFDRjs4QkFBRTtBQUVGOztDQUVDLEdBQ00sTUFBTUUsU0FBU2pCLEVBQUVpQixNQUFNO0FBRTlCOztDQUVDLEdBQ00sTUFBTUMsbUJBQW1CbEIsRUFBRW1CLFVBQVUsQ0FBQyxPQUFPLEVBQUVDLElBQUksRUFBRUMsSUFBSSxFQUFFTCxJQUFJLEVBQUU7SUFDdEUsTUFBTU0sUUFBUUMsS0FBS0MsR0FBRztJQUN0QixNQUFNQyxTQUFTLE1BQU1UO0lBQ3JCLE1BQU1VLFdBQVdILEtBQUtDLEdBQUcsS0FBS0Y7SUFFOUIsSUFBSUssSUFBc0MsRUFBRTtRQUMxQ0MsUUFBUUMsR0FBRyxDQUFDLENBQUMsS0FBSyxFQUFFUixLQUFLLENBQUMsRUFBRUQsS0FBSyxHQUFHLEVBQUVNLFNBQVMsRUFBRSxDQUFDO0lBQ3BEO0lBRUEsT0FBT0Q7QUFDVCxHQUFFIiwic291cmNlcyI6WyJDOlxccHJvamVjdHNcXGFycmFraXNcXGxpYlxcYXBpXFx0cnBjLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogdFJQQyBTZXR1cCBhbmQgQ29uZmlndXJhdGlvblxuICogQmFzZSB0UlBDIGNvbmZpZ3VyYXRpb24gd2l0aCBjb250ZXh0IGFuZCBtaWRkbGV3YXJlXG4gKi9cblxuaW1wb3J0IHsgaW5pdFRSUEMsIFRSUENFcnJvciB9IGZyb20gJ0B0cnBjL3NlcnZlcidcbmltcG9ydCB0eXBlIHsgRmV0Y2hDcmVhdGVDb250ZXh0Rm5PcHRpb25zIH0gZnJvbSAnQHRycGMvc2VydmVyL2FkYXB0ZXJzL2ZldGNoJ1xuaW1wb3J0IHsgWm9kRXJyb3IgfSBmcm9tICd6b2QnXG5pbXBvcnQgc3VwZXJqc29uIGZyb20gJ3N1cGVyanNvbidcblxuLyoqXG4gKiBDcmVhdGUgdFJQQyBjb250ZXh0XG4gKiBUaGlzIGlzIHdoZXJlIHlvdSBjYW4gYWRkIGF1dGhlbnRpY2F0aW9uLCBkYXRhYmFzZSBjb25uZWN0aW9ucywgZXRjLlxuICovXG5leHBvcnQgY29uc3QgY3JlYXRlVFJQQ0NvbnRleHQgPSAob3B0czogRmV0Y2hDcmVhdGVDb250ZXh0Rm5PcHRpb25zKSA9PiB7XG4gIHJldHVybiB7XG4gICAgLy8gQWRkIHlvdXIgY29udGV4dCBoZXJlXG4gICAgLy8gRm9yIG5vdywgd2UnbGwga2VlcCBpdCBzaW1wbGVcbiAgICB1c2VyOiBudWxsLCAvLyBUT0RPOiBBZGQgYXV0aGVudGljYXRpb25cbiAgfVxufVxuXG50eXBlIENvbnRleHQgPSBBd2FpdGVkPFJldHVyblR5cGU8dHlwZW9mIGNyZWF0ZVRSUENDb250ZXh0Pj5cblxuLyoqXG4gKiBJbml0aWFsaXplIHRSUENcbiAqL1xuY29uc3QgdCA9IGluaXRUUlBDLmNvbnRleHQ8Q29udGV4dD4oKS5jcmVhdGUoe1xuICB0cmFuc2Zvcm1lcjogc3VwZXJqc29uLFxuICBlcnJvckZvcm1hdHRlcih7IHNoYXBlLCBlcnJvciB9KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnNoYXBlLFxuICAgICAgZGF0YToge1xuICAgICAgICAuLi5zaGFwZS5kYXRhLFxuICAgICAgICB6b2RFcnJvcjpcbiAgICAgICAgICBlcnJvci5jYXVzZSBpbnN0YW5jZW9mIFpvZEVycm9yID8gZXJyb3IuY2F1c2UuZmxhdHRlbigpIDogbnVsbCxcbiAgICAgIH0sXG4gICAgfVxuICB9LFxufSlcblxuLyoqXG4gKiBQdWJsaWMgcHJvY2VkdXJlXG4gKiBBdmFpbGFibGUgdG8gYWxsIHVzZXJzXG4gKi9cbmV4cG9ydCBjb25zdCBwdWJsaWNQcm9jZWR1cmUgPSB0LnByb2NlZHVyZVxuXG4vKipcbiAqIFByb3RlY3RlZCBwcm9jZWR1cmVcbiAqIFJlcXVpcmVzIGF1dGhlbnRpY2F0aW9uIChUT0RPOiBpbXBsZW1lbnQgYXV0aCBtaWRkbGV3YXJlKVxuICovXG5leHBvcnQgY29uc3QgcHJvdGVjdGVkUHJvY2VkdXJlID0gdC5wcm9jZWR1cmUudXNlKCh7IGN0eCwgbmV4dCB9KSA9PiB7XG4gIC8vIEZvciBub3csIHdlJ2xsIHNraXAgYXV0aGVudGljYXRpb25cbiAgLy8gSW4gcHJvZHVjdGlvbiwgeW91J2QgY2hlY2sgZm9yIHZhbGlkIHNlc3Npb24vdG9rZW4gaGVyZVxuICByZXR1cm4gbmV4dCh7XG4gICAgY3R4OiB7XG4gICAgICAuLi5jdHgsXG4gICAgICAvLyB1c2VyOiB2YWxpZGF0ZWQgdXNlciBvYmplY3RcbiAgICB9LFxuICB9KVxufSlcblxuLyoqXG4gKiBDcmVhdGUgcm91dGVyXG4gKi9cbmV4cG9ydCBjb25zdCByb3V0ZXIgPSB0LnJvdXRlclxuXG4vKipcbiAqIE1pZGRsZXdhcmUgZm9yIGxvZ2dpbmdcbiAqL1xuZXhwb3J0IGNvbnN0IGxvZ2dlck1pZGRsZXdhcmUgPSB0Lm1pZGRsZXdhcmUoYXN5bmMgKHsgcGF0aCwgdHlwZSwgbmV4dCB9KSA9PiB7XG4gIGNvbnN0IHN0YXJ0ID0gRGF0ZS5ub3coKVxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBuZXh0KClcbiAgY29uc3QgZHVyYXRpb24gPSBEYXRlLm5vdygpIC0gc3RhcnRcblxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcpIHtcbiAgICBjb25zb2xlLmxvZyhgdFJQQyAke3R5cGV9ICR7cGF0aH0gLSAke2R1cmF0aW9ufW1zYClcbiAgfVxuXG4gIHJldHVybiByZXN1bHRcbn0pXG4iXSwibmFtZXMiOlsiaW5pdFRSUEMiLCJab2RFcnJvciIsInN1cGVyanNvbiIsImNyZWF0ZVRSUENDb250ZXh0Iiwib3B0cyIsInVzZXIiLCJ0IiwiY29udGV4dCIsImNyZWF0ZSIsInRyYW5zZm9ybWVyIiwiZXJyb3JGb3JtYXR0ZXIiLCJzaGFwZSIsImVycm9yIiwiZGF0YSIsInpvZEVycm9yIiwiY2F1c2UiLCJmbGF0dGVuIiwicHVibGljUHJvY2VkdXJlIiwicHJvY2VkdXJlIiwicHJvdGVjdGVkUHJvY2VkdXJlIiwidXNlIiwiY3R4IiwibmV4dCIsInJvdXRlciIsImxvZ2dlck1pZGRsZXdhcmUiLCJtaWRkbGV3YXJlIiwicGF0aCIsInR5cGUiLCJzdGFydCIsIkRhdGUiLCJub3ciLCJyZXN1bHQiLCJkdXJhdGlvbiIsInByb2Nlc3MiLCJjb25zb2xlIiwibG9nIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/api/trpc.ts\n");

/***/ }),

/***/ "(rsc)/./lib/capture/auto-capture-service.ts":
/*!*********************************************!*\
  !*** ./lib/capture/auto-capture-service.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AutoCaptureService: () => (/* binding */ AutoCaptureService),\n/* harmony export */   defaultAutoCaptureService: () => (/* binding */ defaultAutoCaptureService),\n/* harmony export */   getAutoCaptureStatus: () => (/* binding */ getAutoCaptureStatus),\n/* harmony export */   startAutoCapture: () => (/* binding */ startAutoCapture),\n/* harmony export */   stopAutoCapture: () => (/* binding */ stopAutoCapture)\n/* harmony export */ });\n/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! events */ \"events\");\n/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(events__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var child_process__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! child_process */ \"child_process\");\n/* harmony import */ var child_process__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(child_process__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var os__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! os */ \"os\");\n/* harmony import */ var os__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(os__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _claude_proxy__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./claude-proxy */ \"(rsc)/./lib/capture/claude-proxy.ts\");\n/* harmony import */ var _claude_interceptor__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./claude-interceptor */ \"(rsc)/./lib/capture/claude-interceptor.ts\");\n/**\n * Automatic Capture Service\n *\n * A background service that automatically monitors and captures Claude Code sessions\n * without user intervention. Uses transparent proxy injection and process monitoring.\n */ \n\n\n\n\n\n\n/**\n * Automatic Capture Service for Claude Code\n */ class AutoCaptureService extends events__WEBPACK_IMPORTED_MODULE_0__.EventEmitter {\n    constructor(){\n        super(), this.isRunning = false, this.watchers = [];\n        this.configPath = (0,path__WEBPACK_IMPORTED_MODULE_3__.join)((0,os__WEBPACK_IMPORTED_MODULE_4__.homedir)(), '.arrakis', 'capture-config.json');\n        this.config = this.loadConfig();\n        this.claudeProxy = new _claude_proxy__WEBPACK_IMPORTED_MODULE_5__.ClaudeProxy();\n        this.status = {\n            running: false,\n            sessionsToday: 0,\n            totalSessions: 0,\n            lastCaptureTime: null,\n            errors: [],\n            mode: this.config.interceptMode\n        };\n        this.setupEventHandlers();\n    }\n    /**\n   * Start the automatic capture service\n   */ async start() {\n        if (this.isRunning) {\n            this.log('info', 'Auto-capture service already running');\n            return;\n        }\n        this.log('info', 'Starting Arrakis auto-capture service...');\n        try {\n            // Setup proxy injection based on mode\n            switch(this.config.interceptMode){\n                case 'proxy':\n                    await this.setupProxyMode();\n                    break;\n                case 'wrapper':\n                    await this.setupWrapperMode();\n                    break;\n                case 'monitor':\n                    await this.setupMonitorMode();\n                    break;\n            }\n            this.isRunning = true;\n            this.status.running = true;\n            this.status.mode = this.config.interceptMode;\n            this.emit('service_started', {\n                mode: this.config.interceptMode\n            });\n            this.log('info', `‚úÖ Auto-capture service started in ${this.config.interceptMode} mode`);\n        } catch (error) {\n            this.handleError('Failed to start auto-capture service', error);\n            throw error;\n        }\n    }\n    /**\n   * Stop the automatic capture service\n   */ async stop() {\n        if (!this.isRunning) {\n            return;\n        }\n        this.log('info', 'Stopping auto-capture service...');\n        // Stop all watchers\n        this.watchers.forEach((watcher)=>{\n            if (!watcher.killed) {\n                watcher.kill('SIGTERM');\n            }\n        });\n        this.watchers = [];\n        // Cleanup proxy/wrapper\n        await this.cleanup();\n        this.isRunning = false;\n        this.status.running = false;\n        this.emit('service_stopped');\n        this.log('info', '‚úÖ Auto-capture service stopped');\n    }\n    /**\n   * Get current service status\n   */ getStatus() {\n        return {\n            ...this.status\n        };\n    }\n    /**\n   * Update service configuration\n   */ updateConfig(newConfig) {\n        this.config = {\n            ...this.config,\n            ...newConfig\n        };\n        this.saveConfig();\n        this.emit('config_updated', this.config);\n        this.log('info', 'Configuration updated');\n    }\n    /**\n   * Setup proxy mode - intercepts all claude commands transparently\n   */ async setupProxyMode() {\n        this.log('info', 'Setting up transparent proxy mode...');\n        // Create claude wrapper script that calls our proxy\n        const claudeWrapperPath = this.createClaudeWrapper();\n        // Setup PATH manipulation to intercept claude commands\n        await this.setupPathIntercept(claudeWrapperPath);\n        this.log('info', '‚úÖ Proxy mode configured');\n    }\n    /**\n   * Setup wrapper mode - replaces claude command with our wrapper\n   */ async setupWrapperMode() {\n        this.log('info', 'Setting up wrapper mode...');\n        // Create alias or symlink for claude command\n        await this.createClaudeAlias();\n        this.log('info', '‚úÖ Wrapper mode configured');\n    }\n    /**\n   * Setup monitor mode - monitors process list for claude commands\n   */ async setupMonitorMode() {\n        this.log('info', 'Setting up process monitor mode...');\n        // Start process monitor that watches for claude processes\n        const monitor = this.startProcessMonitor();\n        this.watchers.push(monitor);\n        this.log('info', '‚úÖ Monitor mode configured');\n    }\n    /**\n   * Create claude wrapper script\n   */ createClaudeWrapper() {\n        const arrakisDir = (0,path__WEBPACK_IMPORTED_MODULE_3__.join)((0,os__WEBPACK_IMPORTED_MODULE_4__.homedir)(), '.arrakis');\n        if (!(0,fs__WEBPACK_IMPORTED_MODULE_2__.existsSync)(arrakisDir)) {\n            (0,fs__WEBPACK_IMPORTED_MODULE_2__.mkdirSync)(arrakisDir, {\n                recursive: true\n            });\n        }\n        const isWindows = process.platform === 'win32';\n        const wrapperPath = (0,path__WEBPACK_IMPORTED_MODULE_3__.join)(arrakisDir, isWindows ? 'claude.bat' : 'claude');\n        const wrapperContent = isWindows ? this.getWindowsWrapper() : this.getUnixWrapper();\n        (0,fs__WEBPACK_IMPORTED_MODULE_2__.writeFileSync)(wrapperPath, wrapperContent, {\n            mode: 493\n        });\n        this.log('debug', `Created Claude wrapper at: ${wrapperPath}`);\n        return wrapperPath;\n    }\n    /**\n   * Get Windows wrapper script content\n   */ getWindowsWrapper() {\n        return `@echo off\nREM Arrakis Auto-Capture Wrapper for Claude Code\nnode \"${(0,path__WEBPACK_IMPORTED_MODULE_3__.join)(__dirname, 'claude-wrapper.js')}\" %*\n`;\n    }\n    /**\n   * Get Unix wrapper script content\n   */ getUnixWrapper() {\n        return `#!/bin/bash\n# Arrakis Auto-Capture Wrapper for Claude Code\nnode \"${(0,path__WEBPACK_IMPORTED_MODULE_3__.join)(__dirname, 'claude-wrapper.js')}\" \"$@\"\n`;\n    }\n    /**\n   * Setup PATH interception\n   */ async setupPathIntercept(wrapperPath) {\n        // This would modify shell profile files to prepend our wrapper directory to PATH\n        // Implementation depends on shell (bash, zsh, fish, etc.)\n        this.log('info', `PATH intercept setup for wrapper: ${wrapperPath}`);\n        // Note: In production, this would modify ~/.bashrc, ~/.zshrc, etc.\n        // For now, we'll just log the required manual step\n        console.log(`\nüìã Manual Setup Required:\nAdd this to your shell profile (~/.bashrc, ~/.zshrc, etc.):\nexport PATH=\"${(0,path__WEBPACK_IMPORTED_MODULE_3__.dirname)(wrapperPath)}:$PATH\"\n\nOr run: echo 'export PATH=\"${(0,path__WEBPACK_IMPORTED_MODULE_3__.dirname)(wrapperPath)}:$PATH\"' >> ~/.bashrc\n`);\n    }\n    /**\n   * Create claude alias\n   */ async createClaudeAlias() {\n        // Create symlink or alias for claude command\n        this.log('info', 'Creating claude command alias...');\n        // Implementation would create appropriate alias for the platform\n        console.log(`\nüìã Manual Setup Required:\nAdd this alias to your shell profile:\nalias claude='node ${(0,path__WEBPACK_IMPORTED_MODULE_3__.join)(__dirname, 'claude-wrapper.js')}'\n`);\n    }\n    /**\n   * Start process monitor\n   */ startProcessMonitor() {\n        this.log('info', 'Starting process monitor for Claude Code...');\n        // Monitor running processes for claude commands\n        const isWindows = process.platform === 'win32';\n        const command = isWindows ? 'wmic' : 'ps';\n        const args = isWindows ? [\n            'process',\n            'get',\n            'name,processid,commandline'\n        ] : [\n            'aux'\n        ];\n        const monitor = (0,child_process__WEBPACK_IMPORTED_MODULE_1__.spawn)(command, args, {\n            stdio: [\n                'pipe',\n                'pipe',\n                'pipe'\n            ]\n        });\n        monitor.stdout?.on('data', (data)=>{\n            this.processMonitorOutput(data.toString());\n        });\n        monitor.on('exit', ()=>{\n            // Restart monitor after delay\n            setTimeout(()=>{\n                if (this.isRunning) {\n                    const newMonitor = this.startProcessMonitor();\n                    this.watchers.push(newMonitor);\n                }\n            }, 5000);\n        });\n        return monitor;\n    }\n    /**\n   * Process monitor output to detect claude commands\n   */ processMonitorOutput(output) {\n        if (output.toLowerCase().includes('claude')) {\n            this.log('debug', 'Detected Claude Code process');\n            // Extract process info and start capture\n            this.handleDetectedClaudeProcess(output);\n        }\n    }\n    /**\n   * Handle detected claude process\n   */ async handleDetectedClaudeProcess(processInfo) {\n        try {\n            this.log('info', 'üéØ Detected Claude Code execution, starting capture...');\n            // Start interceptor for this session\n            const sessionId = await _claude_interceptor__WEBPACK_IMPORTED_MODULE_6__.defaultInterceptor.interceptSession();\n            this.status.sessionsToday++;\n            this.status.totalSessions++;\n            this.status.lastCaptureTime = new Date().toISOString();\n            this.emit('session_detected', {\n                sessionId,\n                processInfo\n            });\n        } catch (error) {\n            this.handleError('Failed to capture detected Claude session', error);\n        }\n    }\n    /**\n   * Setup event handlers\n   */ setupEventHandlers() {\n        // Listen to interceptor events\n        _claude_interceptor__WEBPACK_IMPORTED_MODULE_6__.defaultInterceptor.on('session_complete', (data)=>{\n            this.emit('session_captured', data);\n            this.log('info', `‚úÖ Session captured: ${data.sessionId}`);\n        });\n        _claude_interceptor__WEBPACK_IMPORTED_MODULE_6__.defaultInterceptor.on('session_error', (data)=>{\n            this.handleError('Session capture failed', data.error);\n        });\n        // Handle proxy events\n        this.claudeProxy.on('claude_message', (data)=>{\n            this.emit('message_captured', data);\n        });\n    }\n    /**\n   * Load configuration from file\n   */ loadConfig() {\n        const defaultConfig = {\n            enabled: true,\n            autoStart: false,\n            interceptMode: 'proxy',\n            notification: true,\n            logLevel: 'info',\n            storageEnabled: true\n        };\n        if (!(0,fs__WEBPACK_IMPORTED_MODULE_2__.existsSync)(this.configPath)) {\n            // Create default config\n            this.saveConfig(defaultConfig);\n            return defaultConfig;\n        }\n        try {\n            const configData = (0,fs__WEBPACK_IMPORTED_MODULE_2__.readFileSync)(this.configPath, 'utf-8');\n            return {\n                ...defaultConfig,\n                ...JSON.parse(configData)\n            };\n        } catch (error) {\n            this.log('warn', 'Failed to load config, using defaults');\n            return defaultConfig;\n        }\n    }\n    /**\n   * Save configuration to file\n   */ saveConfig(config = this.config) {\n        try {\n            const configDir = (0,path__WEBPACK_IMPORTED_MODULE_3__.dirname)(this.configPath);\n            if (!(0,fs__WEBPACK_IMPORTED_MODULE_2__.existsSync)(configDir)) {\n                (0,fs__WEBPACK_IMPORTED_MODULE_2__.mkdirSync)(configDir, {\n                    recursive: true\n                });\n            }\n            (0,fs__WEBPACK_IMPORTED_MODULE_2__.writeFileSync)(this.configPath, JSON.stringify(config, null, 2));\n        } catch (error) {\n            this.log('error', 'Failed to save configuration');\n        }\n    }\n    /**\n   * Cleanup resources\n   */ async cleanup() {\n        // Cleanup any temporary files, aliases, etc.\n        this.log('info', 'Cleaning up auto-capture resources...');\n    }\n    /**\n   * Handle errors\n   */ handleError(message, error) {\n        const errorMsg = `${message}: ${error?.message || error}`;\n        this.status.errors.push(errorMsg);\n        this.log('error', errorMsg);\n        this.emit('error', {\n            message,\n            error\n        });\n    }\n    /**\n   * Log messages based on level\n   */ log(level, message) {\n        const levels = {\n            error: 0,\n            warn: 1,\n            info: 2,\n            debug: 3\n        };\n        const configLevel = levels[this.config.logLevel];\n        const messageLevel = levels[level];\n        if (messageLevel <= configLevel) {\n            const timestamp = new Date().toISOString();\n            console.log(`[${timestamp}] [${level.toUpperCase()}] ${message}`);\n        }\n    }\n}\n/**\n * Default auto-capture service instance\n */ const defaultAutoCaptureService = new AutoCaptureService();\n/**\n * Convenience functions\n */ async function startAutoCapture() {\n    return defaultAutoCaptureService.start();\n}\nasync function stopAutoCapture() {\n    return defaultAutoCaptureService.stop();\n}\nfunction getAutoCaptureStatus() {\n    return defaultAutoCaptureService.getStatus();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvY2FwdHVyZS9hdXRvLWNhcHR1cmUtc2VydmljZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBOzs7OztDQUtDLEdBRW9DO0FBQ21CO0FBQ2U7QUFDbkM7QUFDUjtBQUNnQjtBQUNhO0FBb0J6RDs7Q0FFQyxHQUNNLE1BQU1XLDJCQUEyQlgsZ0RBQVlBO0lBUWxELGFBQWM7UUFDWixLQUFLLFNBTkNZLFlBQXFCLFlBRXJCQyxXQUEyQixFQUFFO1FBTW5DLElBQUksQ0FBQ0MsVUFBVSxHQUFHUiwwQ0FBSUEsQ0FBQ0UsMkNBQU9BLElBQUksWUFBWTtRQUM5QyxJQUFJLENBQUNPLE1BQU0sR0FBRyxJQUFJLENBQUNDLFVBQVU7UUFDN0IsSUFBSSxDQUFDQyxXQUFXLEdBQUcsSUFBSVIsc0RBQVdBO1FBQ2xDLElBQUksQ0FBQ1MsTUFBTSxHQUFHO1lBQ1pDLFNBQVM7WUFDVEMsZUFBZTtZQUNmQyxlQUFlO1lBQ2ZDLGlCQUFpQjtZQUNqQkMsUUFBUSxFQUFFO1lBQ1ZDLE1BQU0sSUFBSSxDQUFDVCxNQUFNLENBQUNVLGFBQWE7UUFDakM7UUFFQSxJQUFJLENBQUNDLGtCQUFrQjtJQUN6QjtJQUVBOztHQUVDLEdBQ0QsTUFBTUMsUUFBdUI7UUFDM0IsSUFBSSxJQUFJLENBQUNmLFNBQVMsRUFBRTtZQUNsQixJQUFJLENBQUNnQixHQUFHLENBQUMsUUFBUTtZQUNqQjtRQUNGO1FBRUEsSUFBSSxDQUFDQSxHQUFHLENBQUMsUUFBUTtRQUVqQixJQUFJO1lBQ0Ysc0NBQXNDO1lBQ3RDLE9BQVEsSUFBSSxDQUFDYixNQUFNLENBQUNVLGFBQWE7Z0JBQy9CLEtBQUs7b0JBQ0gsTUFBTSxJQUFJLENBQUNJLGNBQWM7b0JBQ3pCO2dCQUNGLEtBQUs7b0JBQ0gsTUFBTSxJQUFJLENBQUNDLGdCQUFnQjtvQkFDM0I7Z0JBQ0YsS0FBSztvQkFDSCxNQUFNLElBQUksQ0FBQ0MsZ0JBQWdCO29CQUMzQjtZQUNKO1lBRUEsSUFBSSxDQUFD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QU07WUFBR0MsT0FBTztRQUFFO1FBQ3RELE1BQU1DLGNBQWNKLE1BQU0sQ0FBQyxJQUFJLENBQUNqRixNQUFNLENBQUN1RSxRQUFRLENBQUM7UUFDaEQsTUFBTWUsZUFBZUwsTUFBTSxDQUFDRCxNQUFNO1FBRWxDLElBQUlNLGdCQUFnQkQsYUFBYTtZQUMvQixNQUFNRSxZQUFZLElBQUl0QixPQUFPQyxXQUFXO1lBQ3hDbkIsUUFBUWxDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRTBFLFVBQVUsR0FBRyxFQUFFUCxNQUFNUSxXQUFXLEdBQUcsRUFBRSxFQUFFVixTQUFTO1FBQ2xFO0lBQ0Y7QUFDRjtBQUVBOztDQUVDLEdBQ00sTUFBTVcsNEJBQTRCLElBQUk3RixxQkFBb0I7QUFFakU7O0NBRUMsR0FDTSxlQUFlOEY7SUFDcEIsT0FBT0QsMEJBQTBCN0UsS0FBSztBQUN4QztBQUVPLGVBQWUrRTtJQUNwQixPQUFPRiwwQkFBMEJyRSxJQUFJO0FBQ3ZDO0FBRU8sU0FBU3dFO0lBQ2QsT0FBT0gsMEJBQTBCL0QsU0FBUztBQUM1QyIsInNvdXJjZXMiOlsiQzpcXHByb2plY3RzXFxhcnJha2lzXFxsaWJcXGNhcHR1cmVcXGF1dG8tY2FwdHVyZS1zZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQXV0b21hdGljIENhcHR1cmUgU2VydmljZVxuICpcbiAqIEEgYmFja2dyb3VuZCBzZXJ2aWNlIHRoYXQgYXV0b21hdGljYWxseSBtb25pdG9ycyBhbmQgY2FwdHVyZXMgQ2xhdWRlIENvZGUgc2Vzc2lvbnNcbiAqIHdpdGhvdXQgdXNlciBpbnRlcnZlbnRpb24uIFVzZXMgdHJhbnNwYXJlbnQgcHJveHkgaW5qZWN0aW9uIGFuZCBwcm9jZXNzIG1vbml0b3JpbmcuXG4gKi9cblxuaW1wb3J0IHsgRXZlbnRFbWl0dGVyIH0gZnJvbSAnZXZlbnRzJ1xuaW1wb3J0IHsgc3Bhd24sIHR5cGUgQ2hpbGRQcm9jZXNzIH0gZnJvbSAnY2hpbGRfcHJvY2VzcydcbmltcG9ydCB7IHJlYWRGaWxlU3luYywgd3JpdGVGaWxlU3luYywgZXhpc3RzU3luYywgbWtkaXJTeW5jIH0gZnJvbSAnZnMnXG5pbXBvcnQgeyBqb2luLCBkaXJuYW1lIH0gZnJvbSAncGF0aCdcbmltcG9ydCB7IGhvbWVkaXIgfSBmcm9tICdvcydcbmltcG9ydCB7IENsYXVkZVByb3h5IH0gZnJvbSAnLi9jbGF1ZGUtcHJveHknXG5pbXBvcnQgeyBkZWZhdWx0SW50ZXJjZXB0b3IgfSBmcm9tICcuL2NsYXVkZS1pbnRlcmNlcHRvcidcblxuZXhwb3J0IGludGVyZmFjZSBDYXB0dXJlU2VydmljZUNvbmZpZyB7XG4gIGVuYWJsZWQ6IGJvb2xlYW5cbiAgYXV0b1N0YXJ0OiBib29sZWFuXG4gIGludGVyY2VwdE1vZGU6ICdwcm94eScgfCAnd3JhcHBlcicgfCAnbW9uaXRvcidcbiAgbm90aWZpY2F0aW9uOiBib29sZWFuXG4gIGxvZ0xldmVsOiAnZXJyb3InIHwgJ3dhcm4nIHwgJ2luZm8nIHwgJ2RlYnVnJ1xuICBzdG9yYWdlRW5hYmxlZDogYm9vbGVhblxufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhcHR1cmVTdGF0dXMge1xuICBydW5uaW5nOiBib29sZWFuXG4gIHNlc3Npb25zVG9kYXk6IG51bWJlclxuICB0b3RhbFNlc3Npb25zOiBudW1iZXJcbiAgbGFzdENhcHR1cmVUaW1lOiBzdHJpbmcgfCBudWxsXG4gIGVycm9yczogc3RyaW5nW11cbiAgbW9kZTogc3RyaW5nXG59XG5cbi8qKlxuICogQXV0b21hdGljIENhcHR1cmUgU2VydmljZSBmb3IgQ2xhdWRlIENvZGVcbiAqL1xuZXhwb3J0IGNsYXNzIEF1dG9DYXB0dXJlU2VydmljZSBleHRlbmRzIEV2ZW50RW1pdHRlciB7XG4gIHByaXZhdGUgY29uZmlnOiBDYXB0dXJlU2VydmljZUNvbmZpZ1xuICBwcml2YXRlIGNvbmZpZ1BhdGg6IHN0cmluZ1xuICBwcml2YXRlIGlzUnVubmluZzogYm9vbGVhbiA9IGZhbHNlXG4gIHByaXZhdGUgY2xhdWRlUHJveHk6IENsYXVkZVByb3h5XG4gIHByaXZhdGUgd2F0Y2hlcnM6IENoaWxkUHJvY2Vzc1tdID0gW11cbiAgcHJpdmF0ZSBzdGF0dXM6IENhcHR1cmVTdGF0dXNcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpXG5cbiAgICB0aGlzLmNvbmZpZ1BhdGggPSBqb2luKGhvbWVkaXIoKSwgJy5hcnJha2lzJywgJ2NhcHR1cmUtY29uZmlnLmpzb24nKVxuICAgIHRoaXMuY29uZmlnID0gdGhpcy5sb2FkQ29uZmlnKClcbiAgICB0aGlzLmNsYXVkZVByb3h5ID0gbmV3IENsYXVkZVByb3h5KClcbiAgICB0aGlzLnN0YXR1cyA9IHtcbiAgICAgIHJ1bm5pbmc6IGZhbHNlLFxuICAgICAgc2Vzc2lvbnNUb2RheTogMCxcbiAgICAgIHRvdGFsU2Vzc2lvbnM6IDAsXG4gICAgICBsYXN0Q2FwdHVyZVRpbWU6IG51bGwsXG4gICAgICBlcnJvcnM6IFtdLFxuICAgICAgbW9kZTogdGhpcy5jb25maWcuaW50ZXJjZXB0TW9kZSxcbiAgICB9XG5cbiAgICB0aGlzLnNldHVwRXZlbnRIYW5kbGVycygpXG4gIH1cblxuICAvKipcbiAgICogU3RhcnQgdGhlIGF1dG9tYXRpYyBjYXB0dXJlIHNlcnZpY2VcbiAgICovXG4gIGFzeW5jIHN0YXJ0KCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICh0aGlzLmlzUnVubmluZykge1xuICAgICAgdGhpcy5sb2coJ2luZm8nLCAnQXV0by1jYXB0dXJlIHNlcnZpY2UgYWxyZWFkeSBydW5uaW5nJylcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHRoaXMubG9nKCdpbmZvJywgJ1N0YXJ0aW5nIEFycmFraXMgYXV0by1jYXB0dXJlIHNlcnZpY2UuLi4nKVxuXG4gICAgdHJ5IHtcbiAgICAgIC8vIFNldHVwIHByb3h5IGluamVjdGlvbiBiYXNlZCBvbiBtb2RlXG4gICAgICBzd2l0Y2ggKHRoaXMuY29uZmlnLmludGVyY2VwdE1vZGUpIHtcbiAgICAgICAgY2FzZSAncHJveHknOlxuICAgICAgICAgIGF3YWl0IHRoaXMuc2V0dXBQcm94eU1vZGUoKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ3dyYXBwZXInOlxuICAgICAgICAgIGF3YWl0IHRoaXMuc2V0dXBXcmFwcGVyTW9kZSgpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnbW9uaXRvcic6XG4gICAgICAgICAgYXdhaXQgdGhpcy5zZXR1cE1vbml0b3JNb2RlKClcbiAgICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICB0aGlzLmlzUnVubmluZyA9IHRydWVcbiAgICAgIHRoaXMuc3RhdHVzLnJ1bm5pbmcgPSB0cnVlXG4gICAgICB0aGlzLnN0YXR1cy5tb2RlID0gdGhpcy5jb25maWcuaW50ZXJjZXB0TW9kZVxuXG4gICAgICB0aGlzLmVtaXQoJ3NlcnZpY2Vfc3RhcnRlZCcsIHsgbW9kZTogdGhpcy5jb25maWcuaW50ZXJjZXB0TW9kZSB9KVxuICAgICAgdGhpcy5sb2coXG4gICAgICAgICdpbmZvJyxcbiAgICAgICAgYOKchSBBdXRvLWNhcHR1cmUgc2VydmljZSBzdGFydGVkIGluICR7dGhpcy5jb25maWcuaW50ZXJjZXB0TW9kZX0gbW9kZWBcbiAgICAgIClcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhpcy5oYW5kbGVFcnJvcignRmFpbGVkIHRvIHN0YXJ0IGF1dG8tY2FwdHVyZSBzZXJ2aWNlJywgZXJyb3IpXG4gICAgICB0aHJvdyBlcnJvclxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTdG9wIHRoZSBhdXRvbWF0aWMgY2FwdHVyZSBzZXJ2aWNlXG4gICAqL1xuICBhc3luYyBzdG9wKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICghdGhpcy5pc1J1bm5pbmcpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHRoaXMubG9nKCdpbmZvJywgJ1N0b3BwaW5nIGF1dG8tY2FwdHVyZSBzZXJ2aWNlLi4uJylcblxuICAgIC8vIFN0b3AgYWxsIHdhdGNoZXJzXG4gICAgdGhpcy53YXRjaGVycy5mb3JFYWNoKCh3YXRjaGVyKSA9PiB7XG4gICAgICBpZiAoIXdhdGNoZXIua2lsbGVkKSB7XG4gICAgICAgIHdhdGNoZXIua2lsbCgnU0lHVEVSTScpXG4gICAgICB9XG4gICAgfSlcbiAgICB0aGlzLndhdGNoZXJzID0gW11cblxuICAgIC8vIENsZWFudXAgcHJveHkvd3JhcHBlclxuICAgIGF3YWl0IHRoaXMuY2xlYW51cCgpXG5cbiAgICB0aGlzLmlzUnVubmluZyA9IGZhbHNlXG4gICAgdGhpcy5zdGF0dXMucnVubmluZyA9IGZhbHNlXG4gICAgdGhpcy5lbWl0KCdzZXJ2aWNlX3N0b3BwZWQnKVxuICAgIHRoaXMubG9nKCdpbmZvJywgJ+KchSBBdXRvLWNhcHR1cmUgc2VydmljZSBzdG9wcGVkJylcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgY3VycmVudCBzZXJ2aWNlIHN0YXR1c1xuICAgKi9cbiAgZ2V0U3RhdHVzKCk6IENhcHR1cmVTdGF0dXMge1xuICAgIHJldHVybiB7IC4uLnRoaXMuc3RhdHVzIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgc2VydmljZSBjb25maWd1cmF0aW9uXG4gICAqL1xuICB1cGRhdGVDb25maWcobmV3Q29uZmlnOiBQYXJ0aWFsPENhcHR1cmVTZXJ2aWNlQ29uZmlnPik6IHZvaWQge1xuICAgIHRoaXMuY29uZmlnID0geyAuLi50aGlzLmNvbmZpZywgLi4ubmV3Q29uZmlnIH1cbiAgICB0aGlzLnNhdmVDb25maWcoKVxuICAgIHRoaXMuZW1pdCgnY29uZmlnX3VwZGF0ZWQnLCB0aGlzLmNvbmZpZylcbiAgICB0aGlzLmxvZygnaW5mbycsICdDb25maWd1cmF0aW9uIHVwZGF0ZWQnKVxuICB9XG5cbiAgLyoqXG4gICAqIFNldHVwIHByb3h5IG1vZGUgLSBpbnRlcmNlcHRzIGFsbCBjbGF1ZGUgY29tbWFuZHMgdHJhbnNwYXJlbnRseVxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBzZXR1cFByb3h5TW9kZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0aGlzLmxvZygnaW5mbycsICdTZXR0aW5nIHVwIHRyYW5zcGFyZW50IHByb3h5IG1vZGUuLi4nKVxuXG4gICAgLy8gQ3JlYXRlIGNsYXVkZSB3cmFwcGVyIHNjcmlwdCB0aGF0IGNhbGxzIG91ciBwcm94eVxuICAgIGNvbnN0IGNsYXVkZVdyYXBwZXJQYXRoID0gdGhpcy5jcmVhdGVDbGF1ZGVXcmFwcGVyKClcblxuICAgIC8vIFNldHVwIFBBVEggbWFuaXB1bGF0aW9uIHRvIGludGVyY2VwdCBjbGF1ZGUgY29tbWFuZHNcbiAgICBhd2FpdCB0aGlzLnNldHVwUGF0aEludGVyY2VwdChjbGF1ZGVXcmFwcGVyUGF0aClcblxuICAgIHRoaXMubG9nKCdpbmZvJywgJ+KchSBQcm94eSBtb2RlIGNvbmZpZ3VyZWQnKVxuICB9XG5cbiAgLyoqXG4gICAqIFNldHVwIHdyYXBwZXIgbW9kZSAtIHJlcGxhY2VzIGNsYXVkZSBjb21tYW5kIHdpdGggb3VyIHdyYXBwZXJcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgc2V0dXBXcmFwcGVyTW9kZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0aGlzLmxvZygnaW5mbycsICdTZXR0aW5nIHVwIHdyYXBwZXIgbW9kZS4uLicpXG5cbiAgICAvLyBDcmVhdGUgYWxpYXMgb3Igc3ltbGluayBmb3IgY2xhdWRlIGNvbW1hbmRcbiAgICBhd2FpdCB0aGlzLmNyZWF0ZUNsYXVkZUFsaWFzKClcblxuICAgIHRoaXMubG9nKCdpbmZvJywgJ+KchSBXcmFwcGVyIG1vZGUgY29uZmlndXJlZCcpXG4gIH1cblxuICAvKipcbiAgICogU2V0dXAgbW9uaXRvciBtb2RlIC0gbW9uaXRvcnMgcHJvY2VzcyBsaXN0IGZvciBjbGF1ZGUgY29tbWFuZHNcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgc2V0dXBNb25pdG9yTW9kZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0aGlzLmxvZygnaW5mbycsICdTZXR0aW5nIHVwIHByb2Nlc3MgbW9uaXRvciBtb2RlLi4uJylcblxuICAgIC8vIFN0YXJ0IHByb2Nlc3MgbW9uaXRvciB0aGF0IHdhdGNoZXMgZm9yIGNsYXVkZSBwcm9jZXNzZXNcbiAgICBjb25zdCBtb25pdG9yID0gdGhpcy5zdGFydFByb2Nlc3NNb25pdG9yKClcbiAgICB0aGlzLndhdGNoZXJzLnB1c2gobW9uaXRvcilcblxuICAgIHRoaXMubG9nKCdpbmZvJywgJ+KchSBNb25pdG9yIG1vZGUgY29uZmlndXJlZCcpXG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGNsYXVkZSB3cmFwcGVyIHNjcmlwdFxuICAgKi9cbiAgcHJpdmF0ZSBjcmVhdGVDbGF1ZGVXcmFwcGVyKCk6IHN0cmluZyB7XG4gICAgY29uc3QgYXJyYWtpc0RpciA9IGpvaW4oaG9tZWRpcigpLCAnLmFycmFraXMnKVxuICAgIGlmICghZXhpc3RzU3luYyhhcnJha2lzRGlyKSkge1xuICAgICAgbWtkaXJTeW5jKGFycmFraXNEaXIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pXG4gICAgfVxuXG4gICAgY29uc3QgaXNXaW5kb3dzID0gcHJvY2Vzcy5wbGF0Zm9ybSA9PT0gJ3dpbjMyJ1xuICAgIGNvbnN0IHdyYXBwZXJQYXRoID0gam9pbihhcnJha2lzRGlyLCBpc1dpbmRvd3MgPyAnY2xhdWRlLmJhdCcgOiAnY2xhdWRlJylcblxuICAgIGNvbnN0IHdyYXBwZXJDb250ZW50ID0gaXNXaW5kb3dzXG4gICAgICA/IHRoaXMuZ2V0V2luZG93c1dyYXBwZXIoKVxuICAgICAgOiB0aGlzLmdldFVuaXhXcmFwcGVyKClcblxuICAgIHdyaXRlRmlsZVN5bmMod3JhcHBlclBhdGgsIHdyYXBwZXJDb250ZW50LCB7IG1vZGU6IDBvNzU1IH0pXG5cbiAgICB0aGlzLmxvZygnZGVidWcnLCBgQ3JlYXRlZCBDbGF1ZGUgd3JhcHBlciBhdDogJHt3cmFwcGVyUGF0aH1gKVxuICAgIHJldHVybiB3cmFwcGVyUGF0aFxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBXaW5kb3dzIHdyYXBwZXIgc2NyaXB0IGNvbnRlbnRcbiAgICovXG4gIHByaXZhdGUgZ2V0V2luZG93c1dyYXBwZXIoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYEBlY2hvIG9mZlxuUkVNIEFycmFraXMgQXV0by1DYXB0dXJlIFdyYXBwZXIgZm9yIENsYXVkZSBDb2RlXG5ub2RlIFwiJHtqb2luKF9fZGlybmFtZSwgJ2NsYXVkZS13cmFwcGVyLmpzJyl9XCIgJSpcbmBcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgVW5peCB3cmFwcGVyIHNjcmlwdCBjb250ZW50XG4gICAqL1xuICBwcml2YXRlIGdldFVuaXhXcmFwcGVyKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGAjIS9iaW4vYmFzaFxuIyBBcnJha2lzIEF1dG8tQ2FwdHVyZSBXcmFwcGVyIGZvciBDbGF1ZGUgQ29kZVxubm9kZSBcIiR7am9pbihfX2Rpcm5hbWUsICdjbGF1ZGUtd3JhcHBlci5qcycpfVwiIFwiJEBcIlxuYFxuICB9XG5cbiAgLyoqXG4gICAqIFNldHVwIFBBVEggaW50ZXJjZXB0aW9uXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHNldHVwUGF0aEludGVyY2VwdCh3cmFwcGVyUGF0aDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gVGhpcyB3b3VsZCBtb2RpZnkgc2hlbGwgcHJvZmlsZSBmaWxlcyB0byBwcmVwZW5kIG91ciB3cmFwcGVyIGRpcmVjdG9yeSB0byBQQVRIXG4gICAgLy8gSW1wbGVtZW50YXRpb24gZGVwZW5kcyBvbiBzaGVsbCAoYmFzaCwgenNoLCBmaXNoLCBldGMuKVxuICAgIHRoaXMubG9nKCdpbmZvJywgYFBBVEggaW50ZXJjZXB0IHNldHVwIGZvciB3cmFwcGVyOiAke3dyYXBwZXJQYXRofWApXG5cbiAgICAvLyBOb3RlOiBJbiBwcm9kdWN0aW9uLCB0aGlzIHdvdWxkIG1vZGlmeSB+Ly5iYXNocmMsIH4vLnpzaHJjLCBldGMuXG4gICAgLy8gRm9yIG5vdywgd2UnbGwganVzdCBsb2cgdGhlIHJlcXVpcmVkIG1hbnVhbCBzdGVwXG4gICAgY29uc29sZS5sb2coYFxu8J+TiyBNYW51YWwgU2V0dXAgUmVxdWlyZWQ6XG5BZGQgdGhpcyB0byB5b3VyIHNoZWxsIHByb2ZpbGUgKH4vLmJhc2hyYywgfi8uenNocmMsIGV0Yy4pOlxuZXhwb3J0IFBBVEg9XCIke2Rpcm5hbWUod3JhcHBlclBhdGgpfTokUEFUSFwiXG5cbk9yIHJ1bjogZWNobyAnZXhwb3J0IFBBVEg9XCIke2Rpcm5hbWUod3JhcHBlclBhdGgpfTokUEFUSFwiJyA+PiB+Ly5iYXNocmNcbmApXG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGNsYXVkZSBhbGlhc1xuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBjcmVhdGVDbGF1ZGVBbGlhcygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBDcmVhdGUgc3ltbGluayBvciBhbGlhcyBmb3IgY2xhdWRlIGNvbW1hbmRcbiAgICB0aGlzLmxvZygnaW5mbycsICdDcmVhdGluZyBjbGF1ZGUgY29tbWFuZCBhbGlhcy4uLicpXG5cbiAgICAvLyBJbXBsZW1lbnRhdGlvbiB3b3VsZCBjcmVhdGUgYXBwcm9wcmlhdGUgYWxpYXMgZm9yIHRoZSBwbGF0Zm9ybVxuICAgIGNvbnNvbGUubG9nKGBcbvCfk4sgTWFudWFsIFNldHVwIFJlcXVpcmVkOlxuQWRkIHRoaXMgYWxpYXMgdG8geW91ciBzaGVsbCBwcm9maWxlOlxuYWxpYXMgY2xhdWRlPSdub2RlICR7am9pbihfX2Rpcm5hbWUsICdjbGF1ZGUtd3JhcHBlci5qcycpfSdcbmApXG4gIH1cblxuICAvKipcbiAgICogU3RhcnQgcHJvY2VzcyBtb25pdG9yXG4gICAqL1xuICBwcml2YXRlIHN0YXJ0UHJvY2Vzc01vbml0b3IoKTogQ2hpbGRQcm9jZXNzIHtcbiAgICB0aGlzLmxvZygnaW5mbycsICdTdGFydGluZyBwcm9jZXNzIG1vbml0b3IgZm9yIENsYXVkZSBDb2RlLi4uJylcblxuICAgIC8vIE1vbml0b3IgcnVubmluZyBwcm9jZXNzZXMgZm9yIGNsYXVkZSBjb21tYW5kc1xuICAgIGNvbnN0IGlzV2luZG93cyA9IHByb2Nlc3MucGxhdGZvcm0gPT09ICd3aW4zMidcbiAgICBjb25zdCBjb21tYW5kID0gaXNXaW5kb3dzID8gJ3dtaWMnIDogJ3BzJ1xuICAgIGNvbnN0IGFyZ3MgPSBpc1dpbmRvd3NcbiAgICAgID8gWydwcm9jZXNzJywgJ2dldCcsICduYW1lLHByb2Nlc3NpZCxjb21tYW5kbGluZSddXG4gICAgICA6IFsnYXV4J11cblxuICAgIGNvbnN0IG1vbml0b3IgPSBzcGF3bihjb21tYW5kLCBhcmdzLCB7XG4gICAgICBzdGRpbzogWydwaXBlJywgJ3BpcGUnLCAncGlwZSddLFxuICAgIH0pXG5cbiAgICBtb25pdG9yLnN0ZG91dD8ub24oJ2RhdGEnLCAoZGF0YSkgPT4ge1xuICAgICAgdGhpcy5wcm9jZXNzTW9uaXRvck91dHB1dChkYXRhLnRvU3RyaW5nKCkpXG4gICAgfSlcblxuICAgIG1vbml0b3Iub24oJ2V4aXQnLCAoKSA9PiB7XG4gICAgICAvLyBSZXN0YXJ0IG1vbml0b3IgYWZ0ZXIgZGVsYXlcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5pc1J1bm5pbmcpIHtcbiAgICAgICAgICBjb25zdCBuZXdNb25pdG9yID0gdGhpcy5zdGFydFByb2Nlc3NNb25pdG9yKClcbiAgICAgICAgICB0aGlzLndhdGNoZXJzLnB1c2gobmV3TW9uaXRvcilcbiAgICAgICAgfVxuICAgICAgfSwgNTAwMClcbiAgICB9KVxuXG4gICAgcmV0dXJuIG1vbml0b3JcbiAgfVxuXG4gIC8qKlxuICAgKiBQcm9jZXNzIG1vbml0b3Igb3V0cHV0IHRvIGRldGVjdCBjbGF1ZGUgY29tbWFuZHNcbiAgICovXG4gIHByaXZhdGUgcHJvY2Vzc01vbml0b3JPdXRwdXQob3V0cHV0OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAob3V0cHV0LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2NsYXVkZScpKSB7XG4gICAgICB0aGlzLmxvZygnZGVidWcnLCAnRGV0ZWN0ZWQgQ2xhdWRlIENvZGUgcHJvY2VzcycpXG4gICAgICAvLyBFeHRyYWN0IHByb2Nlc3MgaW5mbyBhbmQgc3RhcnQgY2FwdHVyZVxuICAgICAgdGhpcy5oYW5kbGVEZXRlY3RlZENsYXVkZVByb2Nlc3Mob3V0cHV0KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgZGV0ZWN0ZWQgY2xhdWRlIHByb2Nlc3NcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgaGFuZGxlRGV0ZWN0ZWRDbGF1ZGVQcm9jZXNzKFxuICAgIHByb2Nlc3NJbmZvOiBzdHJpbmdcbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMubG9nKCdpbmZvJywgJ/Cfjq8gRGV0ZWN0ZWQgQ2xhdWRlIENvZGUgZXhlY3V0aW9uLCBzdGFydGluZyBjYXB0dXJlLi4uJylcblxuICAgICAgLy8gU3RhcnQgaW50ZXJjZXB0b3IgZm9yIHRoaXMgc2Vzc2lvblxuICAgICAgY29uc3Qgc2Vzc2lvbklkID0gYXdhaXQgZGVmYXVsdEludGVyY2VwdG9yLmludGVyY2VwdFNlc3Npb24oKVxuXG4gICAgICB0aGlzLnN0YXR1cy5zZXNzaW9uc1RvZGF5KytcbiAgICAgIHRoaXMuc3RhdHVzLnRvdGFsU2Vzc2lvbnMrK1xuICAgICAgdGhpcy5zdGF0dXMubGFzdENhcHR1cmVUaW1lID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG5cbiAgICAgIHRoaXMuZW1pdCgnc2Vzc2lvbl9kZXRlY3RlZCcsIHsgc2Vzc2lvbklkLCBwcm9jZXNzSW5mbyB9KVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aGlzLmhhbmRsZUVycm9yKCdGYWlsZWQgdG8gY2FwdHVyZSBkZXRlY3RlZCBDbGF1ZGUgc2Vzc2lvbicsIGVycm9yKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXR1cCBldmVudCBoYW5kbGVyc1xuICAgKi9cbiAgcHJpdmF0ZSBzZXR1cEV2ZW50SGFuZGxlcnMoKTogdm9pZCB7XG4gICAgLy8gTGlzdGVuIHRvIGludGVyY2VwdG9yIGV2ZW50c1xuICAgIGRlZmF1bHRJbnRlcmNlcHRvci5vbignc2Vzc2lvbl9jb21wbGV0ZScsIChkYXRhKSA9PiB7XG4gICAgICB0aGlzLmVtaXQoJ3Nlc3Npb25fY2FwdHVyZWQnLCBkYXRhKVxuICAgICAgdGhpcy5sb2coJ2luZm8nLCBg4pyFIFNlc3Npb24gY2FwdHVyZWQ6ICR7ZGF0YS5zZXNzaW9uSWR9YClcbiAgICB9KVxuXG4gICAgZGVmYXVsdEludGVyY2VwdG9yLm9uKCdzZXNzaW9uX2Vycm9yJywgKGRhdGEpID0+IHtcbiAgICAgIHRoaXMuaGFuZGxlRXJyb3IoJ1Nlc3Npb24gY2FwdHVyZSBmYWlsZWQnLCBkYXRhLmVycm9yKVxuICAgIH0pXG5cbiAgICAvLyBIYW5kbGUgcHJveHkgZXZlbnRzXG4gICAgdGhpcy5jbGF1ZGVQcm94eS5vbignY2xhdWRlX21lc3NhZ2UnLCAoZGF0YSkgPT4ge1xuICAgICAgdGhpcy5lbWl0KCdtZXNzYWdlX2NhcHR1cmVkJywgZGF0YSlcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIExvYWQgY29uZmlndXJhdGlvbiBmcm9tIGZpbGVcbiAgICovXG4gIHByaXZhdGUgbG9hZENvbmZpZygpOiBDYXB0dXJlU2VydmljZUNvbmZpZyB7XG4gICAgY29uc3QgZGVmYXVsdENvbmZpZzogQ2FwdHVyZVNlcnZpY2VDb25maWcgPSB7XG4gICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgYXV0b1N0YXJ0OiBmYWxzZSxcbiAgICAgIGludGVyY2VwdE1vZGU6ICdwcm94eScsXG4gICAgICBub3RpZmljYXRpb246IHRydWUsXG4gICAgICBsb2dMZXZlbDogJ2luZm8nLFxuICAgICAgc3RvcmFnZUVuYWJsZWQ6IHRydWUsXG4gICAgfVxuXG4gICAgaWYgKCFleGlzdHNTeW5jKHRoaXMuY29uZmlnUGF0aCkpIHtcbiAgICAgIC8vIENyZWF0ZSBkZWZhdWx0IGNvbmZpZ1xuICAgICAgdGhpcy5zYXZlQ29uZmlnKGRlZmF1bHRDb25maWcpXG4gICAgICByZXR1cm4gZGVmYXVsdENvbmZpZ1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb25maWdEYXRhID0gcmVhZEZpbGVTeW5jKHRoaXMuY29uZmlnUGF0aCwgJ3V0Zi04JylcbiAgICAgIHJldHVybiB7IC4uLmRlZmF1bHRDb25maWcsIC4uLkpTT04ucGFyc2UoY29uZmlnRGF0YSkgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aGlzLmxvZygnd2FybicsICdGYWlsZWQgdG8gbG9hZCBjb25maWcsIHVzaW5nIGRlZmF1bHRzJylcbiAgICAgIHJldHVybiBkZWZhdWx0Q29uZmlnXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNhdmUgY29uZmlndXJhdGlvbiB0byBmaWxlXG4gICAqL1xuICBwcml2YXRlIHNhdmVDb25maWcoY29uZmlnOiBDYXB0dXJlU2VydmljZUNvbmZpZyA9IHRoaXMuY29uZmlnKTogdm9pZCB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbmZpZ0RpciA9IGRpcm5hbWUodGhpcy5jb25maWdQYXRoKVxuICAgICAgaWYgKCFleGlzdHNTeW5jKGNvbmZpZ0RpcikpIHtcbiAgICAgICAgbWtkaXJTeW5jKGNvbmZpZ0RpciwgeyByZWN1cnNpdmU6IHRydWUgfSlcbiAgICAgIH1cblxuICAgICAgd3JpdGVGaWxlU3luYyh0aGlzLmNvbmZpZ1BhdGgsIEpTT04uc3RyaW5naWZ5KGNvbmZpZywgbnVsbCwgMikpXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMubG9nKCdlcnJvcicsICdGYWlsZWQgdG8gc2F2ZSBjb25maWd1cmF0aW9uJylcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2xlYW51cCByZXNvdXJjZXNcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgY2xlYW51cCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBDbGVhbnVwIGFueSB0ZW1wb3JhcnkgZmlsZXMsIGFsaWFzZXMsIGV0Yy5cbiAgICB0aGlzLmxvZygnaW5mbycsICdDbGVhbmluZyB1cCBhdXRvLWNhcHR1cmUgcmVzb3VyY2VzLi4uJylcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgZXJyb3JzXG4gICAqL1xuICBwcml2YXRlIGhhbmRsZUVycm9yKG1lc3NhZ2U6IHN0cmluZywgZXJyb3I6IGFueSk6IHZvaWQge1xuICAgIGNvbnN0IGVycm9yTXNnID0gYCR7bWVzc2FnZX06ICR7ZXJyb3I/Lm1lc3NhZ2UgfHwgZXJyb3J9YFxuICAgIHRoaXMuc3RhdHVzLmVycm9ycy5wdXNoKGVycm9yTXNnKVxuICAgIHRoaXMubG9nKCdlcnJvcicsIGVycm9yTXNnKVxuICAgIHRoaXMuZW1pdCgnZXJyb3InLCB7IG1lc3NhZ2UsIGVycm9yIH0pXG4gIH1cblxuICAvKipcbiAgICogTG9nIG1lc3NhZ2VzIGJhc2VkIG9uIGxldmVsXG4gICAqL1xuICBwcml2YXRlIGxvZyhcbiAgICBsZXZlbDogJ2Vycm9yJyB8ICd3YXJuJyB8ICdpbmZvJyB8ICdkZWJ1ZycsXG4gICAgbWVzc2FnZTogc3RyaW5nXG4gICk6IHZvaWQge1xuICAgIGNvbnN0IGxldmVscyA9IHsgZXJyb3I6IDAsIHdhcm46IDEsIGluZm86IDIsIGRlYnVnOiAzIH1cbiAgICBjb25zdCBjb25maWdMZXZlbCA9IGxldmVsc1t0aGlzLmNvbmZpZy5sb2dMZXZlbF1cbiAgICBjb25zdCBtZXNzYWdlTGV2ZWwgPSBsZXZlbHNbbGV2ZWxdXG5cbiAgICBpZiAobWVzc2FnZUxldmVsIDw9IGNvbmZpZ0xldmVsKSB7XG4gICAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgIGNvbnNvbGUubG9nKGBbJHt0aW1lc3RhbXB9XSBbJHtsZXZlbC50b1VwcGVyQ2FzZSgpfV0gJHttZXNzYWdlfWApXG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogRGVmYXVsdCBhdXRvLWNhcHR1cmUgc2VydmljZSBpbnN0YW5jZVxuICovXG5leHBvcnQgY29uc3QgZGVmYXVsdEF1dG9DYXB0dXJlU2VydmljZSA9IG5ldyBBdXRvQ2FwdHVyZVNlcnZpY2UoKVxuXG4vKipcbiAqIENvbnZlbmllbmNlIGZ1bmN0aW9uc1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc3RhcnRBdXRvQ2FwdHVyZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgcmV0dXJuIGRlZmF1bHRBdXRvQ2FwdHVyZVNlcnZpY2Uuc3RhcnQoKVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc3RvcEF1dG9DYXB0dXJlKCk6IFByb21pc2U8dm9pZD4ge1xuICByZXR1cm4gZGVmYXVsdEF1dG9DYXB0dXJlU2VydmljZS5zdG9wKClcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEF1dG9DYXB0dXJlU3RhdHVzKCk6IENhcHR1cmVTdGF0dXMge1xuICByZXR1cm4gZGVmYXVsdEF1dG9DYXB0dXJlU2VydmljZS5nZXRTdGF0dXMoKVxufVxuIl0sIm5hbWVzIjpbIkV2ZW50RW1pdHRlciIsInNwYXduIiwicmVhZEZpbGVTeW5jIiwid3JpdGVGaWxlU3luYyIsImV4aXN0c1N5bmMiLCJta2RpclN5bmMiLCJqb2luIiwiZGlybmFtZSIsImhvbWVkaXIiLCJDbGF1ZGVQcm94eSIsImRlZmF1bHRJbnRlcmNlcHRvciIsIkF1dG9DYXB0dXJlU2VydmljZSIsImlzUnVubmluZyIsIndhdGNoZXJzIiwiY29uZmlnUGF0aCIsImNvbmZpZyIsImxvYWRDb25maWciLCJjbGF1ZGVQcm94eSIsInN0YXR1cyIsInJ1bm5pbmciLCJzZXNzaW9uc1RvZGF5IiwidG90YWxTZXNzaW9ucyIsImxhc3RDYXB0dXJlVGltZSIsImVycm9ycyIsIm1vZGUiLCJpbnRlcmNlcHRNb2RlIiwic2V0dXBFdmVudEhhbmRsZXJzIiwic3RhcnQiLCJsb2ciLCJzZXR1cFByb3h5TW9kZSIsInNldHVwV3JhcHBlck1vZGUiLCJzZXR1cE1vbml0b3JNb2RlIiwiZW1pdCIsImVycm9yIiwiaGFuZGxlRXJyb3IiLCJzdG9wIiwiZm9yRWFjaCIsIndhdGNoZXIiLCJraWxsZWQiLCJraWxsIiwiY2xlYW51cCIsImdldFN0YXR1cyIsInVwZGF0ZUNvbmZpZyIsIm5ld0NvbmZpZyIsInNhdmVDb25maWciLCJjbGF1ZGVXcmFwcGVyUGF0aCIsImNyZWF0ZUNsYXVkZVdyYXBwZXIiLCJzZXR1cFBhdGhJbnRlcmNlcHQiLCJjcmVhdGVDbGF1ZGVBbGlhcyIsIm1vbml0b3IiLCJzdGFydFByb2Nlc3NNb25pdG9yIiwicHVzaCIsImFycmFraXNEaXIiLCJyZWN1cnNpdmUiLCJpc1dpbmRvd3MiLCJwcm9jZXNzIiwicGxhdGZvcm0iLCJ3cmFwcGVyUGF0aCIsIndyYXBwZXJDb250ZW50IiwiZ2V0V2luZG93c1dyYXBwZXIiLCJnZXRVbml4V3JhcHBlciIsIl9fZGlybmFtZSIsImNvbnNvbGUiLCJjb21tYW5kIiwiYXJncyIsInN0ZGlvIiwic3Rkb3V0Iiwib24iLCJkYXRhIiwicHJvY2Vzc01vbml0b3JPdXRwdXQiLCJ0b1N0cmluZyIsInNldFRpbWVvdXQiLCJuZXdNb25pdG9yIiwib3V0cHV0IiwidG9Mb3dlckNhc2UiLCJpbmNsdWRlcyIsImhhbmRsZURldGVjdGVkQ2xhdWRlUHJvY2VzcyIsInByb2Nlc3NJbmZvIiwic2Vzc2lvbklkIiwiaW50ZXJjZXB0U2Vzc2lvbiIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImRlZmF1bHRDb25maWciLCJlbmFibGVkIiwiYXV0b1N0YXJ0Iiwibm90aWZpY2F0aW9uIiwibG9nTGV2ZWwiLCJzdG9yYWdlRW5hYmxlZCIsImNvbmZpZ0RhdGEiLCJKU09OIiwicGFyc2UiLCJjb25maWdEaXIiLCJzdHJpbmdpZnkiLCJtZXNzYWdlIiwiZXJyb3JNc2ciLCJsZXZlbCIsImxldmVscyIsIndhcm4iLCJpbmZvIiwiZGVidWciLCJjb25maWdMZXZlbCIsIm1lc3NhZ2VMZXZlbCIsInRpbWVzdGFtcCIsInRvVXBwZXJDYXNlIiwiZGVmYXVsdEF1dG9DYXB0dXJlU2VydmljZSIsInN0YXJ0QXV0b0NhcHR1cmUiLCJzdG9wQXV0b0NhcHR1cmUiLCJnZXRBdXRvQ2FwdHVyZVN0YXR1cyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/capture/auto-capture-service.ts\n");

/***/ }),

/***/ "(rsc)/./lib/capture/claude-interceptor.ts":
/*!*******************************************!*\
  !*** ./lib/capture/claude-interceptor.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ClaudeInterceptor: () => (/* binding */ ClaudeInterceptor),\n/* harmony export */   defaultInterceptor: () => (/* binding */ defaultInterceptor),\n/* harmony export */   interceptClaudeSession: () => (/* binding */ interceptClaudeSession)\n/* harmony export */ });\n/* harmony import */ var child_process__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! child_process */ \"child_process\");\n/* harmony import */ var child_process__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(child_process__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! events */ \"events\");\n/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(events__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./index */ \"(rsc)/./lib/capture/index.ts\");\n/**\n * Claude Code Session Interceptor\n *\n * This service intercepts and captures Claude Code conversations in real-time,\n * preserving all rich JSON metadata including tool calls, costs, and context.\n */ \n\n\n\n/**\n * Claude Code Session Interceptor\n */ class ClaudeInterceptor extends events__WEBPACK_IMPORTED_MODULE_1__.EventEmitter {\n    constructor(){\n        super(), this.sessions = new Map(), this.currentProcess = null;\n    }\n    /**\n   * Start intercepting a Claude Code session\n   */ async interceptSession(args = []) {\n        const sessionId = (0,crypto__WEBPACK_IMPORTED_MODULE_2__.randomUUID)();\n        // Ensure we capture JSON output\n        const claudeArgs = [\n            ...args,\n            '--output-format',\n            'stream-json',\n            '--verbose'\n        ];\n        console.log('üéØ Starting Claude Code interception:', claudeArgs.join(' '));\n        const claudeProcess = (0,child_process__WEBPACK_IMPORTED_MODULE_0__.spawn)('claude', claudeArgs, {\n            stdio: [\n                'pipe',\n                'pipe',\n                'pipe'\n            ],\n            env: process.env\n        });\n        this.currentProcess = claudeProcess;\n        const context = new SessionContext(sessionId);\n        this.sessions.set(sessionId, context);\n        // Handle JSON stream output\n        claudeProcess.stdout?.on('data', (data)=>{\n            this.parseClaudeOutput(data.toString(), context);\n        });\n        // Handle errors\n        claudeProcess.stderr?.on('data', (data)=>{\n            console.error('Claude Code stderr:', data.toString());\n        });\n        // Handle process exit\n        claudeProcess.on('close', async (code)=>{\n            console.log(`Claude Code process exited with code ${code}`);\n            await this.finalizeSession(context);\n        });\n        return sessionId;\n    }\n    /**\n   * Parse Claude Code JSON output stream\n   */ parseClaudeOutput(data, context) {\n        const lines = data.split('\\n').filter((line)=>line.trim());\n        for (const line of lines){\n            try {\n                const message = JSON.parse(line);\n                this.processMessage(message, context);\n            } catch (error) {\n                // Skip non-JSON lines (may be regular output)\n                if (line.trim() && !line.includes('Query:')) {\n                    console.log('Non-JSON output:', line);\n                }\n            }\n        }\n    }\n    /**\n   * Process individual Claude messages\n   */ processMessage(message, context) {\n        console.log(`üì® Processing ${message.type} message:`, message.uuid || 'no-uuid');\n        switch(message.type){\n            case 'system':\n                if (message.subtype === 'init') {\n                    context.initMessage = message;\n                    context.claudeSessionId = message.session_id;\n                }\n                break;\n            case 'user':\n                context.messages.push(this.convertUserMessage(message));\n                break;\n            case 'assistant':\n                context.messages.push(this.convertAssistantMessage(message));\n                break;\n            case 'result':\n                context.resultMessage = message;\n                context.isComplete = true;\n                break;\n        }\n        // Emit event for real-time processing\n        this.emit('message', {\n            message,\n            context\n        });\n    }\n    /**\n   * Convert Claude user message to our format\n   */ convertUserMessage(msg) {\n        const textContent = msg.message.content.filter((c)=>c.type === 'text').map((c)=>c.text).join('\\n');\n        return {\n            role: 'user',\n            content: textContent,\n            timestamp: new Date().toISOString(),\n            metadata: {\n                uuid: msg.uuid,\n                parent_tool_use_id: msg.parent_tool_use_id,\n                raw_content: msg.message.content\n            }\n        };\n    }\n    /**\n   * Convert Claude assistant message to our format\n   */ convertAssistantMessage(msg) {\n        const textContent = msg.message.content.filter((c)=>c.type === 'text').map((c)=>c.text).join('\\n');\n        const toolCalls = msg.message.content.filter((c)=>c.type === 'tool_use');\n        return {\n            role: 'assistant',\n            content: textContent,\n            timestamp: new Date().toISOString(),\n            metadata: {\n                uuid: msg.uuid,\n                parent_tool_use_id: msg.parent_tool_use_id,\n                tool_calls: toolCalls,\n                raw_content: msg.message.content\n            }\n        };\n    }\n    /**\n   * Finalize and store session when complete\n   */ async finalizeSession(context) {\n        if (!context.isComplete || !context.resultMessage) {\n            console.warn('‚ö†Ô∏è Session incomplete, storing partial data');\n        }\n        const conversationData = {\n            title: this.generateSessionTitle(context),\n            claudeSessionId: context.claudeSessionId,\n            messages: context.messages,\n            metadata: {\n                source: 'claude-code',\n                timestamp: new Date().toISOString(),\n                sessionInfo: context.initMessage ? {\n                    projectPath: context.initMessage.cwd,\n                    workingDirectory: context.initMessage.cwd\n                } : undefined,\n                performance: context.resultMessage ? {\n                    totalTokens: context.resultMessage.usage.input_tokens + context.resultMessage.usage.output_tokens,\n                    totalCost: context.resultMessage.total_cost_usd,\n                    duration: context.resultMessage.duration_ms\n                } : undefined\n            }\n        };\n        try {\n            const sessionId = await (0,_index__WEBPACK_IMPORTED_MODULE_3__.captureConversation)(conversationData);\n            console.log(`‚úÖ Captured Claude Code session: ${sessionId}`);\n            console.log(`üìä Stats: ${context.messages.length} messages, $${context.resultMessage?.total_cost_usd || 0}`);\n            this.emit('session_complete', {\n                sessionId,\n                context\n            });\n        } catch (error) {\n            console.error('‚ùå Failed to store session:', error);\n            this.emit('session_error', {\n                error,\n                context\n            });\n        }\n        // Cleanup\n        this.sessions.delete(context.arrakisSessionId);\n    }\n    /**\n   * Generate meaningful session title\n   */ generateSessionTitle(context) {\n        if (context.messages.length === 0) {\n            return 'Empty Claude Code Session';\n        }\n        const firstUserMessage = context.messages.find((m)=>m.role === 'user');\n        if (firstUserMessage && firstUserMessage.content.length > 10) {\n            const content = firstUserMessage.content.trim();\n            const firstSentence = content.split(/[.!?]/)[0];\n            return firstSentence.length > 50 ? content.substring(0, 47) + '...' : firstSentence;\n        }\n        return `Claude Code Session ${new Date().toLocaleDateString()}`;\n    }\n    /**\n   * Stop current interception\n   */ stop() {\n        if (this.currentProcess) {\n            this.currentProcess.kill('SIGTERM');\n            this.currentProcess = null;\n        }\n    }\n}\n/**\n * Session context for tracking conversation state\n */ class SessionContext {\n    constructor(arrakisSessionId){\n        this.claudeSessionId = '';\n        this.messages = [];\n        this.initMessage = null;\n        this.resultMessage = null;\n        this.isComplete = false;\n        this.arrakisSessionId = arrakisSessionId;\n    }\n}\n/**\n * Default interceptor instance\n */ const defaultInterceptor = new ClaudeInterceptor();\n/**\n * Convenience function to start interception\n */ async function interceptClaudeSession(args = []) {\n    return defaultInterceptor.interceptSession(args);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YUFOdEM3QyxrQkFBMEI7YUFDMUJFLFdBQTBCLEVBQUU7YUFDNUJILGNBQTBDO2FBQzFDTyxnQkFBNEM7YUFDNUNDLGFBQXNCO1FBR3BCLElBQUksQ0FBQ3NDLGdCQUFnQixHQUFHQTtJQUMxQjtBQUNGO0FBRUE7O0NBRUMsR0FDTSxNQUFNUyxxQkFBcUIsSUFBSS9GLG9CQUFtQjtBQUV6RDs7Q0FFQyxHQUNNLGVBQWVnRyx1QkFDcEIzRixPQUFpQixFQUFFO0lBRW5CLE9BQU8wRixtQkFBbUIzRixnQkFBZ0IsQ0FBQ0M7QUFDN0MiLCJzb3VyY2VzIjpbIkM6XFxwcm9qZWN0c1xcYXJyYWtpc1xcbGliXFxjYXB0dXJlXFxjbGF1ZGUtaW50ZXJjZXB0b3IudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDbGF1ZGUgQ29kZSBTZXNzaW9uIEludGVyY2VwdG9yXG4gKlxuICogVGhpcyBzZXJ2aWNlIGludGVyY2VwdHMgYW5kIGNhcHR1cmVzIENsYXVkZSBDb2RlIGNvbnZlcnNhdGlvbnMgaW4gcmVhbC10aW1lLFxuICogcHJlc2VydmluZyBhbGwgcmljaCBKU09OIG1ldGFkYXRhIGluY2x1ZGluZyB0b29sIGNhbGxzLCBjb3N0cywgYW5kIGNvbnRleHQuXG4gKi9cblxuaW1wb3J0IHsgc3Bhd24sIHR5cGUgQ2hpbGRQcm9jZXNzIH0gZnJvbSAnY2hpbGRfcHJvY2VzcydcbmltcG9ydCB7IEV2ZW50RW1pdHRlciB9IGZyb20gJ2V2ZW50cydcbmltcG9ydCB7IHJhbmRvbVVVSUQgfSBmcm9tICdjcnlwdG8nXG5pbXBvcnQgeyBjYXB0dXJlQ29udmVyc2F0aW9uLCBjYXB0dXJlTWVzc2FnZSB9IGZyb20gJy4vaW5kZXgnXG5pbXBvcnQgdHlwZSB7IENvbnZlcnNhdGlvbkRhdGEsIE1lc3NhZ2VEYXRhIH0gZnJvbSAnLi9pbmRleCdcblxuLy8gQ2xhdWRlIENvZGUgTWVzc2FnZSBUeXBlcyAoYmFzZWQgb24gU0RLIGRvY3VtZW50YXRpb24pXG5leHBvcnQgaW50ZXJmYWNlIENsYXVkZUFzc2lzdGFudE1lc3NhZ2Uge1xuICB0eXBlOiAnYXNzaXN0YW50J1xuICB1dWlkOiBzdHJpbmdcbiAgc2Vzc2lvbl9pZDogc3RyaW5nXG4gIG1lc3NhZ2U6IHtcbiAgICByb2xlOiAnYXNzaXN0YW50J1xuICAgIGNvbnRlbnQ6IEFycmF5PHtcbiAgICAgIHR5cGU6ICd0ZXh0JyB8ICd0b29sX3VzZSdcbiAgICAgIHRleHQ/OiBzdHJpbmdcbiAgICAgIGlkPzogc3RyaW5nXG4gICAgICBuYW1lPzogc3RyaW5nXG4gICAgICBpbnB1dD86IFJlY29yZDxzdHJpbmcsIGFueT5cbiAgICB9PlxuICB9XG4gIHBhcmVudF90b29sX3VzZV9pZDogc3RyaW5nIHwgbnVsbFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIENsYXVkZVVzZXJNZXNzYWdlIHtcbiAgdHlwZTogJ3VzZXInXG4gIHV1aWQ6IHN0cmluZ1xuICBzZXNzaW9uX2lkOiBzdHJpbmdcbiAgbWVzc2FnZToge1xuICAgIHJvbGU6ICd1c2VyJ1xuICAgIGNvbnRlbnQ6IEFycmF5PHtcbiAgICAgIHR5cGU6ICd0ZXh0JyB8ICd0b29sX3Jlc3VsdCdcbiAgICAgIHRleHQ/OiBzdHJpbmdcbiAgICAgIHRvb2xfdXNlX2lkPzogc3RyaW5nXG4gICAgICBjb250ZW50PzogYW55XG4gICAgfT5cbiAgfVxuICBwYXJlbnRfdG9vbF91c2VfaWQ6IHN0cmluZyB8IG51bGxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDbGF1ZGVTeXN0ZW1NZXNzYWdlIHtcbiAgdHlwZTogJ3N5c3RlbSdcbiAgc3VidHlwZTogJ2luaXQnXG4gIHV1aWQ6IHN0cmluZ1xuICBzZXNzaW9uX2lkOiBzdHJpbmdcbiAgYXBpS2V5U291cmNlOiBzdHJpbmdcbiAgY3dkOiBzdHJpbmdcbiAgdG9vbHM6IHN0cmluZ1tdXG4gIG1jcF9zZXJ2ZXJzOiBBcnJheTx7IG5hbWU6IHN0cmluZzsgc3RhdHVzOiBzdHJpbmcgfT5cbiAgbW9kZWw6IHN0cmluZ1xuICBwZXJtaXNzaW9uTW9kZTogc3RyaW5nXG4gIHNsYXNoX2NvbW1hbmRzOiBzdHJpbmdbXVxuICBvdXRwdXRfc3R5bGU6IHN0cmluZ1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENsYXVkZVJlc3VsdE1lc3NhZ2Uge1xuICB0eXBlOiAncmVzdWx0J1xuICBzdWJ0eXBlOiAnc3VjY2VzcycgfCAnZXJyb3JfbWF4X3R1cm5zJyB8ICdlcnJvcl9kdXJpbmdfZXhlY3V0aW9uJ1xuICB1dWlkOiBzdHJpbmdcbiAgc2Vzc2lvbl9pZDogc3RyaW5nXG4gIGR1cmF0aW9uX21zOiBudW1iZXJcbiAgZHVyYXRpb25fYXBpX21zOiBudW1iZXJcbiAgaXNfZXJyb3I6IGJvb2xlYW5cbiAgbnVtX3R1cm5zOiBudW1iZXJcbiAgcmVzdWx0Pzogc3RyaW5nXG4gIHRvdGFsX2Nvc3RfdXNkOiBudW1iZXJcbiAgdXNhZ2U6IHtcbiAgICBpbnB1dF90b2tlbnM6IG51bWJlclxuICAgIG91dHB1dF90b2tlbnM6IG51bWJlclxuICB9XG4gIHBlcm1pc3Npb25fZGVuaWFsczogQXJyYXk8e1xuICAgIHRvb2xfbmFtZTogc3RyaW5nXG4gICAgdG9vbF91c2VfaWQ6IHN0cmluZ1xuICAgIHRvb2xfaW5wdXQ6IFJlY29yZDxzdHJpbmcsIHVua25vd24+XG4gIH0+XG59XG5cbmV4cG9ydCB0eXBlIENsYXVkZU1lc3NhZ2UgPVxuICB8IENsYXVkZUFzc2lzdGFudE1lc3NhZ2VcbiAgfCBDbGF1ZGVVc2VyTWVzc2FnZVxuICB8IENsYXVkZVN5c3RlbU1lc3NhZ2VcbiAgfCBDbGF1ZGVSZXN1bHRNZXNzYWdlXG5cbi8qKlxuICogQ2xhdWRlIENvZGUgU2Vzc2lvbiBJbnRlcmNlcHRvclxuICovXG5leHBvcnQgY2xhc3MgQ2xhdWRlSW50ZXJjZXB0b3IgZXh0ZW5kcyBFdmVudEVtaXR0ZXIge1xuICBwcml2YXRlIHNlc3Npb25zOiBNYXA8c3RyaW5nLCBTZXNzaW9uQ29udGV4dD4gPSBuZXcgTWFwKClcbiAgcHJpdmF0ZSBjdXJyZW50UHJvY2VzczogQ2hpbGRQcm9jZXNzIHwgbnVsbCA9IG51bGxcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpXG4gIH1cblxuICAvKipcbiAgICogU3RhcnQgaW50ZXJjZXB0aW5nIGEgQ2xhdWRlIENvZGUgc2Vzc2lvblxuICAgKi9cbiAgYXN5bmMgaW50ZXJjZXB0U2Vzc2lvbihhcmdzOiBzdHJpbmdbXSA9IFtdKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBjb25zdCBzZXNzaW9uSWQgPSByYW5kb21VVUlEKClcblxuICAgIC8vIEVuc3VyZSB3ZSBjYXB0dXJlIEpTT04gb3V0cHV0XG4gICAgY29uc3QgY2xhdWRlQXJncyA9IFsuLi5hcmdzLCAnLS1vdXRwdXQtZm9ybWF0JywgJ3N0cmVhbS1qc29uJywgJy0tdmVyYm9zZSddXG5cbiAgICBjb25zb2xlLmxvZygn8J+OryBTdGFydGluZyBDbGF1ZGUgQ29kZSBpbnRlcmNlcHRpb246JywgY2xhdWRlQXJncy5qb2luKCcgJykpXG5cbiAgICBjb25zdCBjbGF1ZGVQcm9jZXNzID0gc3Bhd24oJ2NsYXVkZScsIGNsYXVkZUFyZ3MsIHtcbiAgICAgIHN0ZGlvOiBbJ3BpcGUnLCAncGlwZScsICdwaXBlJ10sXG4gICAgICBlbnY6IHByb2Nlc3MuZW52LFxuICAgIH0pXG5cbiAgICB0aGlzLmN1cnJlbnRQcm9jZXNzID0gY2xhdWRlUHJvY2Vzc1xuICAgIGNvbnN0IGNvbnRleHQgPSBuZXcgU2Vzc2lvbkNvbnRleHQoc2Vzc2lvbklkKVxuICAgIHRoaXMuc2Vzc2lvbnMuc2V0KHNlc3Npb25JZCwgY29udGV4dClcblxuICAgIC8vIEhhbmRsZSBKU09OIHN0cmVhbSBvdXRwdXRcbiAgICBjbGF1ZGVQcm9jZXNzLnN0ZG91dD8ub24oJ2RhdGEnLCAoZGF0YSkgPT4ge1xuICAgICAgdGhpcy5wYXJzZUNsYXVkZU91dHB1dChkYXRhLnRvU3RyaW5nKCksIGNvbnRleHQpXG4gICAgfSlcblxuICAgIC8vIEhhbmRsZSBlcnJvcnNcbiAgICBjbGF1ZGVQcm9jZXNzLnN0ZGVycj8ub24oJ2RhdGEnLCAoZGF0YSkgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcignQ2xhdWRlIENvZGUgc3RkZXJyOicsIGRhdGEudG9TdHJpbmcoKSlcbiAgICB9KVxuXG4gICAgLy8gSGFuZGxlIHByb2Nlc3MgZXhpdFxuICAgIGNsYXVkZVByb2Nlc3Mub24oJ2Nsb3NlJywgYXN5bmMgKGNvZGUpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGBDbGF1ZGUgQ29kZSBwcm9jZXNzIGV4aXRlZCB3aXRoIGNvZGUgJHtjb2RlfWApXG4gICAgICBhd2FpdCB0aGlzLmZpbmFsaXplU2Vzc2lvbihjb250ZXh0KVxuICAgIH0pXG5cbiAgICByZXR1cm4gc2Vzc2lvbklkXG4gIH1cblxuICAvKipcbiAgICogUGFyc2UgQ2xhdWRlIENvZGUgSlNPTiBvdXRwdXQgc3RyZWFtXG4gICAqL1xuICBwcml2YXRlIHBhcnNlQ2xhdWRlT3V0cHV0KGRhdGE6IHN0cmluZywgY29udGV4dDogU2Vzc2lvbkNvbnRleHQpIHtcbiAgICBjb25zdCBsaW5lcyA9IGRhdGEuc3BsaXQoJ1xcbicpLmZpbHRlcigobGluZSkgPT4gbGluZS50cmltKCkpXG5cbiAgICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2U6IENsYXVkZU1lc3NhZ2UgPSBKU09OLnBhcnNlKGxpbmUpXG4gICAgICAgIHRoaXMucHJvY2Vzc01lc3NhZ2UobWVzc2FnZSwgY29udGV4dClcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIC8vIFNraXAgbm9uLUpTT04gbGluZXMgKG1heSBiZSByZWd1bGFyIG91dHB1dClcbiAgICAgICAgaWYgKGxpbmUudHJpbSgpICYmICFsaW5lLmluY2x1ZGVzKCdRdWVyeTonKSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdOb24tSlNPTiBvdXRwdXQ6JywgbGluZSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBQcm9jZXNzIGluZGl2aWR1YWwgQ2xhdWRlIG1lc3NhZ2VzXG4gICAqL1xuICBwcml2YXRlIHByb2Nlc3NNZXNzYWdlKG1lc3NhZ2U6IENsYXVkZU1lc3NhZ2UsIGNvbnRleHQ6IFNlc3Npb25Db250ZXh0KSB7XG4gICAgY29uc29sZS5sb2coXG4gICAgICBg8J+TqCBQcm9jZXNzaW5nICR7bWVzc2FnZS50eXBlfSBtZXNzYWdlOmAsXG4gICAgICBtZXNzYWdlLnV1aWQgfHwgJ25vLXV1aWQnXG4gICAgKVxuXG4gICAgc3dpdGNoIChtZXNzYWdlLnR5cGUpIHtcbiAgICAgIGNhc2UgJ3N5c3RlbSc6XG4gICAgICAgIGlmIChtZXNzYWdlLnN1YnR5cGUgPT09ICdpbml0Jykge1xuICAgICAgICAgIGNvbnRleHQuaW5pdE1lc3NhZ2UgPSBtZXNzYWdlXG4gICAgICAgICAgY29udGV4dC5jbGF1ZGVTZXNzaW9uSWQgPSBtZXNzYWdlLnNlc3Npb25faWRcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlICd1c2VyJzpcbiAgICAgICAgY29udGV4dC5tZXNzYWdlcy5wdXNoKHRoaXMuY29udmVydFVzZXJNZXNzYWdlKG1lc3NhZ2UpKVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlICdhc3Npc3RhbnQnOlxuICAgICAgICBjb250ZXh0Lm1lc3NhZ2VzLnB1c2godGhpcy5jb252ZXJ0QXNzaXN0YW50TWVzc2FnZShtZXNzYWdlKSlcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSAncmVzdWx0JzpcbiAgICAgICAgY29udGV4dC5yZXN1bHRNZXNzYWdlID0gbWVzc2FnZVxuICAgICAgICBjb250ZXh0LmlzQ29tcGxldGUgPSB0cnVlXG4gICAgICAgIGJyZWFrXG4gICAgfVxuXG4gICAgLy8gRW1pdCBldmVudCBmb3IgcmVhbC10aW1lIHByb2Nlc3NpbmdcbiAgICB0aGlzLmVtaXQoJ21lc3NhZ2UnLCB7IG1lc3NhZ2UsIGNvbnRleHQgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0IENsYXVkZSB1c2VyIG1lc3NhZ2UgdG8gb3VyIGZvcm1hdFxuICAgKi9cbiAgcHJpdmF0ZSBjb252ZXJ0VXNlck1lc3NhZ2UobXNnOiBDbGF1ZGVVc2VyTWVzc2FnZSk6IE1lc3NhZ2VEYXRhIHtcbiAgICBjb25zdCB0ZXh0Q29udGVudCA9IG1zZy5tZXNzYWdlLmNvbnRlbnRcbiAgICAgIC5maWx0ZXIoKGMpID0+IGMudHlwZSA9PT0gJ3RleHQnKVxuICAgICAgLm1hcCgoYykgPT4gYy50ZXh0KVxuICAgICAgLmpvaW4oJ1xcbicpXG5cbiAgICByZXR1cm4ge1xuICAgICAgcm9sZTogJ3VzZXInLFxuICAgICAgY29udGVudDogdGV4dENvbnRlbnQsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgIHV1aWQ6IG1zZy51dWlkLFxuICAgICAgICBwYXJlbnRfdG9vbF91c2VfaWQ6IG1zZy5wYXJlbnRfdG9vbF91c2VfaWQsXG4gICAgICAgIHJhd19jb250ZW50OiBtc2cubWVzc2FnZS5jb250ZW50LFxuICAgICAgfSxcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ29udmVydCBDbGF1ZGUgYXNzaXN0YW50IG1lc3NhZ2UgdG8gb3VyIGZvcm1hdFxuICAgKi9cbiAgcHJpdmF0ZSBjb252ZXJ0QXNzaXN0YW50TWVzc2FnZShtc2c6IENsYXVkZUFzc2lzdGFudE1lc3NhZ2UpOiBNZXNzYWdlRGF0YSB7XG4gICAgY29uc3QgdGV4dENvbnRlbnQgPSBtc2cubWVzc2FnZS5jb250ZW50XG4gICAgICAuZmlsdGVyKChjKSA9PiBjLnR5cGUgPT09ICd0ZXh0JylcbiAgICAgIC5tYXAoKGMpID0+IGMudGV4dClcbiAgICAgIC5qb2luKCdcXG4nKVxuXG4gICAgY29uc3QgdG9vbENhbGxzID0gbXNnLm1lc3NhZ2UuY29udGVudC5maWx0ZXIoKGMpID0+IGMudHlwZSA9PT0gJ3Rvb2xfdXNlJylcblxuICAgIHJldHVybiB7XG4gICAgICByb2xlOiAnYXNzaXN0YW50JyxcbiAgICAgIGNvbnRlbnQ6IHRleHRDb250ZW50LFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICBtZXRhZGF0YToge1xuICAgICAgICB1dWlkOiBtc2cudXVpZCxcbiAgICAgICAgcGFyZW50X3Rvb2xfdXNlX2lkOiBtc2cucGFyZW50X3Rvb2xfdXNlX2lkLFxuICAgICAgICB0b29sX2NhbGxzOiB0b29sQ2FsbHMsXG4gICAgICAgIHJhd19jb250ZW50OiBtc2cubWVzc2FnZS5jb250ZW50LFxuICAgICAgfSxcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRmluYWxpemUgYW5kIHN0b3JlIHNlc3Npb24gd2hlbiBjb21wbGV0ZVxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBmaW5hbGl6ZVNlc3Npb24oY29udGV4dDogU2Vzc2lvbkNvbnRleHQpIHtcbiAgICBpZiAoIWNvbnRleHQuaXNDb21wbGV0ZSB8fCAhY29udGV4dC5yZXN1bHRNZXNzYWdlKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ+KaoO+4jyBTZXNzaW9uIGluY29tcGxldGUsIHN0b3JpbmcgcGFydGlhbCBkYXRhJylcbiAgICB9XG5cbiAgICBjb25zdCBjb252ZXJzYXRpb25EYXRhOiBDb252ZXJzYXRpb25EYXRhID0ge1xuICAgICAgdGl0bGU6IHRoaXMuZ2VuZXJhdGVTZXNzaW9uVGl0bGUoY29udGV4dCksXG4gICAgICBjbGF1ZGVTZXNzaW9uSWQ6IGNvbnRleHQuY2xhdWRlU2Vzc2lvbklkLFxuICAgICAgbWVzc2FnZXM6IGNvbnRleHQubWVzc2FnZXMsXG4gICAgICBtZXRhZGF0YToge1xuICAgICAgICBzb3VyY2U6ICdjbGF1ZGUtY29kZScsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICBzZXNzaW9uSW5mbzogY29udGV4dC5pbml0TWVzc2FnZVxuICAgICAgICAgID8ge1xuICAgICAgICAgICAgICBwcm9qZWN0UGF0aDogY29udGV4dC5pbml0TWVzc2FnZS5jd2QsXG4gICAgICAgICAgICAgIHdvcmtpbmdEaXJlY3Rvcnk6IGNvbnRleHQuaW5pdE1lc3NhZ2UuY3dkLFxuICAgICAgICAgICAgfVxuICAgICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgICBwZXJmb3JtYW5jZTogY29udGV4dC5yZXN1bHRNZXNzYWdlXG4gICAgICAgICAgPyB7XG4gICAgICAgICAgICAgIHRvdGFsVG9rZW5zOlxuICAgICAgICAgICAgICAgIGNvbnRleHQucmVzdWx0TWVzc2FnZS51c2FnZS5pbnB1dF90b2tlbnMgK1xuICAgICAgICAgICAgICAgIGNvbnRleHQucmVzdWx0TWVzc2FnZS51c2FnZS5vdXRwdXRfdG9rZW5zLFxuICAgICAgICAgICAgICB0b3RhbENvc3Q6IGNvbnRleHQucmVzdWx0TWVzc2FnZS50b3RhbF9jb3N0X3VzZCxcbiAgICAgICAgICAgICAgZHVyYXRpb246IGNvbnRleHQucmVzdWx0TWVzc2FnZS5kdXJhdGlvbl9tcyxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgIH0sXG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHNlc3Npb25JZCA9IGF3YWl0IGNhcHR1cmVDb252ZXJzYXRpb24oY29udmVyc2F0aW9uRGF0YSlcbiAgICAgIGNvbnNvbGUubG9nKGDinIUgQ2FwdHVyZWQgQ2xhdWRlIENvZGUgc2Vzc2lvbjogJHtzZXNzaW9uSWR9YClcbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBg8J+TiiBTdGF0czogJHtjb250ZXh0Lm1lc3NhZ2VzLmxlbmd0aH0gbWVzc2FnZXMsICQke2NvbnRleHQucmVzdWx0TWVzc2FnZT8udG90YWxfY29zdF91c2QgfHwgMH1gXG4gICAgICApXG5cbiAgICAgIHRoaXMuZW1pdCgnc2Vzc2lvbl9jb21wbGV0ZScsIHsgc2Vzc2lvbklkLCBjb250ZXh0IH0pXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBGYWlsZWQgdG8gc3RvcmUgc2Vzc2lvbjonLCBlcnJvcilcbiAgICAgIHRoaXMuZW1pdCgnc2Vzc2lvbl9lcnJvcicsIHsgZXJyb3IsIGNvbnRleHQgfSlcbiAgICB9XG5cbiAgICAvLyBDbGVhbnVwXG4gICAgdGhpcy5zZXNzaW9ucy5kZWxldGUoY29udGV4dC5hcnJha2lzU2Vzc2lvbklkKVxuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIG1lYW5pbmdmdWwgc2Vzc2lvbiB0aXRsZVxuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZVNlc3Npb25UaXRsZShjb250ZXh0OiBTZXNzaW9uQ29udGV4dCk6IHN0cmluZyB7XG4gICAgaWYgKGNvbnRleHQubWVzc2FnZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gJ0VtcHR5IENsYXVkZSBDb2RlIFNlc3Npb24nXG4gICAgfVxuXG4gICAgY29uc3QgZmlyc3RVc2VyTWVzc2FnZSA9IGNvbnRleHQubWVzc2FnZXMuZmluZCgobSkgPT4gbS5yb2xlID09PSAndXNlcicpXG4gICAgaWYgKGZpcnN0VXNlck1lc3NhZ2UgJiYgZmlyc3RVc2VyTWVzc2FnZS5jb250ZW50Lmxlbmd0aCA+IDEwKSB7XG4gICAgICBjb25zdCBjb250ZW50ID0gZmlyc3RVc2VyTWVzc2FnZS5jb250ZW50LnRyaW0oKVxuICAgICAgY29uc3QgZmlyc3RTZW50ZW5jZSA9IGNvbnRlbnQuc3BsaXQoL1suIT9dLylbMF1cbiAgICAgIHJldHVybiBmaXJzdFNlbnRlbmNlLmxlbmd0aCA+IDUwXG4gICAgICAgID8gY29udGVudC5zdWJzdHJpbmcoMCwgNDcpICsgJy4uLidcbiAgICAgICAgOiBmaXJzdFNlbnRlbmNlXG4gICAgfVxuXG4gICAgcmV0dXJuIGBDbGF1ZGUgQ29kZSBTZXNzaW9uICR7bmV3IERhdGUoKS50b0xvY2FsZURhdGVTdHJpbmcoKX1gXG4gIH1cblxuICAvKipcbiAgICogU3RvcCBjdXJyZW50IGludGVyY2VwdGlvblxuICAgKi9cbiAgc3RvcCgpIHtcbiAgICBpZiAodGhpcy5jdXJyZW50UHJvY2Vzcykge1xuICAgICAgdGhpcy5jdXJyZW50UHJvY2Vzcy5raWxsKCdTSUdURVJNJylcbiAgICAgIHRoaXMuY3VycmVudFByb2Nlc3MgPSBudWxsXG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogU2Vzc2lvbiBjb250ZXh0IGZvciB0cmFja2luZyBjb252ZXJzYXRpb24gc3RhdGVcbiAqL1xuY2xhc3MgU2Vzc2lvbkNvbnRleHQge1xuICBhcnJha2lzU2Vzc2lvbklkOiBzdHJpbmdcbiAgY2xhdWRlU2Vzc2lvbklkOiBzdHJpbmcgPSAnJ1xuICBtZXNzYWdlczogTWVzc2FnZURhdGFbXSA9IFtdXG4gIGluaXRNZXNzYWdlOiBDbGF1ZGVTeXN0ZW1NZXNzYWdlIHwgbnVsbCA9IG51bGxcbiAgcmVzdWx0TWVzc2FnZTogQ2xhdWRlUmVzdWx0TWVzc2FnZSB8IG51bGwgPSBudWxsXG4gIGlzQ29tcGxldGU6IGJvb2xlYW4gPSBmYWxzZVxuXG4gIGNvbnN0cnVjdG9yKGFycmFraXNTZXNzaW9uSWQ6IHN0cmluZykge1xuICAgIHRoaXMuYXJyYWtpc1Nlc3Npb25JZCA9IGFycmFraXNTZXNzaW9uSWRcbiAgfVxufVxuXG4vKipcbiAqIERlZmF1bHQgaW50ZXJjZXB0b3IgaW5zdGFuY2VcbiAqL1xuZXhwb3J0IGNvbnN0IGRlZmF1bHRJbnRlcmNlcHRvciA9IG5ldyBDbGF1ZGVJbnRlcmNlcHRvcigpXG5cbi8qKlxuICogQ29udmVuaWVuY2UgZnVuY3Rpb24gdG8gc3RhcnQgaW50ZXJjZXB0aW9uXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbnRlcmNlcHRDbGF1ZGVTZXNzaW9uKFxuICBhcmdzOiBzdHJpbmdbXSA9IFtdXG4pOiBQcm9taXNlPHN0cmluZz4ge1xuICByZXR1cm4gZGVmYXVsdEludGVyY2VwdG9yLmludGVyY2VwdFNlc3Npb24oYXJncylcbn1cbiJdLCJuYW1lcyI6WyJzcGF3biIsIkV2ZW50RW1pdHRlciIsInJhbmRvbVVVSUQiLCJjYXB0dXJlQ29udmVyc2F0aW9uIiwiQ2xhdWRlSW50ZXJjZXB0b3IiLCJzZXNzaW9ucyIsIk1hcCIsImN1cnJlbnRQcm9jZXNzIiwiaW50ZXJjZXB0U2Vzc2lvbiIsImFyZ3MiLCJzZXNzaW9uSWQiLCJjbGF1ZGVBcmdzIiwiY29uc29sZSIsImxvZyIsImpvaW4iLCJjbGF1ZGVQcm9jZXNzIiwic3RkaW8iLCJlbnYiLCJwcm9jZXNzIiwiY29udGV4dCIsIlNlc3Npb25Db250ZXh0Iiwic2V0Iiwic3Rkb3V0Iiwib24iLCJkYXRhIiwicGFyc2VDbGF1ZGVPdXRwdXQiLCJ0b1N0cmluZyIsInN0ZGVyciIsImVycm9yIiwiY29kZSIsImZpbmFsaXplU2Vzc2lvbiIsImxpbmVzIiwic3BsaXQiLCJmaWx0ZXIiLCJsaW5lIiwidHJpbSIsIm1lc3NhZ2UiLCJKU09OIiwicGFyc2UiLCJwcm9jZXNzTWVzc2FnZSIsImluY2x1ZGVzIiwidHlwZSIsInV1aWQiLCJzdWJ0eXBlIiwiaW5pdE1lc3NhZ2UiLCJjbGF1ZGVTZXNzaW9uSWQiLCJzZXNzaW9uX2lkIiwibWVzc2FnZXMiLCJwdXNoIiwiY29udmVydFVzZXJNZXNzYWdlIiwiY29udmVydEFzc2lzdGFudE1lc3NhZ2UiLCJyZXN1bHRNZXNzYWdlIiwiaXNDb21wbGV0ZSIsImVtaXQiLCJtc2ciLCJ0ZXh0Q29udGVudCIsImNvbnRlbnQiLCJjIiwibWFwIiwidGV4dCIsInJvbGUiLCJ0aW1lc3RhbXAiLCJEYXRlIiwidG9JU09TdHJpbmciLCJtZXRhZGF0YSIsInBhcmVudF90b29sX3VzZV9pZCIsInJhd19jb250ZW50IiwidG9vbENhbGxzIiwidG9vbF9jYWxscyIsIndhcm4iLCJjb252ZXJzYXRpb25EYXRhIiwidGl0bGUiLCJnZW5lcmF0ZVNlc3Npb25UaXRsZSIsInNvdXJjZSIsInNlc3Npb25JbmZvIiwicHJvamVjdFBhdGgiLCJjd2QiLCJ3b3JraW5nRGlyZWN0b3J5IiwidW5kZWZpbmVkIiwicGVyZm9ybWFuY2UiLCJ0b3RhbFRva2VucyIsInVzYWdlIiwiaW5wdXRfdG9rZW5zIiwib3V0cHV0X3Rva2VucyIsInRvdGFsQ29zdCIsInRvdGFsX2Nvc3RfdXNkIiwiZHVyYXRpb24iLCJkdXJhdGlvbl9tcyIsImxlbmd0aCIsImRlbGV0ZSIsImFycmFraXNTZXNzaW9uSWQiLCJmaXJzdFVzZXJNZXNzYWdlIiwiZmluZCIsIm0iLCJmaXJzdFNlbnRlbmNlIiwic3Vic3RyaW5nIiwidG9Mb2NhbGVEYXRlU3RyaW5nIiwic3RvcCIsImtpbGwiLCJkZWZhdWx0SW50ZXJjZXB0b3IiLCJpbnRlcmNlcHRDbGF1ZGVTZXNzaW9uIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/capture/claude-interceptor.ts\n");

/***/ }),

/***/ "(rsc)/./lib/capture/claude-proxy.ts":
/*!*************************************!*\
  !*** ./lib/capture/claude-proxy.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ClaudeProxy: () => (/* binding */ ClaudeProxy),\n/* harmony export */   continueClaudeSession: () => (/* binding */ continueClaudeSession),\n/* harmony export */   defaultProxy: () => (/* binding */ defaultProxy),\n/* harmony export */   executeClaudeCommand: () => (/* binding */ executeClaudeCommand),\n/* harmony export */   resumeClaudeSession: () => (/* binding */ resumeClaudeSession)\n/* harmony export */ });\n/* harmony import */ var child_process__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! child_process */ \"child_process\");\n/* harmony import */ var child_process__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(child_process__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! events */ \"events\");\n/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(events__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _claude_interceptor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./claude-interceptor */ \"(rsc)/./lib/capture/claude-interceptor.ts\");\n/* harmony import */ var _metadata_parser__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./metadata-parser */ \"(rsc)/./lib/capture/metadata-parser.ts\");\n/* harmony import */ var _tool_tracker__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./tool-tracker */ \"(rsc)/./lib/capture/tool-tracker.ts\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./index */ \"(rsc)/./lib/capture/index.ts\");\n/**\n * Claude Code Proxy\n *\n * A comprehensive wrapper/proxy for Claude Code that captures conversations\n * in real-time with full metadata, tool calls, and performance analytics.\n */ \n\n\n\n\n\n/**\n * Main Claude Code Proxy\n */ class ClaudeProxy extends events__WEBPACK_IMPORTED_MODULE_1__.EventEmitter {\n    constructor(){\n        super(), this.activeSessions = new Map();\n        this.interceptor = new _claude_interceptor__WEBPACK_IMPORTED_MODULE_2__.ClaudeInterceptor();\n        this.parser = new _metadata_parser__WEBPACK_IMPORTED_MODULE_3__.ClaudeMetadataParser();\n        this.toolTracker = new _tool_tracker__WEBPACK_IMPORTED_MODULE_4__.ToolCallTracker();\n        this.setupEventHandlers();\n    }\n    /**\n   * Execute Claude Code command with full capture\n   */ async executeCommand(prompt, options = {}) {\n        const opts = this.mergeDefaultOptions(options);\n        console.log('üöÄ Starting Claude Code proxy execution...');\n        console.log(`üìù Prompt: ${prompt.substring(0, 100)}${prompt.length > 100 ? '...' : ''}`);\n        const sessionContext = new SessionContext();\n        const sessionId = sessionContext.sessionId;\n        this.activeSessions.set(sessionId, sessionContext);\n        try {\n            // Build Claude Code command\n            const claudeArgs = this.buildClaudeArgs(prompt, opts);\n            // Start capture if enabled\n            if (opts.enableCapture) {\n                await this.startCapture(sessionId, claudeArgs, opts);\n            }\n            // Execute Claude Code\n            const output = await this.runClaudeCommand(claudeArgs, sessionContext, opts);\n            // Process session results\n            const summary = await this.finalizeSession(sessionContext, opts);\n            console.log('‚úÖ Claude Code execution completed');\n            console.log(`üìä Summary: ${summary.messageCount} messages, $${summary.cost}, ${summary.toolCallsCount} tool calls`);\n            return {\n                output,\n                summary\n            };\n        } catch (error) {\n            console.error('‚ùå Claude Code execution failed:', error);\n            throw error;\n        } finally{\n            this.activeSessions.delete(sessionId);\n        }\n    }\n    /**\n   * Resume existing Claude Code session\n   */ async resumeSession(sessionId, prompt, options = {}) {\n        const opts = {\n            ...options,\n            claudeArgs: [\n                ...options.claudeArgs || [],\n                '--resume',\n                sessionId\n            ]\n        };\n        return this.executeCommand(prompt, opts);\n    }\n    /**\n   * Continue most recent Claude Code session\n   */ async continueSession(prompt, options = {}) {\n        const opts = {\n            ...options,\n            claudeArgs: [\n                ...options.claudeArgs || [],\n                '--continue'\n            ]\n        };\n        return this.executeCommand(prompt, opts);\n    }\n    /**\n   * Analyze existing session data\n   */ async analyzeSession(sessionJsonData) {\n        return this.parser.parseFromJsonString(sessionJsonData);\n    }\n    /**\n   * Get session statistics\n   */ getSessionStatistics() {\n        return {\n            totalSessions: this.activeSessions.size,\n            activeSessions: this.activeSessions.size,\n            toolCallStats: this.toolTracker.getStatistics()\n        };\n    }\n    /**\n   * Setup event handlers\n   */ setupEventHandlers() {\n        this.interceptor.on('message', ({ message, context })=>{\n            // Track tool calls in real-time\n            const newToolCalls = this.toolTracker.processMessage(message);\n            if (newToolCalls.length > 0) {\n                this.emit('tool_calls', {\n                    toolCalls: newToolCalls,\n                    sessionId: context.claudeSessionId\n                });\n            }\n            // Emit message events\n            this.emit('claude_message', {\n                message,\n                sessionId: context.claudeSessionId\n            });\n        });\n        this.interceptor.on('session_complete', ({ sessionId, context })=>{\n            this.emit('session_complete', {\n                sessionId,\n                context\n            });\n        });\n        this.interceptor.on('session_error', ({ error, context })=>{\n            this.emit('session_error', {\n                error,\n                context\n            });\n        });\n    }\n    /**\n   * Start capture for session\n   */ async startCapture(sessionId, claudeArgs, options) {\n        if (options.captureMode === 'realtime' || options.captureMode === 'both') {\n            // Real-time capture via interceptor\n            await this.interceptor.interceptSession(claudeArgs);\n        }\n    }\n    /**\n   * Run Claude Code command\n   */ async runClaudeCommand(args, context, options) {\n        return new Promise((resolve, reject)=>{\n            const claudeProcess = (0,child_process__WEBPACK_IMPORTED_MODULE_0__.spawn)('claude', args, {\n                stdio: [\n                    'pipe',\n                    'pipe',\n                    'pipe'\n                ],\n                env: process.env\n            });\n            let output = '';\n            let errorOutput = '';\n            claudeProcess.stdout?.on('data', (data)=>{\n                const chunk = data.toString();\n                output += chunk;\n                // Parse JSON messages if in stream mode\n                if (options.outputFormat === 'stream-json') {\n                    this.parseStreamingOutput(chunk, context);\n                }\n            });\n            claudeProcess.stderr?.on('data', (data)=>{\n                errorOutput += data.toString();\n            });\n            claudeProcess.on('close', (code)=>{\n                context.endTime = new Date();\n                context.exitCode = code || 1;\n                context.output = output;\n                context.errorOutput = errorOutput;\n                if (code === 0) {\n                    resolve(output);\n                } else {\n                    reject(new Error(`Claude Code exited with code ${code}: ${errorOutput}`));\n                }\n            });\n            claudeProcess.on('error', (error)=>{\n                reject(error);\n            });\n            // Send prompt if provided directly\n            if (args.includes('-p') || args.includes('--print')) {\n                claudeProcess.stdin?.end();\n            }\n        });\n    }\n    /**\n   * Parse streaming JSON output\n   */ parseStreamingOutput(data, context) {\n        const lines = data.split('\\n').filter((line)=>line.trim());\n        for (const line of lines){\n            try {\n                const message = JSON.parse(line);\n                context.messages.push(message);\n                // Track tool calls\n                const toolCalls = this.toolTracker.processMessage(message);\n                context.toolCalls.push(...toolCalls);\n                this.emit('streaming_message', {\n                    message,\n                    context\n                });\n            } catch (error) {\n            // Skip non-JSON lines\n            }\n        }\n    }\n    /**\n   * Finalize session and create summary\n   */ async finalizeSession(context, options) {\n        const duration = context.endTime.getTime() - context.startTime.getTime();\n        let parsedSession = null;\n        let arrakisSessionId;\n        // Parse session metadata if we have JSON data\n        if (context.messages.length > 0) {\n            try {\n                parsedSession = this.parser.parseSession(context.messages);\n            } catch (error) {\n                console.warn('Failed to parse session metadata:', error);\n            }\n        }\n        // Store in database if enabled\n        if (options.autoStore && parsedSession) {\n            try {\n                const conversationData = {\n                    title: parsedSession.title,\n                    claudeSessionId: parsedSession.sessionId,\n                    messages: parsedSession.messages.map((m)=>({\n                            role: m.type,\n                            content: m.content,\n                            timestamp: m.timestamp,\n                            metadata: m.metadata\n                        })),\n                    metadata: {\n                        source: 'claude-code',\n                        timestamp: context.startTime.toISOString(),\n                        sessionInfo: {\n                            projectPath: parsedSession.environment.cwd,\n                            workingDirectory: parsedSession.environment.cwd\n                        },\n                        performance: {\n                            totalTokens: parsedSession.performance.totalTokens,\n                            totalCost: parsedSession.performance.totalCost,\n                            duration: duration\n                        }\n                    }\n                };\n                arrakisSessionId = await (0,_index__WEBPACK_IMPORTED_MODULE_5__.captureConversation)(conversationData);\n                console.log(`üíæ Stored session in Arrakis: ${arrakisSessionId}`);\n            } catch (error) {\n                console.error('Failed to store session in database:', error);\n            }\n        }\n        const summary = {\n            sessionId: context.sessionId,\n            arrakisSessionId,\n            title: parsedSession?.title || 'Claude Code Session',\n            startTime: context.startTime.toISOString(),\n            endTime: context.endTime.toISOString(),\n            duration,\n            cost: parsedSession?.performance.totalCost || 0,\n            messageCount: parsedSession?.conversation.messageCount || 0,\n            toolCallsCount: context.toolCalls.length,\n            success: context.exitCode === 0,\n            metadata: parsedSession || {}\n        };\n        return summary;\n    }\n    /**\n   * Build Claude Code arguments\n   */ buildClaudeArgs(prompt, options) {\n        const args = [];\n        // Add print mode for non-interactive execution\n        args.push('--print');\n        // Add prompt\n        args.push(prompt);\n        // Add output format\n        if (options.outputFormat) {\n            args.push('--output-format', options.outputFormat);\n        } else if (options.enableCapture) {\n            args.push('--output-format', 'stream-json');\n        }\n        // Add verbose mode\n        if (options.verbose) {\n            args.push('--verbose');\n        }\n        // Add custom args\n        if (options.claudeArgs) {\n            args.push(...options.claudeArgs);\n        }\n        return args;\n    }\n    /**\n   * Merge default options\n   */ mergeDefaultOptions(options) {\n        return {\n            enableCapture: true,\n            captureMode: 'both',\n            username: 'arrakis-user',\n            claudeArgs: [],\n            outputFormat: 'stream-json',\n            verbose: false,\n            autoStore: true,\n            sessionPrefix: 'arrakis',\n            enableAnalytics: true,\n            enableToolTracking: true,\n            ...options\n        };\n    }\n}\n/**\n * Session context for tracking execution\n */ class SessionContext {\n    constructor(){\n        this.sessionId = new Date().getTime().toString();\n        this.startTime = new Date();\n        this.endTime = new Date();\n        this.exitCode = 0;\n        this.output = '';\n        this.errorOutput = '';\n        this.messages = [];\n        this.toolCalls = [];\n    }\n}\n/**\n * Default proxy instance\n */ const defaultProxy = new ClaudeProxy();\n/**\n * Convenience functions\n */ async function executeClaudeCommand(prompt, options) {\n    return defaultProxy.executeCommand(prompt, options);\n}\nasync function resumeClaudeSession(sessionId, prompt, options) {\n    return defaultProxy.resumeSession(sessionId, prompt, options);\n}\nasync function continueClaudeSession(prompt, options) {\n    return defaultProxy.continueSession(prompt, options);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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R0FBRzlHLE9BQU87UUFDWjtJQUNGO0FBQ0Y7QUFFQTs7Q0FFQyxHQUNELE1BQU1ROzthQUNKQyxZQUFvQixJQUFJcUQsT0FBT2dCLE9BQU8sR0FBR3RCLFFBQVE7YUFDakR1QixZQUFrQixJQUFJakI7YUFDdEJELFVBQWdCLElBQUlDO2FBQ3BCQyxXQUFtQjthQUNuQmhELFNBQWlCO2FBQ2pCcUMsY0FBc0I7YUFDdEJ1QixXQUFrQixFQUFFO2FBQ3BCbkMsWUFBZ0MsRUFBRTs7QUFDcEM7QUFFQTs7Q0FFQyxHQUNNLE1BQU11RSxlQUFlLElBQUl4SCxjQUFhO0FBRTdDOztDQUVDLEdBQ00sZUFBZXlILHFCQUNwQmpILE1BQWMsRUFDZEMsT0FBc0I7SUFFdEIsT0FBTytHLGFBQWFqSCxjQUFjLENBQUNDLFFBQVFDO0FBQzdDO0FBRU8sZUFBZWlILG9CQUNwQnhHLFNBQWlCLEVBQ2pCVixNQUFjLEVBQ2RDLE9BQXNCO0lBRXRCLE9BQU8rRyxhQUFhdkYsYUFBYSxDQUFDZixXQUFXVixRQUFRQztBQUN2RDtBQUVPLGVBQWVrSCxzQkFDcEJuSCxNQUFjLEVBQ2RDLE9BQXNCO0lBRXRCLE9BQU8rRyxhQUFhdEYsZUFBZSxDQUFDMUIsUUFBUUM7QUFDOUMiLCJzb3VyY2VzIjpbIkM6XFxwcm9qZWN0c1xcYXJyYWtpc1xcbGliXFxjYXB0dXJlXFxjbGF1ZGUtcHJveHkudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDbGF1ZGUgQ29kZSBQcm94eVxuICpcbiAqIEEgY29tcHJlaGVuc2l2ZSB3cmFwcGVyL3Byb3h5IGZvciBDbGF1ZGUgQ29kZSB0aGF0IGNhcHR1cmVzIGNvbnZlcnNhdGlvbnNcbiAqIGluIHJlYWwtdGltZSB3aXRoIGZ1bGwgbWV0YWRhdGEsIHRvb2wgY2FsbHMsIGFuZCBwZXJmb3JtYW5jZSBhbmFseXRpY3MuXG4gKi9cblxuaW1wb3J0IHsgc3Bhd24sIENoaWxkUHJvY2VzcyB9IGZyb20gJ2NoaWxkX3Byb2Nlc3MnXG5pbXBvcnQgeyBFdmVudEVtaXR0ZXIgfSBmcm9tICdldmVudHMnXG5pbXBvcnQgeyBDbGF1ZGVJbnRlcmNlcHRvciB9IGZyb20gJy4vY2xhdWRlLWludGVyY2VwdG9yJ1xuaW1wb3J0IHsgQ2xhdWRlTWV0YWRhdGFQYXJzZXIsIHR5cGUgUGFyc2VkU2Vzc2lvbiB9IGZyb20gJy4vbWV0YWRhdGEtcGFyc2VyJ1xuaW1wb3J0IHsgVG9vbENhbGxUcmFja2VyLCB0eXBlIEVuaGFuY2VkVG9vbENhbGwgfSBmcm9tICcuL3Rvb2wtdHJhY2tlcidcbmltcG9ydCB7IGNhcHR1cmVDb252ZXJzYXRpb24gfSBmcm9tICcuL2luZGV4J1xuaW1wb3J0IHR5cGUgeyBDb252ZXJzYXRpb25EYXRhIH0gZnJvbSAnLi9pbmRleCdcblxuZXhwb3J0IGludGVyZmFjZSBQcm94eU9wdGlvbnMge1xuICAvLyBDYXB0dXJlIHNldHRpbmdzXG4gIGVuYWJsZUNhcHR1cmU/OiBib29sZWFuXG4gIGNhcHR1cmVNb2RlPzogJ3JlYWx0aW1lJyB8ICdwb3N0X3Nlc3Npb24nIHwgJ2JvdGgnXG4gIHVzZXJuYW1lPzogc3RyaW5nXG5cbiAgLy8gQ2xhdWRlIENvZGUgc2V0dGluZ3NcbiAgY2xhdWRlQXJncz86IHN0cmluZ1tdXG4gIG91dHB1dEZvcm1hdD86ICd0ZXh0JyB8ICdqc29uJyB8ICdzdHJlYW0tanNvbidcbiAgdmVyYm9zZT86IGJvb2xlYW5cblxuICAvLyBEYXRhYmFzZSBzZXR0aW5nc1xuICBhdXRvU3RvcmU/OiBib29sZWFuXG4gIHNlc3Npb25QcmVmaXg/OiBzdHJpbmdcblxuICAvLyBBbmFseXNpcyBzZXR0aW5nc1xuICBlbmFibGVBbmFseXRpY3M/OiBib29sZWFuXG4gIGVuYWJsZVRvb2xUcmFja2luZz86IGJvb2xlYW5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBTZXNzaW9uU3VtbWFyeSB7XG4gIHNlc3Npb25JZDogc3RyaW5nXG4gIGFycmFraXNTZXNzaW9uSWQ/OiBzdHJpbmdcbiAgdGl0bGU6IHN0cmluZ1xuICBzdGFydFRpbWU6IHN0cmluZ1xuICBlbmRUaW1lOiBzdHJpbmdcbiAgZHVyYXRpb246IG51bWJlclxuICBjb3N0OiBudW1iZXJcbiAgbWVzc2FnZUNvdW50OiBudW1iZXJcbiAgdG9vbENhbGxzQ291bnQ6IG51bWJlclxuICBzdWNjZXNzOiBib29sZWFuXG4gIG1ldGFkYXRhOiBQYXJzZWRTZXNzaW9uXG59XG5cbi8qKlxuICogTWFpbiBDbGF1ZGUgQ29kZSBQcm94eVxuICovXG5leHBvcnQgY2xhc3MgQ2xhdWRlUHJveHkgZXh0ZW5kcyBFdmVudEVtaXR0ZXIge1xuICBwcml2YXRlIGludGVyY2VwdG9yOiBDbGF1ZGVJbnRlcmNlcHRvclxuICBwcml2YXRlIHBhcnNlcjogQ2xhdWRlTWV0YWRhdGFQYXJzZXJcbiAgcHJpdmF0ZSB0b29sVHJhY2tlcjogVG9vbENhbGxUcmFja2VyXG4gIHByaXZhdGUgYWN0aXZlU2Vzc2lvbnM6IE1hcDxzdHJpbmcsIFNlc3Npb25Db250ZXh0PiA9IG5ldyBNYXAoKVxuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKClcbiAgICB0aGlzLmludGVyY2VwdG9yID0gbmV3IENsYXVkZUludGVyY2VwdG9yKClcbiAgICB0aGlzLnBhcnNlciA9IG5ldyBDbGF1ZGVNZXRhZGF0YVBhcnNlcigpXG4gICAgdGhpcy50b29sVHJhY2tlciA9IG5ldyBUb29sQ2FsbFRyYWNrZXIoKVxuXG4gICAgdGhpcy5zZXR1cEV2ZW50SGFuZGxlcnMoKVxuICB9XG5cbiAgLyoqXG4gICAqIEV4ZWN1dGUgQ2xhdWRlIENvZGUgY29tbWFuZCB3aXRoIGZ1bGwgY2FwdHVyZVxuICAgKi9cbiAgYXN5bmMgZXhlY3V0ZUNvbW1hbmQoXG4gICAgcHJvbXB0OiBzdHJpbmcsXG4gICAgb3B0aW9uczogUHJveHlPcHRpb25zID0ge31cbiAgKTogUHJvbWlzZTx7IG91dHB1dDogc3RyaW5nOyBzdW1tYXJ5OiBTZXNzaW9uU3VtbWFyeSB9PiB7XG4gICAgY29uc3Qgb3B0cyA9IHRoaXMubWVyZ2VEZWZhdWx0T3B0aW9ucyhvcHRpb25zKVxuXG4gICAgY29uc29sZS5sb2coJ/CfmoAgU3RhcnRpbmcgQ2xhdWRlIENvZGUgcHJveHkgZXhlY3V0aW9uLi4uJylcbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIGDwn5OdIFByb21wdDogJHtwcm9tcHQuc3Vic3RyaW5nKDAsIDEwMCl9JHtwcm9tcHQubGVuZ3RoID4gMTAwID8gJy4uLicgOiAnJ31gXG4gICAgKVxuXG4gICAgY29uc3Qgc2Vzc2lvbkNvbnRleHQgPSBuZXcgU2Vzc2lvbkNvbnRleHQoKVxuICAgIGNvbnN0IHNlc3Npb25JZCA9IHNlc3Npb25Db250ZXh0LnNlc3Npb25JZFxuXG4gICAgdGhpcy5hY3RpdmVTZXNzaW9ucy5zZXQoc2Vzc2lvbklkLCBzZXNzaW9uQ29udGV4dClcblxuICAgIHRyeSB7XG4gICAgICAvLyBCdWlsZCBDbGF1ZGUgQ29kZSBjb21tYW5kXG4gICAgICBjb25zdCBjbGF1ZGVBcmdzID0gdGhpcy5idWlsZENsYXVkZUFyZ3MocHJvbXB0LCBvcHRzKVxuXG4gICAgICAvLyBTdGFydCBjYXB0dXJlIGlmIGVuYWJsZWRcbiAgICAgIGlmIChvcHRzLmVuYWJsZUNhcHR1cmUpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5zdGFydENhcHR1cmUoc2Vzc2lvbklkLCBjbGF1ZGVBcmdzLCBvcHRzKVxuICAgICAgfVxuXG4gICAgICAvLyBFeGVjdXRlIENsYXVkZSBDb2RlXG4gICAgICBjb25zdCBvdXRwdXQgPSBhd2FpdCB0aGlzLnJ1bkNsYXVkZUNvbW1hbmQoXG4gICAgICAgIGNsYXVkZUFyZ3MsXG4gICAgICAgIHNlc3Npb25Db250ZXh0LFxuICAgICAgICBvcHRzXG4gICAgICApXG5cbiAgICAgIC8vIFByb2Nlc3Mgc2Vzc2lvbiByZXN1bHRzXG4gICAgICBjb25zdCBzdW1tYXJ5ID0gYXdhaXQgdGhpcy5maW5hbGl6ZVNlc3Npb24oc2Vzc2lvbkNvbnRleHQsIG9wdHMpXG5cbiAgICAgIGNvbnNvbGUubG9nKCfinIUgQ2xhdWRlIENvZGUgZXhlY3V0aW9uIGNvbXBsZXRlZCcpXG4gICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgYPCfk4ogU3VtbWFyeTogJHtzdW1tYXJ5Lm1lc3NhZ2VDb3VudH0gbWVzc2FnZXMsICQke3N1bW1hcnkuY29zdH0sICR7c3VtbWFyeS50b29sQ2FsbHNDb3VudH0gdG9vbCBjYWxsc2BcbiAgICAgIClcblxuICAgICAgcmV0dXJuIHsgb3V0cHV0LCBzdW1tYXJ5IH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIENsYXVkZSBDb2RlIGV4ZWN1dGlvbiBmYWlsZWQ6JywgZXJyb3IpXG4gICAgICB0aHJvdyBlcnJvclxuICAgIH0gZmluYWxseSB7XG4gICAgICB0aGlzLmFjdGl2ZVNlc3Npb25zLmRlbGV0ZShzZXNzaW9uSWQpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlc3VtZSBleGlzdGluZyBDbGF1ZGUgQ29kZSBzZXNzaW9uXG4gICAqL1xuICBhc3luYyByZXN1bWVTZXNzaW9uKFxuICAgIHNlc3Npb25JZDogc3RyaW5nLFxuICAgIHByb21wdDogc3RyaW5nLFxuICAgIG9wdGlvbnM6IFByb3h5T3B0aW9ucyA9IHt9XG4gICk6IFByb21pc2U8eyBvdXRwdXQ6IHN0cmluZzsgc3VtbWFyeTogU2Vzc2lvblN1bW1hcnkgfT4ge1xuICAgIGNvbnN0IG9wdHMgPSB7XG4gICAgICAuLi5vcHRpb25zLFxuICAgICAgY2xhdWRlQXJnczogWy4uLihvcHRpb25zLmNsYXVkZUFyZ3MgfHwgW10pLCAnLS1yZXN1bWUnLCBzZXNzaW9uSWRdLFxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5leGVjdXRlQ29tbWFuZChwcm9tcHQsIG9wdHMpXG4gIH1cblxuICAvKipcbiAgICogQ29udGludWUgbW9zdCByZWNlbnQgQ2xhdWRlIENvZGUgc2Vzc2lvblxuICAgKi9cbiAgYXN5bmMgY29udGludWVTZXNzaW9uKFxuICAgIHByb21wdDogc3RyaW5nLFxuICAgIG9wdGlvbnM6IFByb3h5T3B0aW9ucyA9IHt9XG4gICk6IFByb21pc2U8eyBvdXRwdXQ6IHN0cmluZzsgc3VtbWFyeTogU2Vzc2lvblN1bW1hcnkgfT4ge1xuICAgIGNvbnN0IG9wdHMgPSB7XG4gICAgICAuLi5vcHRpb25zLFxuICAgICAgY2xhdWRlQXJnczogWy4uLihvcHRpb25zLmNsYXVkZUFyZ3MgfHwgW10pLCAnLS1jb250aW51ZSddLFxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5leGVjdXRlQ29tbWFuZChwcm9tcHQsIG9wdHMpXG4gIH1cblxuICAvKipcbiAgICogQW5hbHl6ZSBleGlzdGluZyBzZXNzaW9uIGRhdGFcbiAgICovXG4gIGFzeW5jIGFuYWx5emVTZXNzaW9uKHNlc3Npb25Kc29uRGF0YTogc3RyaW5nKTogUHJvbWlzZTxQYXJzZWRTZXNzaW9uPiB7XG4gICAgcmV0dXJuIHRoaXMucGFyc2VyLnBhcnNlRnJvbUpzb25TdHJpbmcoc2Vzc2lvbkpzb25EYXRhKVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBzZXNzaW9uIHN0YXRpc3RpY3NcbiAgICovXG4gIGdldFNlc3Npb25TdGF0aXN0aWNzKCk6IHtcbiAgICB0b3RhbFNlc3Npb25zOiBudW1iZXJcbiAgICBhY3RpdmVTZXNzaW9uczogbnVtYmVyXG4gICAgdG9vbENhbGxTdGF0czogUmV0dXJuVHlwZTxUb29sQ2FsbFRyYWNrZXJbJ2dldFN0YXRpc3RpY3MnXT5cbiAgfSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRvdGFsU2Vzc2lvbnM6IHRoaXMuYWN0aXZlU2Vzc2lvbnMuc2l6ZSxcbiAgICAgIGFjdGl2ZVNlc3Npb25zOiB0aGlzLmFjdGl2ZVNlc3Npb25zLnNpemUsXG4gICAgICB0b29sQ2FsbFN0YXRzOiB0aGlzLnRvb2xUcmFja2VyLmdldFN0YXRpc3RpY3MoKSxcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2V0dXAgZXZlbnQgaGFuZGxlcnNcbiAgICovXG4gIHByaXZhdGUgc2V0dXBFdmVudEhhbmRsZXJzKCkge1xuICAgIHRoaXMuaW50ZXJjZXB0b3Iub24oJ21lc3NhZ2UnLCAoeyBtZXNzYWdlLCBjb250ZXh0IH0pID0+IHtcbiAgICAgIC8vIFRyYWNrIHRvb2wgY2FsbHMgaW4gcmVhbC10aW1lXG4gICAgICBjb25zdCBuZXdUb29sQ2FsbHMgPSB0aGlzLnRvb2xUcmFja2VyLnByb2Nlc3NNZXNzYWdlKG1lc3NhZ2UpXG4gICAgICBpZiAobmV3VG9vbENhbGxzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdGhpcy5lbWl0KCd0b29sX2NhbGxzJywge1xuICAgICAgICAgIHRvb2xDYWxsczogbmV3VG9vbENhbGxzLFxuICAgICAgICAgIHNlc3Npb25JZDogY29udGV4dC5jbGF1ZGVTZXNzaW9uSWQsXG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIC8vIEVtaXQgbWVzc2FnZSBldmVudHNcbiAgICAgIHRoaXMuZW1pdCgnY2xhdWRlX21lc3NhZ2UnLCB7XG4gICAgICAgIG1lc3NhZ2UsXG4gICAgICAgIHNlc3Npb25JZDogY29udGV4dC5jbGF1ZGVTZXNzaW9uSWQsXG4gICAgICB9KVxuICAgIH0pXG5cbiAgICB0aGlzLmludGVyY2VwdG9yLm9uKCdzZXNzaW9uX2NvbXBsZXRlJywgKHsgc2Vzc2lvbklkLCBjb250ZXh0IH0pID0+IHtcbiAgICAgIHRoaXMuZW1pdCgnc2Vzc2lvbl9jb21wbGV0ZScsIHsgc2Vzc2lvbklkLCBjb250ZXh0IH0pXG4gICAgfSlcblxuICAgIHRoaXMuaW50ZXJjZXB0b3Iub24oJ3Nlc3Npb25fZXJyb3InLCAoeyBlcnJvciwgY29udGV4dCB9KSA9PiB7XG4gICAgICB0aGlzLmVtaXQoJ3Nlc3Npb25fZXJyb3InLCB7IGVycm9yLCBjb250ZXh0IH0pXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBTdGFydCBjYXB0dXJlIGZvciBzZXNzaW9uXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHN0YXJ0Q2FwdHVyZShcbiAgICBzZXNzaW9uSWQ6IHN0cmluZyxcbiAgICBjbGF1ZGVBcmdzOiBzdHJpbmdbXSxcbiAgICBvcHRpb25zOiBQcm94eU9wdGlvbnNcbiAgKSB7XG4gICAgaWYgKG9wdGlvbnMuY2FwdHVyZU1vZGUgPT09ICdyZWFsdGltZScgfHwgb3B0aW9ucy5jYXB0dXJlTW9kZSA9PT0gJ2JvdGgnKSB7XG4gICAgICAvLyBSZWFsLXRpbWUgY2FwdHVyZSB2aWEgaW50ZXJjZXB0b3JcbiAgICAgIGF3YWl0IHRoaXMuaW50ZXJjZXB0b3IuaW50ZXJjZXB0U2Vzc2lvbihjbGF1ZGVBcmdzKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSdW4gQ2xhdWRlIENvZGUgY29tbWFuZFxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBydW5DbGF1ZGVDb21tYW5kKFxuICAgIGFyZ3M6IHN0cmluZ1tdLFxuICAgIGNvbnRleHQ6IFNlc3Npb25Db250ZXh0LFxuICAgIG9wdGlvbnM6IFByb3h5T3B0aW9uc1xuICApOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCBjbGF1ZGVQcm9jZXNzID0gc3Bhd24oJ2NsYXVkZScsIGFyZ3MsIHtcbiAgICAgICAgc3RkaW86IFsncGlwZScsICdwaXBlJywgJ3BpcGUnXSxcbiAgICAgICAgZW52OiBwcm9jZXNzLmVudixcbiAgICAgIH0pXG5cbiAgICAgIGxldCBvdXRwdXQgPSAnJ1xuICAgICAgbGV0IGVycm9yT3V0cHV0ID0gJydcblxuICAgICAgY2xhdWRlUHJvY2Vzcy5zdGRvdXQ/Lm9uKCdkYXRhJywgKGRhdGEpID0+IHtcbiAgICAgICAgY29uc3QgY2h1bmsgPSBkYXRhLnRvU3RyaW5nKClcbiAgICAgICAgb3V0cHV0ICs9IGNodW5rXG5cbiAgICAgICAgLy8gUGFyc2UgSlNPTiBtZXNzYWdlcyBpZiBpbiBzdHJlYW0gbW9kZVxuICAgICAgICBpZiAob3B0aW9ucy5vdXRwdXRGb3JtYXQgPT09ICdzdHJlYW0tanNvbicpIHtcbiAgICAgICAgICB0aGlzLnBhcnNlU3RyZWFtaW5nT3V0cHV0KGNodW5rLCBjb250ZXh0KVxuICAgICAgICB9XG4gICAgICB9KVxuXG4gICAgICBjbGF1ZGVQcm9jZXNzLnN0ZGVycj8ub24oJ2RhdGEnLCAoZGF0YSkgPT4ge1xuICAgICAgICBlcnJvck91dHB1dCArPSBkYXRhLnRvU3RyaW5nKClcbiAgICAgIH0pXG5cbiAgICAgIGNsYXVkZVByb2Nlc3Mub24oJ2Nsb3NlJywgKGNvZGUpID0+IHtcbiAgICAgICAgY29udGV4dC5lbmRUaW1lID0gbmV3IERhdGUoKVxuICAgICAgICBjb250ZXh0LmV4aXRDb2RlID0gY29kZSB8fCAxXG4gICAgICAgIGNvbnRleHQub3V0cHV0ID0gb3V0cHV0XG4gICAgICAgIGNvbnRleHQuZXJyb3JPdXRwdXQgPSBlcnJvck91dHB1dFxuXG4gICAgICAgIGlmIChjb2RlID09PSAwKSB7XG4gICAgICAgICAgcmVzb2x2ZShvdXRwdXQpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVqZWN0KFxuICAgICAgICAgICAgbmV3IEVycm9yKGBDbGF1ZGUgQ29kZSBleGl0ZWQgd2l0aCBjb2RlICR7Y29kZX06ICR7ZXJyb3JPdXRwdXR9YClcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH0pXG5cbiAgICAgIGNsYXVkZVByb2Nlc3Mub24oJ2Vycm9yJywgKGVycm9yKSA9PiB7XG4gICAgICAgIHJlamVjdChlcnJvcilcbiAgICAgIH0pXG5cbiAgICAgIC8vIFNlbmQgcHJvbXB0IGlmIHByb3ZpZGVkIGRpcmVjdGx5XG4gICAgICBpZiAoYXJncy5pbmNsdWRlcygnLXAnKSB8fCBhcmdzLmluY2x1ZGVzKCctLXByaW50JykpIHtcbiAgICAgICAgY2xhdWRlUHJvY2Vzcy5zdGRpbj8uZW5kKClcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIFBhcnNlIHN0cmVhbWluZyBKU09OIG91dHB1dFxuICAgKi9cbiAgcHJpdmF0ZSBwYXJzZVN0cmVhbWluZ091dHB1dChkYXRhOiBzdHJpbmcsIGNvbnRleHQ6IFNlc3Npb25Db250ZXh0KSB7XG4gICAgY29uc3QgbGluZXMgPSBkYXRhLnNwbGl0KCdcXG4nKS5maWx0ZXIoKGxpbmUpID0+IGxpbmUudHJpbSgpKVxuXG4gICAgZm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gSlNPTi5wYXJzZShsaW5lKVxuICAgICAgICBjb250ZXh0Lm1lc3NhZ2VzLnB1c2gobWVzc2FnZSlcblxuICAgICAgICAvLyBUcmFjayB0b29sIGNhbGxzXG4gICAgICAgIGNvbnN0IHRvb2xDYWxscyA9IHRoaXMudG9vbFRyYWNrZXIucHJvY2Vzc01lc3NhZ2UobWVzc2FnZSlcbiAgICAgICAgY29udGV4dC50b29sQ2FsbHMucHVzaCguLi50b29sQ2FsbHMpXG5cbiAgICAgICAgdGhpcy5lbWl0KCdzdHJlYW1pbmdfbWVzc2FnZScsIHsgbWVzc2FnZSwgY29udGV4dCB9KVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgLy8gU2tpcCBub24tSlNPTiBsaW5lc1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBGaW5hbGl6ZSBzZXNzaW9uIGFuZCBjcmVhdGUgc3VtbWFyeVxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBmaW5hbGl6ZVNlc3Npb24oXG4gICAgY29udGV4dDogU2Vzc2lvbkNvbnRleHQsXG4gICAgb3B0aW9uczogUHJveHlPcHRpb25zXG4gICk6IFByb21pc2U8U2Vzc2lvblN1bW1hcnk+IHtcbiAgICBjb25zdCBkdXJhdGlvbiA9IGNvbnRleHQuZW5kVGltZS5nZXRUaW1lKCkgLSBjb250ZXh0LnN0YXJ0VGltZS5nZXRUaW1lKClcblxuICAgIGxldCBwYXJzZWRTZXNzaW9uOiBQYXJzZWRTZXNzaW9uIHwgbnVsbCA9IG51bGxcbiAgICBsZXQgYXJyYWtpc1Nlc3Npb25JZDogc3RyaW5nIHwgdW5kZWZpbmVkXG5cbiAgICAvLyBQYXJzZSBzZXNzaW9uIG1ldGFkYXRhIGlmIHdlIGhhdmUgSlNPTiBkYXRhXG4gICAgaWYgKGNvbnRleHQubWVzc2FnZXMubGVuZ3RoID4gMCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcGFyc2VkU2Vzc2lvbiA9IHRoaXMucGFyc2VyLnBhcnNlU2Vzc2lvbihjb250ZXh0Lm1lc3NhZ2VzKVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdGYWlsZWQgdG8gcGFyc2Ugc2Vzc2lvbiBtZXRhZGF0YTonLCBlcnJvcilcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTdG9yZSBpbiBkYXRhYmFzZSBpZiBlbmFibGVkXG4gICAgaWYgKG9wdGlvbnMuYXV0b1N0b3JlICYmIHBhcnNlZFNlc3Npb24pIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGNvbnZlcnNhdGlvbkRhdGE6IENvbnZlcnNhdGlvbkRhdGEgPSB7XG4gICAgICAgICAgdGl0bGU6IHBhcnNlZFNlc3Npb24udGl0bGUsXG4gICAgICAgICAgY2xhdWRlU2Vzc2lvbklkOiBwYXJzZWRTZXNzaW9uLnNlc3Npb25JZCxcbiAgICAgICAgICBtZXNzYWdlczogcGFyc2VkU2Vzc2lvbi5tZXNzYWdlcy5tYXAoKG0pID0+ICh7XG4gICAgICAgICAgICByb2xlOiBtLnR5cGUgYXMgJ3VzZXInIHwgJ2Fzc2lzdGFudCcsXG4gICAgICAgICAgICBjb250ZW50OiBtLmNvbnRlbnQsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IG0udGltZXN0YW1wLFxuICAgICAgICAgICAgbWV0YWRhdGE6IG0ubWV0YWRhdGEsXG4gICAgICAgICAgfSkpLFxuICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICBzb3VyY2U6ICdjbGF1ZGUtY29kZScsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IGNvbnRleHQuc3RhcnRUaW1lLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICBzZXNzaW9uSW5mbzoge1xuICAgICAgICAgICAgICBwcm9qZWN0UGF0aDogcGFyc2VkU2Vzc2lvbi5lbnZpcm9ubWVudC5jd2QsXG4gICAgICAgICAgICAgIHdvcmtpbmdEaXJlY3Rvcnk6IHBhcnNlZFNlc3Npb24uZW52aXJvbm1lbnQuY3dkLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBlcmZvcm1hbmNlOiB7XG4gICAgICAgICAgICAgIHRvdGFsVG9rZW5zOiBwYXJzZWRTZXNzaW9uLnBlcmZvcm1hbmNlLnRvdGFsVG9rZW5zLFxuICAgICAgICAgICAgICB0b3RhbENvc3Q6IHBhcnNlZFNlc3Npb24ucGVyZm9ybWFuY2UudG90YWxDb3N0LFxuICAgICAgICAgICAgICBkdXJhdGlvbjogZHVyYXRpb24sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH1cblxuICAgICAgICBhcnJha2lzU2Vzc2lvbklkID0gYXdhaXQgY2FwdHVyZUNvbnZlcnNhdGlvbihjb252ZXJzYXRpb25EYXRhKVxuICAgICAgICBjb25zb2xlLmxvZyhg8J+SviBTdG9yZWQgc2Vzc2lvbiBpbiBBcnJha2lzOiAke2FycmFraXNTZXNzaW9uSWR9YClcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBzdG9yZSBzZXNzaW9uIGluIGRhdGFiYXNlOicsIGVycm9yKVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHN1bW1hcnk6IFNlc3Npb25TdW1tYXJ5ID0ge1xuICAgICAgc2Vzc2lvbklkOiBjb250ZXh0LnNlc3Npb25JZCxcbiAgICAgIGFycmFraXNTZXNzaW9uSWQsXG4gICAgICB0aXRsZTogcGFyc2VkU2Vzc2lvbj8udGl0bGUgfHwgJ0NsYXVkZSBDb2RlIFNlc3Npb24nLFxuICAgICAgc3RhcnRUaW1lOiBjb250ZXh0LnN0YXJ0VGltZS50b0lTT1N0cmluZygpLFxuICAgICAgZW5kVGltZTogY29udGV4dC5lbmRUaW1lLnRvSVNPU3RyaW5nKCksXG4gICAgICBkdXJhdGlvbixcbiAgICAgIGNvc3Q6IHBhcnNlZFNlc3Npb24/LnBlcmZvcm1hbmNlLnRvdGFsQ29zdCB8fCAwLFxuICAgICAgbWVzc2FnZUNvdW50OiBwYXJzZWRTZXNzaW9uPy5jb252ZXJzYXRpb24ubWVzc2FnZUNvdW50IHx8IDAsXG4gICAgICB0b29sQ2FsbHNDb3VudDogY29udGV4dC50b29sQ2FsbHMubGVuZ3RoLFxuICAgICAgc3VjY2VzczogY29udGV4dC5leGl0Q29kZSA9PT0gMCxcbiAgICAgIG1ldGFkYXRhOiBwYXJzZWRTZXNzaW9uIHx8ICh7fSBhcyBQYXJzZWRTZXNzaW9uKSxcbiAgICB9XG5cbiAgICByZXR1cm4gc3VtbWFyeVxuICB9XG5cbiAgLyoqXG4gICAqIEJ1aWxkIENsYXVkZSBDb2RlIGFyZ3VtZW50c1xuICAgKi9cbiAgcHJpdmF0ZSBidWlsZENsYXVkZUFyZ3MocHJvbXB0OiBzdHJpbmcsIG9wdGlvbnM6IFByb3h5T3B0aW9ucyk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCBhcmdzOiBzdHJpbmdbXSA9IFtdXG5cbiAgICAvLyBBZGQgcHJpbnQgbW9kZSBmb3Igbm9uLWludGVyYWN0aXZlIGV4ZWN1dGlvblxuICAgIGFyZ3MucHVzaCgnLS1wcmludCcpXG5cbiAgICAvLyBBZGQgcHJvbXB0XG4gICAgYXJncy5wdXNoKHByb21wdClcblxuICAgIC8vIEFkZCBvdXRwdXQgZm9ybWF0XG4gICAgaWYgKG9wdGlvbnMub3V0cHV0Rm9ybWF0KSB7XG4gICAgICBhcmdzLnB1c2goJy0tb3V0cHV0LWZvcm1hdCcsIG9wdGlvbnMub3V0cHV0Rm9ybWF0KVxuICAgIH0gZWxzZSBpZiAob3B0aW9ucy5lbmFibGVDYXB0dXJlKSB7XG4gICAgICBhcmdzLnB1c2goJy0tb3V0cHV0LWZvcm1hdCcsICdzdHJlYW0tanNvbicpXG4gICAgfVxuXG4gICAgLy8gQWRkIHZlcmJvc2UgbW9kZVxuICAgIGlmIChvcHRpb25zLnZlcmJvc2UpIHtcbiAgICAgIGFyZ3MucHVzaCgnLS12ZXJib3NlJylcbiAgICB9XG5cbiAgICAvLyBBZGQgY3VzdG9tIGFyZ3NcbiAgICBpZiAob3B0aW9ucy5jbGF1ZGVBcmdzKSB7XG4gICAgICBhcmdzLnB1c2goLi4ub3B0aW9ucy5jbGF1ZGVBcmdzKVxuICAgIH1cblxuICAgIHJldHVybiBhcmdzXG4gIH1cblxuICAvKipcbiAgICogTWVyZ2UgZGVmYXVsdCBvcHRpb25zXG4gICAqL1xuICBwcml2YXRlIG1lcmdlRGVmYXVsdE9wdGlvbnMob3B0aW9uczogUHJveHlPcHRpb25zKTogUmVxdWlyZWQ8UHJveHlPcHRpb25zPiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGVuYWJsZUNhcHR1cmU6IHRydWUsXG4gICAgICBjYXB0dXJlTW9kZTogJ2JvdGgnLFxuICAgICAgdXNlcm5hbWU6ICdhcnJha2lzLXVzZXInLFxuICAgICAgY2xhdWRlQXJnczogW10sXG4gICAgICBvdXRwdXRGb3JtYXQ6ICdzdHJlYW0tanNvbicsXG4gICAgICB2ZXJib3NlOiBmYWxzZSxcbiAgICAgIGF1dG9TdG9yZTogdHJ1ZSxcbiAgICAgIHNlc3Npb25QcmVmaXg6ICdhcnJha2lzJyxcbiAgICAgIGVuYWJsZUFuYWx5dGljczogdHJ1ZSxcbiAgICAgIGVuYWJsZVRvb2xUcmFja2luZzogdHJ1ZSxcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogU2Vzc2lvbiBjb250ZXh0IGZvciB0cmFja2luZyBleGVjdXRpb25cbiAqL1xuY2xhc3MgU2Vzc2lvbkNvbnRleHQge1xuICBzZXNzaW9uSWQ6IHN0cmluZyA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpLnRvU3RyaW5nKClcbiAgc3RhcnRUaW1lOiBEYXRlID0gbmV3IERhdGUoKVxuICBlbmRUaW1lOiBEYXRlID0gbmV3IERhdGUoKVxuICBleGl0Q29kZTogbnVtYmVyID0gMFxuICBvdXRwdXQ6IHN0cmluZyA9ICcnXG4gIGVycm9yT3V0cHV0OiBzdHJpbmcgPSAnJ1xuICBtZXNzYWdlczogYW55W10gPSBbXVxuICB0b29sQ2FsbHM6IEVuaGFuY2VkVG9vbENhbGxbXSA9IFtdXG59XG5cbi8qKlxuICogRGVmYXVsdCBwcm94eSBpbnN0YW5jZVxuICovXG5leHBvcnQgY29uc3QgZGVmYXVsdFByb3h5ID0gbmV3IENsYXVkZVByb3h5KClcblxuLyoqXG4gKiBDb252ZW5pZW5jZSBmdW5jdGlvbnNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGV4ZWN1dGVDbGF1ZGVDb21tYW5kKFxuICBwcm9tcHQ6IHN0cmluZyxcbiAgb3B0aW9ucz86IFByb3h5T3B0aW9uc1xuKSB7XG4gIHJldHVybiBkZWZhdWx0UHJveHkuZXhlY3V0ZUNvbW1hbmQocHJvbXB0LCBvcHRpb25zKVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVzdW1lQ2xhdWRlU2Vzc2lvbihcbiAgc2Vzc2lvbklkOiBzdHJpbmcsXG4gIHByb21wdDogc3RyaW5nLFxuICBvcHRpb25zPzogUHJveHlPcHRpb25zXG4pIHtcbiAgcmV0dXJuIGRlZmF1bHRQcm94eS5yZXN1bWVTZXNzaW9uKHNlc3Npb25JZCwgcHJvbXB0LCBvcHRpb25zKVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY29udGludWVDbGF1ZGVTZXNzaW9uKFxuICBwcm9tcHQ6IHN0cmluZyxcbiAgb3B0aW9ucz86IFByb3h5T3B0aW9uc1xuKSB7XG4gIHJldHVybiBkZWZhdWx0UHJveHkuY29udGludWVTZXNzaW9uKHByb21wdCwgb3B0aW9ucylcbn1cbiJdLCJuYW1lcyI6WyJzcGF3biIsIkV2ZW50RW1pdHRlciIsIkNsYXVkZUludGVyY2VwdG9yIiwiQ2xhdWRlTWV0YWRhdGFQYXJzZXIiLCJUb29sQ2FsbFRyYWNrZXIiLCJjYXB0dXJlQ29udmVyc2F0aW9uIiwiQ2xhdWRlUHJveHkiLCJhY3RpdmVTZXNzaW9ucyIsIk1hcCIsImludGVyY2VwdG9yIiwicGFyc2VyIiwidG9vbFRyYWNrZXIiLCJzZXR1cEV2ZW50SGFuZGxlcnMiLCJleGVjdXRlQ29tbWFuZCIsInByb21wdCIsIm9wdGlvbnMiLCJvcHRzIiwibWVyZ2VEZWZhdWx0T3B0aW9ucyIsImNvbnNvbGUiLCJsb2ciLCJzdWJzdHJpbmciLCJsZW5ndGgiLCJzZXNzaW9uQ29udGV4dCIsIlNlc3Npb25Db250ZXh0Iiwic2Vzc2lvbklkIiwic2V0IiwiY2xhdWRlQXJncyIsImJ1aWxkQ2xhdWRlQXJncyIsImVuYWJsZUNhcHR1cmUiLCJzdGFydENhcHR1cmUiLCJvdXRwdXQiLCJydW5DbGF1ZGVDb21tYW5kIiwic3VtbWFyeSIsImZpbmFsaXplU2Vzc2lvbiIsIm1lc3NhZ2VDb3VudCIsImNvc3QiLCJ0b29sQ2FsbHNDb3VudCIsImVycm9yIiwiZGVsZXRlIiwicmVzdW1lU2Vzc2lvbiIsImNvbnRpbnVlU2Vzc2lvbiIsImFuYWx5emVTZXNzaW9uIiwic2Vzc2lvbkpzb25EYXRhIiwicGFyc2VGcm9tSnNvblN0cmluZyIsImdldFNlc3Npb25TdGF0aXN0aWNzIiwidG90YWxTZXNzaW9ucyIsInNpemUiLCJ0b29sQ2FsbFN0YXRzIiwiZ2V0U3RhdGlzdGljcyIsIm9uIiwibWVzc2FnZSIsImNvbnRleHQiLCJuZXdUb29sQ2FsbHMiLCJwcm9jZXNzTWVzc2FnZSIsImVtaXQiLCJ0b29sQ2FsbHMiLCJjbGF1ZGVTZXNzaW9uSWQiLCJjYXB0dXJlTW9kZSIsImludGVyY2VwdFNlc3Npb24iLCJhcmdzIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJjbGF1ZGVQcm9jZXNzIiwic3RkaW8iLCJlbnYiLCJwcm9jZXNzIiwiZXJyb3JPdXRwdXQiLCJzdGRvdXQiLCJkYXRhIiwiY2h1bmsiLCJ0b1N0cmluZyIsIm91dHB1dEZvcm1hdCIsInBhcnNlU3RyZWFtaW5nT3V0cHV0Iiwic3RkZXJyIiwiY29kZSIsImVuZFRpbWUiLCJEYXRlIiwiZXhpdENvZGUiLCJFcnJvciIsImluY2x1ZGVzIiwic3RkaW4iLCJlbmQiLCJsaW5lcyIsInNwbGl0IiwiZmlsdGVyIiwibGluZSIsInRyaW0iLCJKU09OIiwicGFyc2UiLCJtZXNzYWdlcyIsInB1c2giLCJkdXJhdGlvbiIsImdldFRpbWUiLCJzdGFydFRpbWUiLCJwYXJzZWRTZXNzaW9uIiwiYXJyYWtpc1Nlc3Npb25JZCIsInBhcnNlU2Vzc2lvbiIsIndhcm4iLCJhdXRvU3RvcmUiLCJjb252ZXJzYXRpb25EYXRhIiwidGl0bGUiLCJtYXAiLCJtIiwicm9sZSIsInR5cGUiLCJjb250ZW50IiwidGltZXN0YW1wIiwibWV0YWRhdGEiLCJzb3VyY2UiLCJ0b0lTT1N0cmluZyIsInNlc3Npb25JbmZvIiwicHJvamVjdFBhdGgiLCJlbnZpcm9ubWVudCIsImN3ZCIsIndvcmtpbmdEaXJlY3RvcnkiLCJwZXJmb3JtYW5jZSIsInRvdGFsVG9rZW5zIiwidG90YWxDb3N0IiwiY29udmVyc2F0aW9uIiwic3VjY2VzcyIsInZlcmJvc2UiLCJ1c2VybmFtZSIsInNlc3Npb25QcmVmaXgiLCJlbmFibGVBbmFseXRpY3MiLCJlbmFibGVUb29sVHJhY2tpbmciLCJkZWZhdWx0UHJveHkiLCJleGVjdXRlQ2xhdWRlQ29tbWFuZCIsInJlc3VtZUNsYXVkZVNlc3Npb24iLCJjb250aW51ZUNsYXVkZVNlc3Npb24iXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/capture/claude-proxy.ts\n");

/***/ }),

/***/ "(rsc)/./lib/capture/index.ts":
/*!******************************!*\
  !*** ./lib/capture/index.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ConversationCapture: () => (/* binding */ ConversationCapture),\n/* harmony export */   captureConversation: () => (/* binding */ captureConversation),\n/* harmony export */   captureMessage: () => (/* binding */ captureMessage),\n/* harmony export */   defaultCapture: () => (/* binding */ defaultCapture)\n/* harmony export */ });\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _db_queries__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../db/queries */ \"(rsc)/./lib/db/queries.ts\");\n/**\n * Conversation Capture Service\n *\n * This service handles capturing Claude Code conversations and storing them\n * in the database for later search and analysis.\n */ \n\n/**\n * Main conversation capture service\n */ class ConversationCapture {\n    constructor(username = 'default-user'){\n        this.username = username;\n    }\n    /**\n   * Capture a complete conversation and store it in the database\n   */ async captureConversation(data) {\n        try {\n            // Ensure user exists\n            const user = await (0,_db_queries__WEBPACK_IMPORTED_MODULE_1__.getOrCreateUser)(this.username);\n            // Generate session title if not provided\n            const title = data.title || this.generateTitle(data.messages);\n            // Create session\n            const sessionData = {\n                userId: user.id,\n                claudeSessionId: data.claudeSessionId || (0,crypto__WEBPACK_IMPORTED_MODULE_0__.randomUUID)(),\n                title,\n                metadata: data.metadata || {}\n            };\n            const session = await (0,_db_queries__WEBPACK_IMPORTED_MODULE_1__.createSession)(sessionData);\n            // Store all messages\n            const messagePromises = data.messages.map(async (msgData)=>{\n                const messageData = {\n                    sessionId: session.id,\n                    role: msgData.role,\n                    content: msgData.content,\n                    tokens: msgData.tokens,\n                    costUsd: msgData.costUsd,\n                    metadata: msgData.metadata || {}\n                };\n                return (0,_db_queries__WEBPACK_IMPORTED_MODULE_1__.createMessage)(messageData);\n            });\n            await Promise.all(messagePromises);\n            console.log(`‚úÖ Captured conversation: ${title} (${data.messages.length} messages)`);\n            return session.id;\n        } catch (error) {\n            console.error('‚ùå Failed to capture conversation:', error);\n            throw error;\n        }\n    }\n    /**\n   * Capture a single message and add it to an existing session\n   */ async captureMessage(sessionId, messageData) {\n        try {\n            const newMessage = {\n                sessionId,\n                role: messageData.role,\n                content: messageData.content,\n                tokens: messageData.tokens,\n                costUsd: messageData.costUsd,\n                metadata: messageData.metadata || {}\n            };\n            await (0,_db_queries__WEBPACK_IMPORTED_MODULE_1__.createMessage)(newMessage);\n            console.log(`‚úÖ Captured message: ${messageData.role} - ${messageData.content.substring(0, 50)}...`);\n        } catch (error) {\n            console.error('‚ùå Failed to capture message:', error);\n            throw error;\n        }\n    }\n    /**\n   * Generate a meaningful title from conversation messages\n   */ generateTitle(messages) {\n        // Find the first substantial user message\n        const firstUserMessage = messages.find((msg)=>msg.role === 'user' && msg.content.length > 10);\n        if (firstUserMessage) {\n            // Extract first sentence or up to 50 characters\n            const content = firstUserMessage.content.trim();\n            const firstSentence = content.split(/[.!?]/)[0];\n            return firstSentence.length > 50 ? content.substring(0, 47) + '...' : firstSentence;\n        }\n        // Fallback to timestamp-based title\n        return `Conversation ${new Date().toLocaleDateString()}`;\n    }\n    /**\n   * Parse Claude Code session output and extract conversation data\n   */ parseClaudeOutput(output) {\n        // This is a placeholder for parsing Claude Code output\n        // Implementation will depend on the specific format of Claude Code logs/output\n        const lines = output.split('\\n');\n        const messages = [];\n        // Basic parsing logic - this will need to be enhanced based on actual format\n        let currentMessage = '';\n        let currentRole = 'user';\n        for (const line of lines){\n            if (line.trim().startsWith('user:')) {\n                if (currentMessage) {\n                    messages.push({\n                        role: currentRole,\n                        content: currentMessage.trim()\n                    });\n                }\n                currentRole = 'user';\n                currentMessage = line.replace(/^user:\\s*/, '');\n            } else if (line.trim().startsWith('assistant:')) {\n                if (currentMessage) {\n                    messages.push({\n                        role: currentRole,\n                        content: currentMessage.trim()\n                    });\n                }\n                currentRole = 'assistant';\n                currentMessage = line.replace(/^assistant:\\s*/, '');\n            } else {\n                currentMessage += '\\n' + line;\n            }\n        }\n        // Add final message\n        if (currentMessage) {\n            messages.push({\n                role: currentRole,\n                content: currentMessage.trim()\n            });\n        }\n        return {\n            messages,\n            metadata: {\n                source: 'claude-code',\n                timestamp: new Date().toISOString()\n            }\n        };\n    }\n}\n/**\n * Default instance for easy usage\n */ const defaultCapture = new ConversationCapture();\n/**\n * Convenience function for quick conversation capture\n */ async function captureConversation(data) {\n    return defaultCapture.captureConversation(data);\n}\n/**\n * Convenience function for capturing a single message\n */ async function captureMessage(sessionId, messageData) {\n    return defaultCapture.captureMessage(sessionId, messageData);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVE7Z0JBQ1JDLFdBQVcsSUFBSVosT0FBT2EsV0FBVztZQUNuQztRQUNGO0lBQ0Y7QUFDRjtBQUVBOztDQUVDLEdBQ00sTUFBTUMsaUJBQWlCLElBQUlwRCxzQkFBcUI7QUFFdkQ7O0NBRUMsR0FDTSxlQUFlRSxvQkFDcEJDLElBQXNCO0lBRXRCLE9BQU9pRCxlQUFlbEQsbUJBQW1CLENBQUNDO0FBQzVDO0FBRUE7O0NBRUMsR0FDTSxlQUFlMEIsZUFDcEJYLFNBQWlCLEVBQ2pCRCxXQUF3QjtJQUV4QixPQUFPbUMsZUFBZXZCLGNBQWMsQ0FBQ1gsV0FBV0Q7QUFDbEQiLCJzb3VyY2VzIjpbIkM6XFxwcm9qZWN0c1xcYXJyYWtpc1xcbGliXFxjYXB0dXJlXFxpbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvbnZlcnNhdGlvbiBDYXB0dXJlIFNlcnZpY2VcbiAqXG4gKiBUaGlzIHNlcnZpY2UgaGFuZGxlcyBjYXB0dXJpbmcgQ2xhdWRlIENvZGUgY29udmVyc2F0aW9ucyBhbmQgc3RvcmluZyB0aGVtXG4gKiBpbiB0aGUgZGF0YWJhc2UgZm9yIGxhdGVyIHNlYXJjaCBhbmQgYW5hbHlzaXMuXG4gKi9cblxuaW1wb3J0IHsgcmFuZG9tVVVJRCB9IGZyb20gJ2NyeXB0bydcbmltcG9ydCB7XG4gIGNyZWF0ZVVzZXIsXG4gIGNyZWF0ZVNlc3Npb24sXG4gIGNyZWF0ZU1lc3NhZ2UsXG4gIGdldE9yQ3JlYXRlVXNlcixcbn0gZnJvbSAnLi4vZGIvcXVlcmllcydcbmltcG9ydCB0eXBlIHsgTmV3U2Vzc2lvbiwgTmV3TWVzc2FnZSB9IGZyb20gJy4uL2RiL3NjaGVtYSdcblxuZXhwb3J0IGludGVyZmFjZSBDb252ZXJzYXRpb25NZXRhZGF0YSB7XG4gIHNvdXJjZTogJ2NsYXVkZS1jb2RlJyB8ICdtYW51YWwnIHwgJ2ltcG9ydCdcbiAgdGltZXN0YW1wOiBzdHJpbmdcbiAgc2Vzc2lvbkluZm8/OiB7XG4gICAgcHJvamVjdFBhdGg/OiBzdHJpbmdcbiAgICBnaXRCcmFuY2g/OiBzdHJpbmdcbiAgICB3b3JraW5nRGlyZWN0b3J5Pzogc3RyaW5nXG4gIH1cbiAgcGVyZm9ybWFuY2U/OiB7XG4gICAgdG90YWxUb2tlbnM/OiBudW1iZXJcbiAgICB0b3RhbENvc3Q/OiBudW1iZXJcbiAgICBkdXJhdGlvbj86IG51bWJlclxuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWVzc2FnZURhdGEge1xuICByb2xlOiAndXNlcicgfCAnYXNzaXN0YW50JyB8ICdzeXN0ZW0nXG4gIGNvbnRlbnQ6IHN0cmluZ1xuICB0aW1lc3RhbXA/OiBzdHJpbmdcbiAgdG9rZW5zPzogbnVtYmVyXG4gIGNvc3RVc2Q/OiBzdHJpbmdcbiAgbWV0YWRhdGE/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29udmVyc2F0aW9uRGF0YSB7XG4gIHRpdGxlPzogc3RyaW5nXG4gIG1lc3NhZ2VzOiBNZXNzYWdlRGF0YVtdXG4gIG1ldGFkYXRhPzogQ29udmVyc2F0aW9uTWV0YWRhdGFcbiAgY2xhdWRlU2Vzc2lvbklkPzogc3RyaW5nXG59XG5cbi8qKlxuICogTWFpbiBjb252ZXJzYXRpb24gY2FwdHVyZSBzZXJ2aWNlXG4gKi9cbmV4cG9ydCBjbGFzcyBDb252ZXJzYXRpb25DYXB0dXJlIHtcbiAgcHJpdmF0ZSB1c2VybmFtZTogc3RyaW5nXG5cbiAgY29uc3RydWN0b3IodXNlcm5hbWU6IHN0cmluZyA9ICdkZWZhdWx0LXVzZXInKSB7XG4gICAgdGhpcy51c2VybmFtZSA9IHVzZXJuYW1lXG4gIH1cblxuICAvKipcbiAgICogQ2FwdHVyZSBhIGNvbXBsZXRlIGNvbnZlcnNhdGlvbiBhbmQgc3RvcmUgaXQgaW4gdGhlIGRhdGFiYXNlXG4gICAqL1xuICBhc3luYyBjYXB0dXJlQ29udmVyc2F0aW9uKGRhdGE6IENvbnZlcnNhdGlvbkRhdGEpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBFbnN1cmUgdXNlciBleGlzdHNcbiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXRPckNyZWF0ZVVzZXIodGhpcy51c2VybmFtZSlcblxuICAgICAgLy8gR2VuZXJhdGUgc2Vzc2lvbiB0aXRsZSBpZiBub3QgcHJvdmlkZWRcbiAgICAgIGNvbnN0IHRpdGxlID0gZGF0YS50aXRsZSB8fCB0aGlzLmdlbmVyYXRlVGl0bGUoZGF0YS5tZXNzYWdlcylcblxuICAgICAgLy8gQ3JlYXRlIHNlc3Npb25cbiAgICAgIGNvbnN0IHNlc3Npb25EYXRhOiBOZXdTZXNzaW9uID0ge1xuICAgICAgICB1c2VySWQ6IHVzZXIuaWQsXG4gICAgICAgIGNsYXVkZVNlc3Npb25JZDogZGF0YS5jbGF1ZGVTZXNzaW9uSWQgfHwgcmFuZG9tVVVJRCgpLFxuICAgICAgICB0aXRsZSxcbiAgICAgICAgbWV0YWRhdGE6IGRhdGEubWV0YWRhdGEgfHwge30sXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBjcmVhdGVTZXNzaW9uKHNlc3Npb25EYXRhKVxuXG4gICAgICAvLyBTdG9yZSBhbGwgbWVzc2FnZXNcbiAgICAgIGNvbnN0IG1lc3NhZ2VQcm9taXNlcyA9IGRhdGEubWVzc2FnZXMubWFwKGFzeW5jIChtc2dEYXRhKSA9PiB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2VEYXRhOiBOZXdNZXNzYWdlID0ge1xuICAgICAgICAgIHNlc3Npb25JZDogc2Vzc2lvbi5pZCxcbiAgICAgICAgICByb2xlOiBtc2dEYXRhLnJvbGUsXG4gICAgICAgICAgY29udGVudDogbXNnRGF0YS5jb250ZW50LFxuICAgICAgICAgIHRva2VuczogbXNnRGF0YS50b2tlbnMsXG4gICAgICAgICAgY29zdFVzZDogbXNnRGF0YS5jb3N0VXNkLFxuICAgICAgICAgIG1ldGFkYXRhOiBtc2dEYXRhLm1ldGFkYXRhIHx8IHt9LFxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNyZWF0ZU1lc3NhZ2UobWVzc2FnZURhdGEpXG4gICAgICB9KVxuXG4gICAgICBhd2FpdCBQcm9taXNlLmFsbChtZXNzYWdlUHJvbWlzZXMpXG5cbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBg4pyFIENhcHR1cmVkIGNvbnZlcnNhdGlvbjogJHt0aXRsZX0gKCR7ZGF0YS5tZXNzYWdlcy5sZW5ndGh9IG1lc3NhZ2VzKWBcbiAgICAgIClcbiAgICAgIHJldHVybiBzZXNzaW9uLmlkXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBGYWlsZWQgdG8gY2FwdHVyZSBjb252ZXJzYXRpb246JywgZXJyb3IpXG4gICAgICB0aHJvdyBlcnJvclxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDYXB0dXJlIGEgc2luZ2xlIG1lc3NhZ2UgYW5kIGFkZCBpdCB0byBhbiBleGlzdGluZyBzZXNzaW9uXG4gICAqL1xuICBhc3luYyBjYXB0dXJlTWVzc2FnZShcbiAgICBzZXNzaW9uSWQ6IHN0cmluZyxcbiAgICBtZXNzYWdlRGF0YTogTWVzc2FnZURhdGFcbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IG5ld01lc3NhZ2U6IE5ld01lc3NhZ2UgPSB7XG4gICAgICAgIHNlc3Npb25JZCxcbiAgICAgICAgcm9sZTogbWVzc2FnZURhdGEucm9sZSxcbiAgICAgICAgY29udGVudDogbWVzc2FnZURhdGEuY29udGVudCxcbiAgICAgICAgdG9rZW5zOiBtZXNzYWdlRGF0YS50b2tlbnMsXG4gICAgICAgIGNvc3RVc2Q6IG1lc3NhZ2VEYXRhLmNvc3RVc2QsXG4gICAgICAgIG1ldGFkYXRhOiBtZXNzYWdlRGF0YS5tZXRhZGF0YSB8fCB7fSxcbiAgICAgIH1cblxuICAgICAgYXdhaXQgY3JlYXRlTWVzc2FnZShuZXdNZXNzYWdlKVxuICAgICAgY29uc29sZS5sb2coXG4gICAgICAgIGDinIUgQ2FwdHVyZWQgbWVzc2FnZTogJHttZXNzYWdlRGF0YS5yb2xlfSAtICR7bWVzc2FnZURhdGEuY29udGVudC5zdWJzdHJpbmcoMCwgNTApfS4uLmBcbiAgICAgIClcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIEZhaWxlZCB0byBjYXB0dXJlIG1lc3NhZ2U6JywgZXJyb3IpXG4gICAgICB0aHJvdyBlcnJvclxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBhIG1lYW5pbmdmdWwgdGl0bGUgZnJvbSBjb252ZXJzYXRpb24gbWVzc2FnZXNcbiAgICovXG4gIHByaXZhdGUgZ2VuZXJhdGVUaXRsZShtZXNzYWdlczogTWVzc2FnZURhdGFbXSk6IHN0cmluZyB7XG4gICAgLy8gRmluZCB0aGUgZmlyc3Qgc3Vic3RhbnRpYWwgdXNlciBtZXNzYWdlXG4gICAgY29uc3QgZmlyc3RVc2VyTWVzc2FnZSA9IG1lc3NhZ2VzLmZpbmQoXG4gICAgICAobXNnKSA9PiBtc2cucm9sZSA9PT0gJ3VzZXInICYmIG1zZy5jb250ZW50Lmxlbmd0aCA+IDEwXG4gICAgKVxuXG4gICAgaWYgKGZpcnN0VXNlck1lc3NhZ2UpIHtcbiAgICAgIC8vIEV4dHJhY3QgZmlyc3Qgc2VudGVuY2Ugb3IgdXAgdG8gNTAgY2hhcmFjdGVyc1xuICAgICAgY29uc3QgY29udGVudCA9IGZpcnN0VXNlck1lc3NhZ2UuY29udGVudC50cmltKClcbiAgICAgIGNvbnN0IGZpcnN0U2VudGVuY2UgPSBjb250ZW50LnNwbGl0KC9bLiE/XS8pWzBdXG4gICAgICByZXR1cm4gZmlyc3RTZW50ZW5jZS5sZW5ndGggPiA1MFxuICAgICAgICA/IGNvbnRlbnQuc3Vic3RyaW5nKDAsIDQ3KSArICcuLi4nXG4gICAgICAgIDogZmlyc3RTZW50ZW5jZVxuICAgIH1cblxuICAgIC8vIEZhbGxiYWNrIHRvIHRpbWVzdGFtcC1iYXNlZCB0aXRsZVxuICAgIHJldHVybiBgQ29udmVyc2F0aW9uICR7bmV3IERhdGUoKS50b0xvY2FsZURhdGVTdHJpbmcoKX1gXG4gIH1cblxuICAvKipcbiAgICogUGFyc2UgQ2xhdWRlIENvZGUgc2Vzc2lvbiBvdXRwdXQgYW5kIGV4dHJhY3QgY29udmVyc2F0aW9uIGRhdGFcbiAgICovXG4gIHBhcnNlQ2xhdWRlT3V0cHV0KG91dHB1dDogc3RyaW5nKTogQ29udmVyc2F0aW9uRGF0YSB7XG4gICAgLy8gVGhpcyBpcyBhIHBsYWNlaG9sZGVyIGZvciBwYXJzaW5nIENsYXVkZSBDb2RlIG91dHB1dFxuICAgIC8vIEltcGxlbWVudGF0aW9uIHdpbGwgZGVwZW5kIG9uIHRoZSBzcGVjaWZpYyBmb3JtYXQgb2YgQ2xhdWRlIENvZGUgbG9ncy9vdXRwdXRcblxuICAgIGNvbnN0IGxpbmVzID0gb3V0cHV0LnNwbGl0KCdcXG4nKVxuICAgIGNvbnN0IG1lc3NhZ2VzOiBNZXNzYWdlRGF0YVtdID0gW11cblxuICAgIC8vIEJhc2ljIHBhcnNpbmcgbG9naWMgLSB0aGlzIHdpbGwgbmVlZCB0byBiZSBlbmhhbmNlZCBiYXNlZCBvbiBhY3R1YWwgZm9ybWF0XG4gICAgbGV0IGN1cnJlbnRNZXNzYWdlID0gJydcbiAgICBsZXQgY3VycmVudFJvbGU6ICd1c2VyJyB8ICdhc3Npc3RhbnQnIHwgJ3N5c3RlbScgPSAndXNlcidcblxuICAgIGZvciAoY29uc3QgbGluZSBvZiBsaW5lcykge1xuICAgICAgaWYgKGxpbmUudHJpbSgpLnN0YXJ0c1dpdGgoJ3VzZXI6JykpIHtcbiAgICAgICAgaWYgKGN1cnJlbnRNZXNzYWdlKSB7XG4gICAgICAgICAgbWVzc2FnZXMucHVzaCh7XG4gICAgICAgICAgICByb2xlOiBjdXJyZW50Um9sZSxcbiAgICAgICAgICAgIGNvbnRlbnQ6IGN1cnJlbnRNZXNzYWdlLnRyaW0oKSxcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGN1cnJlbnRSb2xlID0gJ3VzZXInXG4gICAgICAgIGN1cnJlbnRNZXNzYWdlID0gbGluZS5yZXBsYWNlKC9edXNlcjpcXHMqLywgJycpXG4gICAgICB9IGVsc2UgaWYgKGxpbmUudHJpbSgpLnN0YXJ0c1dpdGgoJ2Fzc2lzdGFudDonKSkge1xuICAgICAgICBpZiAoY3VycmVudE1lc3NhZ2UpIHtcbiAgICAgICAgICBtZXNzYWdlcy5wdXNoKHtcbiAgICAgICAgICAgIHJvbGU6IGN1cnJlbnRSb2xlLFxuICAgICAgICAgICAgY29udGVudDogY3VycmVudE1lc3NhZ2UudHJpbSgpLFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgY3VycmVudFJvbGUgPSAnYXNzaXN0YW50J1xuICAgICAgICBjdXJyZW50TWVzc2FnZSA9IGxpbmUucmVwbGFjZSgvXmFzc2lzdGFudDpcXHMqLywgJycpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdXJyZW50TWVzc2FnZSArPSAnXFxuJyArIGxpbmVcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBBZGQgZmluYWwgbWVzc2FnZVxuICAgIGlmIChjdXJyZW50TWVzc2FnZSkge1xuICAgICAgbWVzc2FnZXMucHVzaCh7XG4gICAgICAgIHJvbGU6IGN1cnJlbnRSb2xlLFxuICAgICAgICBjb250ZW50OiBjdXJyZW50TWVzc2FnZS50cmltKCksXG4gICAgICB9KVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBtZXNzYWdlcyxcbiAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgIHNvdXJjZTogJ2NsYXVkZS1jb2RlJyxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICB9LFxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIERlZmF1bHQgaW5zdGFuY2UgZm9yIGVhc3kgdXNhZ2VcbiAqL1xuZXhwb3J0IGNvbnN0IGRlZmF1bHRDYXB0dXJlID0gbmV3IENvbnZlcnNhdGlvbkNhcHR1cmUoKVxuXG4vKipcbiAqIENvbnZlbmllbmNlIGZ1bmN0aW9uIGZvciBxdWljayBjb252ZXJzYXRpb24gY2FwdHVyZVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2FwdHVyZUNvbnZlcnNhdGlvbihcbiAgZGF0YTogQ29udmVyc2F0aW9uRGF0YVxuKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgcmV0dXJuIGRlZmF1bHRDYXB0dXJlLmNhcHR1cmVDb252ZXJzYXRpb24oZGF0YSlcbn1cblxuLyoqXG4gKiBDb252ZW5pZW5jZSBmdW5jdGlvbiBmb3IgY2FwdHVyaW5nIGEgc2luZ2xlIG1lc3NhZ2VcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNhcHR1cmVNZXNzYWdlKFxuICBzZXNzaW9uSWQ6IHN0cmluZyxcbiAgbWVzc2FnZURhdGE6IE1lc3NhZ2VEYXRhXG4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgcmV0dXJuIGRlZmF1bHRDYXB0dXJlLmNhcHR1cmVNZXNzYWdlKHNlc3Npb25JZCwgbWVzc2FnZURhdGEpXG59XG4iXSwibmFtZXMiOlsicmFuZG9tVVVJRCIsImNyZWF0ZVNlc3Npb24iLCJjcmVhdGVNZXNzYWdlIiwiZ2V0T3JDcmVhdGVVc2VyIiwiQ29udmVyc2F0aW9uQ2FwdHVyZSIsInVzZXJuYW1lIiwiY2FwdHVyZUNvbnZlcnNhdGlvbiIsImRhdGEiLCJ1c2VyIiwidGl0bGUiLCJnZW5lcmF0ZVRpdGxlIiwibWVzc2FnZXMiLCJzZXNzaW9uRGF0YSIsInVzZXJJZCIsImlkIiwiY2xhdWRlU2Vzc2lvbklkIiwibWV0YWRhdGEiLCJzZXNzaW9uIiwibWVzc2FnZVByb21pc2VzIiwibWFwIiwibXNnRGF0YSIsIm1lc3NhZ2VEYXRhIiwic2Vzc2lvbklkIiwicm9sZSIsImNvbnRlbnQiLCJ0b2tlbnMiLCJjb3N0VXNkIiwiUHJvbWlzZSIsImFsbCIsImNvbnNvbGUiLCJsb2ciLCJsZW5ndGgiLCJlcnJvciIsImNhcHR1cmVNZXNzYWdlIiwibmV3TWVzc2FnZSIsInN1YnN0cmluZyIsImZpcnN0VXNlck1lc3NhZ2UiLCJmaW5kIiwibXNnIiwidHJpbSIsImZpcnN0U2VudGVuY2UiLCJzcGxpdCIsIkRhdGUiLCJ0b0xvY2FsZURhdGVTdHJpbmciLCJwYXJzZUNsYXVkZU91dHB1dCIsIm91dHB1dCIsImxpbmVzIiwiY3VycmVudE1lc3NhZ2UiLCJjdXJyZW50Um9sZSIsImxpbmUiLCJzdGFydHNXaXRoIiwicHVzaCIsInJlcGxhY2UiLCJzb3VyY2UiLCJ0aW1lc3RhbXAiLCJ0b0lTT1N0cmluZyIsImRlZmF1bHRDYXB0dXJlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/capture/index.ts\n");

/***/ }),

/***/ "(rsc)/./lib/capture/metadata-parser.ts":
/*!****************************************!*\
  !*** ./lib/capture/metadata-parser.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ClaudeMetadataParser: () => (/* binding */ ClaudeMetadataParser),\n/* harmony export */   defaultParser: () => (/* binding */ defaultParser),\n/* harmony export */   parseClaudeSession: () => (/* binding */ parseClaudeSession),\n/* harmony export */   parseClaudeSessionFromJson: () => (/* binding */ parseClaudeSessionFromJson)\n/* harmony export */ });\n/**\n * Claude Code Metadata Parser\n *\n * Parses and extracts rich metadata from Claude Code JSON sessions,\n * including tool calls, performance metrics, and conversation context.\n */ /**\n * Main metadata parser class\n */ class ClaudeMetadataParser {\n    /**\n   * Parse a complete Claude Code session from JSON messages\n   */ parseSession(messages) {\n        const systemMessage = messages.find((m)=>m.type === 'system');\n        const resultMessage = messages.find((m)=>m.type === 'result');\n        const conversationMessages = messages.filter((m)=>m.type === 'user' || m.type === 'assistant');\n        if (!systemMessage) {\n            throw new Error('No system init message found in session');\n        }\n        const sessionId = systemMessage.session_id;\n        const parsedMessages = this.parseMessages(conversationMessages);\n        const toolUsage = this.analyzeToolUsage(parsedMessages, (resultMessage?.permission_denials || []).map((denial)=>({\n                toolName: denial.tool_name,\n                toolUseId: denial.tool_use_id,\n                toolInput: denial.tool_input\n            })));\n        const conversation = this.analyzeConversation(parsedMessages);\n        return {\n            sessionId,\n            title: this.generateTitle(parsedMessages),\n            duration: {\n                totalMs: resultMessage?.duration_ms || 0,\n                apiMs: resultMessage?.duration_api_ms || 0,\n                startTime: new Date().toISOString(),\n                endTime: new Date().toISOString()\n            },\n            performance: {\n                totalCost: resultMessage?.total_cost_usd || 0,\n                inputTokens: resultMessage?.usage?.input_tokens || 0,\n                outputTokens: resultMessage?.usage?.output_tokens || 0,\n                totalTokens: (resultMessage?.usage?.input_tokens || 0) + (resultMessage?.usage?.output_tokens || 0),\n                costPerToken: this.calculateCostPerToken(resultMessage),\n                turnsCount: resultMessage?.num_turns || 0,\n                isError: resultMessage?.is_error || false\n            },\n            environment: {\n                model: systemMessage.model,\n                cwd: systemMessage.cwd,\n                apiKeySource: systemMessage.apiKeySource,\n                permissionMode: systemMessage.permissionMode,\n                outputStyle: systemMessage.output_style,\n                enabledTools: systemMessage.tools,\n                mcpServers: systemMessage.mcp_servers,\n                slashCommands: systemMessage.slash_commands\n            },\n            toolUsage,\n            conversation,\n            messages: parsedMessages\n        };\n    }\n    /**\n   * Parse individual messages and extract metadata\n   */ parseMessages(messages) {\n        return messages.map((msg)=>{\n            const baseMessage = {\n                uuid: msg.uuid,\n                type: msg.type,\n                timestamp: new Date().toISOString(),\n                content: this.extractTextContent(msg.message.content),\n                metadata: {\n                    parent_tool_use_id: msg.parent_tool_use_id,\n                    raw_content: msg.message.content\n                }\n            };\n            // Extract tool calls for assistant messages\n            if (msg.type === 'assistant') {\n                const toolCalls = this.extractToolCalls(msg);\n                if (toolCalls.length > 0) {\n                    baseMessage.toolCalls = toolCalls;\n                }\n            }\n            return baseMessage;\n        });\n    }\n    /**\n   * Extract text content from message content array\n   */ extractTextContent(content) {\n        return content.filter((c)=>c.type === 'text').map((c)=>c.text).join('\\n').trim();\n    }\n    /**\n   * Extract tool calls from assistant messages\n   */ extractToolCalls(msg) {\n        return msg.message.content.filter((c)=>c.type === 'tool_use').map((c)=>({\n                id: c.id || 'unknown',\n                name: c.name || 'unknown',\n                input: c.input || {},\n                success: true\n            }));\n    }\n    /**\n   * Analyze tool usage patterns\n   */ analyzeToolUsage(messages, denials) {\n        const allToolCalls = messages.flatMap((m)=>m.toolCalls || []);\n        const toolFrequency = {};\n        allToolCalls.forEach((call)=>{\n            toolFrequency[call.name] = (toolFrequency[call.name] || 0) + 1;\n        });\n        const successfulCalls = allToolCalls.filter((call)=>call.success).length;\n        const successRate = allToolCalls.length > 0 ? successfulCalls / allToolCalls.length : 1;\n        return {\n            toolCalls: allToolCalls,\n            permissionDenials: denials,\n            toolFrequency,\n            successRate\n        };\n    }\n    /**\n   * Analyze conversation patterns\n   */ analyzeConversation(messages) {\n        const userMessages = messages.filter((m)=>m.type === 'user').length;\n        const assistantMessages = messages.filter((m)=>m.type === 'assistant').length;\n        const totalLength = messages.reduce((sum, m)=>sum + m.content.length, 0);\n        const averageMessageLength = messages.length > 0 ? totalLength / messages.length : 0;\n        const codeBlocks = this.extractCodeBlocks(messages);\n        const topics = this.extractTopics(messages);\n        return {\n            messageCount: messages.length,\n            userMessages,\n            assistantMessages,\n            averageMessageLength,\n            topics,\n            codeBlocks\n        };\n    }\n    /**\n   * Extract code blocks from conversation\n   */ extractCodeBlocks(messages) {\n        const codeBlocks = [];\n        const codeBlockRegex = /```(\\w+)?\\n([\\s\\S]*?)```/g;\n        messages.forEach((msg)=>{\n            let match;\n            while((match = codeBlockRegex.exec(msg.content)) !== null){\n                const language = match[1] || 'unknown';\n                const code = match[2].trim();\n                const lineCount = code.split('\\n').length;\n                codeBlocks.push({\n                    language,\n                    code,\n                    lineCount,\n                    context: msg.content.substring(Math.max(0, match.index - 100), match.index)\n                });\n            }\n        });\n        return codeBlocks;\n    }\n    /**\n   * Extract topics/keywords from conversation\n   */ extractTopics(messages) {\n        // Simple keyword extraction - could be enhanced with NLP\n        const text = messages.map((m)=>m.content).join(' ').toLowerCase();\n        const keywords = [\n            'database',\n            'api',\n            'function',\n            'error',\n            'bug',\n            'test',\n            'deploy',\n            'react',\n            'typescript',\n            'javascript',\n            'python',\n            'sql',\n            'docker',\n            'git',\n            'github',\n            'npm',\n            'yarn',\n            'webpack',\n            'next.js',\n            'express'\n        ];\n        return keywords.filter((keyword)=>text.includes(keyword));\n    }\n    /**\n   * Calculate cost per token\n   */ calculateCostPerToken(resultMessage) {\n        if (!resultMessage?.usage || !resultMessage.total_cost_usd) return 0;\n        const totalTokens = resultMessage.usage.input_tokens + resultMessage.usage.output_tokens;\n        return totalTokens > 0 ? resultMessage.total_cost_usd / totalTokens : 0;\n    }\n    /**\n   * Generate session title from content\n   */ generateTitle(messages) {\n        const firstUserMessage = messages.find((m)=>m.type === 'user');\n        if (firstUserMessage && firstUserMessage.content.length > 10) {\n            const content = firstUserMessage.content.trim();\n            const firstSentence = content.split(/[.!?]/)[0];\n            return firstSentence.length > 50 ? content.substring(0, 47) + '...' : firstSentence;\n        }\n        return `Claude Code Session ${new Date().toLocaleDateString()}`;\n    }\n    /**\n   * Parse session from raw JSON string\n   */ parseFromJsonString(jsonData) {\n        const lines = jsonData.split('\\n').filter((line)=>line.trim());\n        const messages = [];\n        for (const line of lines){\n            try {\n                const message = JSON.parse(line);\n                messages.push(message);\n            } catch (error) {\n                console.warn('Failed to parse JSON line:', line.substring(0, 100));\n            }\n        }\n        return this.parseSession(messages);\n    }\n}\n/**\n * Default parser instance\n */ const defaultParser = new ClaudeMetadataParser();\n/**\n * Convenience function for parsing sessions\n */ function parseClaudeSession(messages) {\n    return defaultParser.parseSession(messages);\n}\n/**\n * Parse from JSON string\n */ function parseClaudeSessionFromJson(jsonData) {\n    return defaultParser.parseFromJsonString(jsonData);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dGEtcGFyc2VyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ2xhdWRlIENvZGUgTWV0YWRhdGEgUGFyc2VyXG4gKlxuICogUGFyc2VzIGFuZCBleHRyYWN0cyByaWNoIG1ldGFkYXRhIGZyb20gQ2xhdWRlIENvZGUgSlNPTiBzZXNzaW9ucyxcbiAqIGluY2x1ZGluZyB0b29sIGNhbGxzLCBwZXJmb3JtYW5jZSBtZXRyaWNzLCBhbmQgY29udmVyc2F0aW9uIGNvbnRleHQuXG4gKi9cblxuaW1wb3J0IHR5cGUge1xuICBDbGF1ZGVNZXNzYWdlLFxuICBDbGF1ZGVBc3Npc3RhbnRNZXNzYWdlLFxuICBDbGF1ZGVVc2VyTWVzc2FnZSxcbiAgQ2xhdWRlU3lzdGVtTWVzc2FnZSxcbiAgQ2xhdWRlUmVzdWx0TWVzc2FnZSxcbn0gZnJvbSAnLi9jbGF1ZGUtaW50ZXJjZXB0b3InXG5cbmV4cG9ydCBpbnRlcmZhY2UgUGFyc2VkU2Vzc2lvbiB7XG4gIC8vIEJhc2ljIHNlc3Npb24gaW5mb1xuICBzZXNzaW9uSWQ6IHN0cmluZ1xuICB0aXRsZTogc3RyaW5nXG4gIGR1cmF0aW9uOiB7XG4gICAgdG90YWxNczogbnVtYmVyXG4gICAgYXBpTXM6IG51bWJlclxuICAgIHN0YXJ0VGltZTogc3RyaW5nXG4gICAgZW5kVGltZTogc3RyaW5nXG4gIH1cblxuICAvLyBQZXJmb3JtYW5jZSBtZXRyaWNzXG4gIHBlcmZvcm1hbmNlOiB7XG4gICAgdG90YWxDb3N0OiBudW1iZXJcbiAgICBpbnB1dFRva2VuczogbnVtYmVyXG4gICAgb3V0cHV0VG9rZW5zOiBudW1iZXJcbiAgICB0b3RhbFRva2VuczogbnVtYmVyXG4gICAgY29zdFBlclRva2VuOiBudW1iZXJcbiAgICB0dXJuc0NvdW50OiBudW1iZXJcbiAgICBpc0Vycm9yOiBib29sZWFuXG4gIH1cblxuICAvLyBFbnZpcm9ubWVudCBjb250ZXh0XG4gIGVudmlyb25tZW50OiB7XG4gICAgbW9kZWw6IHN0cmluZ1xuICAgIGN3ZDogc3RyaW5nXG4gICAgYXBpS2V5U291cmNlOiBzdHJpbmdcbiAgICBwZXJtaXNzaW9uTW9kZTogc3RyaW5nXG4gICAgb3V0cHV0U3R5bGU6IHN0cmluZ1xuICAgIGVuYWJsZWRUb29sczogc3RyaW5nW11cbiAgICBtY3BTZXJ2ZXJzOiBBcnJheTx7IG5hbWU6IHN0cmluZzsgc3RhdHVzOiBzdHJpbmcgfT5cbiAgICBzbGFzaENvbW1hbmRzOiBzdHJpbmdbXVxuICB9XG5cbiAgLy8gVG9vbCB1c2FnZSBhbmFseXNpc1xuICB0b29sVXNhZ2U6IHtcbiAgICB0b29sQ2FsbHM6IFRvb2xDYWxsW11cbiAgICBwZXJtaXNzaW9uRGVuaWFsczogUGVybWlzc2lvbkRlbmlhbFtdXG4gICAgdG9vbEZyZXF1ZW5jeTogUmVjb3JkPHN0cmluZywgbnVtYmVyPlxuICAgIHN1Y2Nlc3NSYXRlOiBudW1iZXJcbiAgfVxuXG4gIC8vIENvbnZlcnNhdGlvbiBhbmFseXNpc1xuICBjb252ZXJzYXRpb246IHtcbiAgICBtZXNzYWdlQ291bnQ6IG51bWJlclxuICAgIHVzZXJNZXNzYWdlczogbnVtYmVyXG4gICAgYXNzaXN0YW50TWVzc2FnZXM6IG51bWJlclxuICAgIGF2ZXJhZ2VNZXNzYWdlTGVuZ3RoOiBudW1iZXJcbiAgICB0b3BpY3M6IHN0cmluZ1tdXG4gICAgY29kZUJsb2NrczogQ29kZUJsb2NrW11cbiAgfVxuXG4gIC8vIFJhdyBtZXNzYWdlc1xuICBtZXNzYWdlczogUGFyc2VkTWVzc2FnZVtdXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGFyc2VkTWVzc2FnZSB7XG4gIHV1aWQ6IHN0cmluZ1xuICB0eXBlOiAndXNlcicgfCAnYXNzaXN0YW50JyB8ICdzeXN0ZW0nXG4gIHRpbWVzdGFtcDogc3RyaW5nXG4gIGNvbnRlbnQ6IHN0cmluZ1xuICB0b29sQ2FsbHM/OiBUb29sQ2FsbFtdXG4gIG1ldGFkYXRhOiBSZWNvcmQ8c3RyaW5nLCBhbnk+XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVG9vbENhbGwge1xuICBpZDogc3RyaW5nXG4gIG5hbWU6IHN0cmluZ1xuICBpbnB1dDogUmVjb3JkPHN0cmluZywgYW55PlxuICByZXN1bHQ/OiBhbnlcbiAgZXJyb3I/OiBzdHJpbmdcbiAgZHVyYXRpb24/OiBudW1iZXJcbiAgc3VjY2VzczogYm9vbGVhblxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBlcm1pc3Npb25EZW5pYWwge1xuICB0b29sTmFtZTogc3RyaW5nXG4gIHRvb2xVc2VJZDogc3RyaW5nXG4gIHRvb2xJbnB1dDogUmVjb3JkPHN0cmluZywgdW5rbm93bj5cbiAgcmVhc29uPzogc3RyaW5nXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29kZUJsb2NrIHtcbiAgbGFuZ3VhZ2U6IHN0cmluZ1xuICBjb2RlOiBzdHJpbmdcbiAgbGluZUNvdW50OiBudW1iZXJcbiAgY29udGV4dDogc3RyaW5nXG59XG5cbi8qKlxuICogTWFpbiBtZXRhZGF0YSBwYXJzZXIgY2xhc3NcbiAqL1xuZXhwb3J0IGNsYXNzIENsYXVkZU1ldGFkYXRhUGFyc2VyIHtcbiAgLyoqXG4gICAqIFBhcnNlIGEgY29tcGxldGUgQ2xhdWRlIENvZGUgc2Vzc2lvbiBmcm9tIEpTT04gbWVzc2FnZXNcbiAgICovXG4gIHBhcnNlU2Vzc2lvbihtZXNzYWdlczogQ2xhdWRlTWVzc2FnZVtdKTogUGFyc2VkU2Vzc2lvbiB7XG4gICAgY29uc3Qgc3lzdGVtTWVzc2FnZSA9IG1lc3NhZ2VzLmZpbmQoKG0pID0+IG0udHlwZSA9PT0gJ3N5c3RlbScpIGFzXG4gICAgICB8IENsYXVkZVN5c3RlbU1lc3NhZ2VcbiAgICAgIHwgdW5kZWZpbmVkXG4gICAgY29uc3QgcmVzdWx0TWVzc2FnZSA9IG1lc3NhZ2VzLmZpbmQoKG0pID0+IG0udHlwZSA9PT0gJ3Jlc3VsdCcpIGFzXG4gICAgICB8IENsYXVkZVJlc3VsdE1lc3NhZ2VcbiAgICAgIHwgdW5kZWZpbmVkXG4gICAgY29uc3QgY29udmVyc2F0aW9uTWVzc2FnZXMgPSBtZXNzYWdlcy5maWx0ZXIoXG4gICAgICAobSkgPT4gbS50eXBlID09PSAndXNlcicgfHwgbS50eXBlID09PSAnYXNzaXN0YW50J1xuICAgIClcblxuICAgIGlmICghc3lzdGVtTWVzc2FnZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBzeXN0ZW0gaW5pdCBtZXNzYWdlIGZvdW5kIGluIHNlc3Npb24nKVxuICAgIH1cblxuICAgIGNvbnN0IHNlc3Npb25JZCA9IHN5c3RlbU1lc3NhZ2Uuc2Vzc2lvbl9pZFxuICAgIGNvbnN0IHBhcnNlZE1lc3NhZ2VzID0gdGhpcy5wYXJzZU1lc3NhZ2VzKGNvbnZlcnNhdGlvbk1lc3NhZ2VzKVxuICAgIGNvbnN0IHRvb2xVc2FnZSA9IHRoaXMuYW5hbHl6ZVRvb2xVc2FnZShcbiAgICAgIHBhcnNlZE1lc3NhZ2VzLFxuICAgICAgKHJlc3VsdE1lc3NhZ2U/LnBlcm1pc3Npb25fZGVuaWFscyB8fCBbXSkubWFwKChkZW5pYWwpID0+ICh7XG4gICAgICAgIHRvb2xOYW1lOiBkZW5pYWwudG9vbF9uYW1lLFxuICAgICAgICB0b29sVXNlSWQ6IGRlbmlhbC50b29sX3VzZV9pZCxcbiAgICAgICAgdG9vbElucHV0OiBkZW5pYWwudG9vbF9pbnB1dCxcbiAgICAgIH0pKVxuICAgIClcbiAgICBjb25zdCBjb252ZXJzYXRpb24gPSB0aGlzLmFuYWx5emVDb252ZXJzYXRpb24ocGFyc2VkTWVzc2FnZXMpXG5cbiAgICByZXR1cm4ge1xuICAgICAgc2Vzc2lvbklkLFxuICAgICAgdGl0bGU6IHRoaXMuZ2VuZXJhdGVUaXRsZShwYXJzZWRNZXNzYWdlcyksXG5cbiAgICAgIGR1cmF0aW9uOiB7XG4gICAgICAgIHRvdGFsTXM6IHJlc3VsdE1lc3NhZ2U/LmR1cmF0aW9uX21zIHx8IDAsXG4gICAgICAgIGFwaU1zOiByZXN1bHRNZXNzYWdlPy5kdXJhdGlvbl9hcGlfbXMgfHwgMCxcbiAgICAgICAgc3RhcnRUaW1lOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksIC8vIFdvdWxkIG5lZWQgdG8gdHJhY2sgdGhpcyBwcm9wZXJseVxuICAgICAgICBlbmRUaW1lOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICB9LFxuXG4gICAgICBwZXJmb3JtYW5jZToge1xuICAgICAgICB0b3RhbENvc3Q6IHJlc3VsdE1lc3NhZ2U/LnRvdGFsX2Nvc3RfdXNkIHx8IDAsXG4gICAgICAgIGlucHV0VG9rZW5zOiByZXN1bHRNZXNzYWdlPy51c2FnZT8uaW5wdXRfdG9rZW5zIHx8IDAsXG4gICAgICAgIG91dHB1dFRva2VuczogcmVzdWx0TWVzc2FnZT8udXNhZ2U/Lm91dHB1dF90b2tlbnMgfHwgMCxcbiAgICAgICAgdG90YWxUb2tlbnM6XG4gICAgICAgICAgKHJlc3VsdE1lc3NhZ2U/LnVzYWdlPy5pbnB1dF90b2tlbnMgfHwgMCkgK1xuICAgICAgICAgIChyZXN1bHRNZXNzYWdlPy51c2FnZT8ub3V0cHV0X3Rva2VucyB8fCAwKSxcbiAgICAgICAgY29zdFBlclRva2VuOiB0aGlzLmNhbGN1bGF0ZUNvc3RQZXJUb2tlbihyZXN1bHRNZXNzYWdlKSxcbiAgICAgICAgdHVybnNDb3VudDogcmVzdWx0TWVzc2FnZT8ubnVtX3R1cm5zIHx8IDAsXG4gICAgICAgIGlzRXJyb3I6IHJlc3VsdE1lc3NhZ2U/LmlzX2Vycm9yIHx8IGZhbHNlLFxuICAgICAgfSxcblxuICAgICAgZW52aXJvbm1lbnQ6IHtcbiAgICAgICAgbW9kZWw6IHN5c3RlbU1lc3NhZ2UubW9kZWwsXG4gICAgICAgIGN3ZDogc3lzdGVtTWVzc2FnZS5jd2QsXG4gICAgICAgIGFwaUtleVNvdXJjZTogc3lzdGVtTWVzc2FnZS5hcGlLZXlTb3VyY2UsXG4gICAgICAgIHBlcm1pc3Npb25Nb2RlOiBzeXN0ZW1NZXNzYWdlLnBlcm1pc3Npb25Nb2RlLFxuICAgICAgICBvdXRwdXRTdHlsZTogc3lzdGVtTWVzc2FnZS5vdXRwdXRfc3R5bGUsXG4gICAgICAgIGVuYWJsZWRUb29sczogc3lzdGVtTWVzc2FnZS50b29scyxcbiAgICAgICAgbWNwU2VydmVyczogc3lzdGVtTWVzc2FnZS5tY3Bfc2VydmVycyxcbiAgICAgICAgc2xhc2hDb21tYW5kczogc3lzdGVtTWVzc2FnZS5zbGFzaF9jb21tYW5kcyxcbiAgICAgIH0sXG5cbiAgICAgIHRvb2xVc2FnZSxcbiAgICAgIGNvbnZlcnNhdGlvbixcbiAgICAgIG1lc3NhZ2VzOiBwYXJzZWRNZXNzYWdlcyxcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUGFyc2UgaW5kaXZpZHVhbCBtZXNzYWdlcyBhbmQgZXh0cmFjdCBtZXRhZGF0YVxuICAgKi9cbiAgcHJpdmF0ZSBwYXJzZU1lc3NhZ2VzKFxuICAgIG1lc3NhZ2VzOiAoQ2xhdWRlVXNlck1lc3NhZ2UgfCBDbGF1ZGVBc3Npc3RhbnRNZXNzYWdlKVtdXG4gICk6IFBhcnNlZE1lc3NhZ2VbXSB7XG4gICAgcmV0dXJuIG1lc3NhZ2VzLm1hcCgobXNnKSA9PiB7XG4gICAgICBjb25zdCBiYXNlTWVzc2FnZTogUGFyc2VkTWVzc2FnZSA9IHtcbiAgICAgICAgdXVpZDogbXNnLnV1aWQsXG4gICAgICAgIHR5cGU6IG1zZy50eXBlIGFzICd1c2VyJyB8ICdhc3Npc3RhbnQnLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwgLy8gV291bGQgZXh0cmFjdCBmcm9tIGFjdHVhbCB0aW1lc3RhbXBcbiAgICAgICAgY29udGVudDogdGhpcy5leHRyYWN0VGV4dENvbnRlbnQobXNnLm1lc3NhZ2UuY29udGVudCksXG4gICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgcGFyZW50X3Rvb2xfdXNlX2lkOiBtc2cucGFyZW50X3Rvb2xfdXNlX2lkLFxuICAgICAgICAgIHJhd19jb250ZW50OiBtc2cubWVzc2FnZS5jb250ZW50LFxuICAgICAgICB9LFxuICAgICAgfVxuXG4gICAgICAvLyBFeHRyYWN0IHRvb2wgY2FsbHMgZm9yIGFzc2lzdGFudCBtZXNzYWdlc1xuICAgICAgaWYgKG1zZy50eXBlID09PSAnYXNzaXN0YW50Jykge1xuICAgICAgICBjb25zdCB0b29sQ2FsbHMgPSB0aGlzLmV4dHJhY3RUb29sQ2FsbHMobXNnIGFzIENsYXVkZUFzc2lzdGFudE1lc3NhZ2UpXG4gICAgICAgIGlmICh0b29sQ2FsbHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGJhc2VNZXNzYWdlLnRvb2xDYWxscyA9IHRvb2xDYWxsc1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBiYXNlTWVzc2FnZVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogRXh0cmFjdCB0ZXh0IGNvbnRlbnQgZnJvbSBtZXNzYWdlIGNvbnRlbnQgYXJyYXlcbiAgICovXG4gIHByaXZhdGUgZXh0cmFjdFRleHRDb250ZW50KGNvbnRlbnQ6IEFycmF5PGFueT4pOiBzdHJpbmcge1xuICAgIHJldHVybiBjb250ZW50XG4gICAgICAuZmlsdGVyKChjKSA9PiBjLnR5cGUgPT09ICd0ZXh0JylcbiAgICAgIC5tYXAoKGMpID0+IGMudGV4dClcbiAgICAgIC5qb2luKCdcXG4nKVxuICAgICAgLnRyaW0oKVxuICB9XG5cbiAgLyoqXG4gICAqIEV4dHJhY3QgdG9vbCBjYWxscyBmcm9tIGFzc2lzdGFudCBtZXNzYWdlc1xuICAgKi9cbiAgcHJpdmF0ZSBleHRyYWN0VG9vbENhbGxzKG1zZzogQ2xhdWRlQXNzaXN0YW50TWVzc2FnZSk6IFRvb2xDYWxsW10ge1xuICAgIHJldHVybiBtc2cubWVzc2FnZS5jb250ZW50XG4gICAgICAuZmlsdGVyKChjKSA9PiBjLnR5cGUgPT09ICd0b29sX3VzZScpXG4gICAgICAubWFwKChjKSA9PiAoe1xuICAgICAgICBpZDogYy5pZCB8fCAndW5rbm93bicsXG4gICAgICAgIG5hbWU6IGMubmFtZSB8fCAndW5rbm93bicsXG4gICAgICAgIGlucHV0OiBjLmlucHV0IHx8IHt9LFxuICAgICAgICBzdWNjZXNzOiB0cnVlLCAvLyBXb3VsZCBuZWVkIHRvIHRyYWNrIHJlc3VsdHNcbiAgICAgIH0pKVxuICB9XG5cbiAgLyoqXG4gICAqIEFuYWx5emUgdG9vbCB1c2FnZSBwYXR0ZXJuc1xuICAgKi9cbiAgcHJpdmF0ZSBhbmFseXplVG9vbFVzYWdlKFxuICAgIG1lc3NhZ2VzOiBQYXJzZWRNZXNzYWdlW10sXG4gICAgZGVuaWFsczogUGVybWlzc2lvbkRlbmlhbFtdXG4gICk6IHtcbiAgICB0b29sQ2FsbHM6IFRvb2xDYWxsW11cbiAgICBwZXJtaXNzaW9uRGVuaWFsczogUGVybWlzc2lvbkRlbmlhbFtdXG4gICAgdG9vbEZyZXF1ZW5jeTogUmVjb3JkPHN0cmluZywgbnVtYmVyPlxuICAgIHN1Y2Nlc3NSYXRlOiBudW1iZXJcbiAgfSB7XG4gICAgY29uc3QgYWxsVG9vbENhbGxzID0gbWVzc2FnZXMuZmxhdE1hcCgobSkgPT4gbS50b29sQ2FsbHMgfHwgW10pXG4gICAgY29uc3QgdG9vbEZyZXF1ZW5jeTogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHt9XG5cbiAgICBhbGxUb29sQ2FsbHMuZm9yRWFjaCgoY2FsbCkgPT4ge1xuICAgICAgdG9vbEZyZXF1ZW5jeVtjYWxsLm5hbWVdID0gKHRvb2xGcmVxdWVuY3lbY2FsbC5uYW1lXSB8fCAwKSArIDFcbiAgICB9KVxuXG4gICAgY29uc3Qgc3VjY2Vzc2Z1bENhbGxzID0gYWxsVG9vbENhbGxzLmZpbHRlcigoY2FsbCkgPT4gY2FsbC5zdWNjZXNzKS5sZW5ndGhcbiAgICBjb25zdCBzdWNjZXNzUmF0ZSA9XG4gICAgICBhbGxUb29sQ2FsbHMubGVuZ3RoID4gMCA/IHN1Y2Nlc3NmdWxDYWxscyAvIGFsbFRvb2xDYWxscy5sZW5ndGggOiAxXG5cbiAgICByZXR1cm4ge1xuICAgICAgdG9vbENhbGxzOiBhbGxUb29sQ2FsbHMsXG4gICAgICBwZXJtaXNzaW9uRGVuaWFsczogZGVuaWFscyxcbiAgICAgIHRvb2xGcmVxdWVuY3ksXG4gICAgICBzdWNjZXNzUmF0ZSxcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQW5hbHl6ZSBjb252ZXJzYXRpb24gcGF0dGVybnNcbiAgICovXG4gIHByaXZhdGUgYW5hbHl6ZUNvbnZlcnNhdGlvbihtZXNzYWdlczogUGFyc2VkTWVzc2FnZVtdKToge1xuICAgIG1lc3NhZ2VDb3VudDogbnVtYmVyXG4gICAgdXNlck1lc3NhZ2VzOiBudW1iZXJcbiAgICBhc3Npc3RhbnRNZXNzYWdlczogbnVtYmVyXG4gICAgYXZlcmFnZU1lc3NhZ2VMZW5ndGg6IG51bWJlclxuICAgIHRvcGljczogc3RyaW5nW11cbiAgICBjb2RlQmxvY2tzOiBDb2RlQmxvY2tbXVxuICB9IHtcbiAgICBjb25zdCB1c2VyTWVzc2FnZXMgPSBtZXNzYWdlcy5maWx0ZXIoKG0pID0+IG0udHlwZSA9PT0gJ3VzZXInKS5sZW5ndGhcbiAgICBjb25zdCBhc3Npc3RhbnRNZXNzYWdlcyA9IG1lc3NhZ2VzLmZpbHRlcihcbiAgICAgIChtKSA9PiBtLnR5cGUgPT09ICdhc3Npc3RhbnQnXG4gICAgKS5sZW5ndGhcblxuICAgIGNvbnN0IHRvdGFsTGVuZ3RoID0gbWVzc2FnZXMucmVkdWNlKChzdW0sIG0pID0+IHN1bSArIG0uY29udGVudC5sZW5ndGgsIDApXG4gICAgY29uc3QgYXZlcmFnZU1lc3NhZ2VMZW5ndGggPVxuICAgICAgbWVzc2FnZXMubGVuZ3RoID4gMCA/IHRvdGFsTGVuZ3RoIC8gbWVzc2FnZXMubGVuZ3RoIDogMFxuXG4gICAgY29uc3QgY29kZUJsb2NrcyA9IHRoaXMuZXh0cmFjdENvZGVCbG9ja3MobWVzc2FnZXMpXG4gICAgY29uc3QgdG9waWNzID0gdGhpcy5leHRyYWN0VG9waWNzKG1lc3NhZ2VzKVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIG1lc3NhZ2VDb3VudDogbWVzc2FnZXMubGVuZ3RoLFxuICAgICAgdXNlck1lc3NhZ2VzLFxuICAgICAgYXNzaXN0YW50TWVzc2FnZXMsXG4gICAgICBhdmVyYWdlTWVzc2FnZUxlbmd0aCxcbiAgICAgIHRvcGljcyxcbiAgICAgIGNvZGVCbG9ja3MsXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEV4dHJhY3QgY29kZSBibG9ja3MgZnJvbSBjb252ZXJzYXRpb25cbiAgICovXG4gIHByaXZhdGUgZXh0cmFjdENvZGVCbG9ja3MobWVzc2FnZXM6IFBhcnNlZE1lc3NhZ2VbXSk6IENvZGVCbG9ja1tdIHtcbiAgICBjb25zdCBjb2RlQmxvY2tzOiBDb2RlQmxvY2tbXSA9IFtdXG4gICAgY29uc3QgY29kZUJsb2NrUmVnZXggPSAvYGBgKFxcdyspP1xcbihbXFxzXFxTXSo/KWBgYC9nXG5cbiAgICBtZXNzYWdlcy5mb3JFYWNoKChtc2cpID0+IHtcbiAgICAgIGxldCBtYXRjaFxuICAgICAgd2hpbGUgKChtYXRjaCA9IGNvZGVCbG9ja1JlZ2V4LmV4ZWMobXNnLmNvbnRlbnQpKSAhPT0gbnVsbCkge1xuICAgICAgICBjb25zdCBsYW5ndWFnZSA9IG1hdGNoWzFdIHx8ICd1bmtub3duJ1xuICAgICAgICBjb25zdCBjb2RlID0gbWF0Y2hbMl0udHJpbSgpXG4gICAgICAgIGNvbnN0IGxpbmVDb3VudCA9IGNvZGUuc3BsaXQoJ1xcbicpLmxlbmd0aFxuXG4gICAgICAgIGNvZGVCbG9ja3MucHVzaCh7XG4gICAgICAgICAgbGFuZ3VhZ2UsXG4gICAgICAgICAgY29kZSxcbiAgICAgICAgICBsaW5lQ291bnQsXG4gICAgICAgICAgY29udGV4dDogbXNnLmNvbnRlbnQuc3Vic3RyaW5nKFxuICAgICAgICAgICAgTWF0aC5tYXgoMCwgbWF0Y2guaW5kZXggLSAxMDApLFxuICAgICAgICAgICAgbWF0Y2guaW5kZXhcbiAgICAgICAgICApLFxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0pXG5cbiAgICByZXR1cm4gY29kZUJsb2Nrc1xuICB9XG5cbiAgLyoqXG4gICAqIEV4dHJhY3QgdG9waWNzL2tleXdvcmRzIGZyb20gY29udmVyc2F0aW9uXG4gICAqL1xuICBwcml2YXRlIGV4dHJhY3RUb3BpY3MobWVzc2FnZXM6IFBhcnNlZE1lc3NhZ2VbXSk6IHN0cmluZ1tdIHtcbiAgICAvLyBTaW1wbGUga2V5d29yZCBleHRyYWN0aW9uIC0gY291bGQgYmUgZW5oYW5jZWQgd2l0aCBOTFBcbiAgICBjb25zdCB0ZXh0ID0gbWVzc2FnZXNcbiAgICAgIC5tYXAoKG0pID0+IG0uY29udGVudClcbiAgICAgIC5qb2luKCcgJylcbiAgICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgY29uc3Qga2V5d29yZHMgPSBbXG4gICAgICAnZGF0YWJhc2UnLFxuICAgICAgJ2FwaScsXG4gICAgICAnZnVuY3Rpb24nLFxuICAgICAgJ2Vycm9yJyxcbiAgICAgICdidWcnLFxuICAgICAgJ3Rlc3QnLFxuICAgICAgJ2RlcGxveScsXG4gICAgICAncmVhY3QnLFxuICAgICAgJ3R5cGVzY3JpcHQnLFxuICAgICAgJ2phdmFzY3JpcHQnLFxuICAgICAgJ3B5dGhvbicsXG4gICAgICAnc3FsJyxcbiAgICAgICdkb2NrZXInLFxuICAgICAgJ2dpdCcsXG4gICAgICAnZ2l0aHViJyxcbiAgICAgICducG0nLFxuICAgICAgJ3lhcm4nLFxuICAgICAgJ3dlYnBhY2snLFxuICAgICAgJ25leHQuanMnLFxuICAgICAgJ2V4cHJlc3MnLFxuICAgIF1cblxuICAgIHJldHVybiBrZXl3b3Jkcy5maWx0ZXIoKGtleXdvcmQpID0+IHRleHQuaW5jbHVkZXMoa2V5d29yZCkpXG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlIGNvc3QgcGVyIHRva2VuXG4gICAqL1xuICBwcml2YXRlIGNhbGN1bGF0ZUNvc3RQZXJUb2tlbihcbiAgICByZXN1bHRNZXNzYWdlOiBDbGF1ZGVSZXN1bHRNZXNzYWdlIHwgdW5kZWZpbmVkXG4gICk6IG51bWJlciB7XG4gICAgaWYgKCFyZXN1bHRNZXNzYWdlPy51c2FnZSB8fCAhcmVzdWx0TWVzc2FnZS50b3RhbF9jb3N0X3VzZCkgcmV0dXJuIDBcblxuICAgIGNvbnN0IHRvdGFsVG9rZW5zID1cbiAgICAgIHJlc3VsdE1lc3NhZ2UudXNhZ2UuaW5wdXRfdG9rZW5zICsgcmVzdWx0TWVzc2FnZS51c2FnZS5vdXRwdXRfdG9rZW5zXG4gICAgcmV0dXJuIHRvdGFsVG9rZW5zID4gMCA/IHJlc3VsdE1lc3NhZ2UudG90YWxfY29zdF91c2QgLyB0b3RhbFRva2VucyA6IDBcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBzZXNzaW9uIHRpdGxlIGZyb20gY29udGVudFxuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZVRpdGxlKG1lc3NhZ2VzOiBQYXJzZWRNZXNzYWdlW10pOiBzdHJpbmcge1xuICAgIGNvbnN0IGZpcnN0VXNlck1lc3NhZ2UgPSBtZXNzYWdlcy5maW5kKChtKSA9PiBtLnR5cGUgPT09ICd1c2VyJylcblxuICAgIGlmIChmaXJzdFVzZXJNZXNzYWdlICYmIGZpcnN0VXNlck1lc3NhZ2UuY29udGVudC5sZW5ndGggPiAxMCkge1xuICAgICAgY29uc3QgY29udGVudCA9IGZpcnN0VXNlck1lc3NhZ2UuY29udGVudC50cmltKClcbiAgICAgIGNvbnN0IGZpcnN0U2VudGVuY2UgPSBjb250ZW50LnNwbGl0KC9bLiE/XS8pWzBdXG4gICAgICByZXR1cm4gZmlyc3RTZW50ZW5jZS5sZW5ndGggPiA1MFxuICAgICAgICA/IGNvbnRlbnQuc3Vic3RyaW5nKDAsIDQ3KSArICcuLi4nXG4gICAgICAgIDogZmlyc3RTZW50ZW5jZVxuICAgIH1cblxuICAgIHJldHVybiBgQ2xhdWRlIENvZGUgU2Vzc2lvbiAke25ldyBEYXRlKCkudG9Mb2NhbGVEYXRlU3RyaW5nKCl9YFxuICB9XG5cbiAgLyoqXG4gICAqIFBhcnNlIHNlc3Npb24gZnJvbSByYXcgSlNPTiBzdHJpbmdcbiAgICovXG4gIHBhcnNlRnJvbUpzb25TdHJpbmcoanNvbkRhdGE6IHN0cmluZyk6IFBhcnNlZFNlc3Npb24ge1xuICAgIGNvbnN0IGxpbmVzID0ganNvbkRhdGEuc3BsaXQoJ1xcbicpLmZpbHRlcigobGluZSkgPT4gbGluZS50cmltKCkpXG4gICAgY29uc3QgbWVzc2FnZXM6IENsYXVkZU1lc3NhZ2VbXSA9IFtdXG5cbiAgICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBKU09OLnBhcnNlKGxpbmUpIGFzIENsYXVkZU1lc3NhZ2VcbiAgICAgICAgbWVzc2FnZXMucHVzaChtZXNzYWdlKVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdGYWlsZWQgdG8gcGFyc2UgSlNPTiBsaW5lOicsIGxpbmUuc3Vic3RyaW5nKDAsIDEwMCkpXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucGFyc2VTZXNzaW9uKG1lc3NhZ2VzKVxuICB9XG59XG5cbi8qKlxuICogRGVmYXVsdCBwYXJzZXIgaW5zdGFuY2VcbiAqL1xuZXhwb3J0IGNvbnN0IGRlZmF1bHRQYXJzZXIgPSBuZXcgQ2xhdWRlTWV0YWRhdGFQYXJzZXIoKVxuXG4vKipcbiAqIENvbnZlbmllbmNlIGZ1bmN0aW9uIGZvciBwYXJzaW5nIHNlc3Npb25zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUNsYXVkZVNlc3Npb24obWVzc2FnZXM6IENsYXVkZU1lc3NhZ2VbXSk6IFBhcnNlZFNlc3Npb24ge1xuICByZXR1cm4gZGVmYXVsdFBhcnNlci5wYXJzZVNlc3Npb24obWVzc2FnZXMpXG59XG5cbi8qKlxuICogUGFyc2UgZnJvbSBKU09OIHN0cmluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VDbGF1ZGVTZXNzaW9uRnJvbUpzb24oanNvbkRhdGE6IHN0cmluZyk6IFBhcnNlZFNlc3Npb24ge1xuICByZXR1cm4gZGVmYXVsdFBhcnNlci5wYXJzZUZyb21Kc29uU3RyaW5nKGpzb25EYXRhKVxufVxuIl0sIm5hbWVzIjpbIkNsYXVkZU1ldGFkYXRhUGFyc2VyIiwicGFyc2VTZXNzaW9uIiwibWVzc2FnZXMiLCJzeXN0ZW1NZXNzYWdlIiwiZmluZCIsIm0iLCJ0eXBlIiwicmVzdWx0TWVzc2FnZSIsImNvbnZlcnNhdGlvbk1lc3NhZ2VzIiwiZmlsdGVyIiwiRXJyb3IiLCJzZXNzaW9uSWQiLCJzZXNzaW9uX2lkIiwicGFyc2VkTWVzc2FnZXMiLCJwYXJzZU1lc3NhZ2VzIiwidG9vbFVzYWdlIiwiYW5hbHl6ZVRvb2xVc2FnZSIsInBlcm1pc3Npb25fZGVuaWFscyIsIm1hcCIsImRlbmlhbCIsInRvb2xOYW1lIiwidG9vbF9uYW1lIiwidG9vbFVzZUlkIiwidG9vbF91c2VfaWQiLCJ0b29sSW5wdXQiLCJ0b29sX2lucHV0IiwiY29udmVyc2F0aW9uIiwiYW5hbHl6ZUNvbnZlcnNhdGlvbiIsInRpdGxlIiwiZ2VuZXJhdGVUaXRsZSIsImR1cmF0aW9uIiwidG90YWxNcyIsImR1cmF0aW9uX21zIiwiYXBpTXMiLCJkdXJhdGlvbl9hcGlfbXMiLCJzdGFydFRpbWUiLCJEYXRlIiwidG9JU09TdHJpbmciLCJlbmRUaW1lIiwicGVyZm9ybWFuY2UiLCJ0b3RhbENvc3QiLCJ0b3RhbF9jb3N0X3VzZCIsImlucHV0VG9rZW5zIiwidXNhZ2UiLCJpbnB1dF90b2tlbnMiLCJvdXRwdXRUb2tlbnMiLCJvdXRwdXRfdG9rZW5zIiwidG90YWxUb2tlbnMiLCJjb3N0UGVyVG9rZW4iLCJjYWxjdWxhdGVDb3N0UGVyVG9rZW4iLCJ0dXJuc0NvdW50IiwibnVtX3R1cm5zIiwiaXNFcnJvciIsImlzX2Vycm9yIiwiZW52aXJvbm1lbnQiLCJtb2RlbCIsImN3ZCIsImFwaUtleVNvdXJjZSIsInBlcm1pc3Npb25Nb2RlIiwib3V0cHV0U3R5bGUiLCJvdXRwdXRfc3R5bGUiLCJlbmFibGVkVG9vbHMiLCJ0b29scyIsIm1jcFNlcnZlcnMiLCJtY3Bfc2VydmVycyIsInNsYXNoQ29tbWFuZHMiLCJzbGFzaF9jb21tYW5kcyIsIm1zZyIsImJhc2VNZXNzYWdlIiwidXVpZCIsInRpbWVzdGFtcCIsImNvbnRlbnQiLCJleHRyYWN0VGV4dENvbnRlbnQiLCJtZXNzYWdlIiwibWV0YWRhdGEiLCJwYXJlbnRfdG9vbF91c2VfaWQiLCJyYXdfY29udGVudCIsInRvb2xDYWxscyIsImV4dHJhY3RUb29sQ2FsbHMiLCJsZW5ndGgiLCJjIiwidGV4dCIsImpvaW4iLCJ0cmltIiwiaWQiLCJuYW1lIiwiaW5wdXQiLCJzdWNjZXNzIiwiZGVuaWFscyIsImFsbFRvb2xDYWxscyIsImZsYXRNYXAiLCJ0b29sRnJlcXVlbmN5IiwiZm9yRWFjaCIsImNhbGwiLCJzdWNjZXNzZnVsQ2FsbHMiLCJzdWNjZXNzUmF0ZSIsInBlcm1pc3Npb25EZW5pYWxzIiwidXNlck1lc3NhZ2VzIiwiYXNzaXN0YW50TWVzc2FnZXMiLCJ0b3RhbExlbmd0aCIsInJlZHVjZSIsInN1bSIsImF2ZXJhZ2VNZXNzYWdlTGVuZ3RoIiwiY29kZUJsb2NrcyIsImV4dHJhY3RDb2RlQmxvY2tzIiwidG9waWNzIiwiZXh0cmFjdFRvcGljcyIsIm1lc3NhZ2VDb3VudCIsImNvZGVCbG9ja1JlZ2V4IiwibWF0Y2giLCJleGVjIiwibGFuZ3VhZ2UiLCJjb2RlIiwibGluZUNvdW50Iiwic3BsaXQiLCJwdXNoIiwiY29udGV4dCIsInN1YnN0cmluZyIsIk1hdGgiLCJtYXgiLCJpbmRleCIsInRvTG93ZXJDYXNlIiwia2V5d29yZHMiLCJrZXl3b3JkIiwiaW5jbHVkZXMiLCJmaXJzdFVzZXJNZXNzYWdlIiwiZmlyc3RTZW50ZW5jZSIsInRvTG9jYWxlRGF0ZVN0cmluZyIsInBhcnNlRnJvbUpzb25TdHJpbmciLCJqc29uRGF0YSIsImxpbmVzIiwibGluZSIsIkpTT04iLCJwYXJzZSIsImVycm9yIiwiY29uc29sZSIsIndhcm4iLCJkZWZhdWx0UGFyc2VyIiwicGFyc2VDbGF1ZGVTZXNzaW9uIiwicGFyc2VDbGF1ZGVTZXNzaW9uRnJvbUpzb24iXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/capture/metadata-parser.ts\n");

/***/ }),

/***/ "(rsc)/./lib/capture/tool-tracker.ts":
/*!*************************************!*\
  !*** ./lib/capture/tool-tracker.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ToolCallTracker: () => (/* binding */ ToolCallTracker),\n/* harmony export */   defaultToolTracker: () => (/* binding */ defaultToolTracker)\n/* harmony export */ });\n/**\n * Tool Call Tracker\n *\n * Enhanced tracking and analysis of Claude Code tool calls and function executions,\n * including matching tool calls with their results and detailed execution analysis.\n */ /**\n * Enhanced tool call tracker\n */ class ToolCallTracker {\n    /**\n   * Process a message and extract/track tool calls\n   */ processMessage(message) {\n        const newCompletedCalls = [];\n        if (message.type === 'assistant') {\n            // Track new tool calls\n            const toolCalls = this.extractToolCalls(message);\n            for (const call of toolCalls){\n                if (call.id) {\n                    this.pendingToolCalls.set(call.id, call);\n                }\n            }\n        } else if (message.type === 'user') {\n            // Match tool results with pending calls\n            const results = this.extractToolResults(message);\n            for (const result of results){\n                const pendingCall = this.pendingToolCalls.get(result.tool_use_id);\n                if (pendingCall) {\n                    const completedCall = this.completeToolCall(pendingCall, result);\n                    if (completedCall) {\n                        this.completedToolCalls.push(completedCall);\n                        newCompletedCalls.push(completedCall);\n                        this.pendingToolCalls.delete(result.tool_use_id);\n                    }\n                }\n            }\n        }\n        return newCompletedCalls;\n    }\n    /**\n   * Extract tool calls from assistant messages\n   */ extractToolCalls(message) {\n        return message.message.content.filter((c)=>c.type === 'tool_use').map((c)=>({\n                id: c.id,\n                name: c.name,\n                input: c.input || {},\n                timestamp: new Date().toISOString(),\n                messageUuid: message.uuid,\n                sessionId: message.session_id,\n                parentToolUseId: message.parent_tool_use_id || undefined,\n                category: this.categorizeToolCall(c.name),\n                complexity: this.assessComplexity(c.name, c.input || {}),\n                impact: this.assessImpact(c.name, c.input || {})\n            }));\n    }\n    /**\n   * Extract tool results from user messages\n   */ extractToolResults(message) {\n        return message.message.content.filter((c)=>c.type === 'tool_result').map((c)=>({\n                tool_use_id: c.tool_use_id,\n                content: c.content,\n                error: c.is_error || false\n            }));\n    }\n    /**\n   * Complete a tool call by matching it with its result\n   */ completeToolCall(pendingCall, result) {\n        if (!pendingCall.id || !pendingCall.name || !pendingCall.input) {\n            return null;\n        }\n        const completed = {\n            ...pendingCall,\n            output: result.content,\n            success: !result.error,\n            error: result.error ? this.extractErrorMessage(result.content) : undefined\n        };\n        // Add specific analysis based on tool type\n        this.enhanceWithSpecificAnalysis(completed);\n        return completed;\n    }\n    /**\n   * Enhance tool call with specific analysis based on tool type\n   */ enhanceWithSpecificAnalysis(toolCall) {\n        switch(toolCall.name.toLowerCase()){\n            case 'read':\n                toolCall.fileOperations = this.analyzeFileRead(toolCall);\n                break;\n            case 'write':\n                toolCall.fileOperations = this.analyzeFileWrite(toolCall);\n                break;\n            case 'edit':\n                toolCall.fileOperations = this.analyzeFileEdit(toolCall);\n                break;\n            case 'bash':\n                toolCall.bashCommands = this.analyzeBashCommand(toolCall);\n                break;\n            case 'grep':\n            case 'glob':\n                toolCall.searchQueries = this.analyzeSearchCommand(toolCall);\n                break;\n        }\n    }\n    /**\n   * Analyze file read operations\n   */ analyzeFileRead(toolCall) {\n        const filePath = toolCall.input.file_path || toolCall.input.path || 'unknown';\n        return [\n            {\n                type: 'read',\n                filePath,\n                success: toolCall.success,\n                error: toolCall.error,\n                changes: toolCall.output ? {\n                    linesAdded: 0,\n                    linesRemoved: 0,\n                    size: typeof toolCall.output === 'string' ? toolCall.output.length : 0\n                } : undefined\n            }\n        ];\n    }\n    /**\n   * Analyze file write operations\n   */ analyzeFileWrite(toolCall) {\n        const filePath = toolCall.input.file_path || toolCall.input.path || 'unknown';\n        const content = toolCall.input.content || '';\n        return [\n            {\n                type: 'write',\n                filePath,\n                content,\n                success: toolCall.success,\n                error: toolCall.error,\n                changes: {\n                    linesAdded: content.split('\\n').length,\n                    linesRemoved: 0,\n                    size: content.length\n                }\n            }\n        ];\n    }\n    /**\n   * Analyze file edit operations\n   */ analyzeFileEdit(toolCall) {\n        const filePath = toolCall.input.file_path || toolCall.input.path || 'unknown';\n        const oldString = toolCall.input.old_string || '';\n        const newString = toolCall.input.new_string || '';\n        const oldLines = oldString.split('\\n').length;\n        const newLines = newString.split('\\n').length;\n        return [\n            {\n                type: 'edit',\n                filePath,\n                success: toolCall.success,\n                error: toolCall.error,\n                changes: {\n                    linesAdded: Math.max(0, newLines - oldLines),\n                    linesRemoved: Math.max(0, oldLines - newLines),\n                    size: newString.length - oldString.length\n                }\n            }\n        ];\n    }\n    /**\n   * Analyze bash command execution\n   */ analyzeBashCommand(toolCall) {\n        const command = toolCall.input.command || 'unknown';\n        const output = typeof toolCall.output === 'string' ? toolCall.output : JSON.stringify(toolCall.output || '');\n        return [\n            {\n                command,\n                output,\n                success: toolCall.success,\n                error: toolCall.error,\n                exitCode: toolCall.success ? 0 : 1\n            }\n        ];\n    }\n    /**\n   * Analyze search commands\n   */ analyzeSearchCommand(toolCall) {\n        const pattern = toolCall.input.pattern || toolCall.input.query || 'unknown';\n        const type = toolCall.name === 'grep' ? 'regex' : 'glob';\n        let resultsCount = 0;\n        let files = [];\n        if (Array.isArray(toolCall.output)) {\n            resultsCount = toolCall.output.length;\n            files = toolCall.output.map((item)=>typeof item === 'string' ? item : item.file || 'unknown');\n        }\n        return [\n            {\n                pattern,\n                type,\n                resultsCount,\n                files\n            }\n        ];\n    }\n    /**\n   * Categorize tool calls\n   */ categorizeToolCall(toolName) {\n        const name = toolName.toLowerCase();\n        if ([\n            'read',\n            'write',\n            'edit',\n            'glob'\n        ].includes(name)) {\n            return 'file_system';\n        } else if ([\n            'bash'\n        ].includes(name)) {\n            return 'code_execution';\n        } else if ([\n            'grep',\n            'search'\n        ].includes(name)) {\n            return 'search';\n        } else if ([\n            'webfetch',\n            'websearch'\n        ].includes(name)) {\n            return 'web_request';\n        } else if (name.startsWith('mcp__')) {\n            return 'mcp_tool';\n        } else {\n            return 'unknown';\n        }\n    }\n    /**\n   * Assess complexity of tool call\n   */ assessComplexity(toolName, input) {\n        const inputSize = JSON.stringify(input).length;\n        if (inputSize < 100) return 'simple';\n        if (inputSize < 1000) return 'medium';\n        return 'complex';\n    }\n    /**\n   * Assess impact of tool call\n   */ assessImpact(toolName, input) {\n        const name = toolName.toLowerCase();\n        if ([\n            'read',\n            'grep',\n            'glob'\n        ].includes(name)) {\n            return 'low' // Read-only operations\n            ;\n        } else if ([\n            'edit'\n        ].includes(name)) {\n            return 'medium' // Modifications\n            ;\n        } else if ([\n            'write',\n            'bash'\n        ].includes(name)) {\n            return 'high' // Creation or execution\n            ;\n        }\n        return 'medium';\n    }\n    /**\n   * Extract error message from tool result\n   */ extractErrorMessage(content) {\n        if (typeof content === 'string') {\n            return content;\n        } else if (content && typeof content === 'object') {\n            return content.error || content.message || JSON.stringify(content);\n        }\n        return 'Unknown error';\n    }\n    /**\n   * Get all completed tool calls\n   */ getCompletedToolCalls() {\n        return [\n            ...this.completedToolCalls\n        ];\n    }\n    /**\n   * Get tool usage statistics\n   */ getStatistics() {\n        const total = this.completedToolCalls.length;\n        const successful = this.completedToolCalls.filter((c)=>c.success).length;\n        const categoryBreakdown = this.completedToolCalls.reduce((acc, call)=>{\n            acc[call.category] = (acc[call.category] || 0) + 1;\n            return acc;\n        }, {});\n        const complexityBreakdown = this.completedToolCalls.reduce((acc, call)=>{\n            acc[call.complexity] = (acc[call.complexity] || 0) + 1;\n            return acc;\n        }, {});\n        const toolFrequency = this.completedToolCalls.reduce((acc, call)=>{\n            acc[call.name] = (acc[call.name] || 0) + 1;\n            return acc;\n        }, {});\n        const topTools = Object.entries(toolFrequency).sort(([, a], [, b])=>b - a).slice(0, 10).map(([name, count])=>({\n                name,\n                count\n            }));\n        return {\n            totalCalls: total,\n            successRate: total > 0 ? successful / total : 1,\n            categoryBreakdown,\n            complexityBreakdown,\n            topTools\n        };\n    }\n    /**\n   * Reset tracker for new session\n   */ reset() {\n        this.pendingToolCalls.clear();\n        this.completedToolCalls = [];\n    }\n    constructor(){\n        this.pendingToolCalls = new Map();\n        this.completedToolCalls = [];\n    }\n}\n/**\n * Default tracker instance\n */ const defaultToolTracker = new ToolCallTracker();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE9BQU8wRTtRQUNULEdBQ0EsQ0FBQztRQUdILE1BQU1HLFdBQVdDLE9BQU9DLE9BQU8sQ0FBQ0gsZUFDN0JJLElBQUksQ0FBQyxDQUFDLEdBQUdDLEVBQUUsRUFBRSxHQUFHQyxFQUFFLEdBQUtBLElBQUlELEdBQzNCRSxLQUFLLENBQUMsR0FBRyxJQUNUcEYsR0FBRyxDQUFDLENBQUMsQ0FBQ0MsTUFBTW9GLE1BQU0sR0FBTTtnQkFBRXBGO2dCQUFNb0Y7WUFBTTtRQUV6QyxPQUFPO1lBQ0xDLFlBQVlmO1lBQ1pnQixhQUFhaEIsUUFBUSxJQUFJQyxhQUFhRCxRQUFRO1lBQzlDRTtZQUNBRztZQUNBRTtRQUNGO0lBQ0Y7SUFFQTs7R0FFQyxHQUNEVSxRQUFRO1FBQ04sSUFBSSxDQUFDeEcsZ0JBQWdCLENBQUN5RyxLQUFLO1FBQzNCLElBQUksQ0FBQy9GLGtCQUFrQixHQUFHLEVBQUU7SUFDOUI7O2FBNVhRVixtQkFBMkQsSUFBSTBHO2FBQy9EaEcscUJBQXlDLEVBQUU7O0FBNFhyRDtBQUVBOztDQUVDLEdBQ00sTUFBTWlHLHFCQUFxQixJQUFJcEgsa0JBQWlCIiwic291cmNlcyI6WyJDOlxccHJvamVjdHNcXGFycmFraXNcXGxpYlxcY2FwdHVyZVxcdG9vbC10cmFja2VyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVG9vbCBDYWxsIFRyYWNrZXJcbiAqXG4gKiBFbmhhbmNlZCB0cmFja2luZyBhbmQgYW5hbHlzaXMgb2YgQ2xhdWRlIENvZGUgdG9vbCBjYWxscyBhbmQgZnVuY3Rpb24gZXhlY3V0aW9ucyxcbiAqIGluY2x1ZGluZyBtYXRjaGluZyB0b29sIGNhbGxzIHdpdGggdGhlaXIgcmVzdWx0cyBhbmQgZGV0YWlsZWQgZXhlY3V0aW9uIGFuYWx5c2lzLlxuICovXG5cbmltcG9ydCB0eXBlIHtcbiAgQ2xhdWRlTWVzc2FnZSxcbiAgQ2xhdWRlQXNzaXN0YW50TWVzc2FnZSxcbiAgQ2xhdWRlVXNlck1lc3NhZ2UsXG59IGZyb20gJy4vY2xhdWRlLWludGVyY2VwdG9yJ1xuXG5leHBvcnQgaW50ZXJmYWNlIEVuaGFuY2VkVG9vbENhbGwge1xuICAvLyBCYXNpYyBpbmZvXG4gIGlkOiBzdHJpbmdcbiAgbmFtZTogc3RyaW5nXG4gIHRpbWVzdGFtcDogc3RyaW5nXG5cbiAgLy8gRXhlY3V0aW9uIGRldGFpbHNcbiAgaW5wdXQ6IFJlY29yZDxzdHJpbmcsIGFueT5cbiAgb3V0cHV0PzogYW55XG4gIGVycm9yPzogc3RyaW5nXG4gIGR1cmF0aW9uPzogbnVtYmVyXG4gIHN1Y2Nlc3M6IGJvb2xlYW5cblxuICAvLyBDb250ZXh0XG4gIG1lc3NhZ2VVdWlkOiBzdHJpbmdcbiAgc2Vzc2lvbklkOiBzdHJpbmdcbiAgcGFyZW50VG9vbFVzZUlkPzogc3RyaW5nXG5cbiAgLy8gQW5hbHlzaXNcbiAgY2F0ZWdvcnk6IFRvb2xDYXRlZ29yeVxuICBjb21wbGV4aXR5OiAnc2ltcGxlJyB8ICdtZWRpdW0nIHwgJ2NvbXBsZXgnXG4gIGltcGFjdDogJ2xvdycgfCAnbWVkaXVtJyB8ICdoaWdoJ1xuXG4gIC8vIFNwZWNpZmljIHRvb2wgZGF0YVxuICBmaWxlT3BlcmF0aW9ucz86IEZpbGVPcGVyYXRpb25bXVxuICBiYXNoQ29tbWFuZHM/OiBCYXNoQ29tbWFuZFtdXG4gIHNlYXJjaFF1ZXJpZXM/OiBTZWFyY2hRdWVyeVtdXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmlsZU9wZXJhdGlvbiB7XG4gIHR5cGU6ICdyZWFkJyB8ICd3cml0ZScgfCAnZWRpdCcgfCAnY3JlYXRlJyB8ICdkZWxldGUnXG4gIGZpbGVQYXRoOiBzdHJpbmdcbiAgY29udGVudD86IHN0cmluZ1xuICBjaGFuZ2VzPzoge1xuICAgIGxpbmVzQWRkZWQ6IG51bWJlclxuICAgIGxpbmVzUmVtb3ZlZDogbnVtYmVyXG4gICAgc2l6ZTogbnVtYmVyXG4gIH1cbiAgc3VjY2VzczogYm9vbGVhblxuICBlcnJvcj86IHN0cmluZ1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJhc2hDb21tYW5kIHtcbiAgY29tbWFuZDogc3RyaW5nXG4gIG91dHB1dDogc3RyaW5nXG4gIGV4aXRDb2RlPzogbnVtYmVyXG4gIGR1cmF0aW9uPzogbnVtYmVyXG4gIHN1Y2Nlc3M6IGJvb2xlYW5cbiAgZXJyb3I/OiBzdHJpbmdcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTZWFyY2hRdWVyeSB7XG4gIHBhdHRlcm46IHN0cmluZ1xuICB0eXBlOiAndGV4dCcgfCAncmVnZXgnIHwgJ2dsb2InXG4gIHJlc3VsdHNDb3VudDogbnVtYmVyXG4gIGZpbGVzOiBzdHJpbmdbXVxufVxuXG5leHBvcnQgdHlwZSBUb29sQ2F0ZWdvcnkgPVxuICB8ICdmaWxlX3N5c3RlbSdcbiAgfCAnY29kZV9leGVjdXRpb24nXG4gIHwgJ3NlYXJjaCdcbiAgfCAnd2ViX3JlcXVlc3QnXG4gIHwgJ2RhdGFiYXNlJ1xuICB8ICdtY3BfdG9vbCdcbiAgfCAnc3lzdGVtJ1xuICB8ICd1bmtub3duJ1xuXG4vKipcbiAqIEVuaGFuY2VkIHRvb2wgY2FsbCB0cmFja2VyXG4gKi9cbmV4cG9ydCBjbGFzcyBUb29sQ2FsbFRyYWNrZXIge1xuICBwcml2YXRlIHBlbmRpbmdUb29sQ2FsbHM6IE1hcDxzdHJpbmcsIFBhcnRpYWw8RW5oYW5jZWRUb29sQ2FsbD4+ID0gbmV3IE1hcCgpXG4gIHByaXZhdGUgY29tcGxldGVkVG9vbENhbGxzOiBFbmhhbmNlZFRvb2xDYWxsW10gPSBbXVxuXG4gIC8qKlxuICAgKiBQcm9jZXNzIGEgbWVzc2FnZSBhbmQgZXh0cmFjdC90cmFjayB0b29sIGNhbGxzXG4gICAqL1xuICBwcm9jZXNzTWVzc2FnZShtZXNzYWdlOiBDbGF1ZGVNZXNzYWdlKTogRW5oYW5jZWRUb29sQ2FsbFtdIHtcbiAgICBjb25zdCBuZXdDb21wbGV0ZWRDYWxsczogRW5oYW5jZWRUb29sQ2FsbFtdID0gW11cblxuICAgIGlmIChtZXNzYWdlLnR5cGUgPT09ICdhc3Npc3RhbnQnKSB7XG4gICAgICAvLyBUcmFjayBuZXcgdG9vbCBjYWxsc1xuICAgICAgY29uc3QgdG9vbENhbGxzID0gdGhpcy5leHRyYWN0VG9vbENhbGxzKG1lc3NhZ2UgYXMgQ2xhdWRlQXNzaXN0YW50TWVzc2FnZSlcbiAgICAgIGZvciAoY29uc3QgY2FsbCBvZiB0b29sQ2FsbHMpIHtcbiAgICAgICAgaWYgKGNhbGwuaWQpIHtcbiAgICAgICAgICB0aGlzLnBlbmRpbmdUb29sQ2FsbHMuc2V0KGNhbGwuaWQsIGNhbGwpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKG1lc3NhZ2UudHlwZSA9PT0gJ3VzZXInKSB7XG4gICAgICAvLyBNYXRjaCB0b29sIHJlc3VsdHMgd2l0aCBwZW5kaW5nIGNhbGxzXG4gICAgICBjb25zdCByZXN1bHRzID0gdGhpcy5leHRyYWN0VG9vbFJlc3VsdHMobWVzc2FnZSBhcyBDbGF1ZGVVc2VyTWVzc2FnZSlcbiAgICAgIGZvciAoY29uc3QgcmVzdWx0IG9mIHJlc3VsdHMpIHtcbiAgICAgICAgY29uc3QgcGVuZGluZ0NhbGwgPSB0aGlzLnBlbmRpbmdUb29sQ2FsbHMuZ2V0KHJlc3VsdC50b29sX3VzZV9pZClcbiAgICAgICAgaWYgKHBlbmRpbmdDYWxsKSB7XG4gICAgICAgICAgY29uc3QgY29tcGxldGVkQ2FsbCA9IHRoaXMuY29tcGxldGVUb29sQ2FsbChwZW5kaW5nQ2FsbCwgcmVzdWx0KVxuICAgICAgICAgIGlmIChjb21wbGV0ZWRDYWxsKSB7XG4gICAgICAgICAgICB0aGlzLmNvbXBsZXRlZFRvb2xDYWxscy5wdXNoKGNvbXBsZXRlZENhbGwpXG4gICAgICAgICAgICBuZXdDb21wbGV0ZWRDYWxscy5wdXNoKGNvbXBsZXRlZENhbGwpXG4gICAgICAgICAgICB0aGlzLnBlbmRpbmdUb29sQ2FsbHMuZGVsZXRlKHJlc3VsdC50b29sX3VzZV9pZClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbmV3Q29tcGxldGVkQ2FsbHNcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHRyYWN0IHRvb2wgY2FsbHMgZnJvbSBhc3Npc3RhbnQgbWVzc2FnZXNcbiAgICovXG4gIHByaXZhdGUgZXh0cmFjdFRvb2xDYWxscyhcbiAgICBtZXNzYWdlOiBDbGF1ZGVBc3Npc3RhbnRNZXNzYWdlXG4gICk6IFBhcnRpYWw8RW5oYW5jZWRUb29sQ2FsbD5bXSB7XG4gICAgcmV0dXJuIG1lc3NhZ2UubWVzc2FnZS5jb250ZW50XG4gICAgICAuZmlsdGVyKChjKSA9PiBjLnR5cGUgPT09ICd0b29sX3VzZScpXG4gICAgICAubWFwKChjKSA9PiAoe1xuICAgICAgICBpZDogYy5pZCEsXG4gICAgICAgIG5hbWU6IGMubmFtZSEsXG4gICAgICAgIGlucHV0OiBjLmlucHV0IHx8IHt9LFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgbWVzc2FnZVV1aWQ6IG1lc3NhZ2UudXVpZCxcbiAgICAgICAgc2Vzc2lvbklkOiBtZXNzYWdlLnNlc3Npb25faWQsXG4gICAgICAgIHBhcmVudFRvb2xVc2VJZDogbWVzc2FnZS5wYXJlbnRfdG9vbF91c2VfaWQgfHwgdW5kZWZpbmVkLFxuICAgICAgICBjYXRlZ29yeTogdGhpcy5jYXRlZ29yaXplVG9vbENhbGwoYy5uYW1lISksXG4gICAgICAgIGNvbXBsZXhpdHk6IHRoaXMuYXNzZXNzQ29tcGxleGl0eShjLm5hbWUhLCBjLmlucHV0IHx8IHt9KSxcbiAgICAgICAgaW1wYWN0OiB0aGlzLmFzc2Vzc0ltcGFjdChjLm5hbWUhLCBjLmlucHV0IHx8IHt9KSxcbiAgICAgIH0pKVxuICB9XG5cbiAgLyoqXG4gICAqIEV4dHJhY3QgdG9vbCByZXN1bHRzIGZyb20gdXNlciBtZXNzYWdlc1xuICAgKi9cbiAgcHJpdmF0ZSBleHRyYWN0VG9vbFJlc3VsdHMoXG4gICAgbWVzc2FnZTogQ2xhdWRlVXNlck1lc3NhZ2VcbiAgKTogQXJyYXk8eyB0b29sX3VzZV9pZDogc3RyaW5nOyBjb250ZW50OiBhbnk7IGVycm9yPzogYm9vbGVhbiB9PiB7XG4gICAgcmV0dXJuIG1lc3NhZ2UubWVzc2FnZS5jb250ZW50XG4gICAgICAuZmlsdGVyKChjKSA9PiBjLnR5cGUgPT09ICd0b29sX3Jlc3VsdCcpXG4gICAgICAubWFwKChjKSA9PiAoe1xuICAgICAgICB0b29sX3VzZV9pZDogYy50b29sX3VzZV9pZCEsXG4gICAgICAgIGNvbnRlbnQ6IGMuY29udGVudCxcbiAgICAgICAgZXJyb3I6IChjIGFzIGFueSkuaXNfZXJyb3IgfHwgZmFsc2UsXG4gICAgICB9KSlcbiAgfVxuXG4gIC8qKlxuICAgKiBDb21wbGV0ZSBhIHRvb2wgY2FsbCBieSBtYXRjaGluZyBpdCB3aXRoIGl0cyByZXN1bHRcbiAgICovXG4gIHByaXZhdGUgY29tcGxldGVUb29sQ2FsbChcbiAgICBwZW5kaW5nQ2FsbDogUGFydGlhbDxFbmhhbmNlZFRvb2xDYWxsPixcbiAgICByZXN1bHQ6IHsgdG9vbF91c2VfaWQ6IHN0cmluZzsgY29udGVudDogYW55OyBlcnJvcj86IGJvb2xlYW4gfVxuICApOiBFbmhhbmNlZFRvb2xDYWxsIHwgbnVsbCB7XG4gICAgaWYgKCFwZW5kaW5nQ2FsbC5pZCB8fCAhcGVuZGluZ0NhbGwubmFtZSB8fCAhcGVuZGluZ0NhbGwuaW5wdXQpIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuXG4gICAgY29uc3QgY29tcGxldGVkOiBFbmhhbmNlZFRvb2xDYWxsID0ge1xuICAgICAgLi4uKHBlbmRpbmdDYWxsIGFzIEVuaGFuY2VkVG9vbENhbGwpLFxuICAgICAgb3V0cHV0OiByZXN1bHQuY29udGVudCxcbiAgICAgIHN1Y2Nlc3M6ICFyZXN1bHQuZXJyb3IsXG4gICAgICBlcnJvcjogcmVzdWx0LmVycm9yXG4gICAgICAgID8gdGhpcy5leHRyYWN0RXJyb3JNZXNzYWdlKHJlc3VsdC5jb250ZW50KVxuICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICB9XG5cbiAgICAvLyBBZGQgc3BlY2lmaWMgYW5hbHlzaXMgYmFzZWQgb24gdG9vbCB0eXBlXG4gICAgdGhpcy5lbmhhbmNlV2l0aFNwZWNpZmljQW5hbHlzaXMoY29tcGxldGVkKVxuXG4gICAgcmV0dXJuIGNvbXBsZXRlZFxuICB9XG5cbiAgLyoqXG4gICAqIEVuaGFuY2UgdG9vbCBjYWxsIHdpdGggc3BlY2lmaWMgYW5hbHlzaXMgYmFzZWQgb24gdG9vbCB0eXBlXG4gICAqL1xuICBwcml2YXRlIGVuaGFuY2VXaXRoU3BlY2lmaWNBbmFseXNpcyh0b29sQ2FsbDogRW5oYW5jZWRUb29sQ2FsbCkge1xuICAgIHN3aXRjaCAodG9vbENhbGwubmFtZS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICBjYXNlICdyZWFkJzpcbiAgICAgICAgdG9vbENhbGwuZmlsZU9wZXJhdGlvbnMgPSB0aGlzLmFuYWx5emVGaWxlUmVhZCh0b29sQ2FsbClcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ3dyaXRlJzpcbiAgICAgICAgdG9vbENhbGwuZmlsZU9wZXJhdGlvbnMgPSB0aGlzLmFuYWx5emVGaWxlV3JpdGUodG9vbENhbGwpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdlZGl0JzpcbiAgICAgICAgdG9vbENhbGwuZmlsZU9wZXJhdGlvbnMgPSB0aGlzLmFuYWx5emVGaWxlRWRpdCh0b29sQ2FsbClcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2Jhc2gnOlxuICAgICAgICB0b29sQ2FsbC5iYXNoQ29tbWFuZHMgPSB0aGlzLmFuYWx5emVCYXNoQ29tbWFuZCh0b29sQ2FsbClcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2dyZXAnOlxuICAgICAgY2FzZSAnZ2xvYic6XG4gICAgICAgIHRvb2xDYWxsLnNlYXJjaFF1ZXJpZXMgPSB0aGlzLmFuYWx5emVTZWFyY2hDb21tYW5kKHRvb2xDYWxsKVxuICAgICAgICBicmVha1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBbmFseXplIGZpbGUgcmVhZCBvcGVyYXRpb25zXG4gICAqL1xuICBwcml2YXRlIGFuYWx5emVGaWxlUmVhZCh0b29sQ2FsbDogRW5oYW5jZWRUb29sQ2FsbCk6IEZpbGVPcGVyYXRpb25bXSB7XG4gICAgY29uc3QgZmlsZVBhdGggPVxuICAgICAgdG9vbENhbGwuaW5wdXQuZmlsZV9wYXRoIHx8IHRvb2xDYWxsLmlucHV0LnBhdGggfHwgJ3Vua25vd24nXG5cbiAgICByZXR1cm4gW1xuICAgICAge1xuICAgICAgICB0eXBlOiAncmVhZCcsXG4gICAgICAgIGZpbGVQYXRoLFxuICAgICAgICBzdWNjZXNzOiB0b29sQ2FsbC5zdWNjZXNzLFxuICAgICAgICBlcnJvcjogdG9vbENhbGwuZXJyb3IsXG4gICAgICAgIGNoYW5nZXM6IHRvb2xDYWxsLm91dHB1dFxuICAgICAgICAgID8ge1xuICAgICAgICAgICAgICBsaW5lc0FkZGVkOiAwLFxuICAgICAgICAgICAgICBsaW5lc1JlbW92ZWQ6IDAsXG4gICAgICAgICAgICAgIHNpemU6XG4gICAgICAgICAgICAgICAgdHlwZW9mIHRvb2xDYWxsLm91dHB1dCA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgICAgICAgID8gdG9vbENhbGwub3V0cHV0Lmxlbmd0aFxuICAgICAgICAgICAgICAgICAgOiAwLFxuICAgICAgICAgICAgfVxuICAgICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgfSxcbiAgICBdXG4gIH1cblxuICAvKipcbiAgICogQW5hbHl6ZSBmaWxlIHdyaXRlIG9wZXJhdGlvbnNcbiAgICovXG4gIHByaXZhdGUgYW5hbHl6ZUZpbGVXcml0ZSh0b29sQ2FsbDogRW5oYW5jZWRUb29sQ2FsbCk6IEZpbGVPcGVyYXRpb25bXSB7XG4gICAgY29uc3QgZmlsZVBhdGggPVxuICAgICAgdG9vbENhbGwuaW5wdXQuZmlsZV9wYXRoIHx8IHRvb2xDYWxsLmlucHV0LnBhdGggfHwgJ3Vua25vd24nXG4gICAgY29uc3QgY29udGVudCA9IHRvb2xDYWxsLmlucHV0LmNvbnRlbnQgfHwgJydcblxuICAgIHJldHVybiBbXG4gICAgICB7XG4gICAgICAgIHR5cGU6ICd3cml0ZScsXG4gICAgICAgIGZpbGVQYXRoLFxuICAgICAgICBjb250ZW50LFxuICAgICAgICBzdWNjZXNzOiB0b29sQ2FsbC5zdWNjZXNzLFxuICAgICAgICBlcnJvcjogdG9vbENhbGwuZXJyb3IsXG4gICAgICAgIGNoYW5nZXM6IHtcbiAgICAgICAgICBsaW5lc0FkZGVkOiBjb250ZW50LnNwbGl0KCdcXG4nKS5sZW5ndGgsXG4gICAgICAgICAgbGluZXNSZW1vdmVkOiAwLFxuICAgICAgICAgIHNpemU6IGNvbnRlbnQubGVuZ3RoLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICBdXG4gIH1cblxuICAvKipcbiAgICogQW5hbHl6ZSBmaWxlIGVkaXQgb3BlcmF0aW9uc1xuICAgKi9cbiAgcHJpdmF0ZSBhbmFseXplRmlsZUVkaXQodG9vbENhbGw6IEVuaGFuY2VkVG9vbENhbGwpOiBGaWxlT3BlcmF0aW9uW10ge1xuICAgIGNvbnN0IGZpbGVQYXRoID1cbiAgICAgIHRvb2xDYWxsLmlucHV0LmZpbGVfcGF0aCB8fCB0b29sQ2FsbC5pbnB1dC5wYXRoIHx8ICd1bmtub3duJ1xuICAgIGNvbnN0IG9sZFN0cmluZyA9IHRvb2xDYWxsLmlucHV0Lm9sZF9zdHJpbmcgfHwgJydcbiAgICBjb25zdCBuZXdTdHJpbmcgPSB0b29sQ2FsbC5pbnB1dC5uZXdfc3RyaW5nIHx8ICcnXG5cbiAgICBjb25zdCBvbGRMaW5lcyA9IG9sZFN0cmluZy5zcGxpdCgnXFxuJykubGVuZ3RoXG4gICAgY29uc3QgbmV3TGluZXMgPSBuZXdTdHJpbmcuc3BsaXQoJ1xcbicpLmxlbmd0aFxuXG4gICAgcmV0dXJuIFtcbiAgICAgIHtcbiAgICAgICAgdHlwZTogJ2VkaXQnLFxuICAgICAgICBmaWxlUGF0aCxcbiAgICAgICAgc3VjY2VzczogdG9vbENhbGwuc3VjY2VzcyxcbiAgICAgICAgZXJyb3I6IHRvb2xDYWxsLmVycm9yLFxuICAgICAgICBjaGFuZ2VzOiB7XG4gICAgICAgICAgbGluZXNBZGRlZDogTWF0aC5tYXgoMCwgbmV3TGluZXMgLSBvbGRMaW5lcyksXG4gICAgICAgICAgbGluZXNSZW1vdmVkOiBNYXRoLm1heCgwLCBvbGRMaW5lcyAtIG5ld0xpbmVzKSxcbiAgICAgICAgICBzaXplOiBuZXdTdHJpbmcubGVuZ3RoIC0gb2xkU3RyaW5nLmxlbmd0aCxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgXVxuICB9XG5cbiAgLyoqXG4gICAqIEFuYWx5emUgYmFzaCBjb21tYW5kIGV4ZWN1dGlvblxuICAgKi9cbiAgcHJpdmF0ZSBhbmFseXplQmFzaENvbW1hbmQodG9vbENhbGw6IEVuaGFuY2VkVG9vbENhbGwpOiBCYXNoQ29tbWFuZFtdIHtcbiAgICBjb25zdCBjb21tYW5kID0gdG9vbENhbGwuaW5wdXQuY29tbWFuZCB8fCAndW5rbm93bidcbiAgICBjb25zdCBvdXRwdXQgPVxuICAgICAgdHlwZW9mIHRvb2xDYWxsLm91dHB1dCA9PT0gJ3N0cmluZydcbiAgICAgICAgPyB0b29sQ2FsbC5vdXRwdXRcbiAgICAgICAgOiBKU09OLnN0cmluZ2lmeSh0b29sQ2FsbC5vdXRwdXQgfHwgJycpXG5cbiAgICByZXR1cm4gW1xuICAgICAge1xuICAgICAgICBjb21tYW5kLFxuICAgICAgICBvdXRwdXQsXG4gICAgICAgIHN1Y2Nlc3M6IHRvb2xDYWxsLnN1Y2Nlc3MsXG4gICAgICAgIGVycm9yOiB0b29sQ2FsbC5lcnJvcixcbiAgICAgICAgZXhpdENvZGU6IHRvb2xDYWxsLnN1Y2Nlc3MgPyAwIDogMSwgLy8gU2ltcGxpZmllZCBhc3N1bXB0aW9uXG4gICAgICB9LFxuICAgIF1cbiAgfVxuXG4gIC8qKlxuICAgKiBBbmFseXplIHNlYXJjaCBjb21tYW5kc1xuICAgKi9cbiAgcHJpdmF0ZSBhbmFseXplU2VhcmNoQ29tbWFuZCh0b29sQ2FsbDogRW5oYW5jZWRUb29sQ2FsbCk6IFNlYXJjaFF1ZXJ5W10ge1xuICAgIGNvbnN0IHBhdHRlcm4gPSB0b29sQ2FsbC5pbnB1dC5wYXR0ZXJuIHx8IHRvb2xDYWxsLmlucHV0LnF1ZXJ5IHx8ICd1bmtub3duJ1xuICAgIGNvbnN0IHR5cGUgPSB0b29sQ2FsbC5uYW1lID09PSAnZ3JlcCcgPyAncmVnZXgnIDogJ2dsb2InXG5cbiAgICBsZXQgcmVzdWx0c0NvdW50ID0gMFxuICAgIGxldCBmaWxlczogc3RyaW5nW10gPSBbXVxuXG4gICAgaWYgKEFycmF5LmlzQXJyYXkodG9vbENhbGwub3V0cHV0KSkge1xuICAgICAgcmVzdWx0c0NvdW50ID0gdG9vbENhbGwub3V0cHV0Lmxlbmd0aFxuICAgICAgZmlsZXMgPSB0b29sQ2FsbC5vdXRwdXQubWFwKChpdGVtKSA9PlxuICAgICAgICB0eXBlb2YgaXRlbSA9PT0gJ3N0cmluZycgPyBpdGVtIDogaXRlbS5maWxlIHx8ICd1bmtub3duJ1xuICAgICAgKVxuICAgIH1cblxuICAgIHJldHVybiBbXG4gICAgICB7XG4gICAgICAgIHBhdHRlcm4sXG4gICAgICAgIHR5cGUsXG4gICAgICAgIHJlc3VsdHNDb3VudCxcbiAgICAgICAgZmlsZXMsXG4gICAgICB9LFxuICAgIF1cbiAgfVxuXG4gIC8qKlxuICAgKiBDYXRlZ29yaXplIHRvb2wgY2FsbHNcbiAgICovXG4gIHByaXZhdGUgY2F0ZWdvcml6ZVRvb2xDYWxsKHRvb2xOYW1lOiBzdHJpbmcpOiBUb29sQ2F0ZWdvcnkge1xuICAgIGNvbnN0IG5hbWUgPSB0b29sTmFtZS50b0xvd2VyQ2FzZSgpXG5cbiAgICBpZiAoWydyZWFkJywgJ3dyaXRlJywgJ2VkaXQnLCAnZ2xvYiddLmluY2x1ZGVzKG5hbWUpKSB7XG4gICAgICByZXR1cm4gJ2ZpbGVfc3lzdGVtJ1xuICAgIH0gZWxzZSBpZiAoWydiYXNoJ10uaW5jbHVkZXMobmFtZSkpIHtcbiAgICAgIHJldHVybiAnY29kZV9leGVjdXRpb24nXG4gICAgfSBlbHNlIGlmIChbJ2dyZXAnLCAnc2VhcmNoJ10uaW5jbHVkZXMobmFtZSkpIHtcbiAgICAgIHJldHVybiAnc2VhcmNoJ1xuICAgIH0gZWxzZSBpZiAoWyd3ZWJmZXRjaCcsICd3ZWJzZWFyY2gnXS5pbmNsdWRlcyhuYW1lKSkge1xuICAgICAgcmV0dXJuICd3ZWJfcmVxdWVzdCdcbiAgICB9IGVsc2UgaWYgKG5hbWUuc3RhcnRzV2l0aCgnbWNwX18nKSkge1xuICAgICAgcmV0dXJuICdtY3BfdG9vbCdcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICd1bmtub3duJ1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBc3Nlc3MgY29tcGxleGl0eSBvZiB0b29sIGNhbGxcbiAgICovXG4gIHByaXZhdGUgYXNzZXNzQ29tcGxleGl0eShcbiAgICB0b29sTmFtZTogc3RyaW5nLFxuICAgIGlucHV0OiBSZWNvcmQ8c3RyaW5nLCBhbnk+XG4gICk6ICdzaW1wbGUnIHwgJ21lZGl1bScgfCAnY29tcGxleCcge1xuICAgIGNvbnN0IGlucHV0U2l6ZSA9IEpTT04uc3RyaW5naWZ5KGlucHV0KS5sZW5ndGhcblxuICAgIGlmIChpbnB1dFNpemUgPCAxMDApIHJldHVybiAnc2ltcGxlJ1xuICAgIGlmIChpbnB1dFNpemUgPCAxMDAwKSByZXR1cm4gJ21lZGl1bSdcbiAgICByZXR1cm4gJ2NvbXBsZXgnXG4gIH1cblxuICAvKipcbiAgICogQXNzZXNzIGltcGFjdCBvZiB0b29sIGNhbGxcbiAgICovXG4gIHByaXZhdGUgYXNzZXNzSW1wYWN0KFxuICAgIHRvb2xOYW1lOiBzdHJpbmcsXG4gICAgaW5wdXQ6IFJlY29yZDxzdHJpbmcsIGFueT5cbiAgKTogJ2xvdycgfCAnbWVkaXVtJyB8ICdoaWdoJyB7XG4gICAgY29uc3QgbmFtZSA9IHRvb2xOYW1lLnRvTG93ZXJDYXNlKClcblxuICAgIGlmIChbJ3JlYWQnLCAnZ3JlcCcsICdnbG9iJ10uaW5jbHVkZXMobmFtZSkpIHtcbiAgICAgIHJldHVybiAnbG93JyAvLyBSZWFkLW9ubHkgb3BlcmF0aW9uc1xuICAgIH0gZWxzZSBpZiAoWydlZGl0J10uaW5jbHVkZXMobmFtZSkpIHtcbiAgICAgIHJldHVybiAnbWVkaXVtJyAvLyBNb2RpZmljYXRpb25zXG4gICAgfSBlbHNlIGlmIChbJ3dyaXRlJywgJ2Jhc2gnXS5pbmNsdWRlcyhuYW1lKSkge1xuICAgICAgcmV0dXJuICdoaWdoJyAvLyBDcmVhdGlvbiBvciBleGVjdXRpb25cbiAgICB9XG5cbiAgICByZXR1cm4gJ21lZGl1bSdcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHRyYWN0IGVycm9yIG1lc3NhZ2UgZnJvbSB0b29sIHJlc3VsdFxuICAgKi9cbiAgcHJpdmF0ZSBleHRyYWN0RXJyb3JNZXNzYWdlKGNvbnRlbnQ6IGFueSk6IHN0cmluZyB7XG4gICAgaWYgKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykge1xuICAgICAgcmV0dXJuIGNvbnRlbnRcbiAgICB9IGVsc2UgaWYgKGNvbnRlbnQgJiYgdHlwZW9mIGNvbnRlbnQgPT09ICdvYmplY3QnKSB7XG4gICAgICByZXR1cm4gY29udGVudC5lcnJvciB8fCBjb250ZW50Lm1lc3NhZ2UgfHwgSlNPTi5zdHJpbmdpZnkoY29udGVudClcbiAgICB9XG4gICAgcmV0dXJuICdVbmtub3duIGVycm9yJ1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhbGwgY29tcGxldGVkIHRvb2wgY2FsbHNcbiAgICovXG4gIGdldENvbXBsZXRlZFRvb2xDYWxscygpOiBFbmhhbmNlZFRvb2xDYWxsW10ge1xuICAgIHJldHVybiBbLi4udGhpcy5jb21wbGV0ZWRUb29sQ2FsbHNdXG4gIH1cblxuICAvKipcbiAgICogR2V0IHRvb2wgdXNhZ2Ugc3RhdGlzdGljc1xuICAgKi9cbiAgZ2V0U3RhdGlzdGljcygpOiB7XG4gICAgdG90YWxDYWxsczogbnVtYmVyXG4gICAgc3VjY2Vzc1JhdGU6IG51bWJlclxuICAgIGNhdGVnb3J5QnJlYWtkb3duOiBSZWNvcmQ8VG9vbENhdGVnb3J5LCBudW1iZXI+XG4gICAgY29tcGxleGl0eUJyZWFrZG93bjogUmVjb3JkPHN0cmluZywgbnVtYmVyPlxuICAgIHRvcFRvb2xzOiBBcnJheTx7IG5hbWU6IHN0cmluZzsgY291bnQ6IG51bWJlciB9PlxuICB9IHtcbiAgICBjb25zdCB0b3RhbCA9IHRoaXMuY29tcGxldGVkVG9vbENhbGxzLmxlbmd0aFxuICAgIGNvbnN0IHN1Y2Nlc3NmdWwgPSB0aGlzLmNvbXBsZXRlZFRvb2xDYWxscy5maWx0ZXIoKGMpID0+IGMuc3VjY2VzcykubGVuZ3RoXG5cbiAgICBjb25zdCBjYXRlZ29yeUJyZWFrZG93biA9IHRoaXMuY29tcGxldGVkVG9vbENhbGxzLnJlZHVjZShcbiAgICAgIChhY2MsIGNhbGwpID0+IHtcbiAgICAgICAgYWNjW2NhbGwuY2F0ZWdvcnldID0gKGFjY1tjYWxsLmNhdGVnb3J5XSB8fCAwKSArIDFcbiAgICAgICAgcmV0dXJuIGFjY1xuICAgICAgfSxcbiAgICAgIHt9IGFzIFJlY29yZDxUb29sQ2F0ZWdvcnksIG51bWJlcj5cbiAgICApXG5cbiAgICBjb25zdCBjb21wbGV4aXR5QnJlYWtkb3duID0gdGhpcy5jb21wbGV0ZWRUb29sQ2FsbHMucmVkdWNlKFxuICAgICAgKGFjYywgY2FsbCkgPT4ge1xuICAgICAgICBhY2NbY2FsbC5jb21wbGV4aXR5XSA9IChhY2NbY2FsbC5jb21wbGV4aXR5XSB8fCAwKSArIDFcbiAgICAgICAgcmV0dXJuIGFjY1xuICAgICAgfSxcbiAgICAgIHt9IGFzIFJlY29yZDxzdHJpbmcsIG51bWJlcj5cbiAgICApXG5cbiAgICBjb25zdCB0b29sRnJlcXVlbmN5ID0gdGhpcy5jb21wbGV0ZWRUb29sQ2FsbHMucmVkdWNlKFxuICAgICAgKGFjYywgY2FsbCkgPT4ge1xuICAgICAgICBhY2NbY2FsbC5uYW1lXSA9IChhY2NbY2FsbC5uYW1lXSB8fCAwKSArIDFcbiAgICAgICAgcmV0dXJuIGFjY1xuICAgICAgfSxcbiAgICAgIHt9IGFzIFJlY29yZDxzdHJpbmcsIG51bWJlcj5cbiAgICApXG5cbiAgICBjb25zdCB0b3BUb29scyA9IE9iamVjdC5lbnRyaWVzKHRvb2xGcmVxdWVuY3kpXG4gICAgICAuc29ydCgoWywgYV0sIFssIGJdKSA9PiBiIC0gYSlcbiAgICAgIC5zbGljZSgwLCAxMClcbiAgICAgIC5tYXAoKFtuYW1lLCBjb3VudF0pID0+ICh7IG5hbWUsIGNvdW50IH0pKVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHRvdGFsQ2FsbHM6IHRvdGFsLFxuICAgICAgc3VjY2Vzc1JhdGU6IHRvdGFsID4gMCA/IHN1Y2Nlc3NmdWwgLyB0b3RhbCA6IDEsXG4gICAgICBjYXRlZ29yeUJyZWFrZG93bixcbiAgICAgIGNvbXBsZXhpdHlCcmVha2Rvd24sXG4gICAgICB0b3BUb29scyxcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVzZXQgdHJhY2tlciBmb3IgbmV3IHNlc3Npb25cbiAgICovXG4gIHJlc2V0KCkge1xuICAgIHRoaXMucGVuZGluZ1Rvb2xDYWxscy5jbGVhcigpXG4gICAgdGhpcy5jb21wbGV0ZWRUb29sQ2FsbHMgPSBbXVxuICB9XG59XG5cbi8qKlxuICogRGVmYXVsdCB0cmFja2VyIGluc3RhbmNlXG4gKi9cbmV4cG9ydCBjb25zdCBkZWZhdWx0VG9vbFRyYWNrZXIgPSBuZXcgVG9vbENhbGxUcmFja2VyKClcbiJdLCJuYW1lcyI6WyJUb29sQ2FsbFRyYWNrZXIiLCJwcm9jZXNzTWVzc2FnZSIsIm1lc3NhZ2UiLCJuZXdDb21wbGV0ZWRDYWxscyIsInR5cGUiLCJ0b29sQ2FsbHMiLCJleHRyYWN0VG9vbENhbGxzIiwiY2FsbCIsImlkIiwicGVuZGluZ1Rvb2xDYWxscyIsInNldCIsInJlc3VsdHMiLCJleHRyYWN0VG9vbFJlc3VsdHMiLCJyZXN1bHQiLCJwZW5kaW5nQ2FsbCIsImdldCIsInRvb2xfdXNlX2lkIiwiY29tcGxldGVkQ2FsbCIsImNvbXBsZXRlVG9vbENhbGwiLCJjb21wbGV0ZWRUb29sQ2FsbHMiLCJwdXNoIiwiZGVsZXRlIiwiY29udGVudCIsImZpbHRlciIsImMiLCJtYXAiLCJuYW1lIiwiaW5wdXQiLCJ0aW1lc3RhbXAiLCJEYXRlIiwidG9JU09TdHJpbmciLCJtZXNzYWdlVXVpZCIsInV1aWQiLCJzZXNzaW9uSWQiLCJzZXNzaW9uX2lkIiwicGFyZW50VG9vbFVzZUlkIiwicGFyZW50X3Rvb2xfdXNlX2lkIiwidW5kZWZpbmVkIiwiY2F0ZWdvcnkiLCJjYXRlZ29yaXplVG9vbENhbGwiLCJjb21wbGV4aXR5IiwiYXNzZXNzQ29tcGxleGl0eSIsImltcGFjdCIsImFzc2Vzc0ltcGFjdCIsImVycm9yIiwiaXNfZXJyb3IiLCJjb21wbGV0ZWQiLCJvdXRwdXQiLCJzdWNjZXNzIiwiZXh0cmFjdEVycm9yTWVzc2FnZSIsImVuaGFuY2VXaXRoU3BlY2lmaWNBbmFseXNpcyIsInRvb2xDYWxsIiwidG9Mb3dlckNhc2UiLCJmaWxlT3BlcmF0aW9ucyIsImFuYWx5emVGaWxlUmVhZCIsImFuYWx5emVGaWxlV3JpdGUiLCJhbmFseXplRmlsZUVkaXQiLCJiYXNoQ29tbWFuZHMiLCJhbmFseXplQmFzaENvbW1hbmQiLCJzZWFyY2hRdWVyaWVzIiwiYW5hbHl6ZVNlYXJjaENvbW1hbmQiLCJmaWxlUGF0aCIsImZpbGVfcGF0aCIsInBhdGgiLCJjaGFuZ2VzIiwibGluZXNBZGRlZCIsImxpbmVzUmVtb3ZlZCIsInNpemUiLCJsZW5ndGgiLCJzcGxpdCIsIm9sZFN0cmluZyIsIm9sZF9zdHJpbmciLCJuZXdTdHJpbmciLCJuZXdfc3RyaW5nIiwib2xkTGluZXMiLCJuZXdMaW5lcyIsIk1hdGgiLCJtYXgiLCJjb21tYW5kIiwiSlNPTiIsInN0cmluZ2lmeSIsImV4aXRDb2RlIiwicGF0dGVybiIsInF1ZXJ5IiwicmVzdWx0c0NvdW50IiwiZmlsZXMiLCJBcnJheSIsImlzQXJyYXkiLCJpdGVtIiwiZmlsZSIsInRvb2xOYW1lIiwiaW5jbHVkZXMiLCJzdGFydHNXaXRoIiwiaW5wdXRTaXplIiwiZ2V0Q29tcGxldGVkVG9vbENhbGxzIiwiZ2V0U3RhdGlzdGljcyIsInRvdGFsIiwic3VjY2Vzc2Z1bCIsImNhdGVnb3J5QnJlYWtkb3duIiwicmVkdWNlIiwiYWNjIiwiY29tcGxleGl0eUJyZWFrZG93biIsInRvb2xGcmVxdWVuY3kiLCJ0b3BUb29scyIsIk9iamVjdCIsImVudHJpZXMiLCJzb3J0IiwiYSIsImIiLCJzbGljZSIsImNvdW50IiwidG90YWxDYWxscyIsInN1Y2Nlc3NSYXRlIiwicmVzZXQiLCJjbGVhciIsIk1hcCIsImRlZmF1bHRUb29sVHJhY2tlciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/capture/tool-tracker.ts\n");

/***/ }),

/***/ "(rsc)/./lib/claude/api-client.ts":
/*!**********************************!*\
  !*** ./lib/claude/api-client.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ClaudeAPIClient: () => (/* binding */ ClaudeAPIClient),\n/* harmony export */   claudeClient: () => (/* binding */ claudeClient)\n/* harmony export */ });\n/* harmony import */ var _anthropic_ai_sdk__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @anthropic-ai/sdk */ \"(rsc)/./node_modules/@anthropic-ai/sdk/index.mjs\");\n/* harmony import */ var _capture__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../capture */ \"(rsc)/./lib/capture/index.ts\");\n/**\n * Real Claude API Client\n * Handles direct integration with Anthropic's Claude API\n */ \n\nclass ClaudeAPIClient {\n    constructor(){\n        this.defaultModel = 'claude-sonnet-4-20250514';\n        // Explicitly use the API key from environment, prioritizing .env.local\n        const apiKey = process.env.ANTHROPIC_API_KEY;\n        if (!apiKey) {\n            throw new Error('ANTHROPIC_API_KEY environment variable is required');\n        }\n        console.log('üîë Using Anthropic API key from environment:', apiKey.substring(0, 20) + '...');\n        this.client = new _anthropic_ai_sdk__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n            apiKey,\n            // Explicitly set to avoid any local Claude desktop interference\n            baseURL: 'https://api.anthropic.com'\n        });\n    }\n    /**\n   * Send a message to Claude and get the response\n   */ async sendMessage(prompt, options = {}) {\n        const { model = this.defaultModel, maxTokens = 4000, temperature = 0.7, systemPrompt, captureToDatabase = true, username = 'arrakis-user' } = options;\n        console.log('ü§ñ Sending message to Claude API...');\n        console.log(`üìù Prompt: ${prompt.substring(0, 100)}${prompt.length > 100 ? '...' : ''}`);\n        try {\n            // Build messages array\n            const messages = [\n                {\n                    role: 'user',\n                    content: prompt\n                }\n            ];\n            // Make API call to Claude\n            const response = await this.client.messages.create({\n                model,\n                max_tokens: maxTokens,\n                temperature,\n                system: systemPrompt || this.getDefaultSystemPrompt(),\n                messages\n            });\n            // Transform response to our format\n            const claudeResponse = {\n                id: response.id,\n                model: response.model,\n                usage: {\n                    input_tokens: response.usage.input_tokens,\n                    output_tokens: response.usage.output_tokens\n                },\n                content: response.content.map((block)=>{\n                    if (block.type === 'text') {\n                        return {\n                            type: 'text',\n                            text: block.text\n                        };\n                    } else if (block.type === 'tool_use') {\n                        return {\n                            type: 'tool_use',\n                            name: block.name,\n                            input: block.input\n                        };\n                    }\n                    return {\n                        type: block.type\n                    };\n                }),\n                stop_reason: response.stop_reason || 'end_turn',\n                timestamp: new Date().toISOString()\n            };\n            console.log('‚úÖ Claude API response received');\n            console.log(`üìä Tokens: ${response.usage.input_tokens} in, ${response.usage.output_tokens} out`);\n            // Auto-capture to database if enabled\n            if (captureToDatabase) {\n                await this.captureConversation(prompt, claudeResponse, username, systemPrompt);\n            }\n            return claudeResponse;\n        } catch (error) {\n            console.error('‚ùå Claude API error:', error);\n            throw new Error(`Claude API call failed: ${error instanceof Error ? error.message : 'Unknown error'}`);\n        }\n    }\n    /**\n   * Stream a message to Claude with real-time responses\n   */ async streamMessage(prompt, options = {}, onChunk) {\n        const { model = this.defaultModel, maxTokens = 4000, temperature = 0.7, systemPrompt, captureToDatabase = true, username = 'arrakis-user' } = options;\n        console.log('üîÑ Starting Claude API stream...');\n        try {\n            const messages = [\n                {\n                    role: 'user',\n                    content: prompt\n                }\n            ];\n            const stream = this.client.messages.stream({\n                model,\n                max_tokens: maxTokens,\n                temperature,\n                system: systemPrompt || this.getDefaultSystemPrompt(),\n                messages\n            });\n            let fullResponse = '';\n            let usage = {\n                input_tokens: 0,\n                output_tokens: 0\n            };\n            let responseId = '';\n            let responseModel = model;\n            // Process stream chunks\n            for await (const chunk of stream){\n                if (chunk.type === 'message_start') {\n                    responseId = chunk.message.id;\n                    responseModel = chunk.message.model;\n                    usage = chunk.message.usage;\n                } else if (chunk.type === 'content_block_delta') {\n                    if (chunk.delta.type === 'text_delta') {\n                        const textChunk = chunk.delta.text;\n                        fullResponse += textChunk;\n                        // Send chunk to callback if provided\n                        onChunk?.({\n                            type: 'text',\n                            content: textChunk\n                        });\n                    }\n                } else if (chunk.type === 'message_delta') {\n                    if (chunk.usage) {\n                        usage.output_tokens = chunk.usage.output_tokens;\n                    }\n                }\n            }\n            // Send completion notification\n            onChunk?.({\n                type: 'complete',\n                usage\n            });\n            // Build final response\n            const claudeResponse = {\n                id: responseId,\n                model: responseModel,\n                usage,\n                content: [\n                    {\n                        type: 'text',\n                        text: fullResponse\n                    }\n                ],\n                stop_reason: 'end_turn',\n                timestamp: new Date().toISOString()\n            };\n            console.log('‚úÖ Claude API stream completed');\n            console.log(`üìä Tokens: ${usage.input_tokens} in, ${usage.output_tokens} out`);\n            // Auto-capture to database if enabled\n            if (captureToDatabase) {\n                await this.captureConversation(prompt, claudeResponse, username, systemPrompt);\n            }\n            return claudeResponse;\n        } catch (error) {\n            console.error('‚ùå Claude API stream error:', error);\n            throw new Error(`Claude API stream failed: ${error instanceof Error ? error.message : 'Unknown error'}`);\n        }\n    }\n    /**\n   * Capture conversation to database\n   */ async captureConversation(prompt, response, username, systemPrompt) {\n        try {\n            const conversationData = {\n                title: this.generateTitle(prompt),\n                claudeSessionId: response.id,\n                messages: [\n                    {\n                        role: 'user',\n                        content: prompt,\n                        timestamp: new Date(Date.now() - 1000).toISOString(),\n                        metadata: {\n                            source: 'arrakis-demo',\n                            apiCall: true\n                        }\n                    },\n                    {\n                        role: 'assistant',\n                        content: response.content.find((c)=>c.type === 'text')?.text || '',\n                        timestamp: response.timestamp,\n                        metadata: {\n                            source: 'claude-api',\n                            modelUsed: response.model,\n                            stopReason: response.stop_reason,\n                            toolCalls: response.content.filter((c)=>c.type === 'tool_use')\n                        }\n                    }\n                ],\n                metadata: {\n                    source: 'manual',\n                    timestamp: response.timestamp,\n                    sessionInfo: {\n                        projectPath: process.cwd(),\n                        workingDirectory: process.cwd()\n                    },\n                    performance: {\n                        totalTokens: response.usage.input_tokens + response.usage.output_tokens,\n                        totalCost: this.calculateCost(response.usage, response.model),\n                        duration: 0\n                    }\n                }\n            };\n            const sessionId = await (0,_capture__WEBPACK_IMPORTED_MODULE_1__.captureConversation)(conversationData);\n            console.log(`üíæ Conversation captured to database: ${sessionId}`);\n        } catch (error) {\n            console.error('‚ùå Failed to capture conversation to database:', error);\n        // Don't throw - capture failures shouldn't break the API call\n        }\n    }\n    /**\n   * Generate a title from the prompt\n   */ generateTitle(prompt) {\n        // Take first 50 characters and clean up\n        const title = prompt.trim().substring(0, 50).replace(/\\n/g, ' ');\n        return title.length < prompt.length ? `${title}...` : title;\n    }\n    /**\n   * Calculate approximate cost based on token usage\n   */ calculateCost(usage, model) {\n        // Claude 3.5 Sonnet pricing (approximate)\n        const inputCostPer1K = 0.003 // $3 per 1M tokens\n        ;\n        const outputCostPer1K = 0.015 // $15 per 1M tokens\n        ;\n        const inputCost = usage.input_tokens / 1000 * inputCostPer1K;\n        const outputCost = usage.output_tokens / 1000 * outputCostPer1K;\n        return Number((inputCost + outputCost).toFixed(6));\n    }\n    /**\n   * Get default system prompt for Claude API calls\n   */ getDefaultSystemPrompt() {\n        return `You are Claude, an AI assistant created by Anthropic. You are being accessed through the Arrakis conversation capture system, which allows users to capture, search, and analyze AI conversations.\n\nYou should be helpful, harmless, and honest. Respond to the user's questions and requests in a clear and informative way.\n\nCurrent context:\n- Working directory: ${process.cwd()}\n- Platform: ${process.platform}\n- Date: ${new Date().toLocaleDateString()}\n\nThe user is testing the real Claude API integration through the Arrakis demo interface.`;\n    }\n}\n// Export default instance\nconst claudeClient = new ClaudeAPIClient();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvY2xhdWRlL2FwaS1jbGllbnQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOzs7Q0FHQyxHQUV3QztBQUNPO0FBNkN6QyxNQUFNRTtJQUlYLGFBQWM7YUFGTkMsZUFBZTtRQUdyQix1RUFBdUU7UUFDdkUsTUFBTUMsU0FBU0MsUUFBUUMsR0FBRyxDQUFDQyxpQkFBaUI7UUFDNUMsSUFBSSxDQUFDSCxRQUFRO1lBQ1gsTUFBTSxJQUFJSSxNQUFNO1FBQ2xCO1FBRUFDLFFBQVFDLEdBQUcsQ0FDVCxnREFDQU4sT0FBT08sU0FBUyxDQUFDLEdBQUcsTUFBTTtRQUc1QixJQUFJLENBQUNDLE1BQU0sR0FBRyxJQUFJWix5REFBU0EsQ0FBQztZQUMxQkk7WUFDQSxnRUFBZ0U7WUFDaEVTLFNBQVM7UUFDWDtJQUNGO0lBRUE7O0dBRUMsR0FDRCxNQUFNQyxZQUNKQyxNQUFjLEVBQ2RDLFVBQTRCLENBQUMsQ0FBQyxFQUNMO1FBQ3pCLE1BQU0sRUFDSkMsUUFBUSxJQUFJLENBQUNkLFlBQVksRUFDekJlLFlBQVksSUFBSSxFQUNoQkMsY0FBYyxHQUFHLEVBQ2pCQyxZQUFZLEVBQ1pDLG9CQUFvQixJQUFJLEVBQ3hCQyxXQUFXLGNBQWMsRUFDMUIsR0FBR047UUFFSlAsUUFBUUMsR0FBRyxDQUFDO1FBQ1pELFFBQVFDLEdBQUcsQ0FDVCxDQUFDLFdBQVcsRUFBRUssT0FBT0osU0FBUyxDQUFDLEdBQUcsT0FBT0ksT0FBT1EsTUFBTSxHQUFHLE1BQU0sUUFBUSxJQUFJO1FBRzdFLElBQUk7WUFDRix1QkFBdUI7WUFDdkIsTUFBTUMsV0FBcUM7Z0JBQ3pDO29CQUFFQyxNQUFNO29CQUFRQyxTQUFTWDtnQkFBTzthQUNqQztZQUVELDBCQUEwQjtZQUMxQixNQUFNWSxXQUFXLE1BQU0sSUFBSSxDQUFDZixNQUFNLENBQUNZLFFBQVEsQ0FBQ0ksTUFBTSxDQUFDO2dCQUNqRFg7Z0JBQ0FZLFlBQVlYO2dCQUNaQztnQkFDQVcsUUFBUVYsZ0JBQWdCLElBQUksQ0FBQ1csc0JBQXNCO2dCQUNuRFA7WUFDRjtZQUVBLG1DQUFtQztZQUNuQyxNQUFNUSxpQkFBaUM7Z0JBQ3JDQyxJQUFJTixTQUFTTSxFQUFFO2dCQUNmaEIsT0FBT1UsU0FBU1YsS0FBSztnQkFDckJpQixPQUFPO29CQUNMQyxjQUFjUixTQUFTTyxLQUFLLENBQUNDLFlBQVk7b0JBQ3pDQyxlQUFlVCxTQUFTTyxLQUFLLENBQUNFLGFBQWE7Z0JBQzdDO2dCQUNBVixTQUFTQyxTQUFTRCxPQUFPLENBQUNXLEdBQUcsQ0FBQyxDQUFDQztvQkFDN0IsSUFBSUEsTUFBTUMsSUFBSSxLQUFLLFFBQVE7d0JBQ3pCLE9BQU87NEJBQ0xBLE1BQU07NEJBQ05DLE1BQU1GLE1BQU1FLElBQUk7d0JBQ2xCO29CQUNGLE9BQU8sSUFBSUYsTUFBTUMsSUFBSSxLQUFLLFlBQVk7d0JBQ3BDLE9BQU87NEJBQ0xBLE1BQU07NEJBQ05FLE1BQU1ILE1BQU1HLElBQUk7NEJBQ2hCQyxPQUFPSixNQUFNSSxLQUFLO3dCQUNwQjtvQkFDRjtvQkFDQSxPQUFPO3dCQUFFSCxNQUFNRCxNQUFNQyxJQUFJO29CQUFDO2dCQUM1QjtnQkFDQUksYUFBYWhCLFNBQVNnQixXQUFXLElBQUk7Z0JBQ3JDQyxXQUFXLElBQUlDLE9BQU9DLFdBQVc7WUFDbkM7WUFFQXJDLFFBQVFDLEdBQUcsQ0FBQztZQUNaRCxRQUFRQyxHQUFHLENBQ1QsQ0FBQyxXQUFXLEVBQUVpQixTQUFTTyxLQUFLLENBQUNDLFlBQVksQ0FBQyxLQUFLLEVBQUVSLFNBQVNPLEtBQUssQ0FBQ0UsYUFBYSxDQUFDLElBQUksQ0FBQztZQUdyRixzQ0FBc0M7WUFDdEMsSUFBSWYsbUJBQW1CO2dCQUNyQixNQUFNLElBQUksQ0FBQ3BCLG1CQUFtQixDQUM1QmMsUUFDQWlCLGdCQUNBVixVQUNBRjtZQUVKO1lBRUEsT0FBT1k7UUFDVCxFQUFFLE9BQU9lLE9BQU87WUFDZHRDLFFBQVFzQyxLQUFLLENBQUMsdUJBQXVCQTtZQUNyQyxNQUFNLElBQUl2QyxNQUNSLENBQUMsd0JBQXdCLEVBQUV1QyxpQkFBaUJ2QyxRQUFRdUMsTUFBTUMsT0FBTyxHQUFHLGlCQUFpQjtRQUV6RjtJQUNGO0lBRUE7O0dBRUMsR0FDRCxNQUFNQyxjQUNKbEMsTUFBYyxFQUNkQyxVQUE0QixDQUFDLENBQUMsRUFDOUJrQyxPQUE0QyxFQUNuQjtRQUN6QixNQUFNLEVBQ0pqQyxRQUFRLElBQUksQ0FBQ2QsWUFBWSxFQUN6QmUsWUFBWSxJQUFJLEVBQ2hCQyxjQUFjLEdBQUcsRUFDakJDLFlBQVksRUFDWkMsb0JBQW9CLElBQUksRUFDeEJDLFdBQVcsY0FBYyxFQUMxQixHQUFHTjtRQUVKUCxRQUFRQyxHQUFHLENBQUM7UUFFWixJQUFJO1lBQ0YsTUFBTWMsV0FBcUM7Z0JBQ3pDO29CQUFFQyxNQUFNO29CQUFRQyxTQUFTWDtnQkFBTzthQUNqQztZQUVELE1BQU1vQyxTQUFTLElBQUksQ0FBQ3ZDLE1BQU0sQ0FBQ1ksUUFBUSxDQUFDMkIsTUFBTSxDQUFDO2dCQUN6Q2xDO2dCQUNBWSxZQUFZWDtnQkFDWkM7Z0JBQ0FXLFFBQVFWLGdCQUFnQixJQUFJLENBQUNXLHNCQUFzQjtnQkFDbkRQO1lBQ0Y7WUFFQSxJQUFJNEIsZUFBZTtZQUNuQixJQUFJbEIsUUFBUTtnQkFBRUMsY0FBYztnQkFBR0MsZUFBZTtZQUFFO1lBQ2hELElBQUlpQixhQUFhO1lBQ2pCLElBQUlDLGdCQUFnQnJDO1lBRXBCLHdCQUF3QjtZQUN4QixXQUFXLE1BQU1zQyxTQUFTSixPQUFRO2dCQUNoQyxJQUFJSSxNQUFNaEIsSUFBSSxLQUFLLGlCQUFpQjtvQkFDbENjLGFBQWFFLE1BQU1QLE9BQU8sQ0FBQ2YsRUFBRTtvQkFDN0JxQixnQkFBZ0JDLE1BQU1QLE9BQU8sQ0FBQy9CLEtBQUs7b0JBQ25DaUIsUUFBUXFCLE1BQU1QLE9BQU8sQ0FBQ2QsS0FBSztnQkFDN0IsT0FBTyxJQUFJcUIsTUFBTWhCLElBQUksS0FBSyx1QkFBdUI7b0JBQy9DLElBQUlnQixNQUFNQyxLQUFLLENBQUNqQixJQUFJLEtBQUssY0FBYzt3QkFDckMsTUFBTWtCLFlBQVlGLE1BQU1DLEtBQUssQ0FBQ2hCLElBQUk7d0JBQ2xDWSxnQkFBZ0JLO3dCQUVoQixxQ0FBcUM7d0JBQ3JDUCxVQUFVOzRCQUNSWCxNQUFNOzRCQUNOYixTQUFTK0I7d0JBQ1g7b0JBQ0Y7Z0JBQ0YsT0FBTyxJQUFJRixNQUFNaEIsSUFBSSxLQUFLLGlCQUFpQjtvQkFDekMsSUFBSWdCLE1BQU1yQixLQUFLLEVBQUU7d0JBQ2ZBLE1BQU1FLGFBQWEsR0FBR21CLE1BQU1yQixLQUFLLENBQUNFLGFBQWE7b0JBQ2pEO2dCQUNGO1lBQ0Y7WUFFQSwrQkFBK0I7WUFDL0JjLFVBQVU7Z0JBQ1JYLE1BQU07Z0JBQ05MO1lBQ0Y7WUFFQSx1QkFBdUI7WUFDdkIsTUFBTUYsaUJBQWlDO2dCQUNyQ0MsSUFBSW9CO2dCQUNKcEMsT0FBT3FDO2dCQUNQcEI7Z0JBQ0FSLFNBQVM7b0JBQ1A7d0JBQ0VhLE1BQU07d0JBQ05DLE1BQU1ZO29CQUNSO2lCQUNEO2dCQUNEVCxhQUFhO2dCQUNiQyxXQUFXLElBQUlDLE9BQU9DLFdBQVc7WUFDbkM7WUFFQXJDLFFBQVFDLEdBQUcsQ0FBQztZQUNaRCxRQUFRQyxHQUFHLENBQ1QsQ0FBQyxXQUFXLEVBQUV3QixNQUFNQyxZQUFZLENBQUMsS0FBSyxFQUFFRCxNQUFNRSxhQUFhLENBQUMsSUFBSSxDQUFDO1lBR25FLHNDQUFzQztZQUN0QyxJQUFJZixtQkFBbUI7Z0JBQ3JCLE1BQU0sSUFBSSxDQUFDcEIsbUJBQW1CLENBQzVCYyxRQUNBaUIsZ0JBQ0FWLFVBQ0FGO1lBRUo7WUFFQSxPQUFPWTtRQUNULEVBQUUsT0FBT2UsT0FBTztZQUNkdEMsUUFBUXNDLEtBQUssQ0FBQyw4QkFBOEJBO1lBQzVDLE1BQU0sSUFBSXZDLE1BQ1IsQ0FBQywwQkFBMEIsRUFBRXVDLGlCQUFpQnZDLFFBQVF1QyxNQUFNQyxPQUFPLEdBQUcsaUJBQWlCO1FBRTNGO0lBQ0Y7SUFFQTs7R0FFQyxHQUNELE1BQWMvQyxvQkFDWmMsTUFBYyxFQUNkWSxRQUF3QixFQUN4QkwsUUFBZ0IsRUFDaEJGLFlBQXFCLEVBQ047UUFDZixJQUFJO1lBQ0YsTUFBTXNDLG1CQUFxQztnQkFDekNDLE9BQU8sSUFBSSxDQUFDQyxhQUFhLENBQUM3QztnQkFDMUI4QyxpQkFBaUJsQyxTQUFTTSxFQUFFO2dCQUM1QlQsVUFBVTtvQkFDUjt3QkFDRUMsTUFBTTt3QkFDTkMsU0FBU1g7d0JBQ1Q2QixXQUFXLElBQUlDLEtBQUtBLEtBQUtpQixHQUFHLEtBQUssTUFBTWhCLFdBQVc7d0JBQ2xEaUIsVUFBVTs0QkFDUkMsUUFBUTs0QkFDUkMsU0FBUzt3QkFDWDtvQkFDRjtvQkFDQTt3QkFDRXhDLE1BQU07d0JBQ05DLFNBQ0VDLFNBQVNELE9BQU8sQ0FBQ3dDLElBQUksQ0FBQyxDQUFDQyxJQUFNQSxFQUFFNUIsSUFBSSxLQUFLLFNBQVNDLFFBQVE7d0JBQzNESSxXQUFXakIsU0FBU2lCLFNBQVM7d0JBQzdCbUIsVUFBVTs0QkFDUkMsUUFBUTs0QkFDUkksV0FBV3pDLFNBQVNWLEtBQUs7NEJBQ3pCb0QsWUFBWTFDLFNBQVNnQixXQUFXOzRCQUNoQzJCLFdBQVczQyxTQUFTRCxPQUFPLENBQUM2QyxNQUFNLENBQUMsQ0FBQ0osSUFBTUEsRUFBRTVCLElBQUksS0FBSzt3QkFDdkQ7b0JBQ0Y7aUJBQ0Q7Z0JBQ0R3QixVQUFVO29CQUNSQyxRQUFRO29CQUNScEIsV0FBV2pCLFNBQVNpQixTQUFTO29CQUM3QjRCLGFBQWE7d0JBQ1hDLGFBQWFwRSxRQUFRcUUsR0FBRzt3QkFDeEJDLGtCQUFrQnRFLFFBQVFxRSxHQUFHO29CQUMvQjtvQkFDQUUsYUFBYTt3QkFDWEMsYUFDRWxELFNBQVNPLEtBQUssQ0FBQ0MsWUFBWSxHQUFHUixTQUFTTyxLQUFLLENBQUNFLGFBQWE7d0JBQzVEMEMsV0FBVyxJQUFJLENBQUNDLGFBQWEsQ0FBQ3BELFNBQVNPLEtBQUssRUFBRVAsU0FBU1YsS0FBSzt3QkFDNUQrRCxVQUFVO29CQUNaO2dCQUNGO1lBQ0Y7WUFFQSxNQUFNQyxZQUFZLE1BQU1oRiw2REFBbUJBLENBQUN5RDtZQUM1Q2pELFFBQVFDLEdBQUcsQ0FBQyxDQUFDLHNDQUFzQyxFQUFFdUUsV0FBVztRQUNsRSxFQUFFLE9BQU9sQyxPQUFPO1lBQ2R0QyxRQUFRc0MsS0FBSyxDQUFDLGlEQUFpREE7UUFDL0QsOERBQThEO1FBQ2hFO0lBQ0Y7SUFFQTs7R0FFQyxHQUNELGNBQXNCaEMsTUFBYyxFQUFVO1FBQzVDLHdDQUF3QztRQUN4QyxNQUFNNEMsUUFBUTVDLE9BQU9tRSxJQUFJLEdBQUd2RSxTQUFTLENBQUMsR0FBRyxJQUFJd0UsT0FBTyxDQUFDLE9BQU87UUFDNUQsT0FBT3hCLE1BQU1wQyxNQUFNLEdBQUdSLE9BQU9RLE1BQU0sR0FBRyxHQUFHb0MsTUFBTSxHQUFHLENBQUMsR0FBR0E7SUFDeEQ7SUFFQTs7R0FFQyxHQUNELGNBQ0V6QixLQUFzRCxFQUN0RGpCLEtBQWEsRUFDTDtRQUNSLDBDQUEwQztRQUMxQyxNQUFNbUUsaUJBQWlCLE1BQU0sbUJBQW1COztRQUNoRCxNQUFNQyxrQkFBa0IsTUFBTSxvQkFBb0I7O1FBRWxELE1BQU1DLFlBQVksTUFBT25ELFlBQVksR0FBRyxPQUFRaUQ7UUFDaEQsTUFBTUcsYUFBYSxNQUFPbkQsYUFBYSxHQUFHLE9BQVFpRDtRQUVsRCxPQUFPRyxPQUFPLENBQUNGLFlBQVlDLFVBQVMsRUFBR0UsT0FBTyxDQUFDO0lBQ2pEO0lBRUE7O0dBRUMsR0FDRCx5QkFBeUM7UUFDdkMsT0FBTyxDQUFDOzs7OztxQkFLUyxFQUFFcEYsUUFBUXFFLEdBQUcsR0FBRztZQUN6QixFQUFFckUsUUFBUXFGLFFBQVEsQ0FBQztRQUN2QixFQUFFLElBQUk3QyxPQUFPOEMsa0JBQWtCLEdBQUc7O3VGQUU2QyxDQUFDO0lBQ3RGO0FBQ0Y7QUFFQSwwQkFBMEI7QUFDbkIsTUFBTUMsZUFBZSxJQUFJMUYsa0JBQWlCIiwic291cmNlcyI6WyJDOlxccHJvamVjdHNcXGFycmFraXNcXGxpYlxcY2xhdWRlXFxhcGktY2xpZW50LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogUmVhbCBDbGF1ZGUgQVBJIENsaWVudFxuICogSGFuZGxlcyBkaXJlY3QgaW50ZWdyYXRpb24gd2l0aCBBbnRocm9waWMncyBDbGF1ZGUgQVBJXG4gKi9cblxuaW1wb3J0IEFudGhyb3BpYyBmcm9tICdAYW50aHJvcGljLWFpL3NkaydcbmltcG9ydCB7IGNhcHR1cmVDb252ZXJzYXRpb24gfSBmcm9tICcuLi9jYXB0dXJlJ1xuaW1wb3J0IHR5cGUgeyBDb252ZXJzYXRpb25EYXRhIH0gZnJvbSAnLi4vY2FwdHVyZSdcblxuZXhwb3J0IGludGVyZmFjZSBDbGF1ZGVNZXNzYWdlIHtcbiAgcm9sZTogJ3VzZXInIHwgJ2Fzc2lzdGFudCcgfCAnc3lzdGVtJ1xuICBjb250ZW50OiBzdHJpbmdcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDbGF1ZGVSZXNwb25zZSB7XG4gIGlkOiBzdHJpbmdcbiAgbW9kZWw6IHN0cmluZ1xuICB1c2FnZToge1xuICAgIGlucHV0X3Rva2VuczogbnVtYmVyXG4gICAgb3V0cHV0X3Rva2VuczogbnVtYmVyXG4gIH1cbiAgY29udGVudDogQXJyYXk8e1xuICAgIHR5cGU6IHN0cmluZ1xuICAgIHRleHQ/OiBzdHJpbmdcbiAgICBuYW1lPzogc3RyaW5nXG4gICAgaW5wdXQ/OiBhbnlcbiAgfT5cbiAgc3RvcF9yZWFzb246IHN0cmluZ1xuICB0aW1lc3RhbXA6IHN0cmluZ1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENsYXVkZVN0cmVhbUNodW5rIHtcbiAgdHlwZTogJ3RleHQnIHwgJ3Rvb2xfdXNlJyB8ICd1c2FnZScgfCAnY29tcGxldGUnXG4gIGNvbnRlbnQ/OiBzdHJpbmdcbiAgdG9vbENhbGw/OiBhbnlcbiAgdXNhZ2U/OiB7XG4gICAgaW5wdXRfdG9rZW5zOiBudW1iZXJcbiAgICBvdXRwdXRfdG9rZW5zOiBudW1iZXJcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIENsYXVkZUFQSU9wdGlvbnMge1xuICBtb2RlbD86IHN0cmluZ1xuICBtYXhUb2tlbnM/OiBudW1iZXJcbiAgdGVtcGVyYXR1cmU/OiBudW1iZXJcbiAgc3lzdGVtUHJvbXB0Pzogc3RyaW5nXG4gIHN0cmVhbT86IGJvb2xlYW5cbiAgY2FwdHVyZVRvRGF0YWJhc2U/OiBib29sZWFuXG4gIHVzZXJuYW1lPzogc3RyaW5nXG59XG5cbmV4cG9ydCBjbGFzcyBDbGF1ZGVBUElDbGllbnQge1xuICBwcml2YXRlIGNsaWVudDogQW50aHJvcGljXG4gIHByaXZhdGUgZGVmYXVsdE1vZGVsID0gJ2NsYXVkZS1zb25uZXQtNC0yMDI1MDUxNCdcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICAvLyBFeHBsaWNpdGx5IHVzZSB0aGUgQVBJIGtleSBmcm9tIGVudmlyb25tZW50LCBwcmlvcml0aXppbmcgLmVudi5sb2NhbFxuICAgIGNvbnN0IGFwaUtleSA9IHByb2Nlc3MuZW52LkFOVEhST1BJQ19BUElfS0VZXG4gICAgaWYgKCFhcGlLZXkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQU5USFJPUElDX0FQSV9LRVkgZW52aXJvbm1lbnQgdmFyaWFibGUgaXMgcmVxdWlyZWQnKVxuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKFxuICAgICAgJ/CflJEgVXNpbmcgQW50aHJvcGljIEFQSSBrZXkgZnJvbSBlbnZpcm9ubWVudDonLFxuICAgICAgYXBpS2V5LnN1YnN0cmluZygwLCAyMCkgKyAnLi4uJ1xuICAgIClcblxuICAgIHRoaXMuY2xpZW50ID0gbmV3IEFudGhyb3BpYyh7XG4gICAgICBhcGlLZXksXG4gICAgICAvLyBFeHBsaWNpdGx5IHNldCB0byBhdm9pZCBhbnkgbG9jYWwgQ2xhdWRlIGRlc2t0b3AgaW50ZXJmZXJlbmNlXG4gICAgICBiYXNlVVJMOiAnaHR0cHM6Ly9hcGkuYW50aHJvcGljLmNvbScsXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBTZW5kIGEgbWVzc2FnZSB0byBDbGF1ZGUgYW5kIGdldCB0aGUgcmVzcG9uc2VcbiAgICovXG4gIGFzeW5jIHNlbmRNZXNzYWdlKFxuICAgIHByb21wdDogc3RyaW5nLFxuICAgIG9wdGlvbnM6IENsYXVkZUFQSU9wdGlvbnMgPSB7fVxuICApOiBQcm9taXNlPENsYXVkZVJlc3BvbnNlPiB7XG4gICAgY29uc3Qge1xuICAgICAgbW9kZWwgPSB0aGlzLmRlZmF1bHRNb2RlbCxcbiAgICAgIG1heFRva2VucyA9IDQwMDAsXG4gICAgICB0ZW1wZXJhdHVyZSA9IDAuNyxcbiAgICAgIHN5c3RlbVByb21wdCxcbiAgICAgIGNhcHR1cmVUb0RhdGFiYXNlID0gdHJ1ZSxcbiAgICAgIHVzZXJuYW1lID0gJ2FycmFraXMtdXNlcicsXG4gICAgfSA9IG9wdGlvbnNcblxuICAgIGNvbnNvbGUubG9nKCfwn6SWIFNlbmRpbmcgbWVzc2FnZSB0byBDbGF1ZGUgQVBJLi4uJylcbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIGDwn5OdIFByb21wdDogJHtwcm9tcHQuc3Vic3RyaW5nKDAsIDEwMCl9JHtwcm9tcHQubGVuZ3RoID4gMTAwID8gJy4uLicgOiAnJ31gXG4gICAgKVxuXG4gICAgdHJ5IHtcbiAgICAgIC8vIEJ1aWxkIG1lc3NhZ2VzIGFycmF5XG4gICAgICBjb25zdCBtZXNzYWdlczogQW50aHJvcGljLk1lc3NhZ2VQYXJhbVtdID0gW1xuICAgICAgICB7IHJvbGU6ICd1c2VyJywgY29udGVudDogcHJvbXB0IH0sXG4gICAgICBdXG5cbiAgICAgIC8vIE1ha2UgQVBJIGNhbGwgdG8gQ2xhdWRlXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuY2xpZW50Lm1lc3NhZ2VzLmNyZWF0ZSh7XG4gICAgICAgIG1vZGVsLFxuICAgICAgICBtYXhfdG9rZW5zOiBtYXhUb2tlbnMsXG4gICAgICAgIHRlbXBlcmF0dXJlLFxuICAgICAgICBzeXN0ZW06IHN5c3RlbVByb21wdCB8fCB0aGlzLmdldERlZmF1bHRTeXN0ZW1Qcm9tcHQoKSxcbiAgICAgICAgbWVzc2FnZXMsXG4gICAgICB9KVxuXG4gICAgICAvLyBUcmFuc2Zvcm0gcmVzcG9uc2UgdG8gb3VyIGZvcm1hdFxuICAgICAgY29uc3QgY2xhdWRlUmVzcG9uc2U6IENsYXVkZVJlc3BvbnNlID0ge1xuICAgICAgICBpZDogcmVzcG9uc2UuaWQsXG4gICAgICAgIG1vZGVsOiByZXNwb25zZS5tb2RlbCxcbiAgICAgICAgdXNhZ2U6IHtcbiAgICAgICAgICBpbnB1dF90b2tlbnM6IHJlc3BvbnNlLnVzYWdlLmlucHV0X3Rva2VucyxcbiAgICAgICAgICBvdXRwdXRfdG9rZW5zOiByZXNwb25zZS51c2FnZS5vdXRwdXRfdG9rZW5zLFxuICAgICAgICB9LFxuICAgICAgICBjb250ZW50OiByZXNwb25zZS5jb250ZW50Lm1hcCgoYmxvY2spID0+IHtcbiAgICAgICAgICBpZiAoYmxvY2sudHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgICAgIHRleHQ6IGJsb2NrLnRleHQsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmIChibG9jay50eXBlID09PSAndG9vbF91c2UnKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICB0eXBlOiAndG9vbF91c2UnLFxuICAgICAgICAgICAgICBuYW1lOiBibG9jay5uYW1lLFxuICAgICAgICAgICAgICBpbnB1dDogYmxvY2suaW5wdXQsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB7IHR5cGU6IGJsb2NrLnR5cGUgfVxuICAgICAgICB9KSxcbiAgICAgICAgc3RvcF9yZWFzb246IHJlc3BvbnNlLnN0b3BfcmVhc29uIHx8ICdlbmRfdHVybicsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgfVxuXG4gICAgICBjb25zb2xlLmxvZygn4pyFIENsYXVkZSBBUEkgcmVzcG9uc2UgcmVjZWl2ZWQnKVxuICAgICAgY29uc29sZS5sb2coXG4gICAgICAgIGDwn5OKIFRva2VuczogJHtyZXNwb25zZS51c2FnZS5pbnB1dF90b2tlbnN9IGluLCAke3Jlc3BvbnNlLnVzYWdlLm91dHB1dF90b2tlbnN9IG91dGBcbiAgICAgIClcblxuICAgICAgLy8gQXV0by1jYXB0dXJlIHRvIGRhdGFiYXNlIGlmIGVuYWJsZWRcbiAgICAgIGlmIChjYXB0dXJlVG9EYXRhYmFzZSkge1xuICAgICAgICBhd2FpdCB0aGlzLmNhcHR1cmVDb252ZXJzYXRpb24oXG4gICAgICAgICAgcHJvbXB0LFxuICAgICAgICAgIGNsYXVkZVJlc3BvbnNlLFxuICAgICAgICAgIHVzZXJuYW1lLFxuICAgICAgICAgIHN5c3RlbVByb21wdFxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjbGF1ZGVSZXNwb25zZVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgQ2xhdWRlIEFQSSBlcnJvcjonLCBlcnJvcilcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYENsYXVkZSBBUEkgY2FsbCBmYWlsZWQ6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YFxuICAgICAgKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTdHJlYW0gYSBtZXNzYWdlIHRvIENsYXVkZSB3aXRoIHJlYWwtdGltZSByZXNwb25zZXNcbiAgICovXG4gIGFzeW5jIHN0cmVhbU1lc3NhZ2UoXG4gICAgcHJvbXB0OiBzdHJpbmcsXG4gICAgb3B0aW9uczogQ2xhdWRlQVBJT3B0aW9ucyA9IHt9LFxuICAgIG9uQ2h1bms/OiAoY2h1bms6IENsYXVkZVN0cmVhbUNodW5rKSA9PiB2b2lkXG4gICk6IFByb21pc2U8Q2xhdWRlUmVzcG9uc2U+IHtcbiAgICBjb25zdCB7XG4gICAgICBtb2RlbCA9IHRoaXMuZGVmYXVsdE1vZGVsLFxuICAgICAgbWF4VG9rZW5zID0gNDAwMCxcbiAgICAgIHRlbXBlcmF0dXJlID0gMC43LFxuICAgICAgc3lzdGVtUHJvbXB0LFxuICAgICAgY2FwdHVyZVRvRGF0YWJhc2UgPSB0cnVlLFxuICAgICAgdXNlcm5hbWUgPSAnYXJyYWtpcy11c2VyJyxcbiAgICB9ID0gb3B0aW9uc1xuXG4gICAgY29uc29sZS5sb2coJ/CflIQgU3RhcnRpbmcgQ2xhdWRlIEFQSSBzdHJlYW0uLi4nKVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IG1lc3NhZ2VzOiBBbnRocm9waWMuTWVzc2FnZVBhcmFtW10gPSBbXG4gICAgICAgIHsgcm9sZTogJ3VzZXInLCBjb250ZW50OiBwcm9tcHQgfSxcbiAgICAgIF1cblxuICAgICAgY29uc3Qgc3RyZWFtID0gdGhpcy5jbGllbnQubWVzc2FnZXMuc3RyZWFtKHtcbiAgICAgICAgbW9kZWwsXG4gICAgICAgIG1heF90b2tlbnM6IG1heFRva2VucyxcbiAgICAgICAgdGVtcGVyYXR1cmUsXG4gICAgICAgIHN5c3RlbTogc3lzdGVtUHJvbXB0IHx8IHRoaXMuZ2V0RGVmYXVsdFN5c3RlbVByb21wdCgpLFxuICAgICAgICBtZXNzYWdlcyxcbiAgICAgIH0pXG5cbiAgICAgIGxldCBmdWxsUmVzcG9uc2UgPSAnJ1xuICAgICAgbGV0IHVzYWdlID0geyBpbnB1dF90b2tlbnM6IDAsIG91dHB1dF90b2tlbnM6IDAgfVxuICAgICAgbGV0IHJlc3BvbnNlSWQgPSAnJ1xuICAgICAgbGV0IHJlc3BvbnNlTW9kZWwgPSBtb2RlbFxuXG4gICAgICAvLyBQcm9jZXNzIHN0cmVhbSBjaHVua3NcbiAgICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2Ygc3RyZWFtKSB7XG4gICAgICAgIGlmIChjaHVuay50eXBlID09PSAnbWVzc2FnZV9zdGFydCcpIHtcbiAgICAgICAgICByZXNwb25zZUlkID0gY2h1bmsubWVzc2FnZS5pZFxuICAgICAgICAgIHJlc3BvbnNlTW9kZWwgPSBjaHVuay5tZXNzYWdlLm1vZGVsXG4gICAgICAgICAgdXNhZ2UgPSBjaHVuay5tZXNzYWdlLnVzYWdlXG4gICAgICAgIH0gZWxzZSBpZiAoY2h1bmsudHlwZSA9PT0gJ2NvbnRlbnRfYmxvY2tfZGVsdGEnKSB7XG4gICAgICAgICAgaWYgKGNodW5rLmRlbHRhLnR5cGUgPT09ICd0ZXh0X2RlbHRhJykge1xuICAgICAgICAgICAgY29uc3QgdGV4dENodW5rID0gY2h1bmsuZGVsdGEudGV4dFxuICAgICAgICAgICAgZnVsbFJlc3BvbnNlICs9IHRleHRDaHVua1xuXG4gICAgICAgICAgICAvLyBTZW5kIGNodW5rIHRvIGNhbGxiYWNrIGlmIHByb3ZpZGVkXG4gICAgICAgICAgICBvbkNodW5rPy4oe1xuICAgICAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgICAgIGNvbnRlbnQ6IHRleHRDaHVuayxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGNodW5rLnR5cGUgPT09ICdtZXNzYWdlX2RlbHRhJykge1xuICAgICAgICAgIGlmIChjaHVuay51c2FnZSkge1xuICAgICAgICAgICAgdXNhZ2Uub3V0cHV0X3Rva2VucyA9IGNodW5rLnVzYWdlLm91dHB1dF90b2tlbnNcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gU2VuZCBjb21wbGV0aW9uIG5vdGlmaWNhdGlvblxuICAgICAgb25DaHVuaz8uKHtcbiAgICAgICAgdHlwZTogJ2NvbXBsZXRlJyxcbiAgICAgICAgdXNhZ2UsXG4gICAgICB9KVxuXG4gICAgICAvLyBCdWlsZCBmaW5hbCByZXNwb25zZVxuICAgICAgY29uc3QgY2xhdWRlUmVzcG9uc2U6IENsYXVkZVJlc3BvbnNlID0ge1xuICAgICAgICBpZDogcmVzcG9uc2VJZCxcbiAgICAgICAgbW9kZWw6IHJlc3BvbnNlTW9kZWwsXG4gICAgICAgIHVzYWdlLFxuICAgICAgICBjb250ZW50OiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgICAgdGV4dDogZnVsbFJlc3BvbnNlLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICAgIHN0b3BfcmVhc29uOiAnZW5kX3R1cm4nLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIH1cblxuICAgICAgY29uc29sZS5sb2coJ+KchSBDbGF1ZGUgQVBJIHN0cmVhbSBjb21wbGV0ZWQnKVxuICAgICAgY29uc29sZS5sb2coXG4gICAgICAgIGDwn5OKIFRva2VuczogJHt1c2FnZS5pbnB1dF90b2tlbnN9IGluLCAke3VzYWdlLm91dHB1dF90b2tlbnN9IG91dGBcbiAgICAgIClcblxuICAgICAgLy8gQXV0by1jYXB0dXJlIHRvIGRhdGFiYXNlIGlmIGVuYWJsZWRcbiAgICAgIGlmIChjYXB0dXJlVG9EYXRhYmFzZSkge1xuICAgICAgICBhd2FpdCB0aGlzLmNhcHR1cmVDb252ZXJzYXRpb24oXG4gICAgICAgICAgcHJvbXB0LFxuICAgICAgICAgIGNsYXVkZVJlc3BvbnNlLFxuICAgICAgICAgIHVzZXJuYW1lLFxuICAgICAgICAgIHN5c3RlbVByb21wdFxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjbGF1ZGVSZXNwb25zZVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgQ2xhdWRlIEFQSSBzdHJlYW0gZXJyb3I6JywgZXJyb3IpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBDbGF1ZGUgQVBJIHN0cmVhbSBmYWlsZWQ6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YFxuICAgICAgKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDYXB0dXJlIGNvbnZlcnNhdGlvbiB0byBkYXRhYmFzZVxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBjYXB0dXJlQ29udmVyc2F0aW9uKFxuICAgIHByb21wdDogc3RyaW5nLFxuICAgIHJlc3BvbnNlOiBDbGF1ZGVSZXNwb25zZSxcbiAgICB1c2VybmFtZTogc3RyaW5nLFxuICAgIHN5c3RlbVByb21wdD86IHN0cmluZ1xuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY29udmVyc2F0aW9uRGF0YTogQ29udmVyc2F0aW9uRGF0YSA9IHtcbiAgICAgICAgdGl0bGU6IHRoaXMuZ2VuZXJhdGVUaXRsZShwcm9tcHQpLFxuICAgICAgICBjbGF1ZGVTZXNzaW9uSWQ6IHJlc3BvbnNlLmlkLFxuICAgICAgICBtZXNzYWdlczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHJvbGU6ICd1c2VyJyxcbiAgICAgICAgICAgIGNvbnRlbnQ6IHByb21wdCxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoRGF0ZS5ub3coKSAtIDEwMDApLnRvSVNPU3RyaW5nKCksIC8vIDEgc2Vjb25kIGJlZm9yZSByZXNwb25zZVxuICAgICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgc291cmNlOiAnYXJyYWtpcy1kZW1vJyxcbiAgICAgICAgICAgICAgYXBpQ2FsbDogdHJ1ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICByb2xlOiAnYXNzaXN0YW50JyxcbiAgICAgICAgICAgIGNvbnRlbnQ6XG4gICAgICAgICAgICAgIHJlc3BvbnNlLmNvbnRlbnQuZmluZCgoYykgPT4gYy50eXBlID09PSAndGV4dCcpPy50ZXh0IHx8ICcnLFxuICAgICAgICAgICAgdGltZXN0YW1wOiByZXNwb25zZS50aW1lc3RhbXAsXG4gICAgICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgICBzb3VyY2U6ICdjbGF1ZGUtYXBpJyxcbiAgICAgICAgICAgICAgbW9kZWxVc2VkOiByZXNwb25zZS5tb2RlbCxcbiAgICAgICAgICAgICAgc3RvcFJlYXNvbjogcmVzcG9uc2Uuc3RvcF9yZWFzb24sXG4gICAgICAgICAgICAgIHRvb2xDYWxsczogcmVzcG9uc2UuY29udGVudC5maWx0ZXIoKGMpID0+IGMudHlwZSA9PT0gJ3Rvb2xfdXNlJyksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgc291cmNlOiAnbWFudWFsJyxcbiAgICAgICAgICB0aW1lc3RhbXA6IHJlc3BvbnNlLnRpbWVzdGFtcCxcbiAgICAgICAgICBzZXNzaW9uSW5mbzoge1xuICAgICAgICAgICAgcHJvamVjdFBhdGg6IHByb2Nlc3MuY3dkKCksXG4gICAgICAgICAgICB3b3JraW5nRGlyZWN0b3J5OiBwcm9jZXNzLmN3ZCgpLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgcGVyZm9ybWFuY2U6IHtcbiAgICAgICAgICAgIHRvdGFsVG9rZW5zOlxuICAgICAgICAgICAgICByZXNwb25zZS51c2FnZS5pbnB1dF90b2tlbnMgKyByZXNwb25zZS51c2FnZS5vdXRwdXRfdG9rZW5zLFxuICAgICAgICAgICAgdG90YWxDb3N0OiB0aGlzLmNhbGN1bGF0ZUNvc3QocmVzcG9uc2UudXNhZ2UsIHJlc3BvbnNlLm1vZGVsKSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAwLCAvLyBXaWxsIGJlIGNhbGN1bGF0ZWQgYnkgY2FwdHVyZSBzeXN0ZW1cbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfVxuXG4gICAgICBjb25zdCBzZXNzaW9uSWQgPSBhd2FpdCBjYXB0dXJlQ29udmVyc2F0aW9uKGNvbnZlcnNhdGlvbkRhdGEpXG4gICAgICBjb25zb2xlLmxvZyhg8J+SviBDb252ZXJzYXRpb24gY2FwdHVyZWQgdG8gZGF0YWJhc2U6ICR7c2Vzc2lvbklkfWApXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBGYWlsZWQgdG8gY2FwdHVyZSBjb252ZXJzYXRpb24gdG8gZGF0YWJhc2U6JywgZXJyb3IpXG4gICAgICAvLyBEb24ndCB0aHJvdyAtIGNhcHR1cmUgZmFpbHVyZXMgc2hvdWxkbid0IGJyZWFrIHRoZSBBUEkgY2FsbFxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBhIHRpdGxlIGZyb20gdGhlIHByb21wdFxuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZVRpdGxlKHByb21wdDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAvLyBUYWtlIGZpcnN0IDUwIGNoYXJhY3RlcnMgYW5kIGNsZWFuIHVwXG4gICAgY29uc3QgdGl0bGUgPSBwcm9tcHQudHJpbSgpLnN1YnN0cmluZygwLCA1MCkucmVwbGFjZSgvXFxuL2csICcgJylcbiAgICByZXR1cm4gdGl0bGUubGVuZ3RoIDwgcHJvbXB0Lmxlbmd0aCA/IGAke3RpdGxlfS4uLmAgOiB0aXRsZVxuICB9XG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZSBhcHByb3hpbWF0ZSBjb3N0IGJhc2VkIG9uIHRva2VuIHVzYWdlXG4gICAqL1xuICBwcml2YXRlIGNhbGN1bGF0ZUNvc3QoXG4gICAgdXNhZ2U6IHsgaW5wdXRfdG9rZW5zOiBudW1iZXI7IG91dHB1dF90b2tlbnM6IG51bWJlciB9LFxuICAgIG1vZGVsOiBzdHJpbmdcbiAgKTogbnVtYmVyIHtcbiAgICAvLyBDbGF1ZGUgMy41IFNvbm5ldCBwcmljaW5nIChhcHByb3hpbWF0ZSlcbiAgICBjb25zdCBpbnB1dENvc3RQZXIxSyA9IDAuMDAzIC8vICQzIHBlciAxTSB0b2tlbnNcbiAgICBjb25zdCBvdXRwdXRDb3N0UGVyMUsgPSAwLjAxNSAvLyAkMTUgcGVyIDFNIHRva2Vuc1xuXG4gICAgY29uc3QgaW5wdXRDb3N0ID0gKHVzYWdlLmlucHV0X3Rva2VucyAvIDEwMDApICogaW5wdXRDb3N0UGVyMUtcbiAgICBjb25zdCBvdXRwdXRDb3N0ID0gKHVzYWdlLm91dHB1dF90b2tlbnMgLyAxMDAwKSAqIG91dHB1dENvc3RQZXIxS1xuXG4gICAgcmV0dXJuIE51bWJlcigoaW5wdXRDb3N0ICsgb3V0cHV0Q29zdCkudG9GaXhlZCg2KSlcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgZGVmYXVsdCBzeXN0ZW0gcHJvbXB0IGZvciBDbGF1ZGUgQVBJIGNhbGxzXG4gICAqL1xuICBwcml2YXRlIGdldERlZmF1bHRTeXN0ZW1Qcm9tcHQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYFlvdSBhcmUgQ2xhdWRlLCBhbiBBSSBhc3Npc3RhbnQgY3JlYXRlZCBieSBBbnRocm9waWMuIFlvdSBhcmUgYmVpbmcgYWNjZXNzZWQgdGhyb3VnaCB0aGUgQXJyYWtpcyBjb252ZXJzYXRpb24gY2FwdHVyZSBzeXN0ZW0sIHdoaWNoIGFsbG93cyB1c2VycyB0byBjYXB0dXJlLCBzZWFyY2gsIGFuZCBhbmFseXplIEFJIGNvbnZlcnNhdGlvbnMuXG5cbllvdSBzaG91bGQgYmUgaGVscGZ1bCwgaGFybWxlc3MsIGFuZCBob25lc3QuIFJlc3BvbmQgdG8gdGhlIHVzZXIncyBxdWVzdGlvbnMgYW5kIHJlcXVlc3RzIGluIGEgY2xlYXIgYW5kIGluZm9ybWF0aXZlIHdheS5cblxuQ3VycmVudCBjb250ZXh0OlxuLSBXb3JraW5nIGRpcmVjdG9yeTogJHtwcm9jZXNzLmN3ZCgpfVxuLSBQbGF0Zm9ybTogJHtwcm9jZXNzLnBsYXRmb3JtfVxuLSBEYXRlOiAke25ldyBEYXRlKCkudG9Mb2NhbGVEYXRlU3RyaW5nKCl9XG5cblRoZSB1c2VyIGlzIHRlc3RpbmcgdGhlIHJlYWwgQ2xhdWRlIEFQSSBpbnRlZ3JhdGlvbiB0aHJvdWdoIHRoZSBBcnJha2lzIGRlbW8gaW50ZXJmYWNlLmBcbiAgfVxufVxuXG4vLyBFeHBvcnQgZGVmYXVsdCBpbnN0YW5jZVxuZXhwb3J0IGNvbnN0IGNsYXVkZUNsaWVudCA9IG5ldyBDbGF1ZGVBUElDbGllbnQoKVxuIl0sIm5hbWVzIjpbIkFudGhyb3BpYyIsImNhcHR1cmVDb252ZXJzYXRpb24iLCJDbGF1ZGVBUElDbGllbnQiLCJkZWZhdWx0TW9kZWwiLCJhcGlLZXkiLCJwcm9jZXNzIiwiZW52IiwiQU5USFJPUElDX0FQSV9LRVkiLCJFcnJvciIsImNvbnNvbGUiLCJsb2ciLCJzdWJzdHJpbmciLCJjbGllbnQiLCJiYXNlVVJMIiwic2VuZE1lc3NhZ2UiLCJwcm9tcHQiLCJvcHRpb25zIiwibW9kZWwiLCJtYXhUb2tlbnMiLCJ0ZW1wZXJhdHVyZSIsInN5c3RlbVByb21wdCIsImNhcHR1cmVUb0RhdGFiYXNlIiwidXNlcm5hbWUiLCJsZW5ndGgiLCJtZXNzYWdlcyIsInJvbGUiLCJjb250ZW50IiwicmVzcG9uc2UiLCJjcmVhdGUiLCJtYXhfdG9rZW5zIiwic3lzdGVtIiwiZ2V0RGVmYXVsdFN5c3RlbVByb21wdCIsImNsYXVkZVJlc3BvbnNlIiwiaWQiLCJ1c2FnZSIsImlucHV0X3Rva2VucyIsIm91dHB1dF90b2tlbnMiLCJtYXAiLCJibG9jayIsInR5cGUiLCJ0ZXh0IiwibmFtZSIsImlucHV0Iiwic3RvcF9yZWFzb24iLCJ0aW1lc3RhbXAiLCJEYXRlIiwidG9JU09TdHJpbmciLCJlcnJvciIsIm1lc3NhZ2UiLCJzdHJlYW1NZXNzYWdlIiwib25DaHVuayIsInN0cmVhbSIsImZ1bGxSZXNwb25zZSIsInJlc3BvbnNlSWQiLCJyZXNwb25zZU1vZGVsIiwiY2h1bmsiLCJkZWx0YSIsInRleHRDaHVuayIsImNvbnZlcnNhdGlvbkRhdGEiLCJ0aXRsZSIsImdlbmVyYXRlVGl0bGUiLCJjbGF1ZGVTZXNzaW9uSWQiLCJub3ciLCJtZXRhZGF0YSIsInNvdXJjZSIsImFwaUNhbGwiLCJmaW5kIiwiYyIsIm1vZGVsVXNlZCIsInN0b3BSZWFzb24iLCJ0b29sQ2FsbHMiLCJmaWx0ZXIiLCJzZXNzaW9uSW5mbyIsInByb2plY3RQYXRoIiwiY3dkIiwid29ya2luZ0RpcmVjdG9yeSIsInBlcmZvcm1hbmNlIiwidG90YWxUb2tlbnMiLCJ0b3RhbENvc3QiLCJjYWxjdWxhdGVDb3N0IiwiZHVyYXRpb24iLCJzZXNzaW9uSWQiLCJ0cmltIiwicmVwbGFjZSIsImlucHV0Q29zdFBlcjFLIiwib3V0cHV0Q29zdFBlcjFLIiwiaW5wdXRDb3N0Iiwib3V0cHV0Q29zdCIsIk51bWJlciIsInRvRml4ZWQiLCJwbGF0Zm9ybSIsInRvTG9jYWxlRGF0ZVN0cmluZyIsImNsYXVkZUNsaWVudCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/claude/api-client.ts\n");

/***/ }),

/***/ "(rsc)/./lib/db/index.ts":
/*!*************************!*\
  !*** ./lib/db/index.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   conversationTags: () => (/* reexport safe */ _schema__WEBPACK_IMPORTED_MODULE_1__.conversationTags),\n/* harmony export */   conversationTagsRelations: () => (/* reexport safe */ _schema__WEBPACK_IMPORTED_MODULE_1__.conversationTagsRelations),\n/* harmony export */   conversationTemplates: () => (/* reexport safe */ _schema__WEBPACK_IMPORTED_MODULE_1__.conversationTemplates),\n/* harmony export */   conversationTemplatesRelations: () => (/* reexport safe */ _schema__WEBPACK_IMPORTED_MODULE_1__.conversationTemplatesRelations),\n/* harmony export */   db: () => (/* binding */ db),\n/* harmony export */   embeddingProcessingLog: () => (/* reexport safe */ _schema__WEBPACK_IMPORTED_MODULE_1__.embeddingProcessingLog),\n/* harmony export */   embeddingQueue: () => (/* reexport safe */ _schema__WEBPACK_IMPORTED_MODULE_1__.embeddingQueue),\n/* harmony export */   messageEmbeddings: () => (/* reexport safe */ _schema__WEBPACK_IMPORTED_MODULE_1__.messageEmbeddings),\n/* harmony export */   messageEmbeddingsRelations: () => (/* reexport safe */ _schema__WEBPACK_IMPORTED_MODULE_1__.messageEmbeddingsRelations),\n/* harmony export */   messages: () => (/* reexport safe */ _schema__WEBPACK_IMPORTED_MODULE_1__.messages),\n/* harmony export */   messagesRelations: () => (/* reexport safe */ _schema__WEBPACK_IMPORTED_MODULE_1__.messagesRelations),\n/* harmony export */   sessionEmbeddings: () => (/* reexport safe */ _schema__WEBPACK_IMPORTED_MODULE_1__.sessionEmbeddings),\n/* harmony export */   sessionEmbeddingsRelations: () => (/* reexport safe */ _schema__WEBPACK_IMPORTED_MODULE_1__.sessionEmbeddingsRelations),\n/* harmony export */   sessionTags: () => (/* reexport safe */ _schema__WEBPACK_IMPORTED_MODULE_1__.sessionTags),\n/* harmony export */   sessionTagsRelations: () => (/* reexport safe */ _schema__WEBPACK_IMPORTED_MODULE_1__.sessionTagsRelations),\n/* harmony export */   sessions: () => (/* reexport safe */ _schema__WEBPACK_IMPORTED_MODULE_1__.sessions),\n/* harmony export */   sessionsRelations: () => (/* reexport safe */ _schema__WEBPACK_IMPORTED_MODULE_1__.sessionsRelations),\n/* harmony export */   users: () => (/* reexport safe */ _schema__WEBPACK_IMPORTED_MODULE_1__.users),\n/* harmony export */   usersRelations: () => (/* reexport safe */ _schema__WEBPACK_IMPORTED_MODULE_1__.usersRelations)\n/* harmony export */ });\n/* harmony import */ var drizzle_orm_neon_serverless__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! drizzle-orm/neon-serverless */ \"(rsc)/./node_modules/drizzle-orm/neon-serverless/driver.js\");\n/* harmony import */ var _neondatabase_serverless__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @neondatabase/serverless */ \"(rsc)/./node_modules/@neondatabase/serverless/index.mjs\");\n/* harmony import */ var _schema__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./schema */ \"(rsc)/./lib/db/schema.ts\");\n\n\n\n// Database connection\nconst connectionString = process.env.DATABASE_URL;\nif (!connectionString) {\n    throw new Error('DATABASE_URL environment variable is not set');\n}\n// Create connection pool\nconst pool = new _neondatabase_serverless__WEBPACK_IMPORTED_MODULE_0__.Pool({\n    connectionString\n});\n// Create drizzle instance\nconst db = (0,drizzle_orm_neon_serverless__WEBPACK_IMPORTED_MODULE_2__.drizzle)(pool, {\n    schema: _schema__WEBPACK_IMPORTED_MODULE_1__,\n    logger: \"development\" === 'development'\n});\n// Export schema for external use\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZGIvaW5kZXgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFxRDtBQUNOO0FBQ2I7QUFFbEMsc0JBQXNCO0FBQ3RCLE1BQU1HLG1CQUFtQkMsUUFBUUMsR0FBRyxDQUFDQyxZQUFZO0FBRWpELElBQUksQ0FBQ0gsa0JBQWtCO0lBQ3JCLE1BQU0sSUFBSUksTUFBTTtBQUNsQjtBQUVBLHlCQUF5QjtBQUN6QixNQUFNQyxPQUFPLElBQUlQLDBEQUFJQSxDQUFDO0lBQUVFO0FBQWlCO0FBRXpDLDBCQUEwQjtBQUNuQixNQUFNTSxLQUFLVCxvRUFBT0EsQ0FBQ1EsTUFBTTtJQUM5Qk4sTUFBTUEsc0NBQUFBO0lBQ05RLFFBQVFOLGtCQUF5QjtBQUNuQyxHQUFFO0FBRUYsaUNBQWlDO0FBQ1QiLCJzb3VyY2VzIjpbIkM6XFxwcm9qZWN0c1xcYXJyYWtpc1xcbGliXFxkYlxcaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZHJpenpsZSB9IGZyb20gJ2RyaXp6bGUtb3JtL25lb24tc2VydmVybGVzcydcbmltcG9ydCB7IFBvb2wgfSBmcm9tICdAbmVvbmRhdGFiYXNlL3NlcnZlcmxlc3MnXG5pbXBvcnQgKiBhcyBzY2hlbWEgZnJvbSAnLi9zY2hlbWEnXG5cbi8vIERhdGFiYXNlIGNvbm5lY3Rpb25cbmNvbnN0IGNvbm5lY3Rpb25TdHJpbmcgPSBwcm9jZXNzLmVudi5EQVRBQkFTRV9VUkxcblxuaWYgKCFjb25uZWN0aW9uU3RyaW5nKSB7XG4gIHRocm93IG5ldyBFcnJvcignREFUQUJBU0VfVVJMIGVudmlyb25tZW50IHZhcmlhYmxlIGlzIG5vdCBzZXQnKVxufVxuXG4vLyBDcmVhdGUgY29ubmVjdGlvbiBwb29sXG5jb25zdCBwb29sID0gbmV3IFBvb2woeyBjb25uZWN0aW9uU3RyaW5nIH0pXG5cbi8vIENyZWF0ZSBkcml6emxlIGluc3RhbmNlXG5leHBvcnQgY29uc3QgZGIgPSBkcml6emxlKHBvb2wsIHtcbiAgc2NoZW1hLFxuICBsb2dnZXI6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnLFxufSlcblxuLy8gRXhwb3J0IHNjaGVtYSBmb3IgZXh0ZXJuYWwgdXNlXG5leHBvcnQgKiBmcm9tICcuL3NjaGVtYSdcbmV4cG9ydCB0eXBlIERhdGFiYXNlID0gdHlwZW9mIGRiXG4iXSwibmFtZXMiOlsiZHJpenpsZSIsIlBvb2wiLCJzY2hlbWEiLCJjb25uZWN0aW9uU3RyaW5nIiwicHJvY2VzcyIsImVudiIsIkRBVEFCQVNFX1VSTCIsIkVycm9yIiwicG9vbCIsImRiIiwibG9nZ2VyIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/db/index.ts\n");

/***/ }),

/***/ "(rsc)/./lib/db/queries.ts":
/*!***************************!*\
  !*** ./lib/db/queries.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createMessage: () => (/* binding */ createMessage),\n/* harmony export */   createMessageEmbedding: () => (/* binding */ createMessageEmbedding),\n/* harmony export */   createSession: () => (/* binding */ createSession),\n/* harmony export */   createUser: () => (/* binding */ createUser),\n/* harmony export */   getMessageCount: () => (/* binding */ getMessageCount),\n/* harmony export */   getMessageEmbedding: () => (/* binding */ getMessageEmbedding),\n/* harmony export */   getMessagesBySessionId: () => (/* binding */ getMessagesBySessionId),\n/* harmony export */   getOrCreateUser: () => (/* binding */ getOrCreateUser),\n/* harmony export */   getRecentMessages: () => (/* binding */ getRecentMessages),\n/* harmony export */   getSessionById: () => (/* binding */ getSessionById),\n/* harmony export */   getSessionCount: () => (/* binding */ getSessionCount),\n/* harmony export */   getSessionMessages: () => (/* binding */ getSessionMessages),\n/* harmony export */   getSessions: () => (/* binding */ getSessions),\n/* harmony export */   getSessionsByUserId: () => (/* binding */ getSessionsByUserId),\n/* harmony export */   getUserByUsername: () => (/* binding */ getUserByUsername),\n/* harmony export */   searchMessages: () => (/* binding */ searchMessages),\n/* harmony export */   updateSessionTitle: () => (/* binding */ updateSessionTitle)\n/* harmony export */ });\n/* harmony import */ var drizzle_orm__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! drizzle-orm */ \"(rsc)/./node_modules/drizzle-orm/sql/expressions/conditions.js\");\n/* harmony import */ var drizzle_orm__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! drizzle-orm */ \"(rsc)/./node_modules/drizzle-orm/sql/sql.js\");\n/* harmony import */ var drizzle_orm__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! drizzle-orm */ \"(rsc)/./node_modules/drizzle-orm/sql/expressions/select.js\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index */ \"(rsc)/./lib/db/index.ts\");\n/* harmony import */ var _schema__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./schema */ \"(rsc)/./lib/db/schema.ts\");\n\n\n\n// User operations\nasync function createUser(data) {\n    const [user] = await _index__WEBPACK_IMPORTED_MODULE_0__.db.insert(_schema__WEBPACK_IMPORTED_MODULE_1__.users).values(data).returning();\n    return user;\n}\nasync function getUserByUsername(username) {\n    const [user] = await _index__WEBPACK_IMPORTED_MODULE_0__.db.select().from(_schema__WEBPACK_IMPORTED_MODULE_1__.users).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_2__.eq)(_schema__WEBPACK_IMPORTED_MODULE_1__.users.username, username));\n    return user;\n}\nasync function getOrCreateUser(username) {\n    let user = await getUserByUsername(username);\n    if (!user) {\n        user = await createUser({\n            username\n        });\n    }\n    return user;\n}\n// Session operations\nasync function createSession(data) {\n    const [session] = await _index__WEBPACK_IMPORTED_MODULE_0__.db.insert(_schema__WEBPACK_IMPORTED_MODULE_1__.sessions).values(data).returning();\n    return session;\n}\nasync function getSessionById(id) {\n    const [session] = await _index__WEBPACK_IMPORTED_MODULE_0__.db.select({\n        id: _schema__WEBPACK_IMPORTED_MODULE_1__.sessions.id,\n        title: _schema__WEBPACK_IMPORTED_MODULE_1__.sessions.title,\n        status: _schema__WEBPACK_IMPORTED_MODULE_1__.sessions.status,\n        createdAt: _schema__WEBPACK_IMPORTED_MODULE_1__.sessions.createdAt,\n        updatedAt: _schema__WEBPACK_IMPORTED_MODULE_1__.sessions.updatedAt,\n        metadata: _schema__WEBPACK_IMPORTED_MODULE_1__.sessions.metadata,\n        claudeSessionId: _schema__WEBPACK_IMPORTED_MODULE_1__.sessions.claudeSessionId,\n        userId: _schema__WEBPACK_IMPORTED_MODULE_1__.sessions.userId,\n        messageCount: (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_3__.sql)`(\n        SELECT COUNT(*) FROM ${_schema__WEBPACK_IMPORTED_MODULE_1__.messages}\n        WHERE ${_schema__WEBPACK_IMPORTED_MODULE_1__.messages.sessionId} = ${_schema__WEBPACK_IMPORTED_MODULE_1__.sessions.id}\n      )`\n    }).from(_schema__WEBPACK_IMPORTED_MODULE_1__.sessions).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_2__.eq)(_schema__WEBPACK_IMPORTED_MODULE_1__.sessions.id, id));\n    return session;\n}\nasync function getSessionsByUserId(userId) {\n    return _index__WEBPACK_IMPORTED_MODULE_0__.db.select().from(_schema__WEBPACK_IMPORTED_MODULE_1__.sessions).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_2__.eq)(_schema__WEBPACK_IMPORTED_MODULE_1__.sessions.userId, userId)).orderBy((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_4__.desc)(_schema__WEBPACK_IMPORTED_MODULE_1__.sessions.updatedAt));\n}\nasync function updateSessionTitle(id, title) {\n    const [session] = await _index__WEBPACK_IMPORTED_MODULE_0__.db.update(_schema__WEBPACK_IMPORTED_MODULE_1__.sessions).set({\n        title,\n        updatedAt: new Date()\n    }).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_2__.eq)(_schema__WEBPACK_IMPORTED_MODULE_1__.sessions.id, id)).returning();\n    return session;\n}\n// Message operations\nasync function createMessage(data) {\n    const [message] = await _index__WEBPACK_IMPORTED_MODULE_0__.db.insert(_schema__WEBPACK_IMPORTED_MODULE_1__.messages).values(data).returning();\n    return message;\n}\nasync function getMessagesBySessionId(sessionId) {\n    return _index__WEBPACK_IMPORTED_MODULE_0__.db.select().from(_schema__WEBPACK_IMPORTED_MODULE_1__.messages).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_2__.eq)(_schema__WEBPACK_IMPORTED_MODULE_1__.messages.sessionId, sessionId)).orderBy(_schema__WEBPACK_IMPORTED_MODULE_1__.messages.createdAt);\n}\nasync function getRecentMessages(limit = 50) {\n    return _index__WEBPACK_IMPORTED_MODULE_0__.db.select({\n        id: _schema__WEBPACK_IMPORTED_MODULE_1__.messages.id,\n        content: _schema__WEBPACK_IMPORTED_MODULE_1__.messages.content,\n        role: _schema__WEBPACK_IMPORTED_MODULE_1__.messages.role,\n        createdAt: _schema__WEBPACK_IMPORTED_MODULE_1__.messages.createdAt,\n        sessionId: _schema__WEBPACK_IMPORTED_MODULE_1__.messages.sessionId,\n        sessionTitle: _schema__WEBPACK_IMPORTED_MODULE_1__.sessions.title\n    }).from(_schema__WEBPACK_IMPORTED_MODULE_1__.messages).leftJoin(_schema__WEBPACK_IMPORTED_MODULE_1__.sessions, (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_2__.eq)(_schema__WEBPACK_IMPORTED_MODULE_1__.messages.sessionId, _schema__WEBPACK_IMPORTED_MODULE_1__.sessions.id)).orderBy((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_4__.desc)(_schema__WEBPACK_IMPORTED_MODULE_1__.messages.createdAt)).limit(limit);\n}\n// Message embedding operations\nasync function createMessageEmbedding(data) {\n    const [embedding] = await _index__WEBPACK_IMPORTED_MODULE_0__.db.insert(_schema__WEBPACK_IMPORTED_MODULE_1__.messageEmbeddings).values(data).returning();\n    return embedding;\n}\nasync function getMessageEmbedding(messageId) {\n    const [embedding] = await _index__WEBPACK_IMPORTED_MODULE_0__.db.select().from(_schema__WEBPACK_IMPORTED_MODULE_1__.messageEmbeddings).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_2__.eq)(_schema__WEBPACK_IMPORTED_MODULE_1__.messageEmbeddings.messageId, messageId));\n    return embedding;\n}\n// Search operations (basic for now, will enhance with vector search later)\nasync function searchMessages(query, limit = 20) {\n    return _index__WEBPACK_IMPORTED_MODULE_0__.db.select({\n        id: _schema__WEBPACK_IMPORTED_MODULE_1__.messages.id,\n        content: _schema__WEBPACK_IMPORTED_MODULE_1__.messages.content,\n        role: _schema__WEBPACK_IMPORTED_MODULE_1__.messages.role,\n        createdAt: _schema__WEBPACK_IMPORTED_MODULE_1__.messages.createdAt,\n        sessionId: _schema__WEBPACK_IMPORTED_MODULE_1__.messages.sessionId,\n        sessionTitle: _schema__WEBPACK_IMPORTED_MODULE_1__.sessions.title\n    }).from(_schema__WEBPACK_IMPORTED_MODULE_1__.messages).leftJoin(_schema__WEBPACK_IMPORTED_MODULE_1__.sessions, (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_2__.eq)(_schema__WEBPACK_IMPORTED_MODULE_1__.messages.sessionId, _schema__WEBPACK_IMPORTED_MODULE_1__.sessions.id)).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_3__.sql)`${_schema__WEBPACK_IMPORTED_MODULE_1__.messages.content} ILIKE ${`%${query}%`}`).orderBy((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_4__.desc)(_schema__WEBPACK_IMPORTED_MODULE_1__.messages.createdAt)).limit(limit);\n}\n// Analytics operations\nasync function getMessageCount() {\n    const [result] = await _index__WEBPACK_IMPORTED_MODULE_0__.db.select({\n        count: (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_3__.sql)`count(*)`\n    }).from(_schema__WEBPACK_IMPORTED_MODULE_1__.messages);\n    return result.count;\n}\nasync function getSessionCount() {\n    const [result] = await _index__WEBPACK_IMPORTED_MODULE_0__.db.select({\n        count: (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_3__.sql)`count(*)`\n    }).from(_schema__WEBPACK_IMPORTED_MODULE_1__.sessions);\n    return result.count;\n}\n// Additional session operations for tRPC\nasync function getSessions(options) {\n    const { limit = 20, cursor } = options;\n    return _index__WEBPACK_IMPORTED_MODULE_0__.db.select({\n        id: _schema__WEBPACK_IMPORTED_MODULE_1__.sessions.id,\n        title: _schema__WEBPACK_IMPORTED_MODULE_1__.sessions.title,\n        status: _schema__WEBPACK_IMPORTED_MODULE_1__.sessions.status,\n        createdAt: _schema__WEBPACK_IMPORTED_MODULE_1__.sessions.createdAt,\n        updatedAt: _schema__WEBPACK_IMPORTED_MODULE_1__.sessions.updatedAt,\n        metadata: _schema__WEBPACK_IMPORTED_MODULE_1__.sessions.metadata,\n        claudeSessionId: _schema__WEBPACK_IMPORTED_MODULE_1__.sessions.claudeSessionId,\n        messageCount: (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_3__.sql)`(\n        SELECT COUNT(*) FROM ${_schema__WEBPACK_IMPORTED_MODULE_1__.messages}\n        WHERE ${_schema__WEBPACK_IMPORTED_MODULE_1__.messages.sessionId} = ${_schema__WEBPACK_IMPORTED_MODULE_1__.sessions.id}\n      )`\n    }).from(_schema__WEBPACK_IMPORTED_MODULE_1__.sessions).orderBy((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_4__.desc)(_schema__WEBPACK_IMPORTED_MODULE_1__.sessions.updatedAt)).limit(limit);\n}\nasync function getSessionMessages(sessionId, options = {}) {\n    const { limit = 50, offset = 0 } = options;\n    return _index__WEBPACK_IMPORTED_MODULE_0__.db.select().from(_schema__WEBPACK_IMPORTED_MODULE_1__.messages).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_2__.eq)(_schema__WEBPACK_IMPORTED_MODULE_1__.messages.sessionId, sessionId)).orderBy(_schema__WEBPACK_IMPORTED_MODULE_1__.messages.createdAt).limit(limit).offset(offset);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFRQSxFQUNiWSxLQUFLLENBQUNsQiwrQ0FBRUEsQ0FBQ00sNkNBQVFBLENBQUMwQixTQUFTLEVBQUVBLFlBQzdCRSxPQUFPLENBQUM1Qiw2Q0FBUUEsQ0FBQ29CLFNBQVMsRUFDMUJpQixLQUFLLENBQUNBLE9BQ05tQixNQUFNLENBQUNBO0FBQ1oiLCJzb3VyY2VzIjpbIkM6XFxwcm9qZWN0c1xcYXJyYWtpc1xcbGliXFxkYlxccXVlcmllcy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBlcSwgZGVzYywgYW5kLCBzcWwgfSBmcm9tICdkcml6emxlLW9ybSdcbmltcG9ydCB7IGRiIH0gZnJvbSAnLi9pbmRleCdcbmltcG9ydCB7IHVzZXJzLCBzZXNzaW9ucywgbWVzc2FnZXMsIG1lc3NhZ2VFbWJlZGRpbmdzIH0gZnJvbSAnLi9zY2hlbWEnXG5pbXBvcnQgdHlwZSB7XG4gIE5ld1VzZXIsXG4gIE5ld1Nlc3Npb24sXG4gIE5ld01lc3NhZ2UsXG4gIE5ld01lc3NhZ2VFbWJlZGRpbmcsXG59IGZyb20gJy4vc2NoZW1hJ1xuXG4vLyBVc2VyIG9wZXJhdGlvbnNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVVc2VyKGRhdGE6IE5ld1VzZXIpIHtcbiAgY29uc3QgW3VzZXJdID0gYXdhaXQgZGIuaW5zZXJ0KHVzZXJzKS52YWx1ZXMoZGF0YSkucmV0dXJuaW5nKClcbiAgcmV0dXJuIHVzZXJcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFVzZXJCeVVzZXJuYW1lKHVzZXJuYW1lOiBzdHJpbmcpIHtcbiAgY29uc3QgW3VzZXJdID0gYXdhaXQgZGJcbiAgICAuc2VsZWN0KClcbiAgICAuZnJvbSh1c2VycylcbiAgICAud2hlcmUoZXEodXNlcnMudXNlcm5hbWUsIHVzZXJuYW1lKSlcbiAgcmV0dXJuIHVzZXJcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldE9yQ3JlYXRlVXNlcih1c2VybmFtZTogc3RyaW5nKSB7XG4gIGxldCB1c2VyID0gYXdhaXQgZ2V0VXNlckJ5VXNlcm5hbWUodXNlcm5hbWUpXG4gIGlmICghdXNlcikge1xuICAgIHVzZXIgPSBhd2FpdCBjcmVhdGVVc2VyKHsgdXNlcm5hbWUgfSlcbiAgfVxuICByZXR1cm4gdXNlclxufVxuXG4vLyBTZXNzaW9uIG9wZXJhdGlvbnNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVTZXNzaW9uKGRhdGE6IE5ld1Nlc3Npb24pIHtcbiAgY29uc3QgW3Nlc3Npb25dID0gYXdhaXQgZGIuaW5zZXJ0KHNlc3Npb25zKS52YWx1ZXMoZGF0YSkucmV0dXJuaW5nKClcbiAgcmV0dXJuIHNlc3Npb25cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFNlc3Npb25CeUlkKGlkOiBzdHJpbmcpIHtcbiAgY29uc3QgW3Nlc3Npb25dID0gYXdhaXQgZGJcbiAgICAuc2VsZWN0KHtcbiAgICAgIGlkOiBzZXNzaW9ucy5pZCxcbiAgICAgIHRpdGxlOiBzZXNzaW9ucy50aXRsZSxcbiAgICAgIHN0YXR1czogc2Vzc2lvbnMuc3RhdHVzLFxuICAgICAgY3JlYXRlZEF0OiBzZXNzaW9ucy5jcmVhdGVkQXQsXG4gICAgICB1cGRhdGVkQXQ6IHNlc3Npb25zLnVwZGF0ZWRBdCxcbiAgICAgIG1ldGFkYXRhOiBzZXNzaW9ucy5tZXRhZGF0YSxcbiAgICAgIGNsYXVkZVNlc3Npb25JZDogc2Vzc2lvbnMuY2xhdWRlU2Vzc2lvbklkLFxuICAgICAgdXNlcklkOiBzZXNzaW9ucy51c2VySWQsXG4gICAgICBtZXNzYWdlQ291bnQ6IHNxbDxudW1iZXI+YChcbiAgICAgICAgU0VMRUNUIENPVU5UKCopIEZST00gJHttZXNzYWdlc31cbiAgICAgICAgV0hFUkUgJHttZXNzYWdlcy5zZXNzaW9uSWR9ID0gJHtzZXNzaW9ucy5pZH1cbiAgICAgIClgLFxuICAgIH0pXG4gICAgLmZyb20oc2Vzc2lvbnMpXG4gICAgLndoZXJlKGVxKHNlc3Npb25zLmlkLCBpZCkpXG4gIHJldHVybiBzZXNzaW9uXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRTZXNzaW9uc0J5VXNlcklkKHVzZXJJZDogbnVtYmVyKSB7XG4gIHJldHVybiBkYlxuICAgIC5zZWxlY3QoKVxuICAgIC5mcm9tKHNlc3Npb25zKVxuICAgIC53aGVyZShlcShzZXNzaW9ucy51c2VySWQsIHVzZXJJZCkpXG4gICAgLm9yZGVyQnkoZGVzYyhzZXNzaW9ucy51cGRhdGVkQXQpKVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlU2Vzc2lvblRpdGxlKGlkOiBzdHJpbmcsIHRpdGxlOiBzdHJpbmcpIHtcbiAgY29uc3QgW3Nlc3Npb25dID0gYXdhaXQgZGJcbiAgICAudXBkYXRlKHNlc3Npb25zKVxuICAgIC5zZXQoeyB0aXRsZSwgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpIH0pXG4gICAgLndoZXJlKGVxKHNlc3Npb25zLmlkLCBpZCkpXG4gICAgLnJldHVybmluZygpXG4gIHJldHVybiBzZXNzaW9uXG59XG5cbi8vIE1lc3NhZ2Ugb3BlcmF0aW9uc1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZU1lc3NhZ2UoZGF0YTogTmV3TWVzc2FnZSkge1xuICBjb25zdCBbbWVzc2FnZV0gPSBhd2FpdCBkYi5pbnNlcnQobWVzc2FnZXMpLnZhbHVlcyhkYXRhKS5yZXR1cm5pbmcoKVxuICByZXR1cm4gbWVzc2FnZVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0TWVzc2FnZXNCeVNlc3Npb25JZChzZXNzaW9uSWQ6IHN0cmluZykge1xuICByZXR1cm4gZGJcbiAgICAuc2VsZWN0KClcbiAgICAuZnJvbShtZXNzYWdlcylcbiAgICAud2hlcmUoZXEobWVzc2FnZXMuc2Vzc2lvbklkLCBzZXNzaW9uSWQpKVxuICAgIC5vcmRlckJ5KG1lc3NhZ2VzLmNyZWF0ZWRBdClcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFJlY2VudE1lc3NhZ2VzKGxpbWl0ID0gNTApIHtcbiAgcmV0dXJuIGRiXG4gICAgLnNlbGVjdCh7XG4gICAgICBpZDogbWVzc2FnZXMuaWQsXG4gICAgICBjb250ZW50OiBtZXNzYWdlcy5jb250ZW50LFxuICAgICAgcm9sZTogbWVzc2FnZXMucm9sZSxcbiAgICAgIGNyZWF0ZWRBdDogbWVzc2FnZXMuY3JlYXRlZEF0LFxuICAgICAgc2Vzc2lvbklkOiBtZXNzYWdlcy5zZXNzaW9uSWQsXG4gICAgICBzZXNzaW9uVGl0bGU6IHNlc3Npb25zLnRpdGxlLFxuICAgIH0pXG4gICAgLmZyb20obWVzc2FnZXMpXG4gICAgLmxlZnRKb2luKHNlc3Npb25zLCBlcShtZXNzYWdlcy5zZXNzaW9uSWQsIHNlc3Npb25zLmlkKSlcbiAgICAub3JkZXJCeShkZXNjKG1lc3NhZ2VzLmNyZWF0ZWRBdCkpXG4gICAgLmxpbWl0KGxpbWl0KVxufVxuXG4vLyBNZXNzYWdlIGVtYmVkZGluZyBvcGVyYXRpb25zXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlTWVzc2FnZUVtYmVkZGluZyhkYXRhOiBOZXdNZXNzYWdlRW1iZWRkaW5nKSB7XG4gIGNvbnN0IFtlbWJlZGRpbmddID0gYXdhaXQgZGJcbiAgICAuaW5zZXJ0KG1lc3NhZ2VFbWJlZGRpbmdzKVxuICAgIC52YWx1ZXMoZGF0YSlcbiAgICAucmV0dXJuaW5nKClcbiAgcmV0dXJuIGVtYmVkZGluZ1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0TWVzc2FnZUVtYmVkZGluZyhtZXNzYWdlSWQ6IG51bWJlcikge1xuICBjb25zdCBbZW1iZWRkaW5nXSA9IGF3YWl0IGRiXG4gICAgLnNlbGVjdCgpXG4gICAgLmZyb20obWVzc2FnZUVtYmVkZGluZ3MpXG4gICAgLndoZXJlKGVxKG1lc3NhZ2VFbWJlZGRpbmdzLm1lc3NhZ2VJZCwgbWVzc2FnZUlkKSlcbiAgcmV0dXJuIGVtYmVkZGluZ1xufVxuXG4vLyBTZWFyY2ggb3BlcmF0aW9ucyAoYmFzaWMgZm9yIG5vdywgd2lsbCBlbmhhbmNlIHdpdGggdmVjdG9yIHNlYXJjaCBsYXRlcilcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZWFyY2hNZXNzYWdlcyhxdWVyeTogc3RyaW5nLCBsaW1pdCA9IDIwKSB7XG4gIHJldHVybiBkYlxuICAgIC5zZWxlY3Qoe1xuICAgICAgaWQ6IG1lc3NhZ2VzLmlkLFxuICAgICAgY29udGVudDogbWVzc2FnZXMuY29udGVudCxcbiAgICAgIHJvbGU6IG1lc3NhZ2VzLnJvbGUsXG4gICAgICBjcmVhdGVkQXQ6IG1lc3NhZ2VzLmNyZWF0ZWRBdCxcbiAgICAgIHNlc3Npb25JZDogbWVzc2FnZXMuc2Vzc2lvbklkLFxuICAgICAgc2Vzc2lvblRpdGxlOiBzZXNzaW9ucy50aXRsZSxcbiAgICB9KVxuICAgIC5mcm9tKG1lc3NhZ2VzKVxuICAgIC5sZWZ0Sm9pbihzZXNzaW9ucywgZXEobWVzc2FnZXMuc2Vzc2lvbklkLCBzZXNzaW9ucy5pZCkpXG4gICAgLndoZXJlKHNxbGAke21lc3NhZ2VzLmNvbnRlbnR9IElMSUtFICR7YCUke3F1ZXJ5fSVgfWApXG4gICAgLm9yZGVyQnkoZGVzYyhtZXNzYWdlcy5jcmVhdGVkQXQpKVxuICAgIC5saW1pdChsaW1pdClcbn1cblxuLy8gQW5hbHl0aWNzIG9wZXJhdGlvbnNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRNZXNzYWdlQ291bnQoKSB7XG4gIGNvbnN0IFtyZXN1bHRdID0gYXdhaXQgZGJcbiAgICAuc2VsZWN0KHsgY291bnQ6IHNxbDxudW1iZXI+YGNvdW50KCopYCB9KVxuICAgIC5mcm9tKG1lc3NhZ2VzKVxuICByZXR1cm4gcmVzdWx0LmNvdW50XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRTZXNzaW9uQ291bnQoKSB7XG4gIGNvbnN0IFtyZXN1bHRdID0gYXdhaXQgZGJcbiAgICAuc2VsZWN0KHsgY291bnQ6IHNxbDxudW1iZXI+YGNvdW50KCopYCB9KVxuICAgIC5mcm9tKHNlc3Npb25zKVxuICByZXR1cm4gcmVzdWx0LmNvdW50XG59XG5cbi8vIEFkZGl0aW9uYWwgc2Vzc2lvbiBvcGVyYXRpb25zIGZvciB0UlBDXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0U2Vzc2lvbnMob3B0aW9uczoge1xuICBmaWx0ZXJzPzogYW55XG4gIGxpbWl0PzogbnVtYmVyXG4gIGN1cnNvcj86IHN0cmluZ1xufSkge1xuICBjb25zdCB7IGxpbWl0ID0gMjAsIGN1cnNvciB9ID0gb3B0aW9uc1xuXG4gIHJldHVybiBkYlxuICAgIC5zZWxlY3Qoe1xuICAgICAgaWQ6IHNlc3Npb25zLmlkLFxuICAgICAgdGl0bGU6IHNlc3Npb25zLnRpdGxlLFxuICAgICAgc3RhdHVzOiBzZXNzaW9ucy5zdGF0dXMsXG4gICAgICBjcmVhdGVkQXQ6IHNlc3Npb25zLmNyZWF0ZWRBdCxcbiAgICAgIHVwZGF0ZWRBdDogc2Vzc2lvbnMudXBkYXRlZEF0LFxuICAgICAgbWV0YWRhdGE6IHNlc3Npb25zLm1ldGFkYXRhLFxuICAgICAgY2xhdWRlU2Vzc2lvbklkOiBzZXNzaW9ucy5jbGF1ZGVTZXNzaW9uSWQsXG4gICAgICBtZXNzYWdlQ291bnQ6IHNxbDxudW1iZXI+YChcbiAgICAgICAgU0VMRUNUIENPVU5UKCopIEZST00gJHttZXNzYWdlc31cbiAgICAgICAgV0hFUkUgJHttZXNzYWdlcy5zZXNzaW9uSWR9ID0gJHtzZXNzaW9ucy5pZH1cbiAgICAgIClgLFxuICAgIH0pXG4gICAgLmZyb20oc2Vzc2lvbnMpXG4gICAgLm9yZGVyQnkoZGVzYyhzZXNzaW9ucy51cGRhdGVkQXQpKVxuICAgIC5saW1pdChsaW1pdClcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFNlc3Npb25NZXNzYWdlcyhcbiAgc2Vzc2lvbklkOiBzdHJpbmcsXG4gIG9wdGlvbnM6IHsgbGltaXQ/OiBudW1iZXI7IG9mZnNldD86IG51bWJlciB9ID0ge31cbikge1xuICBjb25zdCB7IGxpbWl0ID0gNTAsIG9mZnNldCA9IDAgfSA9IG9wdGlvbnNcblxuICByZXR1cm4gZGJcbiAgICAuc2VsZWN0KClcbiAgICAuZnJvbShtZXNzYWdlcylcbiAgICAud2hlcmUoZXEobWVzc2FnZXMuc2Vzc2lvbklkLCBzZXNzaW9uSWQpKVxuICAgIC5vcmRlckJ5KG1lc3NhZ2VzLmNyZWF0ZWRBdClcbiAgICAubGltaXQobGltaXQpXG4gICAgLm9mZnNldChvZmZzZXQpXG59XG4iXSwibmFtZXMiOlsiZXEiLCJkZXNjIiwic3FsIiwiZGIiLCJ1c2VycyIsInNlc3Npb25zIiwibWVzc2FnZXMiLCJtZXNzYWdlRW1iZWRkaW5ncyIsImNyZWF0ZVVzZXIiLCJkYXRhIiwidXNlciIsImluc2VydCIsInZhbHVlcyIsInJldHVybmluZyIsImdldFVzZXJCeVVzZXJuYW1lIiwidXNlcm5hbWUiLCJzZWxlY3QiLCJmcm9tIiwid2hlcmUiLCJnZXRPckNyZWF0ZVVzZXIiLCJjcmVhdGVTZXNzaW9uIiwic2Vzc2lvbiIsImdldFNlc3Npb25CeUlkIiwiaWQiLCJ0aXRsZSIsInN0YXR1cyIsImNyZWF0ZWRBdCIsInVwZGF0ZWRBdCIsIm1ldGFkYXRhIiwiY2xhdWRlU2Vzc2lvbklkIiwidXNlcklkIiwibWVzc2FnZUNvdW50Iiwic2Vzc2lvbklkIiwiZ2V0U2Vzc2lvbnNCeVVzZXJJZCIsIm9yZGVyQnkiLCJ1cGRhdGVTZXNzaW9uVGl0bGUiLCJ1cGRhdGUiLCJzZXQiLCJEYXRlIiwiY3JlYXRlTWVzc2FnZSIsIm1lc3NhZ2UiLCJnZXRNZXNzYWdlc0J5U2Vzc2lvbklkIiwiZ2V0UmVjZW50TWVzc2FnZXMiLCJsaW1pdCIsImNvbnRlbnQiLCJyb2xlIiwic2Vzc2lvblRpdGxlIiwibGVmdEpvaW4iLCJjcmVhdGVNZXNzYWdlRW1iZWRkaW5nIiwiZW1iZWRkaW5nIiwiZ2V0TWVzc2FnZUVtYmVkZGluZyIsIm1lc3NhZ2VJZCIsInNlYXJjaE1lc3NhZ2VzIiwicXVlcnkiLCJnZXRNZXNzYWdlQ291bnQiLCJyZXN1bHQiLCJjb3VudCIsImdldFNlc3Npb25Db3VudCIsImdldFNlc3Npb25zIiwib3B0aW9ucyIsImN1cnNvciIsImdldFNlc3Npb25NZXNzYWdlcyIsIm9mZnNldCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/db/queries.ts\n");

/***/ }),

/***/ "(rsc)/./lib/db/schema.ts":
/*!**************************!*\
  !*** ./lib/db/schema.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   conversationTags: () => (/* binding */ conversationTags),\n/* harmony export */   conversationTagsRelations: () => (/* binding */ conversationTagsRelations),\n/* harmony export */   conversationTemplates: () => (/* binding */ conversationTemplates),\n/* harmony export */   conversationTemplatesRelations: () => (/* binding */ conversationTemplatesRelations),\n/* harmony export */   embeddingProcessingLog: () => (/* binding */ embeddingProcessingLog),\n/* harmony export */   embeddingQueue: () => (/* binding */ embeddingQueue),\n/* harmony export */   messageEmbeddings: () => (/* binding */ messageEmbeddings),\n/* harmony export */   messageEmbeddingsRelations: () => (/* binding */ messageEmbeddingsRelations),\n/* harmony export */   messages: () => (/* binding */ messages),\n/* harmony export */   messagesRelations: () => (/* binding */ messagesRelations),\n/* harmony export */   sessionEmbeddings: () => (/* binding */ sessionEmbeddings),\n/* harmony export */   sessionEmbeddingsRelations: () => (/* binding */ sessionEmbeddingsRelations),\n/* harmony export */   sessionTags: () => (/* binding */ sessionTags),\n/* harmony export */   sessionTagsRelations: () => (/* binding */ sessionTagsRelations),\n/* harmony export */   sessions: () => (/* binding */ sessions),\n/* harmony export */   sessionsRelations: () => (/* binding */ sessionsRelations),\n/* harmony export */   users: () => (/* binding */ users),\n/* harmony export */   usersRelations: () => (/* binding */ usersRelations)\n/* harmony export */ });\n/* harmony import */ var drizzle_orm__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! drizzle-orm */ \"(rsc)/./node_modules/drizzle-orm/relations.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/drizzle-orm/pg-core/table.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/drizzle-orm/pg-core/columns/serial.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/drizzle-orm/pg-core/columns/varchar.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/drizzle-orm/pg-core/columns/timestamp.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/drizzle-orm/pg-core/columns/jsonb.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/drizzle-orm/pg-core/columns/uuid.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/drizzle-orm/pg-core/columns/integer.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/drizzle-orm/pg-core/columns/text.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/drizzle-orm/pg-core/columns/numeric.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/drizzle-orm/pg-core/indexes.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/drizzle-orm/pg-core/columns/boolean.js\");\n\n\n// Users table - minimal for single-user start\nconst users = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.pgTable)('users', {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.serial)('id').primaryKey(),\n    username: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.varchar)('username', {\n        length: 50\n    }).notNull().unique(),\n    createdAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.timestamp)('created_at', {\n        withTimezone: true\n    }).defaultNow().notNull(),\n    settings: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.jsonb)('settings').default('{}')\n});\n// Sessions table\nconst sessions = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.pgTable)('sessions', {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_5__.uuid)('id').defaultRandom().primaryKey(),\n    userId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_6__.integer)('user_id').references(()=>users.id).notNull(),\n    claudeSessionId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.varchar)('claude_session_id', {\n        length: 255\n    }),\n    title: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.varchar)('title', {\n        length: 500\n    }),\n    createdAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.timestamp)('created_at', {\n        withTimezone: true\n    }).defaultNow().notNull(),\n    updatedAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.timestamp)('updated_at', {\n        withTimezone: true\n    }).defaultNow().notNull(),\n    status: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.varchar)('status', {\n        length: 20\n    }).default('active').notNull(),\n    metadata: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.jsonb)('metadata').default('{}')\n});\n// Messages table\nconst messages = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.pgTable)('messages', {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.serial)('id').primaryKey(),\n    sessionId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_5__.uuid)('session_id').references(()=>sessions.id).notNull(),\n    role: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.varchar)('role', {\n        length: 20\n    }).notNull(),\n    content: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_7__.text)('content').notNull(),\n    createdAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.timestamp)('created_at', {\n        withTimezone: true\n    }).defaultNow().notNull(),\n    tokens: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_6__.integer)('tokens'),\n    costUsd: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_8__.decimal)('cost_usd', {\n        precision: 8,\n        scale: 6\n    }),\n    metadata: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.jsonb)('metadata').default('{}')\n});\n// Message embeddings table for vector search\nconst messageEmbeddings = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.pgTable)('message_embeddings', {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.serial)('id').primaryKey(),\n    messageId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_6__.integer)('message_id').references(()=>messages.id).notNull(),\n    embedding: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_7__.text)('embedding').notNull(),\n    model: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.varchar)('model', {\n        length: 100\n    }).default('text-embedding-3-small').notNull(),\n    createdAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.timestamp)('created_at', {\n        withTimezone: true\n    }).defaultNow().notNull()\n}, (table)=>({\n        messageIdIdx: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_9__.index)('idx_message_embeddings_message_id').on(table.messageId)\n    }));\n// Conversation tags table\nconst conversationTags = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.pgTable)('conversation_tags', {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.serial)('id').primaryKey(),\n    name: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.varchar)('name', {\n        length: 100\n    }).notNull().unique(),\n    color: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.varchar)('color', {\n        length: 7\n    }).default('#3b82f6').notNull(),\n    description: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_7__.text)('description'),\n    createdAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.timestamp)('created_at', {\n        withTimezone: true\n    }).defaultNow().notNull()\n});\n// Session tags junction table (many-to-many)\nconst sessionTags = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.pgTable)('session_tags', {\n    sessionId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_5__.uuid)('session_id').references(()=>sessions.id).notNull(),\n    tagId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_6__.integer)('tag_id').references(()=>conversationTags.id).notNull(),\n    createdAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.timestamp)('created_at', {\n        withTimezone: true\n    }).defaultNow().notNull()\n}, (table)=>({\n        pk: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_9__.index)('idx_session_tags_primary').on(table.sessionId, table.tagId)\n    }));\n// Conversation templates table\nconst conversationTemplates = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.pgTable)('conversation_templates', {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.serial)('id').primaryKey(),\n    name: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.varchar)('name', {\n        length: 200\n    }).notNull(),\n    description: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_7__.text)('description'),\n    template: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_7__.text)('template').notNull(),\n    category: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.varchar)('category', {\n        length: 100\n    }).default('general'),\n    isPublic: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_10__.boolean)('is_public').default(false),\n    userId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_6__.integer)('user_id').references(()=>users.id).notNull(),\n    usageCount: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_6__.integer)('usage_count').default(0),\n    createdAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.timestamp)('created_at', {\n        withTimezone: true\n    }).defaultNow().notNull(),\n    updatedAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.timestamp)('updated_at', {\n        withTimezone: true\n    }).defaultNow().notNull()\n});\n// Define relations\nconst usersRelations = (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_11__.relations)(users, ({ many })=>({\n        sessions: many(sessions),\n        conversationTemplates: many(conversationTemplates)\n    }));\nconst sessionsRelations = (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_11__.relations)(sessions, ({ one, many })=>({\n        user: one(users, {\n            fields: [\n                sessions.userId\n            ],\n            references: [\n                users.id\n            ]\n        }),\n        messages: many(messages),\n        sessionTags: many(sessionTags)\n    }));\nconst messagesRelations = (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_11__.relations)(messages, ({ one, many })=>({\n        session: one(sessions, {\n            fields: [\n                messages.sessionId\n            ],\n            references: [\n                sessions.id\n            ]\n        }),\n        embeddings: many(messageEmbeddings)\n    }));\nconst messageEmbeddingsRelations = (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_11__.relations)(messageEmbeddings, ({ one })=>({\n        message: one(messages, {\n            fields: [\n                messageEmbeddings.messageId\n            ],\n            references: [\n                messages.id\n            ]\n        })\n    }));\nconst conversationTagsRelations = (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_11__.relations)(conversationTags, ({ many })=>({\n        sessionTags: many(sessionTags)\n    }));\nconst sessionTagsRelations = (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_11__.relations)(sessionTags, ({ one })=>({\n        session: one(sessions, {\n            fields: [\n                sessionTags.sessionId\n            ],\n            references: [\n                sessions.id\n            ]\n        }),\n        tag: one(conversationTags, {\n            fields: [\n                sessionTags.tagId\n            ],\n            references: [\n                conversationTags.id\n            ]\n        })\n    }));\nconst conversationTemplatesRelations = (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_11__.relations)(conversationTemplates, ({ one })=>({\n        user: one(users, {\n            fields: [\n                conversationTemplates.userId\n            ],\n            references: [\n                users.id\n            ]\n        })\n    }));\n// Enhanced embedding tables for Phase 6 RAG implementation\nconst sessionEmbeddings = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.pgTable)('session_embeddings', {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.serial)('session_embedding_id').primaryKey(),\n    sessionId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_5__.uuid)('session_id').references(()=>sessions.id, {\n        onDelete: 'cascade'\n    }).notNull(),\n    summaryText: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_7__.text)('summary_text').notNull(),\n    embedding: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_7__.text)('embedding').notNull(),\n    model: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.varchar)('model', {\n        length: 50\n    }).default('text-embedding-3-small').notNull(),\n    tokenCount: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_6__.integer)('token_count').default(0).notNull(),\n    createdAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.timestamp)('created_at', {\n        withTimezone: true\n    }).defaultNow().notNull(),\n    updatedAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.timestamp)('updated_at', {\n        withTimezone: true\n    }).defaultNow().notNull()\n});\nconst embeddingQueue = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.pgTable)('embedding_queue', {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.serial)('queue_id').primaryKey(),\n    itemType: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.varchar)('item_type', {\n        length: 20\n    }).notNull(),\n    itemId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.varchar)('item_id', {\n        length: 100\n    }).notNull(),\n    priority: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_6__.integer)('priority').default(5).notNull(),\n    status: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.varchar)('status', {\n        length: 20\n    }).default('pending').notNull(),\n    retryCount: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_6__.integer)('retry_count').default(0).notNull(),\n    errorMessage: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_7__.text)('error_message'),\n    createdAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.timestamp)('created_at', {\n        withTimezone: true\n    }).defaultNow().notNull(),\n    updatedAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.timestamp)('updated_at', {\n        withTimezone: true\n    }).defaultNow().notNull(),\n    processedAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.timestamp)('processed_at', {\n        withTimezone: true\n    })\n}, (table)=>({\n        uniqueItem: unique().on(table.itemType, table.itemId)\n    }));\nconst embeddingProcessingLog = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.pgTable)('embedding_processing_log', {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.serial)('log_id').primaryKey(),\n    itemType: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.varchar)('item_type', {\n        length: 20\n    }).notNull(),\n    itemId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.varchar)('item_id', {\n        length: 100\n    }).notNull(),\n    operation: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.varchar)('operation', {\n        length: 50\n    }).notNull(),\n    status: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.varchar)('status', {\n        length: 20\n    }).notNull(),\n    processingTimeMs: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_6__.integer)('processing_time_ms'),\n    tokenCount: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_6__.integer)('token_count'),\n    chunkCount: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_6__.integer)('chunk_count').default(1),\n    model: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.varchar)('model', {\n        length: 50\n    }),\n    errorMessage: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_7__.text)('error_message'),\n    createdAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.timestamp)('created_at', {\n        withTimezone: true\n    }).defaultNow().notNull()\n});\n// Relations for new embedding tables\nconst sessionEmbeddingsRelations = (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_11__.relations)(sessionEmbeddings, ({ one })=>({\n        session: one(sessions, {\n            fields: [\n                sessionEmbeddings.sessionId\n            ],\n            references: [\n                sessions.id\n            ]\n        })\n    }));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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U0FBU0osSUFBSXZDLFVBQVU7WUFDckJ5QyxRQUFRO2dCQUFDVSxrQkFBa0J6QyxTQUFTO2FBQUM7WUFDckNQLFlBQVk7Z0JBQUNILFNBQVNYLEVBQUU7YUFBQztRQUMzQjtJQUNGLElBQ0QiLCJzb3VyY2VzIjpbIkM6XFxwcm9qZWN0c1xcYXJyYWtpc1xcbGliXFxkYlxcc2NoZW1hLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHJlbGF0aW9ucyB9IGZyb20gJ2RyaXp6bGUtb3JtJ1xuaW1wb3J0IHtcbiAgYm9vbGVhbixcbiAgZGVjaW1hbCxcbiAgaW5kZXgsXG4gIGludGVnZXIsXG4gIGpzb25iLFxuICBwZ1RhYmxlLFxuICBzZXJpYWwsXG4gIHRleHQsXG4gIHRpbWVzdGFtcCxcbiAgdXVpZCxcbiAgdmFyY2hhcixcbn0gZnJvbSAnZHJpenpsZS1vcm0vcGctY29yZSdcblxuLy8gVXNlcnMgdGFibGUgLSBtaW5pbWFsIGZvciBzaW5nbGUtdXNlciBzdGFydFxuZXhwb3J0IGNvbnN0IHVzZXJzID0gcGdUYWJsZSgndXNlcnMnLCB7XG4gIGlkOiBzZXJpYWwoJ2lkJykucHJpbWFyeUtleSgpLFxuICB1c2VybmFtZTogdmFyY2hhcigndXNlcm5hbWUnLCB7IGxlbmd0aDogNTAgfSkubm90TnVsbCgpLnVuaXF1ZSgpLFxuICBjcmVhdGVkQXQ6IHRpbWVzdGFtcCgnY3JlYXRlZF9hdCcsIHsgd2l0aFRpbWV6b25lOiB0cnVlIH0pXG4gICAgLmRlZmF1bHROb3coKVxuICAgIC5ub3ROdWxsKCksXG4gIHNldHRpbmdzOiBqc29uYignc2V0dGluZ3MnKS5kZWZhdWx0KCd7fScpLFxufSlcblxuLy8gU2Vzc2lvbnMgdGFibGVcbmV4cG9ydCBjb25zdCBzZXNzaW9ucyA9IHBnVGFibGUoJ3Nlc3Npb25zJywge1xuICBpZDogdXVpZCgnaWQnKS5kZWZhdWx0UmFuZG9tKCkucHJpbWFyeUtleSgpLFxuICB1c2VySWQ6IGludGVnZXIoJ3VzZXJfaWQnKVxuICAgIC5yZWZlcmVuY2VzKCgpID0+IHVzZXJzLmlkKVxuICAgIC5ub3ROdWxsKCksXG4gIGNsYXVkZVNlc3Npb25JZDogdmFyY2hhcignY2xhdWRlX3Nlc3Npb25faWQnLCB7IGxlbmd0aDogMjU1IH0pLFxuICB0aXRsZTogdmFyY2hhcigndGl0bGUnLCB7IGxlbmd0aDogNTAwIH0pLFxuICBjcmVhdGVkQXQ6IHRpbWVzdGFtcCgnY3JlYXRlZF9hdCcsIHsgd2l0aFRpbWV6b25lOiB0cnVlIH0pXG4gICAgLmRlZmF1bHROb3coKVxuICAgIC5ub3ROdWxsKCksXG4gIHVwZGF0ZWRBdDogdGltZXN0YW1wKCd1cGRhdGVkX2F0JywgeyB3aXRoVGltZXpvbmU6IHRydWUgfSlcbiAgICAuZGVmYXVsdE5vdygpXG4gICAgLm5vdE51bGwoKSxcbiAgc3RhdHVzOiB2YXJjaGFyKCdzdGF0dXMnLCB7IGxlbmd0aDogMjAgfSkuZGVmYXVsdCgnYWN0aXZlJykubm90TnVsbCgpLFxuICBtZXRhZGF0YToganNvbmIoJ21ldGFkYXRhJykuZGVmYXVsdCgne30nKSxcbn0pXG5cbi8vIE1lc3NhZ2VzIHRhYmxlXG5leHBvcnQgY29uc3QgbWVzc2FnZXMgPSBwZ1RhYmxlKCdtZXNzYWdlcycsIHtcbiAgaWQ6IHNlcmlhbCgnaWQnKS5wcmltYXJ5S2V5KCksXG4gIHNlc3Npb25JZDogdXVpZCgnc2Vzc2lvbl9pZCcpXG4gICAgLnJlZmVyZW5jZXMoKCkgPT4gc2Vzc2lvbnMuaWQpXG4gICAgLm5vdE51bGwoKSxcbiAgcm9sZTogdmFyY2hhcigncm9sZScsIHsgbGVuZ3RoOiAyMCB9KS5ub3ROdWxsKCksIC8vICd1c2VyJyB8ICdhc3Npc3RhbnQnIHwgJ3N5c3RlbSdcbiAgY29udGVudDogdGV4dCgnY29udGVudCcpLm5vdE51bGwoKSxcbiAgY3JlYXRlZEF0OiB0aW1lc3RhbXAoJ2NyZWF0ZWRfYXQnLCB7IHdpdGhUaW1lem9uZTogdHJ1ZSB9KVxuICAgIC5kZWZhdWx0Tm93KClcbiAgICAubm90TnVsbCgpLFxuICB0b2tlbnM6IGludGVnZXIoJ3Rva2VucycpLFxuICBjb3N0VXNkOiBkZWNpbWFsKCdjb3N0X3VzZCcsIHsgcHJlY2lzaW9uOiA4LCBzY2FsZTogNiB9KSxcbiAgbWV0YWRhdGE6IGpzb25iKCdtZXRhZGF0YScpLmRlZmF1bHQoJ3t9JyksXG59KVxuXG4vLyBNZXNzYWdlIGVtYmVkZGluZ3MgdGFibGUgZm9yIHZlY3RvciBzZWFyY2hcbmV4cG9ydCBjb25zdCBtZXNzYWdlRW1iZWRkaW5ncyA9IHBnVGFibGUoXG4gICdtZXNzYWdlX2VtYmVkZGluZ3MnLFxuICB7XG4gICAgaWQ6IHNlcmlhbCgnaWQnKS5wcmltYXJ5S2V5KCksXG4gICAgbWVzc2FnZUlkOiBpbnRlZ2VyKCdtZXNzYWdlX2lkJylcbiAgICAgIC5yZWZlcmVuY2VzKCgpID0+IG1lc3NhZ2VzLmlkKVxuICAgICAgLm5vdE51bGwoKSxcbiAgICBlbWJlZGRpbmc6IHRleHQoJ2VtYmVkZGluZycpLm5vdE51bGwoKSwgLy8gV2lsbCBzdG9yZSB2ZWN0b3IgYXMgdGV4dCBmb3Igbm93LCBwZ3ZlY3RvciBsYXRlclxuICAgIG1vZGVsOiB2YXJjaGFyKCdtb2RlbCcsIHsgbGVuZ3RoOiAxMDAgfSlcbiAgICAgIC5kZWZhdWx0KCd0ZXh0LWVtYmVkZGluZy0zLXNtYWxsJylcbiAgICAgIC5ub3ROdWxsKCksXG4gICAgY3JlYXRlZEF0OiB0aW1lc3RhbXAoJ2NyZWF0ZWRfYXQnLCB7IHdpdGhUaW1lem9uZTogdHJ1ZSB9KVxuICAgICAgLmRlZmF1bHROb3coKVxuICAgICAgLm5vdE51bGwoKSxcbiAgfSxcbiAgKHRhYmxlKSA9PiAoe1xuICAgIG1lc3NhZ2VJZElkeDogaW5kZXgoJ2lkeF9tZXNzYWdlX2VtYmVkZGluZ3NfbWVzc2FnZV9pZCcpLm9uKFxuICAgICAgdGFibGUubWVzc2FnZUlkXG4gICAgKSxcbiAgfSlcbilcblxuLy8gQ29udmVyc2F0aW9uIHRhZ3MgdGFibGVcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25UYWdzID0gcGdUYWJsZSgnY29udmVyc2F0aW9uX3RhZ3MnLCB7XG4gIGlkOiBzZXJpYWwoJ2lkJykucHJpbWFyeUtleSgpLFxuICBuYW1lOiB2YXJjaGFyKCduYW1lJywgeyBsZW5ndGg6IDEwMCB9KS5ub3ROdWxsKCkudW5pcXVlKCksXG4gIGNvbG9yOiB2YXJjaGFyKCdjb2xvcicsIHsgbGVuZ3RoOiA3IH0pLmRlZmF1bHQoJyMzYjgyZjYnKS5ub3ROdWxsKCksIC8vIEhleCBjb2xvclxuICBkZXNjcmlwdGlvbjogdGV4dCgnZGVzY3JpcHRpb24nKSxcbiAgY3JlYXRlZEF0OiB0aW1lc3RhbXAoJ2NyZWF0ZWRfYXQnLCB7IHdpdGhUaW1lem9uZTogdHJ1ZSB9KVxuICAgIC5kZWZhdWx0Tm93KClcbiAgICAubm90TnVsbCgpLFxufSlcblxuLy8gU2Vzc2lvbiB0YWdzIGp1bmN0aW9uIHRhYmxlIChtYW55LXRvLW1hbnkpXG5leHBvcnQgY29uc3Qgc2Vzc2lvblRhZ3MgPSBwZ1RhYmxlKFxuICAnc2Vzc2lvbl90YWdzJyxcbiAge1xuICAgIHNlc3Npb25JZDogdXVpZCgnc2Vzc2lvbl9pZCcpXG4gICAgICAucmVmZXJlbmNlcygoKSA9PiBzZXNzaW9ucy5pZClcbiAgICAgIC5ub3ROdWxsKCksXG4gICAgdGFnSWQ6IGludGVnZXIoJ3RhZ19pZCcpXG4gICAgICAucmVmZXJlbmNlcygoKSA9PiBjb252ZXJzYXRpb25UYWdzLmlkKVxuICAgICAgLm5vdE51bGwoKSxcbiAgICBjcmVhdGVkQXQ6IHRpbWVzdGFtcCgnY3JlYXRlZF9hdCcsIHsgd2l0aFRpbWV6b25lOiB0cnVlIH0pXG4gICAgICAuZGVmYXVsdE5vdygpXG4gICAgICAubm90TnVsbCgpLFxuICB9LFxuICAodGFibGUpID0+ICh7XG4gICAgcGs6IGluZGV4KCdpZHhfc2Vzc2lvbl90YWdzX3ByaW1hcnknKS5vbih0YWJsZS5zZXNzaW9uSWQsIHRhYmxlLnRhZ0lkKSxcbiAgfSlcbilcblxuLy8gQ29udmVyc2F0aW9uIHRlbXBsYXRlcyB0YWJsZVxuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvblRlbXBsYXRlcyA9IHBnVGFibGUoJ2NvbnZlcnNhdGlvbl90ZW1wbGF0ZXMnLCB7XG4gIGlkOiBzZXJpYWwoJ2lkJykucHJpbWFyeUtleSgpLFxuICBuYW1lOiB2YXJjaGFyKCduYW1lJywgeyBsZW5ndGg6IDIwMCB9KS5ub3ROdWxsKCksXG4gIGRlc2NyaXB0aW9uOiB0ZXh0KCdkZXNjcmlwdGlvbicpLFxuICB0ZW1wbGF0ZTogdGV4dCgndGVtcGxhdGUnKS5ub3ROdWxsKCksIC8vIFRlbXBsYXRlIGNvbnRlbnQgd2l0aCBwbGFjZWhvbGRlcnNcbiAgY2F0ZWdvcnk6IHZhcmNoYXIoJ2NhdGVnb3J5JywgeyBsZW5ndGg6IDEwMCB9KS5kZWZhdWx0KCdnZW5lcmFsJyksXG4gIGlzUHVibGljOiBib29sZWFuKCdpc19wdWJsaWMnKS5kZWZhdWx0KGZhbHNlKSxcbiAgdXNlcklkOiBpbnRlZ2VyKCd1c2VyX2lkJylcbiAgICAucmVmZXJlbmNlcygoKSA9PiB1c2Vycy5pZClcbiAgICAubm90TnVsbCgpLFxuICB1c2FnZUNvdW50OiBpbnRlZ2VyKCd1c2FnZV9jb3VudCcpLmRlZmF1bHQoMCksXG4gIGNyZWF0ZWRBdDogdGltZXN0YW1wKCdjcmVhdGVkX2F0JywgeyB3aXRoVGltZXpvbmU6IHRydWUgfSlcbiAgICAuZGVmYXVsdE5vdygpXG4gICAgLm5vdE51bGwoKSxcbiAgdXBkYXRlZEF0OiB0aW1lc3RhbXAoJ3VwZGF0ZWRfYXQnLCB7IHdpdGhUaW1lem9uZTogdHJ1ZSB9KVxuICAgIC5kZWZhdWx0Tm93KClcbiAgICAubm90TnVsbCgpLFxufSlcblxuLy8gRGVmaW5lIHJlbGF0aW9uc1xuZXhwb3J0IGNvbnN0IHVzZXJzUmVsYXRpb25zID0gcmVsYXRpb25zKHVzZXJzLCAoeyBtYW55IH0pID0+ICh7XG4gIHNlc3Npb25zOiBtYW55KHNlc3Npb25zKSxcbiAgY29udmVyc2F0aW9uVGVtcGxhdGVzOiBtYW55KGNvbnZlcnNhdGlvblRlbXBsYXRlcyksXG59KSlcblxuZXhwb3J0IGNvbnN0IHNlc3Npb25zUmVsYXRpb25zID0gcmVsYXRpb25zKHNlc3Npb25zLCAoeyBvbmUsIG1hbnkgfSkgPT4gKHtcbiAgdXNlcjogb25lKHVzZXJzLCB7XG4gICAgZmllbGRzOiBbc2Vzc2lvbnMudXNlcklkXSxcbiAgICByZWZlcmVuY2VzOiBbdXNlcnMuaWRdLFxuICB9KSxcbiAgbWVzc2FnZXM6IG1hbnkobWVzc2FnZXMpLFxuICBzZXNzaW9uVGFnczogbWFueShzZXNzaW9uVGFncyksXG59KSlcblxuZXhwb3J0IGNvbnN0IG1lc3NhZ2VzUmVsYXRpb25zID0gcmVsYXRpb25zKG1lc3NhZ2VzLCAoeyBvbmUsIG1hbnkgfSkgPT4gKHtcbiAgc2Vzc2lvbjogb25lKHNlc3Npb25zLCB7XG4gICAgZmllbGRzOiBbbWVzc2FnZXMuc2Vzc2lvbklkXSxcbiAgICByZWZlcmVuY2VzOiBbc2Vzc2lvbnMuaWRdLFxuICB9KSxcbiAgZW1iZWRkaW5nczogbWFueShtZXNzYWdlRW1iZWRkaW5ncyksXG59KSlcblxuZXhwb3J0IGNvbnN0IG1lc3NhZ2VFbWJlZGRpbmdzUmVsYXRpb25zID0gcmVsYXRpb25zKFxuICBtZXNzYWdlRW1iZWRkaW5ncyxcbiAgKHsgb25lIH0pID0+ICh7XG4gICAgbWVzc2FnZTogb25lKG1lc3NhZ2VzLCB7XG4gICAgICBmaWVsZHM6IFttZXNzYWdlRW1iZWRkaW5ncy5tZXNzYWdlSWRdLFxuICAgICAgcmVmZXJlbmNlczogW21lc3NhZ2VzLmlkXSxcbiAgICB9KSxcbiAgfSlcbilcblxuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvblRhZ3NSZWxhdGlvbnMgPSByZWxhdGlvbnMoXG4gIGNvbnZlcnNhdGlvblRhZ3MsXG4gICh7IG1hbnkgfSkgPT4gKHtcbiAgICBzZXNzaW9uVGFnczogbWFueShzZXNzaW9uVGFncyksXG4gIH0pXG4pXG5cbmV4cG9ydCBjb25zdCBzZXNzaW9uVGFnc1JlbGF0aW9ucyA9IHJlbGF0aW9ucyhzZXNzaW9uVGFncywgKHsgb25lIH0pID0+ICh7XG4gIHNlc3Npb246IG9uZShzZXNzaW9ucywge1xuICAgIGZpZWxkczogW3Nlc3Npb25UYWdzLnNlc3Npb25JZF0sXG4gICAgcmVmZXJlbmNlczogW3Nlc3Npb25zLmlkXSxcbiAgfSksXG4gIHRhZzogb25lKGNvbnZlcnNhdGlvblRhZ3MsIHtcbiAgICBmaWVsZHM6IFtzZXNzaW9uVGFncy50YWdJZF0sXG4gICAgcmVmZXJlbmNlczogW2NvbnZlcnNhdGlvblRhZ3MuaWRdLFxuICB9KSxcbn0pKVxuXG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uVGVtcGxhdGVzUmVsYXRpb25zID0gcmVsYXRpb25zKFxuICBjb252ZXJzYXRpb25UZW1wbGF0ZXMsXG4gICh7IG9uZSB9KSA9PiAoe1xuICAgIHVzZXI6IG9uZSh1c2Vycywge1xuICAgICAgZmllbGRzOiBbY29udmVyc2F0aW9uVGVtcGxhdGVzLnVzZXJJZF0sXG4gICAgICByZWZlcmVuY2VzOiBbdXNlcnMuaWRdLFxuICAgIH0pLFxuICB9KVxuKVxuXG4vLyBFbmhhbmNlZCBlbWJlZGRpbmcgdGFibGVzIGZvciBQaGFzZSA2IFJBRyBpbXBsZW1lbnRhdGlvblxuZXhwb3J0IGNvbnN0IHNlc3Npb25FbWJlZGRpbmdzID0gcGdUYWJsZSgnc2Vzc2lvbl9lbWJlZGRpbmdzJywge1xuICBpZDogc2VyaWFsKCdzZXNzaW9uX2VtYmVkZGluZ19pZCcpLnByaW1hcnlLZXkoKSxcbiAgc2Vzc2lvbklkOiB1dWlkKCdzZXNzaW9uX2lkJylcbiAgICAucmVmZXJlbmNlcygoKSA9PiBzZXNzaW9ucy5pZCwgeyBvbkRlbGV0ZTogJ2Nhc2NhZGUnIH0pXG4gICAgLm5vdE51bGwoKSxcbiAgc3VtbWFyeVRleHQ6IHRleHQoJ3N1bW1hcnlfdGV4dCcpLm5vdE51bGwoKSxcbiAgZW1iZWRkaW5nOiB0ZXh0KCdlbWJlZGRpbmcnKS5ub3ROdWxsKCksIC8vIFdpbGwgYmUgdmVjdG9yKDE1MzYpIGluIHByb2R1Y3Rpb25cbiAgbW9kZWw6IHZhcmNoYXIoJ21vZGVsJywgeyBsZW5ndGg6IDUwIH0pXG4gICAgLmRlZmF1bHQoJ3RleHQtZW1iZWRkaW5nLTMtc21hbGwnKVxuICAgIC5ub3ROdWxsKCksXG4gIHRva2VuQ291bnQ6IGludGVnZXIoJ3Rva2VuX2NvdW50JykuZGVmYXVsdCgwKS5ub3ROdWxsKCksXG4gIGNyZWF0ZWRBdDogdGltZXN0YW1wKCdjcmVhdGVkX2F0JywgeyB3aXRoVGltZXpvbmU6IHRydWUgfSlcbiAgICAuZGVmYXVsdE5vdygpXG4gICAgLm5vdE51bGwoKSxcbiAgdXBkYXRlZEF0OiB0aW1lc3RhbXAoJ3VwZGF0ZWRfYXQnLCB7IHdpdGhUaW1lem9uZTogdHJ1ZSB9KVxuICAgIC5kZWZhdWx0Tm93KClcbiAgICAubm90TnVsbCgpLFxufSlcblxuZXhwb3J0IGNvbnN0IGVtYmVkZGluZ1F1ZXVlID0gcGdUYWJsZShcbiAgJ2VtYmVkZGluZ19xdWV1ZScsXG4gIHtcbiAgICBpZDogc2VyaWFsKCdxdWV1ZV9pZCcpLnByaW1hcnlLZXkoKSxcbiAgICBpdGVtVHlwZTogdmFyY2hhcignaXRlbV90eXBlJywgeyBsZW5ndGg6IDIwIH0pLm5vdE51bGwoKSwgLy8gJ21lc3NhZ2UnIG9yICdzZXNzaW9uJ1xuICAgIGl0ZW1JZDogdmFyY2hhcignaXRlbV9pZCcsIHsgbGVuZ3RoOiAxMDAgfSkubm90TnVsbCgpLCAvLyBtZXNzYWdlX2lkIG9yIHNlc3Npb25faWRcbiAgICBwcmlvcml0eTogaW50ZWdlcigncHJpb3JpdHknKS5kZWZhdWx0KDUpLm5vdE51bGwoKSwgLy8gMSAoaGlnaGVzdCkgdG8gMTAgKGxvd2VzdClcbiAgICBzdGF0dXM6IHZhcmNoYXIoJ3N0YXR1cycsIHsgbGVuZ3RoOiAyMCB9KS5kZWZhdWx0KCdwZW5kaW5nJykubm90TnVsbCgpLCAvLyBwZW5kaW5nLCBwcm9jZXNzaW5nLCBjb21wbGV0ZWQsIGZhaWxlZFxuICAgIHJldHJ5Q291bnQ6IGludGVnZXIoJ3JldHJ5X2NvdW50JykuZGVmYXVsdCgwKS5ub3ROdWxsKCksXG4gICAgZXJyb3JNZXNzYWdlOiB0ZXh0KCdlcnJvcl9tZXNzYWdlJyksXG4gICAgY3JlYXRlZEF0OiB0aW1lc3RhbXAoJ2NyZWF0ZWRfYXQnLCB7IHdpdGhUaW1lem9uZTogdHJ1ZSB9KVxuICAgICAgLmRlZmF1bHROb3coKVxuICAgICAgLm5vdE51bGwoKSxcbiAgICB1cGRhdGVkQXQ6IHRpbWVzdGFtcCgndXBkYXRlZF9hdCcsIHsgd2l0aFRpbWV6b25lOiB0cnVlIH0pXG4gICAgICAuZGVmYXVsdE5vdygpXG4gICAgICAubm90TnVsbCgpLFxuICAgIHByb2Nlc3NlZEF0OiB0aW1lc3RhbXAoJ3Byb2Nlc3NlZF9hdCcsIHsgd2l0aFRpbWV6b25lOiB0cnVlIH0pLFxuICB9LFxuICAodGFibGUpID0+ICh7XG4gICAgdW5pcXVlSXRlbTogdW5pcXVlKCkub24odGFibGUuaXRlbVR5cGUsIHRhYmxlLml0ZW1JZCksXG4gIH0pXG4pXG5cbmV4cG9ydCBjb25zdCBlbWJlZGRpbmdQcm9jZXNzaW5nTG9nID0gcGdUYWJsZSgnZW1iZWRkaW5nX3Byb2Nlc3NpbmdfbG9nJywge1xuICBpZDogc2VyaWFsKCdsb2dfaWQnKS5wcmltYXJ5S2V5KCksXG4gIGl0ZW1UeXBlOiB2YXJjaGFyKCdpdGVtX3R5cGUnLCB7IGxlbmd0aDogMjAgfSkubm90TnVsbCgpLFxuICBpdGVtSWQ6IHZhcmNoYXIoJ2l0ZW1faWQnLCB7IGxlbmd0aDogMTAwIH0pLm5vdE51bGwoKSxcbiAgb3BlcmF0aW9uOiB2YXJjaGFyKCdvcGVyYXRpb24nLCB7IGxlbmd0aDogNTAgfSkubm90TnVsbCgpLCAvLyAnZW1iZWQnLCAncmVlbWJlZCcsICdkZWxldGUnXG4gIHN0YXR1czogdmFyY2hhcignc3RhdHVzJywgeyBsZW5ndGg6IDIwIH0pLm5vdE51bGwoKSwgLy8gJ3N1Y2Nlc3MnLCAnZXJyb3InXG4gIHByb2Nlc3NpbmdUaW1lTXM6IGludGVnZXIoJ3Byb2Nlc3NpbmdfdGltZV9tcycpLFxuICB0b2tlbkNvdW50OiBpbnRlZ2VyKCd0b2tlbl9jb3VudCcpLFxuICBjaHVua0NvdW50OiBpbnRlZ2VyKCdjaHVua19jb3VudCcpLmRlZmF1bHQoMSksXG4gIG1vZGVsOiB2YXJjaGFyKCdtb2RlbCcsIHsgbGVuZ3RoOiA1MCB9KSxcbiAgZXJyb3JNZXNzYWdlOiB0ZXh0KCdlcnJvcl9tZXNzYWdlJyksXG4gIGNyZWF0ZWRBdDogdGltZXN0YW1wKCdjcmVhdGVkX2F0JywgeyB3aXRoVGltZXpvbmU6IHRydWUgfSlcbiAgICAuZGVmYXVsdE5vdygpXG4gICAgLm5vdE51bGwoKSxcbn0pXG5cbi8vIFJlbGF0aW9ucyBmb3IgbmV3IGVtYmVkZGluZyB0YWJsZXNcbmV4cG9ydCBjb25zdCBzZXNzaW9uRW1iZWRkaW5nc1JlbGF0aW9ucyA9IHJlbGF0aW9ucyhcbiAgc2Vzc2lvbkVtYmVkZGluZ3MsXG4gICh7IG9uZSB9KSA9PiAoe1xuICAgIHNlc3Npb246IG9uZShzZXNzaW9ucywge1xuICAgICAgZmllbGRzOiBbc2Vzc2lvbkVtYmVkZGluZ3Muc2Vzc2lvbklkXSxcbiAgICAgIHJlZmVyZW5jZXM6IFtzZXNzaW9ucy5pZF0sXG4gICAgfSksXG4gIH0pXG4pXG5cbi8vIEV4cG9ydCB0eXBlc1xuZXhwb3J0IHR5cGUgVXNlciA9IHR5cGVvZiB1c2Vycy4kaW5mZXJTZWxlY3RcbmV4cG9ydCB0eXBlIE5ld1VzZXIgPSB0eXBlb2YgdXNlcnMuJGluZmVySW5zZXJ0XG5leHBvcnQgdHlwZSBTZXNzaW9uID0gdHlwZW9mIHNlc3Npb25zLiRpbmZlclNlbGVjdFxuZXhwb3J0IHR5cGUgTmV3U2Vzc2lvbiA9IHR5cGVvZiBzZXNzaW9ucy4kaW5mZXJJbnNlcnRcbmV4cG9ydCB0eXBlIE1lc3NhZ2UgPSB0eXBlb2YgbWVzc2FnZXMuJGluZmVyU2VsZWN0XG5leHBvcnQgdHlwZSBOZXdNZXNzYWdlID0gdHlwZW9mIG1lc3NhZ2VzLiRpbmZlckluc2VydFxuZXhwb3J0IHR5cGUgTWVzc2FnZUVtYmVkZGluZyA9IHR5cGVvZiBtZXNzYWdlRW1iZWRkaW5ncy4kaW5mZXJTZWxlY3RcbmV4cG9ydCB0eXBlIE5ld01lc3NhZ2VFbWJlZGRpbmcgPSB0eXBlb2YgbWVzc2FnZUVtYmVkZGluZ3MuJGluZmVySW5zZXJ0XG5leHBvcnQgdHlwZSBDb252ZXJzYXRpb25UYWcgPSB0eXBlb2YgY29udmVyc2F0aW9uVGFncy4kaW5mZXJTZWxlY3RcbmV4cG9ydCB0eXBlIE5ld0NvbnZlcnNhdGlvblRhZyA9IHR5cGVvZiBjb252ZXJzYXRpb25UYWdzLiRpbmZlckluc2VydFxuZXhwb3J0IHR5cGUgU2Vzc2lvblRhZyA9IHR5cGVvZiBzZXNzaW9uVGFncy4kaW5mZXJTZWxlY3RcbmV4cG9ydCB0eXBlIE5ld1Nlc3Npb25UYWcgPSB0eXBlb2Ygc2Vzc2lvblRhZ3MuJGluZmVySW5zZXJ0XG5leHBvcnQgdHlwZSBDb252ZXJzYXRpb25UZW1wbGF0ZSA9IHR5cGVvZiBjb252ZXJzYXRpb25UZW1wbGF0ZXMuJGluZmVyU2VsZWN0XG5leHBvcnQgdHlwZSBOZXdDb252ZXJzYXRpb25UZW1wbGF0ZSA9IHR5cGVvZiBjb252ZXJzYXRpb25UZW1wbGF0ZXMuJGluZmVySW5zZXJ0XG5leHBvcnQgdHlwZSBTZXNzaW9uRW1iZWRkaW5nID0gdHlwZW9mIHNlc3Npb25FbWJlZGRpbmdzLiRpbmZlclNlbGVjdFxuZXhwb3J0IHR5cGUgTmV3U2Vzc2lvbkVtYmVkZGluZyA9IHR5cGVvZiBzZXNzaW9uRW1iZWRkaW5ncy4kaW5mZXJJbnNlcnRcbmV4cG9ydCB0eXBlIEVtYmVkZGluZ1F1ZXVlID0gdHlwZW9mIGVtYmVkZGluZ1F1ZXVlLiRpbmZlclNlbGVjdFxuZXhwb3J0IHR5cGUgTmV3RW1iZWRkaW5nUXVldWUgPSB0eXBlb2YgZW1iZWRkaW5nUXVldWUuJGluZmVySW5zZXJ0XG5leHBvcnQgdHlwZSBFbWJlZGRpbmdQcm9jZXNzaW5nTG9nID0gdHlwZW9mIGVtYmVkZGluZ1Byb2Nlc3NpbmdMb2cuJGluZmVyU2VsZWN0XG5leHBvcnQgdHlwZSBOZXdFbWJlZGRpbmdQcm9jZXNzaW5nTG9nID0gdHlwZW9mIGVtYmVkZGluZ1Byb2Nlc3NpbmdMb2cuJGluZmVySW5zZXJ0XG4iXSwibmFtZXMiOlsicmVsYXRpb25zIiwiYm9vbGVhbiIsImRlY2ltYWwiLCJpbmRleCIsImludGVnZXIiLCJqc29uYiIsInBnVGFibGUiLCJzZXJpYWwiLCJ0ZXh0IiwidGltZXN0YW1wIiwidXVpZCIsInZhcmNoYXIiLCJ1c2VycyIsImlkIiwicHJpbWFyeUtleSIsInVzZXJuYW1lIiwibGVuZ3RoIiwibm90TnVsbCIsInVuaXF1ZSIsImNyZWF0ZWRBdCIsIndpdGhUaW1lem9uZSIsImRlZmF1bHROb3ciLCJzZXR0aW5ncyIsImRlZmF1bHQiLCJzZXNzaW9ucyIsImRlZmF1bHRSYW5kb20iLCJ1c2VySWQiLCJyZWZlcmVuY2VzIiwiY2xhdWRlU2Vzc2lvbklkIiwidGl0bGUiLCJ1cGRhdGVkQXQiLCJzdGF0dXMiLCJtZXRhZGF0YSIsIm1lc3NhZ2VzIiwic2Vzc2lvbklkIiwicm9sZSIsImNvbnRlbnQiLCJ0b2tlbnMiLCJjb3N0VXNkIiwicHJlY2lzaW9uIiwic2NhbGUiLCJtZXNzYWdlRW1iZWRkaW5ncyIsIm1lc3NhZ2VJZCIsImVtYmVkZGluZyIsIm1vZGVsIiwidGFibGUiLCJtZXNzYWdlSWRJZHgiLCJvbiIsImNvbnZlcnNhdGlvblRhZ3MiLCJuYW1lIiwiY29sb3IiLCJkZXNjcmlwdGlvbiIsInNlc3Npb25UYWdzIiwidGFnSWQiLCJwayIsImNvbnZlcnNhdGlvblRlbXBsYXRlcyIsInRlbXBsYXRlIiwiY2F0ZWdvcnkiLCJpc1B1YmxpYyIsInVzYWdlQ291bnQiLCJ1c2Vyc1JlbGF0aW9ucyIsIm1hbnkiLCJzZXNzaW9uc1JlbGF0aW9ucyIsIm9uZSIsInVzZXIiLCJmaWVsZHMiLCJtZXNzYWdlc1JlbGF0aW9ucyIsInNlc3Npb24iLCJlbWJlZGRpbmdzIiwibWVzc2FnZUVtYmVkZGluZ3NSZWxhdGlvbnMiLCJtZXNzYWdlIiwiY29udmVyc2F0aW9uVGFnc1JlbGF0aW9ucyIsInNlc3Npb25UYWdzUmVsYXRpb25zIiwidGFnIiwiY29udmVyc2F0aW9uVGVtcGxhdGVzUmVsYXRpb25zIiwic2Vzc2lvbkVtYmVkZGluZ3MiLCJvbkRlbGV0ZSIsInN1bW1hcnlUZXh0IiwidG9rZW5Db3VudCIsImVtYmVkZGluZ1F1ZXVlIiwiaXRlbVR5cGUiLCJpdGVtSWQiLCJwcmlvcml0eSIsInJldHJ5Q291bnQiLCJlcnJvck1lc3NhZ2UiLCJwcm9jZXNzZWRBdCIsInVuaXF1ZUl0ZW0iLCJlbWJlZGRpbmdQcm9jZXNzaW5nTG9nIiwib3BlcmF0aW9uIiwicHJvY2Vzc2luZ1RpbWVNcyIsImNodW5rQ291bnQiLCJzZXNzaW9uRW1iZWRkaW5nc1JlbGF0aW9ucyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/db/schema.ts\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Ftrpc%2F%5Btrpc%5D%2Froute&page=%2Fapi%2Ftrpc%2F%5Btrpc%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftrpc%2F%5Btrpc%5D%2Froute.ts&appDir=C%3A%5Cprojects%5Carrakis%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Cprojects%5Carrakis&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!":
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Ftrpc%2F%5Btrpc%5D%2Froute&page=%2Fapi%2Ftrpc%2F%5Btrpc%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftrpc%2F%5Btrpc%5D%2Froute.ts&appDir=C%3A%5Cprojects%5Carrakis%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Cprojects%5Carrakis&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=! ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   handler: () => (/* binding */ handler),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/server/request-meta */ \"(rsc)/./node_modules/next/dist/server/request-meta.js\");\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/dist/server/lib/trace/tracer */ \"(rsc)/./node_modules/next/dist/server/lib/trace/tracer.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next/dist/shared/lib/router/utils/app-paths */ \"next/dist/shared/lib/router/utils/app-paths\");\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dist/server/base-http/node */ \"(rsc)/./node_modules/next/dist/server/base-http/node.js\");\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! next/dist/server/web/spec-extension/adapters/next-request */ \"(rsc)/./node_modules/next/dist/server/web/spec-extension/adapters/next-request.js\");\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! next/dist/server/lib/trace/constants */ \"(rsc)/./node_modules/next/dist/server/lib/trace/constants.js\");\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! next/dist/server/instrumentation/utils */ \"(rsc)/./node_modules/next/dist/server/instrumentation/utils.js\");\n/* harmony import */ var next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! next/dist/server/send-response */ \"(rsc)/./node_modules/next/dist/server/send-response.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! next/dist/server/web/utils */ \"(rsc)/./node_modules/next/dist/server/web/utils.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! next/dist/server/lib/cache-control */ \"(rsc)/./node_modules/next/dist/server/lib/cache-control.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! next/dist/lib/constants */ \"(rsc)/./node_modules/next/dist/lib/constants.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! next/dist/shared/lib/no-fallback-error.external */ \"next/dist/shared/lib/no-fallback-error.external\");\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! next/dist/server/response-cache */ \"(rsc)/./node_modules/next/dist/server/response-cache/index.js\");\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var C_projects_arrakis_app_api_trpc_trpc_route_ts__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./app/api/trpc/[trpc]/route.ts */ \"(rsc)/./app/api/trpc/[trpc]/route.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/trpc/[trpc]/route\",\n        pathname: \"/api/trpc/[trpc]\",\n        filename: \"route\",\n        bundlePath: \"app/api/trpc/[trpc]/route\"\n    },\n    distDir: \".next\" || 0,\n    relativeProjectDir:  false || '',\n    resolvedPagePath: \"C:\\\\projects\\\\arrakis\\\\app\\\\api\\\\trpc\\\\[trpc]\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_projects_arrakis_app_api_trpc_trpc_route_ts__WEBPACK_IMPORTED_MODULE_16__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\nasync function handler(req, res, ctx) {\n    var _nextConfig_experimental;\n    let srcPage = \"/api/trpc/[trpc]/route\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (false) {} else if (srcPage === '/index') {\n        // we always normalize /index specifically\n        srcPage = '/';\n    }\n    const multiZoneDraftMode = false;\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage,\n        multiZoneDraftMode\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return null;\n    }\n    const { buildId, params, nextConfig, isDraftMode, prerenderManifest, routerServerContext, isOnDemandRevalidate, revalidateOnlyGenerated, resolvedPathname } = prepareResult;\n    const normalizedSrcPage = (0,next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__.normalizeAppPath)(srcPage);\n    let isIsr = Boolean(prerenderManifest.dynamicRoutes[normalizedSrcPage] || prerenderManifest.routes[resolvedPathname]);\n    if (isIsr && !isDraftMode) {\n        const isPrerendered = Boolean(prerenderManifest.routes[resolvedPathname]);\n        const prerenderInfo = prerenderManifest.dynamicRoutes[normalizedSrcPage];\n        if (prerenderInfo) {\n            if (prerenderInfo.fallback === false && !isPrerendered) {\n                throw new next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__.NoFallbackError();\n            }\n        }\n    }\n    let cacheKey = null;\n    if (isIsr && !routeModule.isDev && !isDraftMode) {\n        cacheKey = resolvedPathname;\n        // ensure /index and / is normalized to one key\n        cacheKey = cacheKey === '/index' ? '/' : cacheKey;\n    }\n    const supportsDynamicResponse = // If we're in development, we always support dynamic HTML\n    routeModule.isDev === true || // If this is not SSG or does not have static paths, then it supports\n    // dynamic HTML.\n    !isIsr;\n    // This is a revalidation request if the request is for a static\n    // page and it is not being resumed from a postponed render and\n    // it is not a dynamic RSC request then it is a revalidation\n    // request.\n    const isRevalidate = isIsr && !supportsDynamicResponse;\n    const method = req.method || 'GET';\n    const tracer = (0,next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.getTracer)();\n    const activeSpan = tracer.getActiveScopeSpan();\n    const context = {\n        params,\n        prerenderManifest,\n        renderOpts: {\n            experimental: {\n                cacheComponents: Boolean(nextConfig.experimental.cacheComponents),\n                authInterrupts: Boolean(nextConfig.experimental.authInterrupts)\n            },\n            supportsDynamicResponse,\n            incrementalCache: (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'incrementalCache'),\n            cacheLifeProfiles: (_nextConfig_experimental = nextConfig.experimental) == null ? void 0 : _nextConfig_experimental.cacheLife,\n            isRevalidate,\n            waitUntil: ctx.waitUntil,\n            onClose: (cb)=>{\n                res.on('close', cb);\n            },\n            onAfterTaskError: undefined,\n            onInstrumentationRequestError: (error, _request, errorContext)=>routeModule.onRequestError(req, error, errorContext, routerServerContext)\n        },\n        sharedContext: {\n            buildId\n        }\n    };\n    const nodeNextReq = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__.NodeNextRequest(req);\n    const nodeNextRes = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__.NodeNextResponse(res);\n    const nextReq = next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__.NextRequestAdapter.fromNodeNextRequest(nodeNextReq, (0,next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__.signalFromNodeResponse)(res));\n    try {\n        const invokeRouteModule = async (span)=>{\n            return routeModule.handle(nextReq, context).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__.BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${req.url}`);\n                }\n            });\n        };\n        const handleResponse = async (currentSpan)=>{\n            var _cacheEntry_value;\n            const responseGenerator = async ({ previousCacheEntry })=>{\n                try {\n                    if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode') && isOnDemandRevalidate && revalidateOnlyGenerated && !previousCacheEntry) {\n                        res.statusCode = 404;\n                        // on-demand revalidate always sets this header\n                        res.setHeader('x-nextjs-cache', 'REVALIDATED');\n                        res.end('This page could not be found');\n                        return null;\n                    }\n                    const response = await invokeRouteModule(currentSpan);\n                    req.fetchMetrics = context.renderOpts.fetchMetrics;\n                    let pendingWaitUntil = context.renderOpts.pendingWaitUntil;\n                    // Attempt using provided waitUntil if available\n                    // if it's not we fallback to sendResponse's handling\n                    if (pendingWaitUntil) {\n                        if (ctx.waitUntil) {\n                            ctx.waitUntil(pendingWaitUntil);\n                            pendingWaitUntil = undefined;\n                        }\n                    }\n                    const cacheTags = context.renderOpts.collectedTags;\n                    // If the request is for a static response, we can cache it so long\n                    // as it's not edge.\n                    if (isIsr) {\n                        const blob = await response.blob();\n                        // Copy the headers from the response.\n                        const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__.toNodeOutgoingHttpHeaders)(response.headers);\n                        if (cacheTags) {\n                            headers[next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.NEXT_CACHE_TAGS_HEADER] = cacheTags;\n                        }\n                        if (!headers['content-type'] && blob.type) {\n                            headers['content-type'] = blob.type;\n                        }\n                        const revalidate = typeof context.renderOpts.collectedRevalidate === 'undefined' || context.renderOpts.collectedRevalidate >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.INFINITE_CACHE ? false : context.renderOpts.collectedRevalidate;\n                        const expire = typeof context.renderOpts.collectedExpire === 'undefined' || context.renderOpts.collectedExpire >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.INFINITE_CACHE ? undefined : context.renderOpts.collectedExpire;\n                        // Create the cache entry for the response.\n                        const cacheEntry = {\n                            value: {\n                                kind: next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__.CachedRouteKind.APP_ROUTE,\n                                status: response.status,\n                                body: Buffer.from(await blob.arrayBuffer()),\n                                headers\n                            },\n                            cacheControl: {\n                                revalidate,\n                                expire\n                            }\n                        };\n                        return cacheEntry;\n                    } else {\n                        // send response without caching if not ISR\n                        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, response, context.renderOpts.pendingWaitUntil);\n                        return null;\n                    }\n                } catch (err) {\n                    // if this is a background revalidate we need to report\n                    // the request error here as it won't be bubbled\n                    if (previousCacheEntry == null ? void 0 : previousCacheEntry.isStale) {\n                        await routeModule.onRequestError(req, err, {\n                            routerKind: 'App Router',\n                            routePath: srcPage,\n                            routeType: 'route',\n                            revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__.getRevalidateReason)({\n                                isRevalidate,\n                                isOnDemandRevalidate\n                            })\n                        }, routerServerContext);\n                    }\n                    throw err;\n                }\n            };\n            const cacheEntry = await routeModule.handleResponse({\n                req,\n                nextConfig,\n                cacheKey,\n                routeKind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n                isFallback: false,\n                prerenderManifest,\n                isRoutePPREnabled: false,\n                isOnDemandRevalidate,\n                revalidateOnlyGenerated,\n                responseGenerator,\n                waitUntil: ctx.waitUntil\n            });\n            // we don't create a cacheEntry for ISR\n            if (!isIsr) {\n                return null;\n            }\n            if ((cacheEntry == null ? void 0 : (_cacheEntry_value = cacheEntry.value) == null ? void 0 : _cacheEntry_value.kind) !== next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__.CachedRouteKind.APP_ROUTE) {\n                var _cacheEntry_value1;\n                throw Object.defineProperty(new Error(`Invariant: app-route received invalid cache entry ${cacheEntry == null ? void 0 : (_cacheEntry_value1 = cacheEntry.value) == null ? void 0 : _cacheEntry_value1.kind}`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E701\",\n                    enumerable: false,\n                    configurable: true\n                });\n            }\n            if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode')) {\n                res.setHeader('x-nextjs-cache', isOnDemandRevalidate ? 'REVALIDATED' : cacheEntry.isMiss ? 'MISS' : cacheEntry.isStale ? 'STALE' : 'HIT');\n            }\n            // Draft mode should never be cached\n            if (isDraftMode) {\n                res.setHeader('Cache-Control', 'private, no-cache, no-store, max-age=0, must-revalidate');\n            }\n            const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__.fromNodeOutgoingHttpHeaders)(cacheEntry.value.headers);\n            if (!((0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode') && isIsr)) {\n                headers.delete(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.NEXT_CACHE_TAGS_HEADER);\n            }\n            // If cache control is already set on the response we don't\n            // override it to allow users to customize it via next.config\n            if (cacheEntry.cacheControl && !res.getHeader('Cache-Control') && !headers.get('Cache-Control')) {\n                headers.set('Cache-Control', (0,next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_12__.getCacheControlHeader)(cacheEntry.cacheControl));\n            }\n            await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, new Response(cacheEntry.value.body, {\n                headers,\n                status: cacheEntry.value.status || 200\n            }));\n            return null;\n        };\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await handleResponse(activeSpan);\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__.BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${req.url}`,\n                    kind: next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, handleResponse));\n        }\n    } catch (err) {\n        if (!(err instanceof next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__.NoFallbackError)) {\n            await routeModule.onRequestError(req, err, {\n                routerKind: 'App Router',\n                routePath: normalizedSrcPage,\n                routeType: 'route',\n                revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__.getRevalidateReason)({\n                    isRevalidate,\n                    isOnDemandRevalidate\n                })\n            });\n        }\n        // rethrow so that we can handle serving error page\n        // If this is during static generation, throw the error again.\n        if (isIsr) throw err;\n        // Otherwise, send a 500 response.\n        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, new Response(null, {\n            status: 500\n        }));\n        return null;\n    }\n}\n\n//# sourceMappingURL=app-route.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZ0cnBjJTJGJTVCdHJwYyU1RCUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGdHJwYyUyRiU1QnRycGMlNUQlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZ0cnBjJTJGJTVCdHJwYyU1RCUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDcHJvamVjdHMlNUNhcnJha2lzJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDcHJvamVjdHMlNUNhcnJha2lzJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEJmlzR2xvYmFsTm90Rm91bmRFbmFibGVkPSEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBK0Y7QUFDdkM7QUFDcUI7QUFDZDtBQUNTO0FBQ087QUFDSztBQUNtQztBQUNqRDtBQUNPO0FBQ2Y7QUFDc0M7QUFDekI7QUFDTTtBQUNDO0FBQ2hCO0FBQ2tCO0FBQ3BGO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix5R0FBbUI7QUFDM0M7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLGFBQWEsT0FBb0MsSUFBSSxDQUFFO0FBQ3ZELHdCQUF3QixNQUF1QztBQUMvRDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHNEQUFzRDtBQUM5RDtB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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWLDZFQUE2RSxnRkFBYztBQUMzRixpQ0FBaUMsUUFBUSxFQUFFLFFBQVE7QUFDbkQsMEJBQTBCLHVFQUFRO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsTUFBTTtBQUNOLDZCQUE2Qiw2RkFBZTtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQywyRkFBbUI7QUFDckQ7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsNkVBQVk7QUFDMUI7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0IHsgZ2V0UmVxdWVzdE1ldGEgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yZXF1ZXN0LW1ldGFcIjtcbmltcG9ydCB7IGdldFRyYWNlciwgU3BhbktpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvdHJhY2UvdHJhY2VyXCI7XG5pbXBvcnQgeyBub3JtYWxpemVBcHBQYXRoIH0gZnJvbSBcIm5leHQvZGlzdC9zaGFyZWQvbGliL3JvdXRlci91dGlscy9hcHAtcGF0aHNcIjtcbmltcG9ydCB7IE5vZGVOZXh0UmVxdWVzdCwgTm9kZU5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Jhc2UtaHR0cC9ub2RlXCI7XG5pbXBvcnQgeyBOZXh0UmVxdWVzdEFkYXB0ZXIsIHNpZ25hbEZyb21Ob2RlUmVzcG9uc2UgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci93ZWIvc3BlYy1leHRlbnNpb24vYWRhcHRlcnMvbmV4dC1yZXF1ZXN0XCI7XG5pbXBvcnQgeyBCYXNlU2VydmVyU3BhbiB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi90cmFjZS9jb25zdGFudHNcIjtcbmltcG9ydCB7IGdldFJldmFsaWRhdGVSZWFzb24gfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9pbnN0cnVtZW50YXRpb24vdXRpbHNcIjtcbmltcG9ydCB7IHNlbmRSZXNwb25zZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3NlbmQtcmVzcG9uc2VcIjtcbmltcG9ydCB7IGZyb21Ob2RlT3V0Z29pbmdIdHRwSGVhZGVycywgdG9Ob2RlT3V0Z29pbmdIdHRwSGVhZGVycyB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3dlYi91dGlsc1wiO1xuaW1wb3J0IHsgZ2V0Q2FjaGVDb250cm9sSGVhZGVyIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL2NhY2hlLWNvbnRyb2xcIjtcbmltcG9ydCB7IElORklOSVRFX0NBQ0hFLCBORVhUX0NBQ0hFX1RBR1NfSEVBREVSIH0gZnJvbSBcIm5leHQvZGlzdC9saWIvY29uc3RhbnRzXCI7XG5pbXBvcnQgeyBOb0ZhbGxiYWNrRXJyb3IgfSBmcm9tIFwibmV4dC9kaXN0L3NoYXJlZC9saWIvbm8tZmFsbGJhY2stZXJyb3IuZXh0ZXJuYWxcIjtcbmltcG9ydCB7IENhY2hlZFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3Jlc3BvbnNlLWNhY2hlXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiQzpcXFxccHJvamVjdHNcXFxcYXJyYWtpc1xcXFxhcHBcXFxcYXBpXFxcXHRycGNcXFxcW3RycGNdXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS90cnBjL1t0cnBjXS9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3RycGMvW3RycGNdXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS90cnBjL1t0cnBjXS9yb3V0ZVwiXG4gICAgfSxcbiAgICBkaXN0RGlyOiBwcm9jZXNzLmVudi5fX05FWFRfUkVMQVRJVkVfRElTVF9ESVIgfHwgJycsXG4gICAgcmVsYXRpdmVQcm9qZWN0RGlyOiBwcm9jZXNzLmVudi5fX05FWFRfUkVMQVRJVkVfUFJPSkVDVF9ESVIgfHwgJycsXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxwcm9qZWN0c1xcXFxhcnJha2lzXFxcXGFwcFxcXFxhcGlcXFxcdHJwY1xcXFxbdHJwY11cXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICB3b3JrQXN5bmNTdG9yYWdlLFxuICAgICAgICB3b3JrVW5pdEFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgcGF0Y2hGZXRjaCwgIH07XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcywgY3R4KSB7XG4gICAgdmFyIF9uZXh0Q29uZmlnX2V4cGVyaW1lbnRhbDtcbiAgICBsZXQgc3JjUGFnZSA9IFwiL2FwaS90cnBjL1t0cnBjXS9yb3V0ZVwiO1xuICAgIC8vIHR1cmJvcGFjayBkb2Vzbid0IG5vcm1hbGl6ZSBgL2luZGV4YCBpbiB0aGUgcGFnZSBuYW1lXG4gICAgLy8gc28gd2UgbmVlZCB0byB0byBwcm9jZXNzIGR5bmFtaWMgcm91dGVzIHByb3Blcmx5XG4gICAgLy8gVE9ETzogZml4IHR1cmJvcGFjayBwcm92aWRpbmcgZGlmZmVyaW5nIHZhbHVlIGZyb20gd2VicGFja1xuICAgIGlmIChwcm9jZXNzLmVudi5UVVJCT1BBQ0spIHtcbiAgICAgICAgc3JjUGFnZSA9IHNyY1BhZ2UucmVwbGFjZSgvXFwvaW5kZXgkLywgJycpIHx8ICcvJztcbiAgICB9IGVsc2UgaWYgKHNyY1BhZ2UgPT09ICcvaW5kZXgnKSB7XG4gICAgICAgIC8vIHdlIGFsd2F5cyBub3JtYWxpemUgL2luZGV4IHNwZWNpZmljYWxseVxuICAgICAgICBzcmNQYWdlID0gJy8nO1xuICAgIH1cbiAgICBjb25zdCBtdWx0aVpvbmVEcmFmdE1vZGUgPSBwcm9jZXNzLmVudi5fX05FWFRfTVVMVElfWk9ORV9EUkFGVF9NT0RFO1xuICAgIGNvbnN0IHByZXBhcmVSZXN1bHQgPSBhd2FpdCByb3V0ZU1vZHVsZS5wcmVwYXJlKHJlcSwgcmVzLCB7XG4gICAgICAgIHNyY1BhZ2UsXG4gICAgICAgIG11bHRpWm9uZURyYWZ0TW9kZVxuICAgIH0pO1xuICAgIGlmICghcHJlcGFyZVJlc3VsdCkge1xuICAgICAgICByZXMuc3RhdHVzQ29kZSA9IDQwMDtcbiAgICAgICAgcmVzLmVuZCgnQmFkIFJlcXVlc3QnKTtcbiAgICAgICAgY3R4LndhaXRVbnRpbCA9PSBudWxsID8gdm9pZCAwIDogY3R4LndhaXRVbnRpbC5jYWxsKGN0eCwgUHJvbWlzZS5yZXNvbHZlKCkpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgeyBidWlsZElkLCBwYXJhbXMsIG5leHRDb25maWcsIGlzRHJhZnRNb2RlLCBwcmVyZW5kZXJNYW5pZmVzdCwgcm91dGVyU2VydmVyQ29udGV4dCwgaXNPbkRlbWFuZFJldmFsaWRhdGUsIHJldmFsaWRhdGVPbmx5R2VuZXJhdGVkLCByZXNvbHZlZFBhdGhuYW1lIH0gPSBwcmVwYXJlUmVzdWx0O1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRTcmNQYWdlID0gbm9ybWFsaXplQXBwUGF0aChzcmNQYWdlKTtcbiAgICBsZXQgaXNJc3IgPSBCb29sZWFuKHByZXJlbmRlck1hbmlmZXN0LmR5bmFtaWNSb3V0ZXNbbm9ybWFsaXplZFNyY1BhZ2VdIHx8IHByZXJlbmRlck1hbmlmZXN0LnJvdXRlc1tyZXNvbHZlZFBhdGhuYW1lXSk7XG4gICAgaWYgKGlzSXNyICYmICFpc0RyYWZ0TW9kZSkge1xuICAgICAgICBjb25zdCBpc1ByZXJlbmRlcmVkID0gQm9vbGVhbihwcmVyZW5kZXJNYW5pZmVzdC5yb3V0ZXNbcmVzb2x2ZWRQYXRobmFtZV0pO1xuICAgICAgICBjb25zdCBwcmVyZW5kZXJJbmZvID0gcHJlcmVuZGVyTWFuaWZlc3QuZHluYW1pY1JvdXRlc1tub3JtYWxpemVkU3JjUGFnZV07XG4gICAgICAgIGlmIChwcmVyZW5kZXJJbmZvKSB7XG4gICAgICAgICAgICBpZiAocHJlcmVuZGVySW5mby5mYWxsYmFjayA9PT0gZmFsc2UgJiYgIWlzUHJlcmVuZGVyZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm9GYWxsYmFja0Vycm9yKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgbGV0IGNhY2hlS2V5ID0gbnVsbDtcbiAgICBpZiAoaXNJc3IgJiYgIXJvdXRlTW9kdWxlLmlzRGV2ICYmICFpc0RyYWZ0TW9kZSkge1xuICAgICAgICBjYWNoZUtleSA9IHJlc29sdmVkUGF0aG5hbWU7XG4gICAgICAgIC8vIGVuc3VyZSAvaW5kZXggYW5kIC8gaXMgbm9ybWFsaXplZCB0byBvbmUga2V5XG4gICAgICAgIGNhY2hlS2V5ID0gY2FjaGVLZXkgPT09ICcvaW5kZXgnID8gJy8nIDogY2FjaGVLZXk7XG4gICAgfVxuICAgIGNvbnN0IHN1cHBvcnRzRHluYW1pY1Jlc3BvbnNlID0gLy8gSWYgd2UncmUgaW4gZGV2ZWxvcG1lbnQsIHdlIGFsd2F5cyBzdXBwb3J0IGR5bmFtaWMgSFRNTFxuICAgIHJvdXRlTW9kdWxlLmlzRGV2ID09PSB0cnVlIHx8IC8vIElmIHRoaXMgaXMgbm90IFNTRyBvciBkb2VzIG5vdCBoYXZlIHN0YXRpYyBwYXRocywgdGhlbiBpdCBzdXBwb3J0c1xuICAgIC8vIGR5bmFtaWMgSFRNTC5cbiAgICAhaXNJc3I7XG4gICAgLy8gVGhpcyBpcyBhIHJldmFsaWRhdGlvbiByZXF1ZXN0IGlmIHRoZSByZXF1ZXN0IGlzIGZvciBhIHN0YXRpY1xuICAgIC8vIHBhZ2UgYW5kIGl0IGlzIG5vdCBiZWluZyByZXN1bWVkIGZyb20gYSBwb3N0cG9uZWQgcmVuZGVyIGFuZFxuICAgIC8vIGl0IGlzIG5vdCBhIGR5bmFtaWMgUlNDIHJlcXVlc3QgdGhlbiBpdCBpcyBhIHJldmFsaWRhdGlvblxuICAgIC8vIHJlcXVlc3QuXG4gICAgY29uc3QgaXNSZXZhbGlkYXRlID0gaXNJc3IgJiYgIXN1cHBvcnRzRHluYW1pY1Jlc3BvbnNlO1xuICAgIGNvbnN0IG1ldGhvZCA9IHJlcS5tZXRob2QgfHwgJ0dFVCc7XG4gICAgY29uc3QgdHJhY2VyID0gZ2V0VHJhY2VyKCk7XG4gICAgY29uc3QgYWN0aXZlU3BhbiA9IHRyYWNlci5nZXRBY3RpdmVTY29wZVNwYW4oKTtcbiAgICBjb25zdCBjb250ZXh0ID0ge1xuICAgICAgICBwYXJhbXMsXG4gICAgICAgIHByZXJlbmRlck1hbmlmZXN0LFxuICAgICAgICByZW5kZXJPcHRzOiB7XG4gICAgICAgICAgICBleHBlcmltZW50YWw6IHtcbiAgICAgICAgICAgICAgICBjYWNoZUNvbXBvbmVudHM6IEJvb2xlYW4obmV4dENvbmZpZy5leHBlcmltZW50YWwuY2FjaGVDb21wb25lbnRzKSxcbiAgICAgICAgICAgICAgICBhdXRoSW50ZXJydXB0czogQm9vbGVhbihuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbC5hdXRoSW50ZXJydXB0cylcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdXBwb3J0c0R5bmFtaWNSZXNwb25zZSxcbiAgICAgICAgICAgIGluY3JlbWVudGFsQ2FjaGU6IGdldFJlcXVlc3RNZXRhKHJlcSwgJ2luY3JlbWVudGFsQ2FjaGUnKSxcbiAgICAgICAgICAgIGNhY2hlTGlmZVByb2ZpbGVzOiAoX25leHRDb25maWdfZXhwZXJpbWVudGFsID0gbmV4dENvbmZpZy5leHBlcmltZW50YWwpID09IG51bGwgPyB2b2lkIDAgOiBfbmV4dENvbmZpZ19leHBlcmltZW50YWwuY2FjaGVMaWZlLFxuICAgICAgICAgICAgaXNSZXZhbGlkYXRlLFxuICAgICAgICAgICAgd2FpdFVudGlsOiBjdHgud2FpdFVudGlsLFxuICAgICAgICAgICAgb25DbG9zZTogKGNiKT0+e1xuICAgICAgICAgICAgICAgIHJlcy5vbignY2xvc2UnLCBjYik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25BZnRlclRhc2tFcnJvcjogdW5kZWZpbmVkLFxuICAgICAgICAgICAgb25JbnN0cnVtZW50YXRpb25SZXF1ZXN0RXJyb3I6IChlcnJvciwgX3JlcXVlc3QsIGVycm9yQ29udGV4dCk9PnJvdXRlTW9kdWxlLm9uUmVxdWVzdEVycm9yKHJlcSwgZXJyb3IsIGVycm9yQ29udGV4dCwgcm91dGVyU2VydmVyQ29udGV4dClcbiAgICAgICAgfSxcbiAgICAgICAgc2hhcmVkQ29udGV4dDoge1xuICAgICAgICAgICAgYnVpbGRJZFxuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBub2RlTmV4dFJlcSA9IG5ldyBOb2RlTmV4dFJlcXVlc3QocmVxKTtcbiAgICBjb25zdCBub2RlTmV4dFJlcyA9IG5ldyBOb2RlTmV4dFJlc3BvbnNlKHJlcyk7XG4gICAgY29uc3QgbmV4dFJlcSA9IE5leHRSZXF1ZXN0QWRhcHRlci5mcm9tTm9kZU5leHRSZXF1ZXN0KG5vZGVOZXh0UmVxLCBzaWduYWxGcm9tTm9kZVJlc3BvbnNlKHJlcykpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGludm9rZVJvdXRlTW9kdWxlID0gYXN5bmMgKHNwYW4pPT57XG4gICAgICAgICAgICByZXR1cm4gcm91dGVNb2R1bGUuaGFuZGxlKG5leHRSZXEsIGNvbnRleHQpLmZpbmFsbHkoKCk9PntcbiAgICAgICAgICAgICAgICBpZiAoIXNwYW4pIHJldHVybjtcbiAgICAgICAgICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZXMoe1xuICAgICAgICAgICAgICAgICAgICAnaHR0cC5zdGF0dXNfY29kZSc6IHJlcy5zdGF0dXNDb2RlLFxuICAgICAgICAgICAgICAgICAgICAnbmV4dC5yc2MnOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJvb3RTcGFuQXR0cmlidXRlcyA9IHRyYWNlci5nZXRSb290U3BhbkF0dHJpYnV0ZXMoKTtcbiAgICAgICAgICAgICAgICAvLyBXZSB3ZXJlIHVuYWJsZSB0byBnZXQgYXR0cmlidXRlcywgcHJvYmFibHkgT1RFTCBpcyBub3QgZW5hYmxlZFxuICAgICAgICAgICAgICAgIGlmICghcm9vdFNwYW5BdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQuc3Bhbl90eXBlJykgIT09IEJhc2VTZXJ2ZXJTcGFuLmhhbmRsZVJlcXVlc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBVbmV4cGVjdGVkIHJvb3Qgc3BhbiB0eXBlICcke3Jvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQuc3Bhbl90eXBlJyl9Jy4gUGxlYXNlIHJlcG9ydCB0aGlzIE5leHQuanMgaXNzdWUgaHR0cHM6Ly9naXRodWIuY29tL3ZlcmNlbC9uZXh0LmpzYCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3Qgcm91dGUgPSByb290U3BhbkF0dHJpYnV0ZXMuZ2V0KCduZXh0LnJvdXRlJyk7XG4gICAgICAgICAgICAgICAgaWYgKHJvdXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBgJHttZXRob2R9ICR7cm91dGV9YDtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGVzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICduZXh0LnJvdXRlJzogcm91dGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAnaHR0cC5yb3V0ZSc6IHJvdXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ25leHQuc3Bhbl9uYW1lJzogbmFtZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi51cGRhdGVOYW1lKG5hbWUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4udXBkYXRlTmFtZShgJHttZXRob2R9ICR7cmVxLnVybH1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgaGFuZGxlUmVzcG9uc2UgPSBhc3luYyAoY3VycmVudFNwYW4pPT57XG4gICAgICAgICAgICB2YXIgX2NhY2hlRW50cnlfdmFsdWU7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZUdlbmVyYXRvciA9IGFzeW5jICh7IHByZXZpb3VzQ2FjaGVFbnRyeSB9KT0+e1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZ2V0UmVxdWVzdE1ldGEocmVxLCAnbWluaW1hbE1vZGUnKSAmJiBpc09uRGVtYW5kUmV2YWxpZGF0ZSAmJiByZXZhbGlkYXRlT25seUdlbmVyYXRlZCAmJiAhcHJldmlvdXNDYWNoZUVudHJ5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzQ29kZSA9IDQwNDtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9uLWRlbWFuZCByZXZhbGlkYXRlIGFsd2F5cyBzZXRzIHRoaXMgaGVhZGVyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKCd4LW5leHRqcy1jYWNoZScsICdSRVZBTElEQVRFRCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLmVuZCgnVGhpcyBwYWdlIGNvdWxkIG5vdCBiZSBmb3VuZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBpbnZva2VSb3V0ZU1vZHVsZShjdXJyZW50U3Bhbik7XG4gICAgICAgICAgICAgICAgICAgIHJlcS5mZXRjaE1ldHJpY3MgPSBjb250ZXh0LnJlbmRlck9wdHMuZmV0Y2hNZXRyaWNzO1xuICAgICAgICAgICAgICAgICAgICBsZXQgcGVuZGluZ1dhaXRVbnRpbCA9IGNvbnRleHQucmVuZGVyT3B0cy5wZW5kaW5nV2FpdFVudGlsO1xuICAgICAgICAgICAgICAgICAgICAvLyBBdHRlbXB0IHVzaW5nIHByb3ZpZGVkIHdhaXRVbnRpbCBpZiBhdmFpbGFibGVcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgaXQncyBub3Qgd2UgZmFsbGJhY2sgdG8gc2VuZFJlc3BvbnNlJ3MgaGFuZGxpbmdcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBlbmRpbmdXYWl0VW50aWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdHgud2FpdFVudGlsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LndhaXRVbnRpbChwZW5kaW5nV2FpdFVudGlsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZW5kaW5nV2FpdFVudGlsID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlVGFncyA9IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRUYWdzO1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgcmVxdWVzdCBpcyBmb3IgYSBzdGF0aWMgcmVzcG9uc2UsIHdlIGNhbiBjYWNoZSBpdCBzbyBsb25nXG4gICAgICAgICAgICAgICAgICAgIC8vIGFzIGl0J3Mgbm90IGVkZ2UuXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0lzcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IHJlc3BvbnNlLmJsb2IoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvcHkgdGhlIGhlYWRlcnMgZnJvbSB0aGUgcmVzcG9uc2UuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXJzID0gdG9Ob2RlT3V0Z29pbmdIdHRwSGVhZGVycyhyZXNwb25zZS5oZWFkZXJzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYWNoZVRhZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzW05FWFRfQ0FDSEVfVEFHU19IRUFERVJdID0gY2FjaGVUYWdzO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFoZWFkZXJzWydjb250ZW50LXR5cGUnXSAmJiBibG9iLnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzWydjb250ZW50LXR5cGUnXSA9IGJsb2IudHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJldmFsaWRhdGUgPSB0eXBlb2YgY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZFJldmFsaWRhdGUgPT09ICd1bmRlZmluZWQnIHx8IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRSZXZhbGlkYXRlID49IElORklOSVRFX0NBQ0hFID8gZmFsc2UgOiBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkUmV2YWxpZGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4cGlyZSA9IHR5cGVvZiBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkRXhwaXJlID09PSAndW5kZWZpbmVkJyB8fCBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkRXhwaXJlID49IElORklOSVRFX0NBQ0hFID8gdW5kZWZpbmVkIDogY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZEV4cGlyZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgY2FjaGUgZW50cnkgZm9yIHRoZSByZXNwb25zZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlRW50cnkgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2luZDogQ2FjaGVkUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiByZXNwb25zZS5zdGF0dXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IEJ1ZmZlci5mcm9tKGF3YWl0IGJsb2IuYXJyYXlCdWZmZXIoKSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlQ29udHJvbDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXZhbGlkYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBpcmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhY2hlRW50cnk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzZW5kIHJlc3BvbnNlIHdpdGhvdXQgY2FjaGluZyBpZiBub3QgSVNSXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBzZW5kUmVzcG9uc2Uobm9kZU5leHRSZXEsIG5vZGVOZXh0UmVzLCByZXNwb25zZSwgY29udGV4dC5yZW5kZXJPcHRzLnBlbmRpbmdXYWl0VW50aWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhpcyBpcyBhIGJhY2tncm91bmQgcmV2YWxpZGF0ZSB3ZSBuZWVkIHRvIHJlcG9ydFxuICAgICAgICAgICAgICAgICAgICAvLyB0aGUgcmVxdWVzdCBlcnJvciBoZXJlIGFzIGl0IHdvbid0IGJlIGJ1YmJsZWRcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByZXZpb3VzQ2FjaGVFbnRyeSA9PSBudWxsID8gdm9pZCAwIDogcHJldmlvdXNDYWNoZUVudHJ5LmlzU3RhbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHJvdXRlTW9kdWxlLm9uUmVxdWVzdEVycm9yKHJlcSwgZXJyLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm91dGVyS2luZDogJ0FwcCBSb3V0ZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdXRlUGF0aDogc3JjUGFnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3V0ZVR5cGU6ICdyb3V0ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV2YWxpZGF0ZVJlYXNvbjogZ2V0UmV2YWxpZGF0ZVJlYXNvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzUmV2YWxpZGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNPbkRlbWFuZFJldmFsaWRhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgcm91dGVyU2VydmVyQ29udGV4dCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBjYWNoZUVudHJ5ID0gYXdhaXQgcm91dGVNb2R1bGUuaGFuZGxlUmVzcG9uc2Uoe1xuICAgICAgICAgICAgICAgIHJlcSxcbiAgICAgICAgICAgICAgICBuZXh0Q29uZmlnLFxuICAgICAgICAgICAgICAgIGNhY2hlS2V5LFxuICAgICAgICAgICAgICAgIHJvdXRlS2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgICAgICAgICBpc0ZhbGxiYWNrOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBwcmVyZW5kZXJNYW5pZmVzdCxcbiAgICAgICAgICAgICAgICBpc1JvdXRlUFBSRW5hYmxlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgaXNPbkRlbWFuZFJldmFsaWRhdGUsXG4gICAgICAgICAgICAgICAgcmV2YWxpZGF0ZU9ubHlHZW5lcmF0ZWQsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VHZW5lcmF0b3IsXG4gICAgICAgICAgICAgICAgd2FpdFVudGlsOiBjdHgud2FpdFVudGlsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIHdlIGRvbid0IGNyZWF0ZSBhIGNhY2hlRW50cnkgZm9yIElTUlxuICAgICAgICAgICAgaWYgKCFpc0lzcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKChjYWNoZUVudHJ5ID09IG51bGwgPyB2b2lkIDAgOiAoX2NhY2hlRW50cnlfdmFsdWUgPSBjYWNoZUVudHJ5LnZhbHVlKSA9PSBudWxsID8gdm9pZCAwIDogX2NhY2hlRW50cnlfdmFsdWUua2luZCkgIT09IENhY2hlZFJvdXRlS2luZC5BUFBfUk9VVEUpIHtcbiAgICAgICAgICAgICAgICB2YXIgX2NhY2hlRW50cnlfdmFsdWUxO1xuICAgICAgICAgICAgICAgIHRocm93IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXcgRXJyb3IoYEludmFyaWFudDogYXBwLXJvdXRlIHJlY2VpdmVkIGludmFsaWQgY2FjaGUgZW50cnkgJHtjYWNoZUVudHJ5ID09IG51bGwgPyB2b2lkIDAgOiAoX2NhY2hlRW50cnlfdmFsdWUxID0gY2FjaGVFbnRyeS52YWx1ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jYWNoZUVudHJ5X3ZhbHVlMS5raW5kfWApLCBcIl9fTkVYVF9FUlJPUl9DT0RFXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFwiRTcwMVwiLFxuICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWdldFJlcXVlc3RNZXRhKHJlcSwgJ21pbmltYWxNb2RlJykpIHtcbiAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKCd4LW5leHRqcy1jYWNoZScsIGlzT25EZW1hbmRSZXZhbGlkYXRlID8gJ1JFVkFMSURBVEVEJyA6IGNhY2hlRW50cnkuaXNNaXNzID8gJ01JU1MnIDogY2FjaGVFbnRyeS5pc1N0YWxlID8gJ1NUQUxFJyA6ICdISVQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIERyYWZ0IG1vZGUgc2hvdWxkIG5ldmVyIGJlIGNhY2hlZFxuICAgICAgICAgICAgaWYgKGlzRHJhZnRNb2RlKSB7XG4gICAgICAgICAgICAgICAgcmVzLnNldEhlYWRlcignQ2FjaGUtQ29udHJvbCcsICdwcml2YXRlLCBuby1jYWNoZSwgbm8tc3RvcmUsIG1heC1hZ2U9MCwgbXVzdC1yZXZhbGlkYXRlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJzID0gZnJvbU5vZGVPdXRnb2luZ0h0dHBIZWFkZXJzKGNhY2hlRW50cnkudmFsdWUuaGVhZGVycyk7XG4gICAgICAgICAgICBpZiAoIShnZXRSZXF1ZXN0TWV0YShyZXEsICdtaW5pbWFsTW9kZScpICYmIGlzSXNyKSkge1xuICAgICAgICAgICAgICAgIGhlYWRlcnMuZGVsZXRlKE5FWFRfQ0FDSEVfVEFHU19IRUFERVIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSWYgY2FjaGUgY29udHJvbCBpcyBhbHJlYWR5IHNldCBvbiB0aGUgcmVzcG9uc2Ugd2UgZG9uJ3RcbiAgICAgICAgICAgIC8vIG92ZXJyaWRlIGl0IHRvIGFsbG93IHVzZXJzIHRvIGN1c3RvbWl6ZSBpdCB2aWEgbmV4dC5jb25maWdcbiAgICAgICAgICAgIGlmIChjYWNoZUVudHJ5LmNhY2hlQ29udHJvbCAmJiAhcmVzLmdldEhlYWRlcignQ2FjaGUtQ29udHJvbCcpICYmICFoZWFkZXJzLmdldCgnQ2FjaGUtQ29udHJvbCcpKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVycy5zZXQoJ0NhY2hlLUNvbnRyb2wnLCBnZXRDYWNoZUNvbnRyb2xIZWFkZXIoY2FjaGVFbnRyeS5jYWNoZUNvbnRyb2wpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IHNlbmRSZXNwb25zZShub2RlTmV4dFJlcSwgbm9kZU5leHRSZXMsIG5ldyBSZXNwb25zZShjYWNoZUVudHJ5LnZhbHVlLmJvZHksIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIHN0YXR1czogY2FjaGVFbnRyeS52YWx1ZS5zdGF0dXMgfHwgMjAwXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gVE9ETzogYWN0aXZlU3BhbiBjb2RlIHBhdGggaXMgZm9yIHdoZW4gd3JhcHBlZCBieVxuICAgICAgICAvLyBuZXh0LXNlcnZlciBjYW4gYmUgcmVtb3ZlZCB3aGVuIHRoaXMgaXMgbm8gbG9uZ2VyIHVzZWRcbiAgICAgICAgaWYgKGFjdGl2ZVNwYW4pIHtcbiAgICAgICAgICAgIGF3YWl0IGhhbmRsZVJlc3BvbnNlKGFjdGl2ZVNwYW4pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgdHJhY2VyLndpdGhQcm9wYWdhdGVkQ29udGV4dChyZXEuaGVhZGVycywgKCk9PnRyYWNlci50cmFjZShCYXNlU2VydmVyU3Bhbi5oYW5kbGVSZXF1ZXN0LCB7XG4gICAgICAgICAgICAgICAgICAgIHNwYW5OYW1lOiBgJHttZXRob2R9ICR7cmVxLnVybH1gLFxuICAgICAgICAgICAgICAgICAgICBraW5kOiBTcGFuS2luZC5TRVJWRVIsXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLm1ldGhvZCc6IG1ldGhvZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLnRhcmdldCc6IHJlcS51cmxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIGhhbmRsZVJlc3BvbnNlKSk7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgaWYgKCEoZXJyIGluc3RhbmNlb2YgTm9GYWxsYmFja0Vycm9yKSkge1xuICAgICAgICAgICAgYXdhaXQgcm91dGVNb2R1bGUub25SZXF1ZXN0RXJyb3IocmVxLCBlcnIsIHtcbiAgICAgICAgICAgICAgICByb3V0ZXJLaW5kOiAnQXBwIFJvdXRlcicsXG4gICAgICAgICAgICAgICAgcm91dGVQYXRoOiBub3JtYWxpemVkU3JjUGFnZSxcbiAgICAgICAgICAgICAgICByb3V0ZVR5cGU6ICdyb3V0ZScsXG4gICAgICAgICAgICAgICAgcmV2YWxpZGF0ZVJlYXNvbjogZ2V0UmV2YWxpZGF0ZVJlYXNvbih7XG4gICAgICAgICAgICAgICAgICAgIGlzUmV2YWxpZGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgaXNPbkRlbWFuZFJldmFsaWRhdGVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmV0aHJvdyBzbyB0aGF0IHdlIGNhbiBoYW5kbGUgc2VydmluZyBlcnJvciBwYWdlXG4gICAgICAgIC8vIElmIHRoaXMgaXMgZHVyaW5nIHN0YXRpYyBnZW5lcmF0aW9uLCB0aHJvdyB0aGUgZXJyb3IgYWdhaW4uXG4gICAgICAgIGlmIChpc0lzcikgdGhyb3cgZXJyO1xuICAgICAgICAvLyBPdGhlcndpc2UsIHNlbmQgYSA1MDAgcmVzcG9uc2UuXG4gICAgICAgIGF3YWl0IHNlbmRSZXNwb25zZShub2RlTmV4dFJlcSwgbm9kZU5leHRSZXMsIG5ldyBSZXNwb25zZShudWxsLCB7XG4gICAgICAgICAgICBzdGF0dXM6IDUwMFxuICAgICAgICB9KSk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Ftrpc%2F%5Btrpc%5D%2Froute&page=%2Fapi%2Ftrpc%2F%5Btrpc%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftrpc%2F%5Btrpc%5D%2Froute.ts&appDir=C%3A%5Cprojects%5Carrakis%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Cprojects%5Carrakis&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "./work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

"use strict";
module.exports = require("child_process");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "next/dist/shared/lib/no-fallback-error.external":
/*!******************************************************************!*\
  !*** external "next/dist/shared/lib/no-fallback-error.external" ***!
  \******************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/no-fallback-error.external");

/***/ }),

/***/ "next/dist/shared/lib/router/utils/app-paths":
/*!**************************************************************!*\
  !*** external "next/dist/shared/lib/router/utils/app-paths" ***!
  \**************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/app-paths");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@trpc","vendor-chunks/superjson","vendor-chunks/is-what","vendor-chunks/copy-anything","vendor-chunks/drizzle-orm","vendor-chunks/@anthropic-ai","vendor-chunks/zod","vendor-chunks/@neondatabase"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Ftrpc%2F%5Btrpc%5D%2Froute&page=%2Fapi%2Ftrpc%2F%5Btrpc%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftrpc%2F%5Btrpc%5D%2Froute.ts&appDir=C%3A%5Cprojects%5Carrakis%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Cprojects%5Carrakis&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!")));
module.exports = __webpack_exports__;

})();